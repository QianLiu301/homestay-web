{
  "version": 3,
  "sources": ["../../@cloudbase/adapter-interface/dist/esm/types.js", "../../@cloudbase/adapter-interface/dist/esm/utils.js", "../../@cloudbase/adapter-interface/dist/esm/index.js", "../../@cloudbase/utilities/src/constants/common.ts", "../../@cloudbase/utilities/src/constants/errors.ts", "../../@cloudbase/utilities/src/constants/index.ts", "../../@cloudbase/utilities/src/libs/util.ts", "../../@cloudbase/utilities/src/libs/events.ts", "../../@cloudbase/utilities/src/helpers/decorators.ts", "../../@cloudbase/utilities/src/helpers/index.ts", "../../@cloudbase/utilities/src/libs/cache.ts", "../../@cloudbase/utilities/src/adapters/platforms/web.ts", "../../@cloudbase/utilities/src/adapters/index.ts", "../../lodash/_freeGlobal.js", "../../lodash/_root.js", "../../lodash/_Symbol.js", "../../lodash/_getRawTag.js", "../../lodash/_objectToString.js", "../../lodash/_baseGetTag.js", "../../lodash/isObject.js", "../../lodash/isFunction.js", "../../lodash/_coreJsData.js", "../../lodash/_isMasked.js", "../../lodash/_toSource.js", "../../lodash/_baseIsNative.js", "../../lodash/_getValue.js", "../../lodash/_getNative.js", "../../lodash/_defineProperty.js", "../../lodash/_baseAssignValue.js", "../../lodash/eq.js", "../../lodash/_assignValue.js", "../../lodash/isArray.js", "../../lodash/isObjectLike.js", "../../lodash/isSymbol.js", "../../lodash/_isKey.js", "../../lodash/_nativeCreate.js", "../../lodash/_hashClear.js", "../../lodash/_hashDelete.js", "../../lodash/_hashGet.js", "../../lodash/_hashHas.js", "../../lodash/_hashSet.js", "../../lodash/_Hash.js", "../../lodash/_listCacheClear.js", "../../lodash/_assocIndexOf.js", "../../lodash/_listCacheDelete.js", "../../lodash/_listCacheGet.js", "../../lodash/_listCacheHas.js", "../../lodash/_listCacheSet.js", "../../lodash/_ListCache.js", "../../lodash/_Map.js", "../../lodash/_mapCacheClear.js", "../../lodash/_isKeyable.js", "../../lodash/_getMapData.js", "../../lodash/_mapCacheDelete.js", "../../lodash/_mapCacheGet.js", "../../lodash/_mapCacheHas.js", "../../lodash/_mapCacheSet.js", "../../lodash/_MapCache.js", "../../lodash/memoize.js", "../../lodash/_memoizeCapped.js", "../../lodash/_stringToPath.js", "../../lodash/_arrayMap.js", "../../lodash/_baseToString.js", "../../lodash/toString.js", "../../lodash/_castPath.js", "../../lodash/_isIndex.js", "../../lodash/_toKey.js", "../../lodash/_baseSet.js", "../../lodash/set.js", "../../lodash/last.js", "../../lodash/_baseGet.js", "../../lodash/_baseSlice.js", "../../lodash/_parent.js", "../../lodash/_baseUnset.js", "../../lodash/unset.js", "../../lodash/_stackClear.js", "../../lodash/_stackDelete.js", "../../lodash/_stackGet.js", "../../lodash/_stackHas.js", "../../lodash/_stackSet.js", "../../lodash/_Stack.js", "../../lodash/_arrayEach.js", "../../lodash/_copyObject.js", "../../lodash/_baseTimes.js", "../../lodash/_baseIsArguments.js", "../../lodash/isArguments.js", "../../lodash/stubFalse.js", "../../lodash/isBuffer.js", "../../lodash/isLength.js", "../../lodash/_baseIsTypedArray.js", "../../lodash/_baseUnary.js", "../../lodash/_nodeUtil.js", "../../lodash/isTypedArray.js", "../../lodash/_arrayLikeKeys.js", "../../lodash/_isPrototype.js", "../../lodash/_overArg.js", "../../lodash/_nativeKeys.js", "../../lodash/_baseKeys.js", "../../lodash/isArrayLike.js", "../../lodash/keys.js", "../../lodash/_baseAssign.js", "../../lodash/_nativeKeysIn.js", "../../lodash/_baseKeysIn.js", "../../lodash/keysIn.js", "../../lodash/_baseAssignIn.js", "../../lodash/_cloneBuffer.js", "../../lodash/_copyArray.js", "../../lodash/_arrayFilter.js", "../../lodash/stubArray.js", "../../lodash/_getSymbols.js", "../../lodash/_copySymbols.js", "../../lodash/_arrayPush.js", "../../lodash/_getPrototype.js", "../../lodash/_getSymbolsIn.js", "../../lodash/_copySymbolsIn.js", "../../lodash/_baseGetAllKeys.js", "../../lodash/_getAllKeys.js", "../../lodash/_getAllKeysIn.js", "../../lodash/_DataView.js", "../../lodash/_Promise.js", "../../lodash/_Set.js", "../../lodash/_WeakMap.js", "../../lodash/_getTag.js", "../../lodash/_initCloneArray.js", "../../lodash/_Uint8Array.js", "../../lodash/_cloneArrayBuffer.js", "../../lodash/_cloneDataView.js", "../../lodash/_cloneRegExp.js", "../../lodash/_cloneSymbol.js", "../../lodash/_cloneTypedArray.js", "../../lodash/_initCloneByTag.js", "../../lodash/_baseCreate.js", "../../lodash/_initCloneObject.js", "../../lodash/_baseIsMap.js", "../../lodash/isMap.js", "../../lodash/_baseIsSet.js", "../../lodash/isSet.js", "../../lodash/_baseClone.js", "../../lodash/cloneDeep.js", "../../text-encoding-shim/index.js", "../../@cloudbase/utilities/src/constants/index.ts", "../../@cloudbase/utilities/src/constants/common.ts", "../../@cloudbase/utilities/src/constants/errors.ts", "../../@cloudbase/utilities/src/adapters/platforms/web.ts", "../../@cloudbase/utilities/src/libs/util.ts", "../../@cloudbase/utilities/src/adapters/index.ts", "../../@cloudbase/utilities/src/libs/cache.ts", "../../@cloudbase/utilities/src/libs/events.ts", "../../@cloudbase/utilities/src/libs/langEvent.ts", "../../@cloudbase/utilities/src/helpers/index.ts", "../../@cloudbase/utilities/src/helpers/decorators.ts", "../../@cloudbase/utilities/src/libs/abortController.ts", "../../jwt-decode/lib/atob.js", "../../jwt-decode/lib/base64_url_decode.js", "../../jwt-decode/lib/index.js", "../../@cloudbase/app/src/libs/component.ts", "../../@cloudbase/adapter-wx_mp/dist/esm/index.js", "../../web-streams-polyfill/dist/ponyfill.mjs", "../../@cloudbase/app/src/libs/adapter.ts", "../../@cloudbase/app/src/libs/cache.ts", "../../@cloudbase/app/src/constants/common.ts", "../../@cloudbase/app/src/libs/request.ts", "../../@cloudbase/app/src/libs/lang.ts", "../../@cloudbase/app/src/index.ts", "../../@cloudbase/oauth/dist/esm/auth/consts.js", "../../@cloudbase/oauth/dist/esm/oauth2client/consts.js", "../../@cloudbase/oauth/dist/esm/utils/uuid.js", "../../@cloudbase/oauth/dist/esm/oauth2client/oauth2client.js", "../../@cloudbase/oauth/dist/esm/utils/function/single-promise.js", "../../@cloudbase/oauth/dist/esm/utils/base64.js", "../../@cloudbase/oauth/dist/esm/utils/mp.js", "../../@cloudbase/oauth/dist/esm/captcha/captcha-dom.js", "../../@cloudbase/oauth/dist/esm/captcha/captcha.js", "../../@cloudbase/oauth/dist/esm/auth/apis.js", "../../@cloudbase/oauth/dist/esm/utils/urlSearchParams.js", "../../@cloudbase/oauth/dist/esm/auth/auth-error.js", "../../@cloudbase/oauth/dist/esm/index.js", "../../@cloudbase/auth/src/utilities.ts", "../../@cloudbase/auth/src/adapter.ts", "../../@cloudbase/auth/src/utils.ts", "../../@cloudbase/auth/src/sbaseApi.ts", "../../@cloudbase/auth/src/index.ts", "../../@cloudbase/cloudrun/src/index.ts", "../../@cloudbase/functions/src/index.ts", "../../@cloudbase/storage/src/storage.ts", "../../@cloudbase/storage/src/supabase/errors.ts", "../../@cloudbase/storage/src/supabase/index.ts", "../../@cloudbase/storage/src/index.ts", "../../@cloudbase/realtime/src/virtual-websocket-client.ts", "../../@cloudbase/realtime/src/message.ts", "../../@cloudbase/realtime/src/listener.ts", "../../@cloudbase/realtime/src/snapshot.ts", "../../@cloudbase/realtime/src/error.ts", "../../@cloudbase/realtime/src/utils.ts", "../../@cloudbase/realtime/src/ws-event.ts", "../../@cloudbase/realtime/src/common.ts", "../../@cloudbase/realtime/src/websocket-client.ts", "../../@cloudbase/realtime/src/index.ts", "../../@cloudbase/analytics/src/index.ts", "../../@cloudbase/wx-cloud-client-sdk/lib/wxCloudClientSDK.esm.js", "../../@cloudbase/model/src/index.ts", "../../@mattiasbuelens/web-streams-adapter/node_modules/tslib/tslib.es6.js", "../../@mattiasbuelens/web-streams-adapter/src/assert.ts", "../../@mattiasbuelens/web-streams-adapter/src/utils.ts", "../../@mattiasbuelens/web-streams-adapter/src/checks.ts", "../../@mattiasbuelens/web-streams-adapter/src/readable-wrapper.ts", "../../@mattiasbuelens/web-streams-adapter/src/writable-wrapper.ts", "../../@mattiasbuelens/web-streams-adapter/src/transform-wrapper.ts", "../../@cloudbase/ai/src/eventsource_parser/parse.ts", "../../@cloudbase/ai/src/utils.ts", "../../@cloudbase/ai/src/bot/index.ts", "../../@cloudbase/ai/src/models/index.ts", "../../@cloudbase/ai/src/models/ZhiPu/index.ts", "../../@cloudbase/ai/src/models/HunYuan/util.ts", "../../@cloudbase/ai/src/models/HunYuanBeta/index.ts", "../../@cloudbase/ai/src/models/HunYuan/index.ts", "../../@cloudbase/ai/src/models/Ark/index.ts", "../../@cloudbase/ai/src/models/DashScope/index.ts", "../../@cloudbase/ai/src/models/Yi/index.ts", "../../@cloudbase/ai/src/models/Moonshot/index.ts", "../../@cloudbase/ai/src/models/HunYuanExp/index.ts", "../../@cloudbase/ai/src/models/HunYuanOpen/index.ts", "../../@cloudbase/ai/src/models/DeepSeek/index.ts", "../../@cloudbase/ai/src/models/Default/index.ts", "../../@cloudbase/ai/src/models/image-model.ts", "../../@cloudbase/ai/src/models/model.ts", "../../@cloudbase/ai/src/AI.ts", "../../@cloudbase/ai/src/index.ts", "../../@cloudbase/mysql/src/index.ts", "../../@cloudbase/apis/src/callApis.ts", "../../@cloudbase/apis/src/index.ts", "../../@cloudbase/database/dist/esm/geo/index.js", "../../@cloudbase/database/dist/esm/constant.js", "../../@cloudbase/database/dist/esm/utils/symbol.js", "../../@cloudbase/database/dist/esm/helper/symbol.js", "../../@cloudbase/database/dist/esm/serverDate/index.js", "../../@cloudbase/database/dist/esm/util.js", "../../@cloudbase/database/dist/esm/validate.js", "../../@cloudbase/database/dist/esm/utils/type.js", "../../@cloudbase/database/dist/esm/geo/point.js", "../../@cloudbase/database/dist/esm/geo/lineString.js", "../../@cloudbase/database/dist/esm/geo/polygon.js", "../../@cloudbase/database/dist/esm/geo/multiPoint.js", "../../@cloudbase/database/dist/esm/geo/multiLineString.js", "../../@cloudbase/database/dist/esm/geo/multiPolygon.js", "../../@cloudbase/database/dist/esm/lib/util.js", "../../@cloudbase/database/dist/esm/commands/update.js", "../../@cloudbase/database/dist/esm/commands/logic.js", "../../@cloudbase/database/dist/esm/commands/query.js", "../../@cloudbase/database/dist/esm/operator-map.js", "../../@cloudbase/database/dist/esm/serializer/datatype.js", "../../@cloudbase/database/dist/esm/serializer/common.js", "../../@cloudbase/database/dist/esm/serializer/update.js", "../../@cloudbase/database/dist/esm/utils/utils.js", "../../@cloudbase/database/dist/esm/document.js", "../../@cloudbase/database/dist/esm/serializer/query.js", "../../@cloudbase/database/dist/esm/query.js", "../../bson/node_modules/base64-js/index.js", "../../bson/node_modules/ieee754/index.js", "../../bson/node_modules/buffer/index.js", "../../bson/node_modules/tslib/tslib.es6.js", "../../bson/src/error.ts", "../../bson/src/utils/global.ts", "../../bson/src/parser/utils.ts", "../../bson/src/ensure_buffer.ts", "../../bson/src/uuid_utils.ts", "../../bson/src/constants.ts", "../../bson/src/binary.ts", "../../bson/src/code.ts", "../../bson/src/db_ref.ts", "../../bson/src/long.ts", "../../bson/src/decimal128.ts", "../../bson/src/double.ts", "../../bson/src/int_32.ts", "../../bson/src/max_key.ts", "../../bson/src/min_key.ts", "../../bson/src/objectid.ts", "../../bson/src/regexp.ts", "../../bson/src/symbol.ts", "../../bson/src/timestamp.ts", "../../bson/src/extended_json.ts", "../../bson/src/map.ts", "../../bson/src/parser/calculate_size.ts", "../../bson/src/validate_utf8.ts", "../../bson/src/parser/deserializer.ts", "../../bson/src/parser/serializer.ts", "../../bson/src/bson.ts", "../../@cloudbase/database/dist/esm/aggregate.js", "../../@cloudbase/database/dist/esm/collection.js", "../../@cloudbase/database/dist/esm/command.js", "../../@cloudbase/database/dist/esm/regexp/index.js", "../../@cloudbase/database/dist/esm/const/code.js", "../../@cloudbase/database/dist/esm/transaction/document.js", "../../@cloudbase/database/dist/esm/transaction/query.js", "../../@cloudbase/database/dist/esm/transaction/collection.js", "../../@cloudbase/database/dist/esm/transaction/index.js", "../../@cloudbase/database/dist/esm/index.js", "../../@cloudbase/js-sdk/database/dist/index.ts", "../../@cloudbase/js-sdk/package.json", "../../@cloudbase/index.ts"],
  "sourcesContent": ["export var StorageType;\n(function (StorageType) {\n    StorageType[\"local\"] = \"local\";\n    StorageType[\"none\"] = \"none\";\n    StorageType[\"session\"] = \"session\";\n})(StorageType || (StorageType = {}));\nvar AbstractSDKRequest = (function () {\n    function AbstractSDKRequest() {\n    }\n    return AbstractSDKRequest;\n}());\nexport { AbstractSDKRequest };\nvar AbstractStorage = (function () {\n    function AbstractStorage() {\n    }\n    return AbstractStorage;\n}());\nexport { AbstractStorage };\n", "export function formatUrl(protocol, url, query) {\n    if (query === void 0) { query = {}; }\n    var urlHasQuery = /\\?/.test(url);\n    var queryString = '';\n    for (var key in query) {\n        if (queryString === '') {\n            !urlHasQuery && (url += '?');\n        }\n        else {\n            queryString += '&';\n        }\n        queryString += key + \"=\" + encodeURIComponent(query[key]);\n    }\n    url += queryString;\n    if (/^http(s)?\\:\\/\\//.test(url)) {\n        return url;\n    }\n    return \"\" + protocol + url;\n}\n", "export * from './types';\nexport * from './utils';\n", "let sdkName = '@cloudbase/js-sdk'\nexport function setSdkName(name: string) {\n  sdkName = name\n}\nexport function getSdkName() {\n  return sdkName\n}\n\nlet PROTOCOL = 'https:'\n\nexport function setProtocol(protocol: 'http:' | 'https:') {\n  PROTOCOL = protocol\n}\n\nexport function getProtocol() {\n  return PROTOCOL\n}\n// 是否为开发模式\nexport const IS_DEBUG_MODE = process.env.NODE_ENV === 'development'\n// 问答社区链接\nexport const COMMUNITY_SITE_URL = 'https://support.qq.com/products/148793'\n", "export const ERRORS = {\n  INVALID_PARAMS: 'INVALID_PARAMS',\n  INVALID_SYNTAX: 'INVALID_SYNTAX',\n  INVALID_OPERATION: 'INVALID_OPERATION',\n  OPERATION_FAIL: 'OPERATION_FAIL',\n  NETWORK_ERROR: 'NETWORK_ERROR',\n  UNKOWN_ERROR: 'UNKOWN_ERROR',\n}\n", "export * from './common'\nexport * from './errors'\n\nexport const OATUH_LOGINTYPE = 'constants'\n", "import { KV } from '@cloudbase/types'\nimport { getSdkName } from '../constants'\n\nexport function isArray(val: any): boolean {\n  return Object.prototype.toString.call(val) === '[object Array]'\n}\nexport function isString(val: any): boolean {\n  return typeof val === 'string'\n}\nexport function isUndefined(val: any): boolean {\n  return typeof val === 'undefined'\n}\nexport function isPalinObject(val: any): boolean {\n  return Object.prototype.toString.call(val) === '[object Object]'\n}\nexport function isNull(val: any): boolean {\n  return Object.prototype.toString.call(val) === '[object Null]'\n}\nexport function isInstanceOf(instance: any, construct: any): boolean {\n  return instance instanceof construct\n}\nexport function isFormData(val: any): boolean {\n  return Object.prototype.toString.call(val) === '[object FormData]'\n}\nexport function genSeqId(): string {\n  return Math.random().toString(16)\n    .slice(2)\n}\nexport function generateRequestId() {\n  let d = new Date().getTime()\n  let d2 = (Date?.now && Date.now() * 1000) || 0\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    let r = Math.random() * 16\n    if (d > 0) {\n      r = (d + r) % 16 | 0\n      d = Math.floor(d / 16)\n    } else {\n      r = (d2 + r) % 16 | 0\n      d2 = Math.floor(d2 / 16)\n    }\n    return (c === 'x' ? r : (r & 0x7) | 0x8).toString(16)\n  })\n}\nexport function formatUrl(PROTOCOL: string, url: string, query: KV<any> = {}): string {\n  const urlHasQuery = /\\?/.test(url)\n  let queryString = ''\n  Object.keys(query).forEach((key) => {\n    if (queryString === '') {\n      !urlHasQuery && (url += '?')\n    } else {\n      queryString += '&'\n    }\n    queryString += `${key}=${encodeURIComponent(query[key])}`\n  })\n  url += queryString\n  if (/^http(s)?:\\/\\//.test(url)) {\n    return url\n  }\n  return `${PROTOCOL}${url}`\n}\n\nexport function toQueryString(query: KV<any> = {}) {\n  const queryString = []\n  Object.keys(query).forEach((key) => {\n    queryString.push(`${key}=${encodeURIComponent(query[key])}`)\n  })\n  return queryString.join('&')\n}\n\nexport function getQuery(name: string, url?: string) {\n  if (typeof window === 'undefined') {\n    return false\n  }\n  // 参数：变量名，url为空则表从当前页面的url中取\n  const u = url || decodeURIComponent(window.location.search)\n  const reg = new RegExp(`(^|&)${name}=([^&]*)(&|$)`)\n  const r = u.substr(u.indexOf('?') + 1).match(reg)\n  return r !== null && r !== undefined ? r[2] : ''\n}\n\nexport const getHash = function (name: string) {\n  if (typeof window === 'undefined') {\n    return ''\n  }\n  const matches = window.location.hash.match(new RegExp(`[#?&/]${name}=([^&#]*)`))\n  return matches ? matches[1] : ''\n}\n\nexport function removeParam(key: string, sourceURL: string) {\n  let rtn = sourceURL.split('?')[0]\n  let param\n  let params = []\n  const queryString = sourceURL.indexOf('?') !== -1 ? sourceURL.split('?')[1] : ''\n  if (queryString !== '') {\n    params = queryString.split('&')\n    for (let i = params.length - 1; i >= 0; i -= 1) {\n      /* eslint-disable-next-line */\n      param = params[i].split('=')[0]\n      if (param === key) {\n        params.splice(i, 1)\n      }\n    }\n    rtn = `${rtn}?${params.join('&')}`\n  }\n  return rtn\n}\n\nexport function createPromiseCallback() {\n  let cb: any = {}\n  if (!Promise) {\n    cb = () => {}\n    cb.promise = {}\n\n    const throwPromiseNotDefined = () => {\n      throw new Error('Your Node runtime does support ES6 Promises. '\n          + 'Set \"global.Promise\" to your preferred implementation of promises.',)\n    }\n\n    Object.defineProperty(cb.promise, 'then', { get: throwPromiseNotDefined })\n    Object.defineProperty(cb.promise, 'catch', { get: throwPromiseNotDefined })\n    return cb\n  }\n\n  const promise = new Promise((resolve, reject) => {\n    cb = (err, data) => {\n      if (err) return reject(err)\n      return resolve(data)\n    }\n  })\n  cb.promise = promise\n  return cb\n}\n\nexport function execCallback(fn: Function | null | undefined, err: any, data = null) {\n  if (fn && typeof fn === 'function') {\n    return fn(err, data)\n  }\n  if (err) {\n    throw err\n  }\n  return data\n}\n\nexport function printWarn(error: string, msg: string) {\n  console.warn(`[${getSdkName()}][${error}]:${msg}`)\n}\n\nexport function printError(error: string, msg: string) {\n  console.error({\n    code: error,\n    msg: `[${getSdkName()}][${error}]:${msg}`,\n  })\n}\nexport function printInfo(error: string, msg: string) {\n  console.log(`[${getSdkName()}][${error}]:${msg}`)\n}\nexport function throwError(error: string, msg: string) {\n  throw new Error(JSON.stringify({\n    code: error,\n    msg: `[${getSdkName()}][${error}]:${msg}`,\n  }),)\n}\n\ninterface IPrintGroupLogOptions {\n  title: string\n  subtitle: string | object\n  content: {\n    type: 'info' | 'warn' | 'error'\n    body: string | Error\n  }[]\n  printTrace?: boolean\n  collapsed?: boolean\n}\nexport function printGroupLog(options: IPrintGroupLogOptions) {\n  const { title, subtitle = '', content = [], printTrace = false, collapsed = false } = options\n  if (collapsed) {\n    (console.groupCollapsed || console.error)(title, subtitle)\n  } else {\n    (console.group || console.error)(title, subtitle)\n  }\n  for (const tip of content) {\n    const { type, body } = tip\n    switch (type) {\n      case 'info':\n        console.log(body)\n        break\n      case 'warn':\n        console.warn(body)\n        break\n      case 'error':\n        console.error(body)\n        break\n    }\n  }\n  if (printTrace) {\n    (console.trace || console.log)('stack trace:')\n  }\n  console.groupEnd?.()\n}\n\nexport const sleep = (ms = 0) => new Promise(r => setTimeout(r, ms))\n\nexport function transformPhone(phoneNumber: string) {\n  return `+86${phoneNumber}`\n}\n\nexport const parseQueryString = (queryString) => {\n  queryString = queryString.replace(/^\\?/, '')\n  const params = {}\n  const pairs = queryString.split('&')\n\n  pairs.forEach((item) => {\n    let [key, value] = item.split('=')\n    key = decodeURIComponent(key)\n    value = decodeURIComponent(value)\n    if (key) {\n      if (params[key]) {\n        if (Array.isArray(params[key])) {\n          params[key].push(value)\n        } else {\n          params[key] = [params[key], value]\n        }\n      } else {\n        params[key] = value\n      }\n    }\n  })\n\n  return params\n}\n\n// 解析URL参数\nexport function parseCaptcha(url) {\n  let queryObj: any = {}\n  const matched = url.match(/^(data:.*?)(\\?[^#\\s]*)?$/)\n  if (matched) {\n    // eslint-disable-next-line prefer-destructuring\n    url = matched[1]\n    const search = matched[2]\n    if (search) {\n      queryObj = parseQueryString(search)\n    }\n  }\n  const { token, ...restQueryObj } = queryObj\n  if (/^data:/.test(url) && !token) {\n    return {\n      error: 'invalid_argument',\n      error_description: `invalid captcha data: ${url}`,\n    }\n  }\n  if (!token) {\n    return {\n      error: 'unimplemented',\n      error_description: 'need to impl captcha data',\n    }\n  }\n  // 解析url得到的参数\n  return {\n    state: restQueryObj.state,\n    token, // 验证码token\n    captchaData: url, // 验证码base64图片\n  }\n}\n", "import { isString, isInstanceOf } from './util'\nimport { Listeners, ICloudbaseEventEmitter } from '@cloudbase/types/events'\n\n\n/**\n * @private\n * @function _addEventListener - 添加监听\n * @param {string} name - event名称\n * @param {Function} listener - 响应函数\n * @param {Listeners} listeners - 已存响应函数集合\n */\nfunction customeAddEventListener(name: string, listener: Function, listeners: Listeners) {\n  listeners[name] = listeners[name] || []\n  listeners[name].push(listener)\n}\n/**\n * @private\n * @function _removeEventListener - 移除监听\n * @param {string} name - event名称\n * @param {Function} listener - 响应函数\n * @param {Listeners} listeners - 已存响应函数集合\n */\nfunction customRemoveEventListener(name: string, listener: Function, listeners: Listeners) {\n  if (listeners?.[name]) {\n    const index = listeners[name].indexOf(listener)\n    if (index !== -1) {\n      listeners[name].splice(index, 1)\n    }\n  }\n}\ninterface IEvent {\n  name: string;\n  target: any;\n  data: any;\n}\n/**\n * 自定义事件\n * @class CloudbaseEvent\n * @param {string} name - 类型\n * @param {any} data - 数据\n */\nexport class CloudbaseEvent implements IEvent {\n  public readonly name: string\n  public target: any\n  public data: any\n\n  constructor(name: string, data: any) {\n    this.data = data || null\n    this.name = name\n  }\n}\n/**\n * 自定义错误事件\n * @class IErrorEvent\n * @extends CloudbaseEvent\n * @param {Error} error - 错误信息对象\n * @param {any} data  - 数据\n */\nexport class IErrorEvent extends CloudbaseEvent {\n  public readonly error: Error\n  constructor(error: Error, data?: any) {\n    super('error', { error, data })\n    this.error = error\n  }\n}\n\n/**\n * @class CloudbaseEventEmitter\n */\nexport class CloudbaseEventEmitter implements ICloudbaseEventEmitter {\n  /**\n   * @private\n   * @readonly\n   * @property {Listeners} listeners - 响应函数集合\n   * @default `{}`\n   */\n  private readonly listeners: Listeners = {}\n\n  /**\n   * @public\n   * @method on - 添加监听\n   * @param {string} name - event名称\n   * @param {Function} listener - 响应函数\n   * @return `this`\n   */\n  public on(name: string, listener: Function): this {\n    customeAddEventListener(name, listener, this.listeners)\n    return this\n  }\n  /**\n   * @public\n   * @method off - 移除监听\n   * @param {string} name - event名称\n   * @param {Function} listener - 响应函数\n   * @return `this`\n   */\n  public off(name: string, listener: Function): this {\n    customRemoveEventListener(name, listener, this.listeners)\n    return this\n  }\n  /**\n   * @public\n   * @method fire - 触发事件\n   * @param {string|CloudbaseEvent} event - event\n   * @return `this`\n   */\n  public fire(event: string | CloudbaseEvent, data?: any): this {\n    // 打印错误信息\n    if (isInstanceOf(event, IErrorEvent)) {\n      console.error((event as IErrorEvent).error)\n      return this\n    }\n\n    const ev: CloudbaseEvent = isString(event) ? new CloudbaseEvent(event as string, data || {}) : event as CloudbaseEvent\n\n    const { name } = ev\n\n    if (this.listens(name)) {\n      ev.target = this\n\n      const handlers = this.listeners[name] ? [...this.listeners[name]] : []\n      for (const fn of handlers) {\n        fn.call(this, ev)\n      }\n    }\n\n    return this\n  }\n\n  /**\n   * @private\n   * @method listens - 判断是否监听了name事件\n   * @param {string} name - event名称\n   * @return `boolean`\n   */\n  private listens(name: string): boolean {\n    return this.listeners[name] && this.listeners[name].length > 0\n  }\n}\n\n\nconst eventEmitter = new CloudbaseEventEmitter()\n\nexport function addEventListener(event: string, callback: Function) {\n  eventEmitter.on(event, callback)\n}\n\nexport function activateEvent(event: string, data: any = {}) {\n  eventEmitter.fire(event, data)\n}\n\nexport function removeEventListener(event: string, callback: Function) {\n  eventEmitter.off(event, callback)\n}\n", "import { printGroupLog } from '../libs/util'\nimport { IS_DEBUG_MODE } from '../constants'\n\ninterface ICatchErrorsDecoratorOptions {\n  mode?: 'sync' | 'async';\n  customInfo?: {\n    className?: string;\n    methodName?: string;\n  };\n  title?: string;\n  messages?: string[];\n}\n// firefox的stack格式与chrome不同\nlet isFirefox = false\nif (typeof navigator !== 'undefined' && navigator.userAgent) {\n  isFirefox = navigator.userAgent.indexOf('Firefox') !== -1\n}\n/**\n * decorate在stack中一般都特定的规范\n */\nconst REG_STACK_DECORATE = isFirefox\n  ? /(\\.js\\/)?__decorate(\\$\\d+)?<@.*\\d$/\n  : /(\\/\\w+\\.js\\.)?__decorate(\\$\\d+)?\\s*\\(.*\\)$/\nconst REG_STACK_LINK = /https?:\\/\\/.+:\\d*\\/.*\\.js:\\d+:\\d+/\n/**\n * debug模式强化日志信息\n * @param options\n */\nexport function catchErrorsDecorator(options: ICatchErrorsDecoratorOptions) {\n  const { mode = 'async', customInfo = {}, title, messages = [] } = options\n\n  return function (\n    target: any,\n    methodName: string,\n    descriptor: TypedPropertyDescriptor<Function>\n  ) {\n    // 生产环境禁用\n    if (!IS_DEBUG_MODE) {\n      return\n    }\n    const className = customInfo.className || target.constructor.name\n    const fnName = customInfo.methodName || methodName\n    const fn = descriptor.value\n\n    // 被decorator装饰的源码link\n    // 在descriptor.value外部此处创建的stack层次可触达源码\n    // 而descriptor.value内部有可能由于stack太深无法触达\n    const sourceLink = getSourceLink(new Error())\n\n    if (mode === 'sync') {\n      descriptor.value = function (...args: any[]) {\n        // 此处的stack作用主要是为了获取被decorator装饰的源码class和method名称\n        const innerErr: any = getRewritedError({\n          err: new Error(),\n          className,\n          methodName: fnName,\n          sourceLink,\n        })\n        try {\n          return fn.apply(this, args)\n        } catch (err) {\n          let failErr = err\n          const { message: errMsg, error, error_description: errorDescription } = err\n          const logs: any = {\n            title: title || `${className}.${fnName} failed`,\n            content: [{\n              type: 'error',\n              body: err,\n            }],\n          }\n          // 只特殊处理SDK业务逻辑抛出的错误-JSON string\n          if (errMsg && /^\\{.*\\}$/.test(errMsg)) {\n            const msg = JSON.parse(errMsg)\n            logs.subtitle = errMsg\n            if (msg.code) {\n              if (innerErr) {\n                innerErr.code = msg.code\n                innerErr.msg = msg.msg\n              } else {\n                err.code = msg.code\n                err.message = msg.msg\n              }\n              failErr = innerErr || err\n              logs.content = messages.map(msg => ({\n                type: 'info',\n                body: msg,\n              }))\n            }\n          }\n\n          // oauth 错误特殊处理\n          if (error && errorDescription) {\n            logs.subtitle = errorDescription\n            if (innerErr) {\n              innerErr.code = error\n              innerErr.msg = errorDescription\n            } else {\n              err.code = error\n              err.message = errorDescription\n            }\n            failErr = innerErr || err\n            logs.content = messages.map(msg => ({\n              type: 'info',\n              body: msg,\n            }))\n          }\n          printGroupLog(logs)\n          throw failErr\n        }\n      }\n    } else {\n      descriptor.value = async function (...args: any[]) {\n        const innerErr: any = getRewritedError({\n          err: new Error(),\n          className,\n          methodName: fnName,\n          sourceLink,\n        })\n\n        try {\n          return await fn.apply(this, args)\n        } catch (err) {\n          let failErr = err\n          const { message: errMsg, error, error_description: errorDescription } = err\n          const logs: any = {\n            title: title || `${className}.${fnName} failed`,\n            content: [{\n              type: 'error',\n              body: err,\n            }],\n          }\n          // 只特殊处理SDK业务逻辑抛出的错误-JSON string\n          if (errMsg && /^\\{.*\\}$/.test(errMsg)) {\n            const msg = JSON.parse(errMsg)\n            logs.subtitle = msg\n            if (msg.code) {\n              if (innerErr) {\n                innerErr.code = msg.code\n                innerErr.message = msg.msg\n              } else {\n                err.code = msg.code\n                err.message = msg.msg\n              }\n              failErr = innerErr || err\n              logs.content = messages.map(msg => ({\n                type: 'info',\n                body: msg,\n              }))\n            }\n          }\n\n          // oauth 错误特殊处理\n          if (error && errorDescription) {\n            logs.subtitle = errorDescription\n            if (innerErr) {\n              innerErr.code = error\n              innerErr.msg = errorDescription\n            } else {\n              err.code = error\n              err.message = errorDescription\n            }\n            failErr = innerErr || err\n            logs.content = messages.map(msg => ({\n              type: 'info',\n              body: msg,\n            }))\n          }\n          printGroupLog(logs)\n          throw failErr\n        }\n      }\n    }\n  }\n}\n\n/**\n * 在原始堆栈中查找装饰器条目并返回源码链接link\n * @param err\n */\nfunction getSourceLink(err: Error) {\n  let sourceLink = ''\n  const outterErrStacks = err.stack.split('\\n')\n  const indexOfDecorator = outterErrStacks.findIndex(str => REG_STACK_DECORATE.test(str))\n\n  if (indexOfDecorator !== -1) {\n    const match = REG_STACK_LINK.exec(outterErrStacks[indexOfDecorator + 1] || '')\n\n    sourceLink = match ? match[0] : ''\n  }\n  return sourceLink\n}\n\n/**\n * 在原始堆栈中查找装饰器条目，剔除其后的无用堆栈，并将链接替换为源码link\n * @param options\n */\nfunction getRewritedError(options: {\n  err: Error;\n  className: string;\n  methodName: string;\n  sourceLink: string;\n}) {\n  const { err, className, methodName, sourceLink } = options\n  // 找不到源码link返回null，后续逻辑将打印原堆栈信息\n  if (!sourceLink) {\n    return null\n  }\n\n  const innerErrStack = err.stack.split('\\n')\n  const REG_STACK_INNER_METHOD = isFirefox\n    ? /^catchErrorsDecorator\\/<\\/descriptor.value@.*\\d$/\n    : new RegExp(`${className}\\\\.descriptor.value\\\\s*\\\\[as\\\\s${methodName}\\\\]\\\\s*\\\\(.*\\\\)$`)\n  const REG_STACK_INNER_METHOD_WITHOUT_LINK = isFirefox\n    ? /^catchErrorsDecorator\\/<\\/descriptor.value/\n    : new RegExp(`${className}\\\\.descriptor.value\\\\s*\\\\[as\\\\s${methodName}\\\\]`)\n  const indexOfSource = innerErrStack.findIndex(str => REG_STACK_INNER_METHOD.test(str))\n  let innerErr: Error\n  if (indexOfSource !== -1) {\n    // @ts-ignore\n    const realErrStack = innerErrStack.filter((v, i) => i > indexOfSource)\n    realErrStack.unshift(innerErrStack[indexOfSource]\n      .replace(REG_STACK_INNER_METHOD_WITHOUT_LINK, `${className}.${methodName}`)\n      .replace(REG_STACK_LINK, sourceLink))\n    innerErr = new Error()\n    innerErr.stack = `${isFirefox ? '@debugger' : 'Error'}\\n${realErrStack.join('\\n')}`\n  }\n  return innerErr\n}\n", "export * from './decorators'\n", "import { StorageInterface, AbstractStorage, SDKAdapterInterface } from '@cloudbase/adapter-interface'\nimport { ICloudbaseCache, ICacheConfig } from '@cloudbase/types/cache'\nimport { KV, Persistence, ICloudbasePlatformInfo } from '@cloudbase/types'\nimport { printWarn } from './util'\nimport { ERRORS, getSdkName } from '../constants'\n\n/**\n * persitence=none时登录态保存在内存中\n */\nclass TcbCacheObject extends AbstractStorage {\n  private readonly root: any\n  constructor(root: any) {\n    super()\n    this.root = root\n    if (!root.tcbCacheObject) {\n      root.tcbCacheObject = {}\n    }\n  }\n  public setItem(key: string, value: any) {\n    this.root.tcbCacheObject[key] = value\n  }\n  public getItem(key: string) {\n    return this.root.tcbCacheObject[key]\n  }\n  public removeItem(key: string) {\n    delete this.root.tcbCacheObject[key]\n  }\n  public clear() {\n    delete this.root.tcbCacheObject\n  }\n}\n/**\n * 工厂函数\n */\nfunction createStorage(persistence: Persistence, adapter: SDKAdapterInterface): StorageInterface {\n  switch (persistence) {\n    case 'local':\n      if (!adapter.localStorage) {\n        printWarn(ERRORS.INVALID_PARAMS, 'localStorage is not supported on current platform')\n        // 不支持localstorage的平台降级为none\n        return new TcbCacheObject(adapter.root)\n      }\n      return adapter.localStorage\n    case 'none':\n      return new TcbCacheObject(adapter.root)\n    default:\n      if (!adapter.localStorage) {\n        printWarn(ERRORS.INVALID_PARAMS, 'localStorage is not supported on current platform')\n        // 不支持localstorage的平台降级为none\n        return new TcbCacheObject(adapter.root)\n      }\n      return adapter.localStorage\n  }\n}\n\nexport class CloudbaseCache implements ICloudbaseCache {\n  public keys: KV<string> = {}\n\n  private persistenceTag: Persistence\n  private platformInfo: ICloudbasePlatformInfo\n  private storage: StorageInterface\n\n  constructor(config: ICacheConfig) {\n    const { persistence, platformInfo = {}, keys = {} } = config\n    this.platformInfo = platformInfo\n    if (!this.storage) {\n      this.persistenceTag = this.platformInfo.adapter.primaryStorage || persistence\n      this.storage = createStorage(this.persistenceTag, this.platformInfo.adapter)\n      this.keys = keys\n    }\n  }\n  /**\n   * @getter storage模式-同步/异步\n   */\n  get mode() {\n    return this.storage.mode || 'sync'\n  }\n  get persistence(): Persistence {\n    return this.persistenceTag\n  }\n\n  public setStore(key: string, value: any, version?: any) {\n    if (this.mode === 'async') {\n      printWarn(ERRORS.INVALID_OPERATION, 'current platform\\'s storage is asynchronous, please use setStoreAsync insteed')\n      return\n    }\n    if (!this.storage) {\n      return\n    }\n\n    try {\n      const val = {\n        version: version || 'localCachev1',\n        content: value,\n      }\n      this.storage.setItem(key, JSON.stringify(val))\n    } catch (e) {\n      throw new Error(JSON.stringify({\n        code: ERRORS.OPERATION_FAIL,\n        msg: `[${getSdkName()}][${ERRORS.OPERATION_FAIL}]setStore failed`,\n        info: e,\n      }))\n    }\n\n    return\n  }\n  public async setStoreAsync(key: string, value: any, version?: any) {\n    if (!this.storage) {\n      return\n    }\n\n    try {\n      const val = {\n        version: version || 'localCachev1',\n        content: value,\n      }\n      await this.storage.setItem(key, JSON.stringify(val))\n    } catch (e) {\n      return\n    }\n\n    return\n  }\n  public getStore(key: string, version?: string) {\n    if (this.mode === 'async') {\n      printWarn(ERRORS.INVALID_OPERATION, 'current platform\\'s storage is asynchronous, please use getStoreAsync insteed')\n      return\n    }\n    try {\n      // 测试用例使用\n      if (typeof process !== 'undefined' && process.env?.tcb_token) {\n        return process.env.tcb_token\n      }\n\n      if (!this.storage) {\n        return ''\n      }\n    } catch (e) {\n      return ''\n    }\n\n    version = version || 'localCachev1'\n\n    const content = this.storage.getItem(key)\n    if (!content) {\n      return ''\n    }\n\n    if (content.indexOf(version) >= 0) {\n      const d = JSON.parse(content)\n      return d.content\n    }\n    return ''\n  }\n  public async getStoreAsync(key: string, version?: string) {\n    try {\n      // 测试用例使用\n      if (typeof process !== 'undefined' && process.env?.tcb_token) {\n        return process.env.tcb_token\n      }\n\n      if (!this.storage) {\n        return ''\n      }\n    } catch (e) {\n      return ''\n    }\n\n    version = version || 'localCachev1'\n\n    const content = await this.storage.getItem(key)\n    if (!content) {\n      return ''\n    }\n\n    if (content.indexOf(version) >= 0) {\n      const d = JSON.parse(content)\n      return d.content\n    }\n    return ''\n  }\n  public removeStore(key: string) {\n    if (this.mode === 'async') {\n      printWarn(ERRORS.INVALID_OPERATION, 'current platform\\'s storage is asynchronous, please use removeStoreAsync insteed')\n      return\n    }\n    this.storage.removeItem(key)\n  }\n  public async removeStoreAsync(key: string) {\n    await this.storage.removeItem(key)\n  }\n}\n", "import {\n  SDKAdapterInterface,\n  AbstractSDKRequest,\n  IRequestOptions,\n  ResponseObject,\n  IUploadRequestOptions,\n  IRequestConfig,\n  IRequestMethod,\n  IFetchOptions,\n} from '@cloudbase/adapter-interface'\nimport { isFormData, formatUrl, toQueryString } from '../../libs/util'\nimport { getProtocol } from '../../constants/common'\n\n/**\n * @class WebRequest\n */\nclass WebRequest extends AbstractSDKRequest {\n  // 默认不限超时\n  private readonly timeout: number\n  // 超时提示文案\n  private readonly timeoutMsg: string\n  // 超时受限请求类型，默认所有请求均受限\n  private readonly restrictedMethods: Array<IRequestMethod>\n  constructor(config: IRequestConfig) {\n    super()\n    const { timeout, timeoutMsg, restrictedMethods } = config\n    this.timeout = timeout || 0\n    this.timeoutMsg = timeoutMsg || '请求超时'\n    this.restrictedMethods = restrictedMethods || ['get', 'post', 'upload', 'download']\n  }\n  public get(options: IRequestOptions): Promise<ResponseObject> {\n    return this.request(\n      {\n        ...options,\n        method: 'get',\n      },\n      this.restrictedMethods.includes('get'),\n    )\n  }\n  public post(options: IRequestOptions): Promise<ResponseObject> {\n    return this.request(\n      {\n        ...options,\n        method: 'post',\n      },\n      this.restrictedMethods.includes('post'),\n    )\n  }\n  public put(options: IRequestOptions): Promise<ResponseObject> {\n    return this.request({\n      ...options,\n      method: 'put',\n    })\n  }\n  public upload(options: IUploadRequestOptions): Promise<ResponseObject> {\n    const { data, file, name, method, headers = {} } = options\n    const reqMethod = { post: 'post', put: 'put' }[method?.toLowerCase()] || 'put'\n    // 上传方式为post时，需转换为FormData\n    const formData = new FormData()\n    if (reqMethod === 'post') {\n      Object.keys(data).forEach((key) => {\n        formData.append(key, data[key])\n      })\n      formData.append('key', name)\n      formData.append('file', file)\n      return this.request(\n        {\n          ...options,\n          data: formData,\n          method: reqMethod,\n        },\n        this.restrictedMethods.includes('upload'),\n      )\n    }\n    return this.request(\n      {\n        ...options,\n        method: 'put',\n        headers,\n        body: file,\n      },\n      this.restrictedMethods.includes('upload'),\n    )\n  }\n  public async download(options: IRequestOptions): Promise<any> {\n    try {\n      const { data } = await this.get({\n        ...options,\n        headers: {}, // 下载资源请求不经过service，header清空\n        responseType: 'blob',\n      })\n      const url = window.URL.createObjectURL(new Blob([data]))\n      const fileName = decodeURIComponent(new URL(options.url).pathname.split('/').pop() || '')\n      const link = document.createElement('a')\n\n      link.href = url\n      link.setAttribute('download', fileName)\n      link.style.display = 'none'\n\n      document.body.appendChild(link)\n      link.click()\n      // 回收内存\n      window.URL.revokeObjectURL(url)\n      document.body.removeChild(link)\n    } catch (e) {}\n    return new Promise((resolve) => {\n      resolve({\n        statusCode: 200,\n        tempFilePath: options.url,\n      })\n    })\n  }\n  async fetch(options: IFetchOptions & { shouldThrowOnError?: boolean }): Promise<ResponseObject> {\n    const abortController = new AbortController()\n    const { url, enableAbort = false, stream = false, signal, timeout: _timeout, shouldThrowOnError = true } = options\n\n    const timeout = _timeout ?? this.timeout\n\n    if (signal) {\n      if (signal.aborted) abortController.abort()\n      signal.addEventListener('abort', () => abortController.abort())\n    }\n\n    let timer = null\n    if (enableAbort && timeout) {\n      timer = setTimeout(() => {\n        console.warn(this.timeoutMsg)\n        abortController.abort(new Error(this.timeoutMsg))\n      }, timeout)\n    }\n\n    const res = await fetch(url, {\n      ...options,\n      signal: abortController.signal,\n    })\n      .then(async (response) => {\n        clearTimeout(timer)\n        if (shouldThrowOnError) {\n          // 404 等等也会进 resolve，所以要再通过 ok 判断\n          return response.ok ? response : Promise.reject(await response.json())\n        }\n        return response\n      })\n      .catch((x) => {\n        clearTimeout(timer)\n        if (shouldThrowOnError) {\n          return Promise.reject(x)\n        }\n      })\n\n    return {\n      // eslint-disable-next-line no-nested-ternary\n      data: stream ? res.body : res.headers.get('content-type')?.includes('application/json') ? res.json() : res.text(),\n      statusCode: res.status,\n      header: res.headers,\n    }\n  }\n  /**\n   * @param {IRequestOptions} options\n   * @param {boolean} enableAbort 是否超时中断请求\n   */\n  protected request(options: IRequestOptions, enableAbort = false): Promise<ResponseObject> {\n    const method = String(options.method).toLowerCase() || 'get'\n    return new Promise((resolve) => {\n      const { url, headers = {}, data, responseType, withCredentials, body, onUploadProgress } = options\n      const realUrl = formatUrl(getProtocol(), url, method === 'get' ? data : {})\n      const ajax = new XMLHttpRequest()\n      ajax.open(method, realUrl)\n      responseType && (ajax.responseType = responseType)\n      Object.keys(headers).forEach((key) => {\n        ajax.setRequestHeader(key, headers[key])\n      })\n      let timer\n      if (onUploadProgress) {\n        ajax.upload.addEventListener('progress', onUploadProgress)\n      }\n      ajax.onreadystatechange = () => {\n        const result: ResponseObject = {}\n        if (ajax.readyState === 4) {\n          const headers = ajax.getAllResponseHeaders()\n          const arr = headers.trim().split(/[\\r\\n]+/)\n          // Create a map of header names to values\n          const headerMap = {}\n          arr.forEach((line) => {\n            const parts = line.split(': ')\n            const header = parts.shift().toLowerCase()\n            const value = parts.join(': ')\n            headerMap[header] = value\n          })\n          result.header = headerMap\n          result.statusCode = ajax.status\n          try {\n            // 上传post请求返回数据格式为xml，此处容错\n            result.data = responseType === 'blob' ? ajax.response : JSON.parse(ajax.responseText)\n          } catch (e) {\n            result.data = responseType === 'blob' ? ajax.response : ajax.responseText\n          }\n          clearTimeout(timer)\n          resolve(result)\n        }\n      }\n      if (enableAbort && this.timeout) {\n        timer = setTimeout(() => {\n          console.warn(this.timeoutMsg)\n          ajax.abort()\n        }, this.timeout)\n      }\n      // 处理 payload\n      let payload\n      if (isFormData(data)) {\n        // FormData，不处理\n        payload = data\n      } else if (headers['content-type'] === 'application/x-www-form-urlencoded') {\n        payload = toQueryString(data)\n      } else if (body) {\n        payload = body\n      } else {\n        // 其它情况\n        payload = data ? JSON.stringify(data) : undefined\n      }\n\n      if (withCredentials) {\n        ajax.withCredentials = true\n      }\n      ajax.send(payload)\n    })\n  }\n}\n\nfunction genAdapter() {\n  const adapter: SDKAdapterInterface & { type?: 'default' | '' } = {\n    type: 'default',\n    root: window,\n    reqClass: WebRequest,\n    wsClass: WebSocket,\n    localStorage,\n  }\n  return adapter\n}\n\nexport { genAdapter, WebRequest }\n", "import { CloudbaseAdapter, SDKAdapterInterface, NodeAdapterInterface } from '@cloudbase/adapter-interface'\nimport * as Web from './platforms/web'\nimport { isArray } from '../libs/util'\n\nexport enum RUNTIME {\n  WEB = 'web',\n  WX_MP = 'wx_mp', // 微信小程序\n}\n\ntype ICloudbaseAdapter = CloudbaseAdapter & {\n  genAdapter: (options?: any) => SDKAdapterInterface | NodeAdapterInterface\n}\n\nexport function useAdapters(adapters: ICloudbaseAdapter | ICloudbaseAdapter[], options?: any) {\n  const adapterList: ICloudbaseAdapter[] = isArray(adapters)\n    ? (adapters as ICloudbaseAdapter[])\n    : [adapters as ICloudbaseAdapter]\n  for (const adapter of adapterList) {\n    const { isMatch, genAdapter, runtime } = adapter\n    if (isMatch()) {\n      return {\n        adapter: { isMatch, ...genAdapter(options) },\n        runtime,\n      }\n    }\n  }\n}\n\nexport function useDefaultAdapter() {\n  return {\n    adapter: { ...Web.genAdapter() },\n    runtime: RUNTIME.WEB,\n  }\n}\n", "/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n", "var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n", "var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n", "var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n", "/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n", "var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n", "/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n", "var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n", "var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n", "var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n", "/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n", "var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n", "/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n", "var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n", "var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n", "var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n", "/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n", "var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignValue;\n", "/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n", "/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n", "var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n", "var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n", "var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n", "var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n", "/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n", "var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n", "var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n", "var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n", "var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n", "/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n", "var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n", "var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n", "var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n", "var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n", "var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n", "var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n", "var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n", "var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n", "/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n", "var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n", "var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n", "var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n", "var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n", "var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n", "var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n", "var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n", "var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n", "var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n", "/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n", "var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n", "var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n", "var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n", "/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n", "var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n", "var assignValue = require('./_assignValue'),\n    castPath = require('./_castPath'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n      return object;\n    }\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nmodule.exports = baseSet;\n", "var baseSet = require('./_baseSet');\n\n/**\n * Sets the value at `path` of `object`. If a portion of `path` doesn't exist,\n * it's created. Arrays are created for missing index properties while objects\n * are created for all other missing properties. Use `_.setWith` to customize\n * `path` creation.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.set(object, 'a[0].b.c', 4);\n * console.log(object.a[0].b.c);\n * // => 4\n *\n * _.set(object, ['x', '0', 'y', 'z'], 5);\n * console.log(object.x[0].y.z);\n * // => 5\n */\nfunction set(object, path, value) {\n  return object == null ? object : baseSet(object, path, value);\n}\n\nmodule.exports = set;\n", "/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? array[length - 1] : undefined;\n}\n\nmodule.exports = last;\n", "var castPath = require('./_castPath'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n", "/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n", "var baseGet = require('./_baseGet'),\n    baseSlice = require('./_baseSlice');\n\n/**\n * Gets the parent value at `path` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} path The path to get the parent value of.\n * @returns {*} Returns the parent value.\n */\nfunction parent(object, path) {\n  return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));\n}\n\nmodule.exports = parent;\n", "var castPath = require('./_castPath'),\n    last = require('./last'),\n    parent = require('./_parent'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.unset`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The property path to unset.\n * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n */\nfunction baseUnset(object, path) {\n  path = castPath(path, object);\n  object = parent(object, path);\n  return object == null || delete object[toKey(last(path))];\n}\n\nmodule.exports = baseUnset;\n", "var baseUnset = require('./_baseUnset');\n\n/**\n * Removes the property at `path` of `object`.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to unset.\n * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 7 } }] };\n * _.unset(object, 'a[0].b.c');\n * // => true\n *\n * console.log(object);\n * // => { 'a': [{ 'b': {} }] };\n *\n * _.unset(object, ['a', '0', 'b', 'c']);\n * // => true\n *\n * console.log(object);\n * // => { 'a': [{ 'b': {} }] };\n */\nfunction unset(object, path) {\n  return object == null ? true : baseUnset(object, path);\n}\n\nmodule.exports = unset;\n", "var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n", "/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n", "/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n", "/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n", "var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n", "var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n", "/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n", "var assignValue = require('./_assignValue'),\n    baseAssignValue = require('./_baseAssignValue');\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nmodule.exports = copyObject;\n", "/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n", "var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n", "var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n", "/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n", "var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n", "/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n", "var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n", "/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n", "var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n", "var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n", "var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n", "/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n", "/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n", "var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n", "var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n", "var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n", "var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n", "var copyObject = require('./_copyObject'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n", "/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = nativeKeysIn;\n", "var isObject = require('./isObject'),\n    isPrototype = require('./_isPrototype'),\n    nativeKeysIn = require('./_nativeKeysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeysIn;\n", "var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeysIn = require('./_baseKeysIn'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nmodule.exports = keysIn;\n", "var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nmodule.exports = baseAssignIn;\n", "var root = require('./_root');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nmodule.exports = cloneBuffer;\n", "/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n", "/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n", "/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n", "var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n", "var copyObject = require('./_copyObject'),\n    getSymbols = require('./_getSymbols');\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nmodule.exports = copySymbols;\n", "/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n", "var overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n", "var arrayPush = require('./_arrayPush'),\n    getPrototype = require('./_getPrototype'),\n    getSymbols = require('./_getSymbols'),\n    stubArray = require('./stubArray');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nmodule.exports = getSymbolsIn;\n", "var copyObject = require('./_copyObject'),\n    getSymbolsIn = require('./_getSymbolsIn');\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nmodule.exports = copySymbolsIn;\n", "var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n", "var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n", "var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbolsIn = require('./_getSymbolsIn'),\n    keysIn = require('./keysIn');\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nmodule.exports = getAllKeysIn;\n", "var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n", "var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n", "var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n", "var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n", "var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n", "/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nmodule.exports = initCloneArray;\n", "var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n", "var Uint8Array = require('./_Uint8Array');\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nmodule.exports = cloneArrayBuffer;\n", "var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nmodule.exports = cloneDataView;\n", "/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nmodule.exports = cloneRegExp;\n", "var Symbol = require('./_Symbol');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nmodule.exports = cloneSymbol;\n", "var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nmodule.exports = cloneTypedArray;\n", "var cloneArrayBuffer = require('./_cloneArrayBuffer'),\n    cloneDataView = require('./_cloneDataView'),\n    cloneRegExp = require('./_cloneRegExp'),\n    cloneSymbol = require('./_cloneSymbol'),\n    cloneTypedArray = require('./_cloneTypedArray');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nmodule.exports = initCloneByTag;\n", "var isObject = require('./isObject');\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nmodule.exports = baseCreate;\n", "var baseCreate = require('./_baseCreate'),\n    getPrototype = require('./_getPrototype'),\n    isPrototype = require('./_isPrototype');\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nmodule.exports = initCloneObject;\n", "var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nmodule.exports = baseIsMap;\n", "var baseIsMap = require('./_baseIsMap'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nmodule.exports = isMap;\n", "var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nmodule.exports = baseIsSet;\n", "var baseIsSet = require('./_baseIsSet'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nmodule.exports = isSet;\n", "var Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignValue = require('./_assignValue'),\n    baseAssign = require('./_baseAssign'),\n    baseAssignIn = require('./_baseAssignIn'),\n    cloneBuffer = require('./_cloneBuffer'),\n    copyArray = require('./_copyArray'),\n    copySymbols = require('./_copySymbols'),\n    copySymbolsIn = require('./_copySymbolsIn'),\n    getAllKeys = require('./_getAllKeys'),\n    getAllKeysIn = require('./_getAllKeysIn'),\n    getTag = require('./_getTag'),\n    initCloneArray = require('./_initCloneArray'),\n    initCloneByTag = require('./_initCloneByTag'),\n    initCloneObject = require('./_initCloneObject'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isMap = require('./isMap'),\n    isObject = require('./isObject'),\n    isSet = require('./isSet'),\n    keys = require('./keys'),\n    keysIn = require('./keysIn');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nmodule.exports = baseClone;\n", "var baseClone = require('./_baseClone');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nmodule.exports = cloneDeep;\n", "(function (root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define([], factory);\n    } else if (typeof exports === \"object\") {\n        module.exports = factory();\n    } else {\n\t\tvar textEncoding = factory();\n        root.TextEncoder = textEncoding.TextEncoder;\n\t\troot.TextDecoder = textEncoding.TextDecoder;\n    }\n}(this, function () {\n\t\"use strict\";\n\t// return native implementation if available\n\tvar g = typeof global !== 'undefined' ? global : self;\n\tif (typeof g.TextEncoder !== 'undefined' && typeof g.TextDecoder !== 'undefined') {\n\t\treturn {'TextEncoder': g.TextEncoder, 'TextDecoder': g.TextDecoder};\n\t}\n\n\t// allowed encoding strings for utf-8\n\tvar utf8Encodings = [\n\t\t'utf8',\n\t\t'utf-8',\n\t\t'unicode-1-1-utf-8'\n\t];\n\n\tvar TextEncoder = function(encoding) {\n\t\tif (utf8Encodings.indexOf(encoding) < 0 && typeof encoding !== 'undefined' && encoding !== null) {\n\t\t\tthrow new RangeError('Invalid encoding type. Only utf-8 is supported');\n\t\t} else {\n\t\t\tthis.encoding = 'utf-8';\n\t\t\tthis.encode = function(str) {\n\t\t\t\tif (typeof str !== 'string') {\n\t\t\t\t\tthrow new TypeError('passed argument must be of type string');\n\t\t\t\t}\n\t\t\t\tvar binstr = unescape(encodeURIComponent(str)),\n\t\t\t\t\tarr = new Uint8Array(binstr.length);\n\t\t\t\tbinstr.split('').forEach(function(char, i) {\n\t\t\t\t\tarr[i] = char.charCodeAt(0);\n\t\t\t\t});\n\t\t\t\treturn arr;\n\t\t\t};\n\t\t}\n\t};\n\n\tvar TextDecoder = function(encoding, options) {\n\t\tif (utf8Encodings.indexOf(encoding) < 0 && typeof encoding !== 'undefined' && encoding !== null) {\n\t\t\tthrow new RangeError('Invalid encoding type. Only utf-8 is supported');\n\t\t}\n\t\tthis.encoding = 'utf-8';\n\t\tthis.ignoreBOM = false;\n\t\tthis.fatal = (typeof options !== 'undefined' && 'fatal' in options) ? options.fatal : false;\n\t\tif (typeof this.fatal !== 'boolean') {\n\t\t\tthrow new TypeError('fatal flag must be boolean');\n\t\t}\n\t\tthis.decode = function (view, options) {\n\t\t\tif (typeof view === 'undefined') {\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tvar stream = (typeof options !== 'undefined' && 'stream' in options) ? options.stream : false;\n\t\t\tif (typeof stream !== 'boolean') {\n\t\t\t\tthrow new TypeError('stream option must be boolean');\n\t\t\t}\n\n\t\t\tif (!ArrayBuffer.isView(view)) {\n\t\t\t\tthrow new TypeError('passed argument must be an array buffer view');\n\t\t\t} else {\n\t\t\t\tvar arr = new Uint8Array(view.buffer, view.byteOffset, view.byteLength),\n\t\t\t\t\tcharArr = new Array(arr.length);\n\t\t\t\tarr.forEach(function(charcode, i) {\n\t\t\t\t\tcharArr[i] = String.fromCharCode(charcode);\n\t\t\t\t});\n\t\t\t\treturn decodeURIComponent(escape(charArr.join('')));\n\t\t\t}\n\t\t};\n\t};\n\treturn {'TextEncoder': TextEncoder, 'TextDecoder': TextDecoder};\n}));\n", "export * from './common'\nexport * from './errors'\n\nexport const OATUH_LOGINTYPE = 'constants'\n", "let sdkName = '@cloudbase/js-sdk'\nexport function setSdkName(name: string) {\n  sdkName = name\n}\nexport function getSdkName() {\n  return sdkName\n}\n\nlet PROTOCOL = 'https:'\n\nexport function setProtocol(protocol: 'http:' | 'https:') {\n  PROTOCOL = protocol\n}\n\nexport function getProtocol() {\n  return PROTOCOL\n}\n// 是否为开发模式\nexport const IS_DEBUG_MODE = process.env.NODE_ENV === 'development'\n// 问答社区链接\nexport const COMMUNITY_SITE_URL = 'https://support.qq.com/products/148793'\n", "export const ERRORS = {\n  INVALID_PARAMS: 'INVALID_PARAMS',\n  INVALID_SYNTAX: 'INVALID_SYNTAX',\n  INVALID_OPERATION: 'INVALID_OPERATION',\n  OPERATION_FAIL: 'OPERATION_FAIL',\n  NETWORK_ERROR: 'NETWORK_ERROR',\n  UNKOWN_ERROR: 'UNKOWN_ERROR',\n}\n", "import {\n  SDKAdapterInterface,\n  AbstractSDKRequest,\n  IRequestOptions,\n  ResponseObject,\n  IUploadRequestOptions,\n  IRequestConfig,\n  IRequestMethod,\n  IFetchOptions,\n} from '@cloudbase/adapter-interface'\nimport { isFormData, formatUrl, toQueryString } from '../../libs/util'\nimport { getProtocol } from '../../constants/common'\n\n/**\n * @class WebRequest\n */\nclass WebRequest extends AbstractSDKRequest {\n  // 默认不限超时\n  private readonly timeout: number\n  // 超时提示文案\n  private readonly timeoutMsg: string\n  // 超时受限请求类型，默认所有请求均受限\n  private readonly restrictedMethods: Array<IRequestMethod>\n  constructor(config: IRequestConfig) {\n    super()\n    const { timeout, timeoutMsg, restrictedMethods } = config\n    this.timeout = timeout || 0\n    this.timeoutMsg = timeoutMsg || '请求超时'\n    this.restrictedMethods = restrictedMethods || ['get', 'post', 'upload', 'download']\n  }\n  public get(options: IRequestOptions): Promise<ResponseObject> {\n    return this.request(\n      {\n        ...options,\n        method: 'get',\n      },\n      this.restrictedMethods.includes('get'),\n    )\n  }\n  public post(options: IRequestOptions): Promise<ResponseObject> {\n    return this.request(\n      {\n        ...options,\n        method: 'post',\n      },\n      this.restrictedMethods.includes('post'),\n    )\n  }\n  public put(options: IRequestOptions): Promise<ResponseObject> {\n    return this.request({\n      ...options,\n      method: 'put',\n    })\n  }\n  public upload(options: IUploadRequestOptions): Promise<ResponseObject> {\n    const { data, file, name, method, headers = {} } = options\n    const reqMethod = { post: 'post', put: 'put' }[method?.toLowerCase()] || 'put'\n    // 上传方式为post时，需转换为FormData\n    const formData = new FormData()\n    if (reqMethod === 'post') {\n      Object.keys(data).forEach((key) => {\n        formData.append(key, data[key])\n      })\n      formData.append('key', name)\n      formData.append('file', file)\n      return this.request(\n        {\n          ...options,\n          data: formData,\n          method: reqMethod,\n        },\n        this.restrictedMethods.includes('upload'),\n      )\n    }\n    return this.request(\n      {\n        ...options,\n        method: 'put',\n        headers,\n        body: file,\n      },\n      this.restrictedMethods.includes('upload'),\n    )\n  }\n  public async download(options: IRequestOptions): Promise<any> {\n    try {\n      const { data } = await this.get({\n        ...options,\n        headers: {}, // 下载资源请求不经过service，header清空\n        responseType: 'blob',\n      })\n      const url = window.URL.createObjectURL(new Blob([data]))\n      const fileName = decodeURIComponent(new URL(options.url).pathname.split('/').pop() || '')\n      const link = document.createElement('a')\n\n      link.href = url\n      link.setAttribute('download', fileName)\n      link.style.display = 'none'\n\n      document.body.appendChild(link)\n      link.click()\n      // 回收内存\n      window.URL.revokeObjectURL(url)\n      document.body.removeChild(link)\n    } catch (e) {}\n    return new Promise((resolve) => {\n      resolve({\n        statusCode: 200,\n        tempFilePath: options.url,\n      })\n    })\n  }\n  async fetch(options: IFetchOptions & { shouldThrowOnError?: boolean }): Promise<ResponseObject> {\n    const abortController = new AbortController()\n    const { url, enableAbort = false, stream = false, signal, timeout: _timeout, shouldThrowOnError = true } = options\n\n    const timeout = _timeout ?? this.timeout\n\n    if (signal) {\n      if (signal.aborted) abortController.abort()\n      signal.addEventListener('abort', () => abortController.abort())\n    }\n\n    let timer = null\n    if (enableAbort && timeout) {\n      timer = setTimeout(() => {\n        console.warn(this.timeoutMsg)\n        abortController.abort(new Error(this.timeoutMsg))\n      }, timeout)\n    }\n\n    const res = await fetch(url, {\n      ...options,\n      signal: abortController.signal,\n    })\n      .then(async (response) => {\n        clearTimeout(timer)\n        if (shouldThrowOnError) {\n          // 404 等等也会进 resolve，所以要再通过 ok 判断\n          return response.ok ? response : Promise.reject(await response.json())\n        }\n        return response\n      })\n      .catch((x) => {\n        clearTimeout(timer)\n        if (shouldThrowOnError) {\n          return Promise.reject(x)\n        }\n      })\n\n    return {\n      // eslint-disable-next-line no-nested-ternary\n      data: stream ? res.body : res.headers.get('content-type')?.includes('application/json') ? res.json() : res.text(),\n      statusCode: res.status,\n      header: res.headers,\n    }\n  }\n  /**\n   * @param {IRequestOptions} options\n   * @param {boolean} enableAbort 是否超时中断请求\n   */\n  protected request(options: IRequestOptions, enableAbort = false): Promise<ResponseObject> {\n    const method = String(options.method).toLowerCase() || 'get'\n    return new Promise((resolve) => {\n      const { url, headers = {}, data, responseType, withCredentials, body, onUploadProgress } = options\n      const realUrl = formatUrl(getProtocol(), url, method === 'get' ? data : {})\n      const ajax = new XMLHttpRequest()\n      ajax.open(method, realUrl)\n      responseType && (ajax.responseType = responseType)\n      Object.keys(headers).forEach((key) => {\n        ajax.setRequestHeader(key, headers[key])\n      })\n      let timer\n      if (onUploadProgress) {\n        ajax.upload.addEventListener('progress', onUploadProgress)\n      }\n      ajax.onreadystatechange = () => {\n        const result: ResponseObject = {}\n        if (ajax.readyState === 4) {\n          const headers = ajax.getAllResponseHeaders()\n          const arr = headers.trim().split(/[\\r\\n]+/)\n          // Create a map of header names to values\n          const headerMap = {}\n          arr.forEach((line) => {\n            const parts = line.split(': ')\n            const header = parts.shift().toLowerCase()\n            const value = parts.join(': ')\n            headerMap[header] = value\n          })\n          result.header = headerMap\n          result.statusCode = ajax.status\n          try {\n            // 上传post请求返回数据格式为xml，此处容错\n            result.data = responseType === 'blob' ? ajax.response : JSON.parse(ajax.responseText)\n          } catch (e) {\n            result.data = responseType === 'blob' ? ajax.response : ajax.responseText\n          }\n          clearTimeout(timer)\n          resolve(result)\n        }\n      }\n      if (enableAbort && this.timeout) {\n        timer = setTimeout(() => {\n          console.warn(this.timeoutMsg)\n          ajax.abort()\n        }, this.timeout)\n      }\n      // 处理 payload\n      let payload\n      if (isFormData(data)) {\n        // FormData，不处理\n        payload = data\n      } else if (headers['content-type'] === 'application/x-www-form-urlencoded') {\n        payload = toQueryString(data)\n      } else if (body) {\n        payload = body\n      } else {\n        // 其它情况\n        payload = data ? JSON.stringify(data) : undefined\n      }\n\n      if (withCredentials) {\n        ajax.withCredentials = true\n      }\n      ajax.send(payload)\n    })\n  }\n}\n\nfunction genAdapter() {\n  const adapter: SDKAdapterInterface & { type?: 'default' | '' } = {\n    type: 'default',\n    root: window,\n    reqClass: WebRequest,\n    wsClass: WebSocket,\n    localStorage,\n  }\n  return adapter\n}\n\nexport { genAdapter, WebRequest }\n", "import { KV } from '@cloudbase/types'\nimport { getSdkName } from '../constants'\n\nexport function isArray(val: any): boolean {\n  return Object.prototype.toString.call(val) === '[object Array]'\n}\nexport function isString(val: any): boolean {\n  return typeof val === 'string'\n}\nexport function isUndefined(val: any): boolean {\n  return typeof val === 'undefined'\n}\nexport function isPalinObject(val: any): boolean {\n  return Object.prototype.toString.call(val) === '[object Object]'\n}\nexport function isNull(val: any): boolean {\n  return Object.prototype.toString.call(val) === '[object Null]'\n}\nexport function isInstanceOf(instance: any, construct: any): boolean {\n  return instance instanceof construct\n}\nexport function isFormData(val: any): boolean {\n  return Object.prototype.toString.call(val) === '[object FormData]'\n}\nexport function genSeqId(): string {\n  return Math.random().toString(16)\n    .slice(2)\n}\nexport function generateRequestId() {\n  let d = new Date().getTime()\n  let d2 = (Date?.now && Date.now() * 1000) || 0\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    let r = Math.random() * 16\n    if (d > 0) {\n      r = (d + r) % 16 | 0\n      d = Math.floor(d / 16)\n    } else {\n      r = (d2 + r) % 16 | 0\n      d2 = Math.floor(d2 / 16)\n    }\n    return (c === 'x' ? r : (r & 0x7) | 0x8).toString(16)\n  })\n}\nexport function formatUrl(PROTOCOL: string, url: string, query: KV<any> = {}): string {\n  const urlHasQuery = /\\?/.test(url)\n  let queryString = ''\n  Object.keys(query).forEach((key) => {\n    if (queryString === '') {\n      !urlHasQuery && (url += '?')\n    } else {\n      queryString += '&'\n    }\n    queryString += `${key}=${encodeURIComponent(query[key])}`\n  })\n  url += queryString\n  if (/^http(s)?:\\/\\//.test(url)) {\n    return url\n  }\n  return `${PROTOCOL}${url}`\n}\n\nexport function toQueryString(query: KV<any> = {}) {\n  const queryString = []\n  Object.keys(query).forEach((key) => {\n    queryString.push(`${key}=${encodeURIComponent(query[key])}`)\n  })\n  return queryString.join('&')\n}\n\nexport function getQuery(name: string, url?: string) {\n  if (typeof window === 'undefined') {\n    return false\n  }\n  // 参数：变量名，url为空则表从当前页面的url中取\n  const u = url || decodeURIComponent(window.location.search)\n  const reg = new RegExp(`(^|&)${name}=([^&]*)(&|$)`)\n  const r = u.substr(u.indexOf('?') + 1).match(reg)\n  return r !== null && r !== undefined ? r[2] : ''\n}\n\nexport const getHash = function (name: string) {\n  if (typeof window === 'undefined') {\n    return ''\n  }\n  const matches = window.location.hash.match(new RegExp(`[#?&/]${name}=([^&#]*)`))\n  return matches ? matches[1] : ''\n}\n\nexport function removeParam(key: string, sourceURL: string) {\n  let rtn = sourceURL.split('?')[0]\n  let param\n  let params = []\n  const queryString = sourceURL.indexOf('?') !== -1 ? sourceURL.split('?')[1] : ''\n  if (queryString !== '') {\n    params = queryString.split('&')\n    for (let i = params.length - 1; i >= 0; i -= 1) {\n      /* eslint-disable-next-line */\n      param = params[i].split('=')[0]\n      if (param === key) {\n        params.splice(i, 1)\n      }\n    }\n    rtn = `${rtn}?${params.join('&')}`\n  }\n  return rtn\n}\n\nexport function createPromiseCallback() {\n  let cb: any = {}\n  if (!Promise) {\n    cb = () => {}\n    cb.promise = {}\n\n    const throwPromiseNotDefined = () => {\n      throw new Error('Your Node runtime does support ES6 Promises. '\n          + 'Set \"global.Promise\" to your preferred implementation of promises.',)\n    }\n\n    Object.defineProperty(cb.promise, 'then', { get: throwPromiseNotDefined })\n    Object.defineProperty(cb.promise, 'catch', { get: throwPromiseNotDefined })\n    return cb\n  }\n\n  const promise = new Promise((resolve, reject) => {\n    cb = (err, data) => {\n      if (err) return reject(err)\n      return resolve(data)\n    }\n  })\n  cb.promise = promise\n  return cb\n}\n\nexport function execCallback(fn: Function | null | undefined, err: any, data = null) {\n  if (fn && typeof fn === 'function') {\n    return fn(err, data)\n  }\n  if (err) {\n    throw err\n  }\n  return data\n}\n\nexport function printWarn(error: string, msg: string) {\n  console.warn(`[${getSdkName()}][${error}]:${msg}`)\n}\n\nexport function printError(error: string, msg: string) {\n  console.error({\n    code: error,\n    msg: `[${getSdkName()}][${error}]:${msg}`,\n  })\n}\nexport function printInfo(error: string, msg: string) {\n  console.log(`[${getSdkName()}][${error}]:${msg}`)\n}\nexport function throwError(error: string, msg: string) {\n  throw new Error(JSON.stringify({\n    code: error,\n    msg: `[${getSdkName()}][${error}]:${msg}`,\n  }),)\n}\n\ninterface IPrintGroupLogOptions {\n  title: string\n  subtitle: string | object\n  content: {\n    type: 'info' | 'warn' | 'error'\n    body: string | Error\n  }[]\n  printTrace?: boolean\n  collapsed?: boolean\n}\nexport function printGroupLog(options: IPrintGroupLogOptions) {\n  const { title, subtitle = '', content = [], printTrace = false, collapsed = false } = options\n  if (collapsed) {\n    (console.groupCollapsed || console.error)(title, subtitle)\n  } else {\n    (console.group || console.error)(title, subtitle)\n  }\n  for (const tip of content) {\n    const { type, body } = tip\n    switch (type) {\n      case 'info':\n        console.log(body)\n        break\n      case 'warn':\n        console.warn(body)\n        break\n      case 'error':\n        console.error(body)\n        break\n    }\n  }\n  if (printTrace) {\n    (console.trace || console.log)('stack trace:')\n  }\n  console.groupEnd?.()\n}\n\nexport const sleep = (ms = 0) => new Promise(r => setTimeout(r, ms))\n\nexport function transformPhone(phoneNumber: string) {\n  return `+86${phoneNumber}`\n}\n\nexport const parseQueryString = (queryString) => {\n  queryString = queryString.replace(/^\\?/, '')\n  const params = {}\n  const pairs = queryString.split('&')\n\n  pairs.forEach((item) => {\n    let [key, value] = item.split('=')\n    key = decodeURIComponent(key)\n    value = decodeURIComponent(value)\n    if (key) {\n      if (params[key]) {\n        if (Array.isArray(params[key])) {\n          params[key].push(value)\n        } else {\n          params[key] = [params[key], value]\n        }\n      } else {\n        params[key] = value\n      }\n    }\n  })\n\n  return params\n}\n\n// 解析URL参数\nexport function parseCaptcha(url) {\n  let queryObj: any = {}\n  const matched = url.match(/^(data:.*?)(\\?[^#\\s]*)?$/)\n  if (matched) {\n    // eslint-disable-next-line prefer-destructuring\n    url = matched[1]\n    const search = matched[2]\n    if (search) {\n      queryObj = parseQueryString(search)\n    }\n  }\n  const { token, ...restQueryObj } = queryObj\n  if (/^data:/.test(url) && !token) {\n    return {\n      error: 'invalid_argument',\n      error_description: `invalid captcha data: ${url}`,\n    }\n  }\n  if (!token) {\n    return {\n      error: 'unimplemented',\n      error_description: 'need to impl captcha data',\n    }\n  }\n  // 解析url得到的参数\n  return {\n    state: restQueryObj.state,\n    token, // 验证码token\n    captchaData: url, // 验证码base64图片\n  }\n}\n", "import { CloudbaseAdapter, SDKAdapterInterface, NodeAdapterInterface } from '@cloudbase/adapter-interface'\nimport * as Web from './platforms/web'\nimport { isArray } from '../libs/util'\n\nexport enum RUNTIME {\n  WEB = 'web',\n  WX_MP = 'wx_mp', // 微信小程序\n}\n\ntype ICloudbaseAdapter = CloudbaseAdapter & {\n  genAdapter: (options?: any) => SDKAdapterInterface | NodeAdapterInterface\n}\n\nexport function useAdapters(adapters: ICloudbaseAdapter | ICloudbaseAdapter[], options?: any) {\n  const adapterList: ICloudbaseAdapter[] = isArray(adapters)\n    ? (adapters as ICloudbaseAdapter[])\n    : [adapters as ICloudbaseAdapter]\n  for (const adapter of adapterList) {\n    const { isMatch, genAdapter, runtime } = adapter\n    if (isMatch()) {\n      return {\n        adapter: { isMatch, ...genAdapter(options) },\n        runtime,\n      }\n    }\n  }\n}\n\nexport function useDefaultAdapter() {\n  return {\n    adapter: { ...Web.genAdapter() },\n    runtime: RUNTIME.WEB,\n  }\n}\n", "import { StorageInterface, AbstractStorage, SDKAdapterInterface } from '@cloudbase/adapter-interface'\nimport { ICloudbaseCache, ICacheConfig } from '@cloudbase/types/cache'\nimport { KV, Persistence, ICloudbasePlatformInfo } from '@cloudbase/types'\nimport { printWarn } from './util'\nimport { ERRORS, getSdkName } from '../constants'\n\n/**\n * persitence=none时登录态保存在内存中\n */\nclass TcbCacheObject extends AbstractStorage {\n  private readonly root: any\n  constructor(root: any) {\n    super()\n    this.root = root\n    if (!root.tcbCacheObject) {\n      root.tcbCacheObject = {}\n    }\n  }\n  public setItem(key: string, value: any) {\n    this.root.tcbCacheObject[key] = value\n  }\n  public getItem(key: string) {\n    return this.root.tcbCacheObject[key]\n  }\n  public removeItem(key: string) {\n    delete this.root.tcbCacheObject[key]\n  }\n  public clear() {\n    delete this.root.tcbCacheObject\n  }\n}\n/**\n * 工厂函数\n */\nfunction createStorage(persistence: Persistence, adapter: SDKAdapterInterface): StorageInterface {\n  switch (persistence) {\n    case 'local':\n      if (!adapter.localStorage) {\n        printWarn(ERRORS.INVALID_PARAMS, 'localStorage is not supported on current platform')\n        // 不支持localstorage的平台降级为none\n        return new TcbCacheObject(adapter.root)\n      }\n      return adapter.localStorage\n    case 'none':\n      return new TcbCacheObject(adapter.root)\n    default:\n      if (!adapter.localStorage) {\n        printWarn(ERRORS.INVALID_PARAMS, 'localStorage is not supported on current platform')\n        // 不支持localstorage的平台降级为none\n        return new TcbCacheObject(adapter.root)\n      }\n      return adapter.localStorage\n  }\n}\n\nexport class CloudbaseCache implements ICloudbaseCache {\n  public keys: KV<string> = {}\n\n  private persistenceTag: Persistence\n  private platformInfo: ICloudbasePlatformInfo\n  private storage: StorageInterface\n\n  constructor(config: ICacheConfig) {\n    const { persistence, platformInfo = {}, keys = {} } = config\n    this.platformInfo = platformInfo\n    if (!this.storage) {\n      this.persistenceTag = this.platformInfo.adapter.primaryStorage || persistence\n      this.storage = createStorage(this.persistenceTag, this.platformInfo.adapter)\n      this.keys = keys\n    }\n  }\n  /**\n   * @getter storage模式-同步/异步\n   */\n  get mode() {\n    return this.storage.mode || 'sync'\n  }\n  get persistence(): Persistence {\n    return this.persistenceTag\n  }\n\n  public setStore(key: string, value: any, version?: any) {\n    if (this.mode === 'async') {\n      printWarn(ERRORS.INVALID_OPERATION, 'current platform\\'s storage is asynchronous, please use setStoreAsync insteed')\n      return\n    }\n    if (!this.storage) {\n      return\n    }\n\n    try {\n      const val = {\n        version: version || 'localCachev1',\n        content: value,\n      }\n      this.storage.setItem(key, JSON.stringify(val))\n    } catch (e) {\n      throw new Error(JSON.stringify({\n        code: ERRORS.OPERATION_FAIL,\n        msg: `[${getSdkName()}][${ERRORS.OPERATION_FAIL}]setStore failed`,\n        info: e,\n      }))\n    }\n\n    return\n  }\n  public async setStoreAsync(key: string, value: any, version?: any) {\n    if (!this.storage) {\n      return\n    }\n\n    try {\n      const val = {\n        version: version || 'localCachev1',\n        content: value,\n      }\n      await this.storage.setItem(key, JSON.stringify(val))\n    } catch (e) {\n      return\n    }\n\n    return\n  }\n  public getStore(key: string, version?: string) {\n    if (this.mode === 'async') {\n      printWarn(ERRORS.INVALID_OPERATION, 'current platform\\'s storage is asynchronous, please use getStoreAsync insteed')\n      return\n    }\n    try {\n      // 测试用例使用\n      if (typeof process !== 'undefined' && process.env?.tcb_token) {\n        return process.env.tcb_token\n      }\n\n      if (!this.storage) {\n        return ''\n      }\n    } catch (e) {\n      return ''\n    }\n\n    version = version || 'localCachev1'\n\n    const content = this.storage.getItem(key)\n    if (!content) {\n      return ''\n    }\n\n    if (content.indexOf(version) >= 0) {\n      const d = JSON.parse(content)\n      return d.content\n    }\n    return ''\n  }\n  public async getStoreAsync(key: string, version?: string) {\n    try {\n      // 测试用例使用\n      if (typeof process !== 'undefined' && process.env?.tcb_token) {\n        return process.env.tcb_token\n      }\n\n      if (!this.storage) {\n        return ''\n      }\n    } catch (e) {\n      return ''\n    }\n\n    version = version || 'localCachev1'\n\n    const content = await this.storage.getItem(key)\n    if (!content) {\n      return ''\n    }\n\n    if (content.indexOf(version) >= 0) {\n      const d = JSON.parse(content)\n      return d.content\n    }\n    return ''\n  }\n  public removeStore(key: string) {\n    if (this.mode === 'async') {\n      printWarn(ERRORS.INVALID_OPERATION, 'current platform\\'s storage is asynchronous, please use removeStoreAsync insteed')\n      return\n    }\n    this.storage.removeItem(key)\n  }\n  public async removeStoreAsync(key: string) {\n    await this.storage.removeItem(key)\n  }\n}\n", "import { isString, isInstanceOf } from './util'\nimport { Listeners, ICloudbaseEventEmitter } from '@cloudbase/types/events'\n\n\n/**\n * @private\n * @function _addEventListener - 添加监听\n * @param {string} name - event名称\n * @param {Function} listener - 响应函数\n * @param {Listeners} listeners - 已存响应函数集合\n */\nfunction customeAddEventListener(name: string, listener: Function, listeners: Listeners) {\n  listeners[name] = listeners[name] || []\n  listeners[name].push(listener)\n}\n/**\n * @private\n * @function _removeEventListener - 移除监听\n * @param {string} name - event名称\n * @param {Function} listener - 响应函数\n * @param {Listeners} listeners - 已存响应函数集合\n */\nfunction customRemoveEventListener(name: string, listener: Function, listeners: Listeners) {\n  if (listeners?.[name]) {\n    const index = listeners[name].indexOf(listener)\n    if (index !== -1) {\n      listeners[name].splice(index, 1)\n    }\n  }\n}\ninterface IEvent {\n  name: string;\n  target: any;\n  data: any;\n}\n/**\n * 自定义事件\n * @class CloudbaseEvent\n * @param {string} name - 类型\n * @param {any} data - 数据\n */\nexport class CloudbaseEvent implements IEvent {\n  public readonly name: string\n  public target: any\n  public data: any\n\n  constructor(name: string, data: any) {\n    this.data = data || null\n    this.name = name\n  }\n}\n/**\n * 自定义错误事件\n * @class IErrorEvent\n * @extends CloudbaseEvent\n * @param {Error} error - 错误信息对象\n * @param {any} data  - 数据\n */\nexport class IErrorEvent extends CloudbaseEvent {\n  public readonly error: Error\n  constructor(error: Error, data?: any) {\n    super('error', { error, data })\n    this.error = error\n  }\n}\n\n/**\n * @class CloudbaseEventEmitter\n */\nexport class CloudbaseEventEmitter implements ICloudbaseEventEmitter {\n  /**\n   * @private\n   * @readonly\n   * @property {Listeners} listeners - 响应函数集合\n   * @default `{}`\n   */\n  private readonly listeners: Listeners = {}\n\n  /**\n   * @public\n   * @method on - 添加监听\n   * @param {string} name - event名称\n   * @param {Function} listener - 响应函数\n   * @return `this`\n   */\n  public on(name: string, listener: Function): this {\n    customeAddEventListener(name, listener, this.listeners)\n    return this\n  }\n  /**\n   * @public\n   * @method off - 移除监听\n   * @param {string} name - event名称\n   * @param {Function} listener - 响应函数\n   * @return `this`\n   */\n  public off(name: string, listener: Function): this {\n    customRemoveEventListener(name, listener, this.listeners)\n    return this\n  }\n  /**\n   * @public\n   * @method fire - 触发事件\n   * @param {string|CloudbaseEvent} event - event\n   * @return `this`\n   */\n  public fire(event: string | CloudbaseEvent, data?: any): this {\n    // 打印错误信息\n    if (isInstanceOf(event, IErrorEvent)) {\n      console.error((event as IErrorEvent).error)\n      return this\n    }\n\n    const ev: CloudbaseEvent = isString(event) ? new CloudbaseEvent(event as string, data || {}) : event as CloudbaseEvent\n\n    const { name } = ev\n\n    if (this.listens(name)) {\n      ev.target = this\n\n      const handlers = this.listeners[name] ? [...this.listeners[name]] : []\n      for (const fn of handlers) {\n        fn.call(this, ev)\n      }\n    }\n\n    return this\n  }\n\n  /**\n   * @private\n   * @method listens - 判断是否监听了name事件\n   * @param {string} name - event名称\n   * @return `boolean`\n   */\n  private listens(name: string): boolean {\n    return this.listeners[name] && this.listeners[name].length > 0\n  }\n}\n\n\nconst eventEmitter = new CloudbaseEventEmitter()\n\nexport function addEventListener(event: string, callback: Function) {\n  eventEmitter.on(event, callback)\n}\n\nexport function activateEvent(event: string, data: any = {}) {\n  eventEmitter.fire(event, data)\n}\n\nexport function removeEventListener(event: string, callback: Function) {\n  eventEmitter.off(event, callback)\n}\n", "import { CloudbaseEventEmitter } from './events'\n\nexport const bus = new CloudbaseEventEmitter()\n\nexport const LANG_CHANGE_EVENT = 'lang_change'\n", "export * from './decorators'\n", "import { printGroupLog } from '../libs/util'\nimport { IS_DEBUG_MODE } from '../constants'\n\ninterface ICatchErrorsDecoratorOptions {\n  mode?: 'sync' | 'async';\n  customInfo?: {\n    className?: string;\n    methodName?: string;\n  };\n  title?: string;\n  messages?: string[];\n}\n// firefox的stack格式与chrome不同\nlet isFirefox = false\nif (typeof navigator !== 'undefined' && navigator.userAgent) {\n  isFirefox = navigator.userAgent.indexOf('Firefox') !== -1\n}\n/**\n * decorate在stack中一般都特定的规范\n */\nconst REG_STACK_DECORATE = isFirefox\n  ? /(\\.js\\/)?__decorate(\\$\\d+)?<@.*\\d$/\n  : /(\\/\\w+\\.js\\.)?__decorate(\\$\\d+)?\\s*\\(.*\\)$/\nconst REG_STACK_LINK = /https?:\\/\\/.+:\\d*\\/.*\\.js:\\d+:\\d+/\n/**\n * debug模式强化日志信息\n * @param options\n */\nexport function catchErrorsDecorator(options: ICatchErrorsDecoratorOptions) {\n  const { mode = 'async', customInfo = {}, title, messages = [] } = options\n\n  return function (\n    target: any,\n    methodName: string,\n    descriptor: TypedPropertyDescriptor<Function>\n  ) {\n    // 生产环境禁用\n    if (!IS_DEBUG_MODE) {\n      return\n    }\n    const className = customInfo.className || target.constructor.name\n    const fnName = customInfo.methodName || methodName\n    const fn = descriptor.value\n\n    // 被decorator装饰的源码link\n    // 在descriptor.value外部此处创建的stack层次可触达源码\n    // 而descriptor.value内部有可能由于stack太深无法触达\n    const sourceLink = getSourceLink(new Error())\n\n    if (mode === 'sync') {\n      descriptor.value = function (...args: any[]) {\n        // 此处的stack作用主要是为了获取被decorator装饰的源码class和method名称\n        const innerErr: any = getRewritedError({\n          err: new Error(),\n          className,\n          methodName: fnName,\n          sourceLink,\n        })\n        try {\n          return fn.apply(this, args)\n        } catch (err) {\n          let failErr = err\n          const { message: errMsg, error, error_description: errorDescription } = err\n          const logs: any = {\n            title: title || `${className}.${fnName} failed`,\n            content: [{\n              type: 'error',\n              body: err,\n            }],\n          }\n          // 只特殊处理SDK业务逻辑抛出的错误-JSON string\n          if (errMsg && /^\\{.*\\}$/.test(errMsg)) {\n            const msg = JSON.parse(errMsg)\n            logs.subtitle = errMsg\n            if (msg.code) {\n              if (innerErr) {\n                innerErr.code = msg.code\n                innerErr.msg = msg.msg\n              } else {\n                err.code = msg.code\n                err.message = msg.msg\n              }\n              failErr = innerErr || err\n              logs.content = messages.map(msg => ({\n                type: 'info',\n                body: msg,\n              }))\n            }\n          }\n\n          // oauth 错误特殊处理\n          if (error && errorDescription) {\n            logs.subtitle = errorDescription\n            if (innerErr) {\n              innerErr.code = error\n              innerErr.msg = errorDescription\n            } else {\n              err.code = error\n              err.message = errorDescription\n            }\n            failErr = innerErr || err\n            logs.content = messages.map(msg => ({\n              type: 'info',\n              body: msg,\n            }))\n          }\n          printGroupLog(logs)\n          throw failErr\n        }\n      }\n    } else {\n      descriptor.value = async function (...args: any[]) {\n        const innerErr: any = getRewritedError({\n          err: new Error(),\n          className,\n          methodName: fnName,\n          sourceLink,\n        })\n\n        try {\n          return await fn.apply(this, args)\n        } catch (err) {\n          let failErr = err\n          const { message: errMsg, error, error_description: errorDescription } = err\n          const logs: any = {\n            title: title || `${className}.${fnName} failed`,\n            content: [{\n              type: 'error',\n              body: err,\n            }],\n          }\n          // 只特殊处理SDK业务逻辑抛出的错误-JSON string\n          if (errMsg && /^\\{.*\\}$/.test(errMsg)) {\n            const msg = JSON.parse(errMsg)\n            logs.subtitle = msg\n            if (msg.code) {\n              if (innerErr) {\n                innerErr.code = msg.code\n                innerErr.message = msg.msg\n              } else {\n                err.code = msg.code\n                err.message = msg.msg\n              }\n              failErr = innerErr || err\n              logs.content = messages.map(msg => ({\n                type: 'info',\n                body: msg,\n              }))\n            }\n          }\n\n          // oauth 错误特殊处理\n          if (error && errorDescription) {\n            logs.subtitle = errorDescription\n            if (innerErr) {\n              innerErr.code = error\n              innerErr.msg = errorDescription\n            } else {\n              err.code = error\n              err.message = errorDescription\n            }\n            failErr = innerErr || err\n            logs.content = messages.map(msg => ({\n              type: 'info',\n              body: msg,\n            }))\n          }\n          printGroupLog(logs)\n          throw failErr\n        }\n      }\n    }\n  }\n}\n\n/**\n * 在原始堆栈中查找装饰器条目并返回源码链接link\n * @param err\n */\nfunction getSourceLink(err: Error) {\n  let sourceLink = ''\n  const outterErrStacks = err.stack.split('\\n')\n  const indexOfDecorator = outterErrStacks.findIndex(str => REG_STACK_DECORATE.test(str))\n\n  if (indexOfDecorator !== -1) {\n    const match = REG_STACK_LINK.exec(outterErrStacks[indexOfDecorator + 1] || '')\n\n    sourceLink = match ? match[0] : ''\n  }\n  return sourceLink\n}\n\n/**\n * 在原始堆栈中查找装饰器条目，剔除其后的无用堆栈，并将链接替换为源码link\n * @param options\n */\nfunction getRewritedError(options: {\n  err: Error;\n  className: string;\n  methodName: string;\n  sourceLink: string;\n}) {\n  const { err, className, methodName, sourceLink } = options\n  // 找不到源码link返回null，后续逻辑将打印原堆栈信息\n  if (!sourceLink) {\n    return null\n  }\n\n  const innerErrStack = err.stack.split('\\n')\n  const REG_STACK_INNER_METHOD = isFirefox\n    ? /^catchErrorsDecorator\\/<\\/descriptor.value@.*\\d$/\n    : new RegExp(`${className}\\\\.descriptor.value\\\\s*\\\\[as\\\\s${methodName}\\\\]\\\\s*\\\\(.*\\\\)$`)\n  const REG_STACK_INNER_METHOD_WITHOUT_LINK = isFirefox\n    ? /^catchErrorsDecorator\\/<\\/descriptor.value/\n    : new RegExp(`${className}\\\\.descriptor.value\\\\s*\\\\[as\\\\s${methodName}\\\\]`)\n  const indexOfSource = innerErrStack.findIndex(str => REG_STACK_INNER_METHOD.test(str))\n  let innerErr: Error\n  if (indexOfSource !== -1) {\n    // @ts-ignore\n    const realErrStack = innerErrStack.filter((v, i) => i > indexOfSource)\n    realErrStack.unshift(innerErrStack[indexOfSource]\n      .replace(REG_STACK_INNER_METHOD_WITHOUT_LINK, `${className}.${methodName}`)\n      .replace(REG_STACK_LINK, sourceLink))\n    innerErr = new Error()\n    innerErr.stack = `${isFirefox ? '@debugger' : 'Error'}\\n${realErrStack.join('\\n')}`\n  }\n  return innerErr\n}\n", "export default class AbortController {\n  listeners: Array<CallableFunction> = []\n  signal = {\n    aborted: false,\n    addEventListener: (e: string, f: CallableFunction) => {\n      if (e === 'abort') {\n        this.listeners.push(f)\n      }\n    },\n  }\n  // eslint-disable-next-line @typescript-eslint/no-useless-constructor\n  constructor() {}\n\n  abort() {\n    if (this.signal.aborted) return\n\n    this.signal.aborted = true\n    this.listeners.forEach(f => f())\n  }\n}\n", "/**\n * The code was extracted from:\n * https://github.com/davidchambers/Base64.js\n */\n\nvar chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\nfunction InvalidCharacterError(message) {\n    this.message = message;\n}\n\nInvalidCharacterError.prototype = new Error();\nInvalidCharacterError.prototype.name = \"InvalidCharacterError\";\n\nfunction polyfill(input) {\n    var str = String(input).replace(/=+$/, \"\");\n    if (str.length % 4 == 1) {\n        throw new InvalidCharacterError(\n            \"'atob' failed: The string to be decoded is not correctly encoded.\"\n        );\n    }\n    for (\n        // initialize result and counters\n        var bc = 0, bs, buffer, idx = 0, output = \"\";\n        // get next character\n        (buffer = str.charAt(idx++));\n        // character found in table? initialize bit storage and add its ascii value;\n        ~buffer &&\n        ((bs = bc % 4 ? bs * 64 + buffer : buffer),\n            // and if not first of each 4 characters,\n            // convert the first 8 bits to one ascii character\n            bc++ % 4) ?\n        (output += String.fromCharCode(255 & (bs >> ((-2 * bc) & 6)))) :\n        0\n    ) {\n        // try to find character in table (0-63, not found => -1)\n        buffer = chars.indexOf(buffer);\n    }\n    return output;\n}\n\nexport default (typeof window !== \"undefined\" &&\n    window.atob &&\n    window.atob.bind(window)) ||\npolyfill;", "import atob from \"./atob\";\n\nfunction b64DecodeUnicode(str) {\n    return decodeURIComponent(\n        atob(str).replace(/(.)/g, function(m, p) {\n            var code = p.charCodeAt(0).toString(16).toUpperCase();\n            if (code.length < 2) {\n                code = \"0\" + code;\n            }\n            return \"%\" + code;\n        })\n    );\n}\n\nexport default function(str) {\n    var output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    switch (output.length % 4) {\n        case 0:\n            break;\n        case 2:\n            output += \"==\";\n            break;\n        case 3:\n            output += \"=\";\n            break;\n        default:\n            throw \"Illegal base64url string!\";\n    }\n\n    try {\n        return b64DecodeUnicode(output);\n    } catch (err) {\n        return atob(output);\n    }\n}", "\"use strict\";\n\nimport base64_url_decode from \"./base64_url_decode\";\n\nexport function InvalidTokenError(message) {\n    this.message = message;\n}\n\nInvalidTokenError.prototype = new Error();\nInvalidTokenError.prototype.name = \"InvalidTokenError\";\n\nexport default function(token, options) {\n    if (typeof token !== \"string\") {\n        throw new InvalidTokenError(\"Invalid token specified\");\n    }\n\n    options = options || {};\n    var pos = options.header === true ? 0 : 1;\n    try {\n        return JSON.parse(base64_url_decode(token.split(\".\")[pos]));\n    } catch (e) {\n        throw new InvalidTokenError(\"Invalid token specified: \" + e.message);\n    }\n}", "import { KV } from '@cloudbase/types'\nimport { ICloudbaseComponent, ICloudbaseHook } from '@cloudbase/types/component'\nimport { constants } from '@cloudbase/utilities'\n\nconst { ERRORS } = constants\n\nconst components: KV<ICloudbaseComponent> = {}\n\nexport function registerComponent(app: any, component: ICloudbaseComponent) {\n  const { name, namespace, entity, injectEvents, IIFE = false } = component\n  // 不允许重复注册或命名空间重名\n  if (components[name] || (namespace && app[namespace])) {\n    throw new Error(JSON.stringify({\n      code: ERRORS.INVALID_OPERATION,\n      msg: `Duplicate component ${name}`,\n    }))\n  }\n  // IIFE类型的组件以app为scope执行entity函数，不挂载到app.prototype上\n  if (IIFE) {\n    if (!entity || typeof entity !== 'function') {\n      throw new Error(JSON.stringify({\n        code: ERRORS.INVALID_PARAMS,\n        msg: 'IIFE component\\'s entity must be a function',\n      }))\n    }\n    entity.call(app)\n  }\n\n  components[name] = component\n\n  if (namespace) {\n    (app as any).prototype[namespace] = entity\n  } else {\n    deepExtend((app as any).prototype, entity)\n  }\n  if (injectEvents) {\n    const { bus, events } = injectEvents\n    if (!bus || !events || events.length === 0) {\n      return\n    }\n    const originCallback = (app as any).prototype.fire || function () {}\n    if (!(app as any).prototype.events) {\n      (app as any).prototype.events = {}\n    }\n    const originEvents: KV<any> = (app as any).prototype.events || {}\n    if (originEvents[name]) {\n      (app as any).prototype.events[name].events = [...(app as any).prototype.events[name].events, ...events]\n    } else {\n      (app as any).prototype.events[name] = { bus, events }\n    }\n    (app as any).prototype.fire = function (eventName: string, data?: any) {\n      originCallback(eventName, data)\n      const eventNames = Object.keys(this.events)\n      for (const name of eventNames) {\n        const { bus, events: eventList } = this.events[name]\n        if (eventList.includes(eventName)) {\n          bus.fire(eventName, data)\n          break\n        }\n      }\n    }\n  }\n}\n\nfunction deepExtend(target: any, source: any): KV<any> {\n  if (!(source instanceof Object)) {\n    return source\n  }\n\n  switch (source.constructor) {\n    case Date: {\n      const dateValue = source as Date\n      return new Date(dateValue.getTime())\n    }\n    case Object:\n      if (target === undefined) {\n        target = {}\n      }\n      break\n    case Array:\n      target = []\n      break\n    default:\n      return source\n  }\n  const sourceKeys = Object.keys(source)\n  for (const key of sourceKeys) {\n    if (!Object.prototype.hasOwnProperty.call(source, key)) {\n      continue\n    }\n    target[key] = deepExtend(target[key], source[key])\n  }\n\n  return target\n}\n\nexport function registerHook(app: any, hook: ICloudbaseHook) {\n  const { entity, target } = hook\n  if (Object.prototype.hasOwnProperty.call(app, target)) {\n    throw new Error(JSON.stringify({\n      code: ERRORS.INVALID_OPERATION,\n      msg: `target:${target} is not exist`,\n    }))\n  }\n  const originMethod = app.prototype[target]\n  if (typeof originMethod !== 'function') {\n    throw new Error(JSON.stringify({\n      code: ERRORS.INVALID_OPERATION,\n      msg: `target:${target} is not a function which is the only type supports hook`,\n    }))\n  }\n  app.prototype[target] = function (...args: any) {\n    entity.call(this, ...args)\n    return originMethod.call(this, ...args)\n  }\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { AbstractSDKRequest, StorageType, formatUrl, } from \"@cloudbase/adapter-interface\";\nimport { ReadableStream } from \"web-streams-polyfill\";\nfunction isMatch() {\n    if (typeof wx === 'undefined') {\n        return false;\n    }\n    if (typeof Page === 'undefined') {\n        return false;\n    }\n    if (!wx.getSystemInfoSync) {\n        return false;\n    }\n    if (!wx.getStorageSync) {\n        return false;\n    }\n    if (!wx.setStorageSync) {\n        return false;\n    }\n    if (!wx.connectSocket) {\n        return false;\n    }\n    if (!wx.request) {\n        return false;\n    }\n    try {\n        if (!wx.getSystemInfoSync()) {\n            return false;\n        }\n        if (wx.getSystemInfoSync().AppPlatform === 'qq') {\n            return false;\n        }\n    }\n    catch (e) {\n        return false;\n    }\n    return true;\n}\nfunction isPlugin() {\n    return typeof App === 'undefined' && typeof getApp === 'undefined' && !wx.onAppHide && !wx.offAppHide && !wx.onAppShow && !wx.offAppShow;\n}\nvar TASK_ABORT_ERROR_MSG = \"Error when aborting requestTask\";\nvar WxRequest = (function (_super) {\n    __extends(WxRequest, _super);\n    function WxRequest(config) {\n        if (config === void 0) { config = {}; }\n        var _this = _super.call(this) || this;\n        var timeout = config.timeout, timeoutMsg = config.timeoutMsg, restrictedMethods = config.restrictedMethods;\n        _this._timeout = timeout || 0;\n        _this._timeoutMsg = timeoutMsg || '请求超时';\n        _this._restrictedMethods = restrictedMethods || ['get', 'post', 'upload', 'download'];\n        return _this;\n    }\n    WxRequest.prototype.post = function (options) {\n        var self = this;\n        return new Promise(function (resolve, reject) {\n            var url = options.url, data = options.data, headers = options.headers;\n            var task = wx.request({\n                url: formatUrl(\"https:\", url),\n                data: data,\n                timeout: self._timeout,\n                method: \"POST\",\n                header: headers,\n                success: function (res) {\n                    if (res.statusCode >= 200 && res.statusCode < 300) {\n                        resolve({\n                            statusCode: res.statusCode,\n                            status: res.statusCode,\n                            data: res.data,\n                        });\n                    }\n                    else {\n                        reject(res);\n                    }\n                },\n                fail: function (err) {\n                    reject(err);\n                },\n                complete: function (err) {\n                    if (!err || !err.errMsg) {\n                        return;\n                    }\n                    if (!self._timeout ||\n                        self._restrictedMethods.indexOf(\"post\") === -1) {\n                        return;\n                    }\n                    var errMsg = err.errMsg;\n                    if (errMsg === \"request:fail timeout\") {\n                        console.warn(self._timeoutMsg);\n                        try {\n                            task.abort();\n                        }\n                        catch (e) { }\n                    }\n                },\n            });\n        });\n    };\n    WxRequest.prototype.get = function (options) {\n        var self = this;\n        return new Promise(function (resolve, reject) {\n            var url = options.url, body = options.body, headers = options.headers;\n            var finalUrl = formatUrl(\"https:\", url);\n            var task = wx.request({\n                url: finalUrl,\n                data: body,\n                timeout: self._timeout,\n                method: \"GET\",\n                header: headers,\n                success: function (res) {\n                    if (res.statusCode >= 200 && res.statusCode < 300) {\n                        resolve({\n                            statusCode: res.statusCode,\n                            status: res.statusCode,\n                            data: res.data,\n                        });\n                    }\n                    else {\n                        reject(res);\n                    }\n                },\n                fail: function (err) {\n                    reject(err);\n                },\n                complete: function (err) {\n                    if (!err || !err.errMsg) {\n                        return;\n                    }\n                    if (!self._timeout || self._restrictedMethods.indexOf(\"get\") === -1) {\n                        return;\n                    }\n                    var errMsg = err.errMsg;\n                    if (errMsg.includes(\"timeout\")) {\n                        console.warn(self._timeoutMsg);\n                        try {\n                            task.abort();\n                        }\n                        catch (e) {\n                            console.warn(TASK_ABORT_ERROR_MSG, e);\n                        }\n                    }\n                },\n            });\n        });\n    };\n    WxRequest.prototype.upload = function (options) {\n        var _this = this;\n        var self = this;\n        return new Promise(function (resolve) { return __awaiter(_this, void 0, void 0, function () {\n            var url, file, data, headers, onUploadProgress, task;\n            return __generator(this, function (_a) {\n                url = options.url, file = options.file, data = options.data, headers = options.headers, onUploadProgress = options.onUploadProgress;\n                task = wx.uploadFile({\n                    url: url,\n                    filePath: file,\n                    name: 'file',\n                    formData: __assign({}, data),\n                    header: headers,\n                    timeout: this._timeout,\n                    success: function (res) {\n                        var result = {\n                            statusCode: res.statusCode,\n                            data: res.data || {}\n                        };\n                        if (res.statusCode === 200 && data.success_action_status) {\n                            result.statusCode = parseInt(data.success_action_status, 10);\n                        }\n                        resolve(result);\n                    },\n                    fail: function (err) {\n                        resolve(err);\n                    },\n                    complete: function (err) {\n                        if (!err || !err.errMsg) {\n                            return;\n                        }\n                        if (!self._timeout || self._restrictedMethods.indexOf('upload') === -1) {\n                            return;\n                        }\n                        var errMsg = err.errMsg;\n                        if (errMsg === 'request:fail timeout') {\n                            console.warn(self._timeoutMsg);\n                            try {\n                                task.abort();\n                            }\n                            catch (e) { }\n                        }\n                    }\n                });\n                if (onUploadProgress) {\n                    task.onProgressUpdate(function (res) {\n                        onUploadProgress(res);\n                    });\n                }\n                return [2];\n            });\n        }); });\n    };\n    WxRequest.prototype.download = function (options) {\n        var _this = this;\n        var self = this;\n        return new Promise(function (resolve, reject) {\n            var url = options.url, headers = options.headers;\n            var task = wx.downloadFile({\n                url: formatUrl('https:', url),\n                header: headers,\n                timeout: _this._timeout,\n                success: function (res) {\n                    if (res.statusCode === 200 && res.tempFilePath) {\n                        resolve({\n                            statusCode: 200,\n                            tempFilePath: res.tempFilePath\n                        });\n                    }\n                    else {\n                        resolve(res);\n                    }\n                },\n                fail: function (err) {\n                    reject(err);\n                },\n                complete: function (err) {\n                    if (!err || !err.errMsg) {\n                        return;\n                    }\n                    if (!self._timeout || self._restrictedMethods.indexOf('download') === -1) {\n                        return;\n                    }\n                    var errMsg = err.errMsg;\n                    if (errMsg === 'request:fail timeout') {\n                        console.warn(self._timeoutMsg);\n                        try {\n                            task.abort();\n                        }\n                        catch (e) { }\n                    }\n                }\n            });\n        });\n    };\n    WxRequest.prototype.fetch = function (options) {\n        var url = options.url, body = options.body, enableAbort = options.enableAbort, headers = options.headers, method = options.method, _a = options.stream, shouldStream = _a === void 0 ? false : _a, signal = options.signal, _timeout = options.timeout;\n        var self = this;\n        var timeout = (_timeout !== null && _timeout !== void 0 ? _timeout : this._timeout);\n        var controller = null;\n        var stream = new ReadableStream({\n            start: function (c) {\n                controller = c;\n            },\n            cancel: function () {\n                controller = null;\n            },\n        });\n        return new Promise(function (resolve, reject) {\n            shouldStream && resolve({ data: stream });\n            var task = wx.request({\n                url: formatUrl(\"https:\", url),\n                data: body,\n                timeout: timeout,\n                method: method.toUpperCase(),\n                header: headers,\n                success: function (res) {\n                    var _a;\n                    (_a = controller) === null || _a === void 0 ? void 0 : _a.close();\n                    !shouldStream && resolve(res);\n                },\n                fail: function (err) {\n                    var _a;\n                    (_a = controller) === null || _a === void 0 ? void 0 : _a.close();\n                    reject(err);\n                    if (shouldStream) {\n                        throw err;\n                    }\n                },\n                complete: function (err) {\n                    if (!err || !err.errMsg) {\n                        return;\n                    }\n                    if (!timeout ||\n                        self._restrictedMethods.indexOf(\"post\") === -1 ||\n                        !enableAbort) {\n                        return;\n                    }\n                    var errMsg = err.errMsg;\n                    if (errMsg === \"request:fail timeout\") {\n                        console.warn(self._timeoutMsg);\n                        try {\n                            task.abort();\n                        }\n                        catch (e) {\n                            console.warn(TASK_ABORT_ERROR_MSG, e);\n                        }\n                    }\n                },\n                enableChunked: shouldStream,\n            });\n            task.onChunkReceived(function (buffer) {\n                var _a;\n                (_a = controller) === null || _a === void 0 ? void 0 : _a.enqueue(new Uint8Array(buffer.data));\n            });\n            if (signal) {\n                var abort_1 = function () {\n                    try {\n                        task.abort();\n                    }\n                    catch (e) {\n                        console.warn(TASK_ABORT_ERROR_MSG, e);\n                    }\n                };\n                if (signal.aborted) {\n                    abort_1();\n                }\n                else {\n                    signal.addEventListener(\"abort\", function () { return abort_1(); });\n                }\n            }\n        });\n    };\n    return WxRequest;\n}(AbstractSDKRequest));\nexport { WxRequest };\nexport var wxMpStorage = {\n    setItem: function (key, value) {\n        wx.setStorageSync(key, value);\n    },\n    getItem: function (key) {\n        return wx.getStorageSync(key);\n    },\n    removeItem: function (key) {\n        wx.removeStorageSync(key);\n    },\n    clear: function () {\n        wx.clearStorageSync();\n    }\n};\nvar WxMpWebSocket = (function () {\n    function WxMpWebSocket(url, options) {\n        if (options === void 0) { options = {}; }\n        var ws = wx.connectSocket(__assign({ url: url }, options));\n        var socketTask = {\n            set onopen(cb) {\n                ws.onOpen(cb);\n            },\n            set onmessage(cb) {\n                ws.onMessage(cb);\n            },\n            set onclose(cb) {\n                ws.onClose(cb);\n            },\n            set onerror(cb) {\n                ws.onError(cb);\n            },\n            send: function (data) { return ws.send({ data: data }); },\n            close: function (code, reason) { return ws.close({\n                code: code,\n                reason: reason\n            }); },\n            get readyState() {\n                return ws.readyState;\n            },\n            CONNECTING: 0,\n            OPEN: 1,\n            CLOSING: 2,\n            CLOSED: 3\n        };\n        return socketTask;\n    }\n    return WxMpWebSocket;\n}());\nexport { WxMpWebSocket };\nexport function parseQueryString(search) {\n    var params = {};\n    var cleanSearch = search.replace(/^[?#]/, \"\");\n    if (!cleanSearch) {\n        return params;\n    }\n    var pairs = cleanSearch.split(\"&\");\n    pairs.forEach(function (item) {\n        var _a = item.split(\"=\"), key = _a[0], value = _a[1];\n        key = decodeURIComponent(key);\n        value = decodeURIComponent(value);\n        if (key) {\n            if (params[key]) {\n                if (Array.isArray(params[key])) {\n                    params[key].push(value);\n                }\n                else {\n                    params[key] = [params[key], value];\n                }\n            }\n            else {\n                params[key] = value;\n            }\n        }\n    });\n    return params;\n}\nfunction genAdapter(options) {\n    var adapter = {\n        root: { globalThis: {} },\n        reqClass: WxRequest,\n        wsClass: WxMpWebSocket,\n        captchaOptions: {\n            openURIWithCallback: function (_url) {\n                var EventBus = options.EventBus;\n                var queryObj = {};\n                var url = _url;\n                console.log(\"openURIWithCallback\", _url);\n                var matched = _url.match(/^(data:.*?)(\\?[^#\\s]*)?$/);\n                if (matched) {\n                    url = matched[1];\n                    console.log('openURIWithCallback url', url);\n                    var search = matched[2];\n                    if (search) {\n                        queryObj = parseQueryString(search);\n                    }\n                }\n                console.log(\"openURIWithCallback queryObj\", queryObj);\n                var token = queryObj.token, restQueryObj = __rest(queryObj, [\"token\"]);\n                if (/^data:/.test(url) && !token) {\n                    return Promise.reject({\n                        error: \"invalid_argument\",\n                        error_description: \"invalie captcha data: \" + _url,\n                    });\n                }\n                if (!token) {\n                    return Promise.reject({\n                        error: \"unimplemented\",\n                        error_description: \"need to impl captcha data\",\n                    });\n                }\n                return new Promise(function (resolve) {\n                    console.log(\"wait for captcha...\");\n                    EventBus.$emit(\"CAPTCHA_DATA_CHANGE\", __assign(__assign({}, restQueryObj), { token: token, url: url }));\n                    EventBus.$once(\"RESOLVE_CAPTCHA_DATA\", function (res) {\n                        resolve(res);\n                    });\n                });\n            },\n        },\n        localStorage: wxMpStorage,\n        primaryStorage: StorageType.local,\n        getAppSign: function () {\n            var info = wx.getAccountInfoSync();\n            if (isPlugin()) {\n                return info && info.plugin ? info.plugin.appId : '';\n            }\n            else {\n                return info && info.miniProgram ? info.miniProgram.appId : '';\n            }\n        }\n    };\n    return adapter;\n}\nvar adapter = {\n    genAdapter: genAdapter,\n    isMatch: isMatch,\n    runtime: 'wx_mp'\n};\nexport default adapter;\n", "/**\n * @license\n * web-streams-polyfill v4.2.0\n * Copyright 2025 Mattias Buelens, Diwank Singh Tomer and other contributors.\n * This code is released under the MIT license.\n * SPDX-License-Identifier: MIT\n */\nfunction e(){}function t(e){return\"object\"==typeof e&&null!==e||\"function\"==typeof e}const r=e;function o(e,t){try{Object.defineProperty(e,\"name\",{value:t,configurable:!0})}catch(e){}}const n=Promise,a=Promise.resolve.bind(n),i=Promise.prototype.then,l=Promise.reject.bind(n),s=a;function u(e){return new n(e)}function c(e){return u(t=>t(e))}function d(e){return l(e)}function f(e,t,r){return i.call(e,t,r)}function b(e,t,o){f(f(e,t,o),void 0,r)}function h(e,t){b(e,t)}function m(e,t){b(e,void 0,t)}function _(e,t,r){return f(e,t,r)}function p(e){f(e,void 0,r)}let y=e=>{if(\"function\"==typeof queueMicrotask)y=queueMicrotask;else{const e=c(void 0);y=t=>f(e,t)}return y(e)};function S(e,t,r){if(\"function\"!=typeof e)throw new TypeError(\"Argument is not a function\");return Function.prototype.apply.call(e,t,r)}function g(e,t,r){try{return c(S(e,t,r))}catch(e){return d(e)}}class v{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(e){const t=this._back;let r=t;16383===t._elements.length&&(r={_elements:[],_next:void 0}),t._elements.push(e),r!==t&&(this._back=r,t._next=r),++this._size}shift(){const e=this._front;let t=e;const r=this._cursor;let o=r+1;const n=e._elements,a=n[r];return 16384===o&&(t=e._next,o=0),--this._size,this._cursor=o,e!==t&&(this._front=t),n[r]=void 0,a}forEach(e){let t=this._cursor,r=this._front,o=r._elements;for(;!(t===o.length&&void 0===r._next||t===o.length&&(r=r._next,o=r._elements,t=0,0===o.length));)e(o[t]),++t}peek(){const e=this._front,t=this._cursor;return e._elements[t]}}const w=Symbol(\"[[AbortSteps]]\"),R=Symbol(\"[[ErrorSteps]]\"),T=Symbol(\"[[CancelSteps]]\"),C=Symbol(\"[[PullSteps]]\"),P=Symbol(\"[[ReleaseSteps]]\");function q(e,t){e._ownerReadableStream=t,t._reader=e,\"readable\"===t._state?B(e):\"closed\"===t._state?function(e){B(e),A(e)}(e):k(e,t._storedError)}function E(e,t){return Or(e._ownerReadableStream,t)}function W(e){const t=e._ownerReadableStream;\"readable\"===t._state?j(e,new TypeError(\"Reader was released and can no longer be used to monitor the stream's closedness\")):function(e,t){k(e,t)}(e,new TypeError(\"Reader was released and can no longer be used to monitor the stream's closedness\")),t._readableStreamController[P](),t._reader=void 0,e._ownerReadableStream=void 0}function O(e){return new TypeError(\"Cannot \"+e+\" a stream using a released reader\")}function B(e){e._closedPromise=u((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r})}function k(e,t){B(e),j(e,t)}function j(e,t){void 0!==e._closedPromise_reject&&(p(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function A(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}const z=Number.isFinite||function(e){return\"number\"==typeof e&&isFinite(e)},D=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function L(e,t){if(void 0!==e&&(\"object\"!=typeof(r=e)&&\"function\"!=typeof r))throw new TypeError(`${t} is not an object.`);var r}function F(e,t){if(\"function\"!=typeof e)throw new TypeError(`${t} is not a function.`)}function I(e,t){if(!function(e){return\"object\"==typeof e&&null!==e||\"function\"==typeof e}(e))throw new TypeError(`${t} is not an object.`)}function $(e,t,r){if(void 0===e)throw new TypeError(`Parameter ${t} is required in '${r}'.`)}function M(e,t,r){if(void 0===e)throw new TypeError(`${t} is required in '${r}'.`)}function Y(e){return Number(e)}function x(e){return 0===e?0:e}function Q(e,t){const r=Number.MAX_SAFE_INTEGER;let o=Number(e);if(o=x(o),!z(o))throw new TypeError(`${t} is not a finite number`);if(o=function(e){return x(D(e))}(o),o<0||o>r)throw new TypeError(`${t} is outside the accepted range of 0 to ${r}, inclusive`);return z(o)&&0!==o?o:0}function N(e,t){if(!Er(e))throw new TypeError(`${t} is not a ReadableStream.`)}function H(e){return new ReadableStreamDefaultReader(e)}function V(e,t){e._reader._readRequests.push(t)}function U(e,t,r){const o=e._reader._readRequests.shift();r?o._closeSteps():o._chunkSteps(t)}function G(e){return e._reader._readRequests.length}function X(e){const t=e._reader;return void 0!==t&&!!J(t)}class ReadableStreamDefaultReader{constructor(e){if($(e,1,\"ReadableStreamDefaultReader\"),N(e,\"First parameter\"),Wr(e))throw new TypeError(\"This stream has already been locked for exclusive reading by another reader\");q(this,e),this._readRequests=new v}get closed(){return J(this)?this._closedPromise:d(ee(\"closed\"))}cancel(e=void 0){return J(this)?void 0===this._ownerReadableStream?d(O(\"cancel\")):E(this,e):d(ee(\"cancel\"))}read(){if(!J(this))return d(ee(\"read\"));if(void 0===this._ownerReadableStream)return d(O(\"read from\"));let e,t;const r=u((r,o)=>{e=r,t=o});return K(this,{_chunkSteps:t=>e({value:t,done:!1}),_closeSteps:()=>e({value:void 0,done:!0}),_errorSteps:e=>t(e)}),r}releaseLock(){if(!J(this))throw ee(\"releaseLock\");void 0!==this._ownerReadableStream&&function(e){W(e);const t=new TypeError(\"Reader was released\");Z(e,t)}(this)}}function J(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_readRequests\")&&e instanceof ReadableStreamDefaultReader)}function K(e,t){const r=e._ownerReadableStream;r._disturbed=!0,\"closed\"===r._state?t._closeSteps():\"errored\"===r._state?t._errorSteps(r._storedError):r._readableStreamController[C](t)}function Z(e,t){const r=e._readRequests;e._readRequests=new v,r.forEach(e=>{e._errorSteps(t)})}function ee(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}var te,re,oe;function ne(e){return e.slice()}function ae(e,t,r,o,n){new Uint8Array(e).set(new Uint8Array(r,o,n),t)}Object.defineProperties(ReadableStreamDefaultReader.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),o(ReadableStreamDefaultReader.prototype.cancel,\"cancel\"),o(ReadableStreamDefaultReader.prototype.read,\"read\"),o(ReadableStreamDefaultReader.prototype.releaseLock,\"releaseLock\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(ReadableStreamDefaultReader.prototype,Symbol.toStringTag,{value:\"ReadableStreamDefaultReader\",configurable:!0});let ie=e=>(ie=\"function\"==typeof e.transfer?e=>e.transfer():\"function\"==typeof structuredClone?e=>structuredClone(e,{transfer:[e]}):e=>e,ie(e)),le=e=>(le=\"boolean\"==typeof e.detached?e=>e.detached:e=>0===e.byteLength,le(e));function se(e,t,r){if(e.slice)return e.slice(t,r);const o=r-t,n=new ArrayBuffer(o);return ae(n,0,e,t,o),n}function ue(e,t){const r=e[t];if(null!=r){if(\"function\"!=typeof r)throw new TypeError(`${String(t)} is not a function`);return r}}function ce(e){try{const t=e.done,r=e.value;return f(s(r),e=>({done:t,value:e}))}catch(e){return d(e)}}const de=null!==(oe=null!==(te=Symbol.asyncIterator)&&void 0!==te?te:null===(re=Symbol.for)||void 0===re?void 0:re.call(Symbol,\"Symbol.asyncIterator\"))&&void 0!==oe?oe:\"@@asyncIterator\";function fe(e,r=\"sync\",o){if(void 0===o)if(\"async\"===r){if(void 0===(o=ue(e,de))){return function(e){const r={next(){let t;try{t=be(e)}catch(e){return d(e)}return ce(t)},return(r){let o;try{const t=ue(e.iterator,\"return\");if(void 0===t)return c({done:!0,value:r});o=S(t,e.iterator,[r])}catch(e){return d(e)}return t(o)?ce(o):d(new TypeError(\"The iterator.return() method must return an object\"))}};return{iterator:r,nextMethod:r.next,done:!1}}(fe(e,\"sync\",ue(e,Symbol.iterator)))}}else o=ue(e,Symbol.iterator);if(void 0===o)throw new TypeError(\"The object is not iterable\");const n=S(o,e,[]);if(!t(n))throw new TypeError(\"The iterator method must return an object\");return{iterator:n,nextMethod:n.next,done:!1}}function be(e){const r=S(e.nextMethod,e.iterator,[]);if(!t(r))throw new TypeError(\"The iterator.next() method must return an object\");return r}class he{constructor(e,t){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=t}next(){const e=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?_(this._ongoingPromise,e,e):e(),this._ongoingPromise}return(e){const t=()=>this._returnSteps(e);return this._ongoingPromise=this._ongoingPromise?_(this._ongoingPromise,t,t):t(),this._ongoingPromise}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});const e=this._reader;let t,r;const o=u((e,o)=>{t=e,r=o});return K(e,{_chunkSteps:e=>{this._ongoingPromise=void 0,y(()=>t({value:e,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,W(e),t({value:void 0,done:!0})},_errorSteps:t=>{this._ongoingPromise=void 0,this._isFinished=!0,W(e),r(t)}}),o}_returnSteps(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;const t=this._reader;if(!this._preventCancel){const r=E(t,e);return W(t),_(r,()=>({value:e,done:!0}))}return W(t),c({value:e,done:!0})}}const me={next(){return _e(this)?this._asyncIteratorImpl.next():d(pe(\"next\"))},return(e){return _e(this)?this._asyncIteratorImpl.return(e):d(pe(\"return\"))},[de](){return this}};function _e(e){if(!t(e))return!1;if(!Object.prototype.hasOwnProperty.call(e,\"_asyncIteratorImpl\"))return!1;try{return e._asyncIteratorImpl instanceof he}catch(e){return!1}}function pe(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}Object.defineProperty(me,de,{enumerable:!1});const ye=Number.isNaN||function(e){return e!=e};function Se(e){const t=se(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function ge(e){const t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function ve(e,t,r){if(\"number\"!=typeof(o=r)||ye(o)||o<0||r===1/0)throw new RangeError(\"Size must be a finite, non-NaN, non-negative number.\");var o;e._queue.push({value:t,size:r}),e._queueTotalSize+=r}function we(e){e._queue=new v,e._queueTotalSize=0}function Re(e){return e===DataView}class ReadableStreamBYOBRequest{constructor(){throw new TypeError(\"Illegal constructor\")}get view(){if(!Ce(this))throw Ke(\"view\");return this._view}respond(e){if(!Ce(this))throw Ke(\"respond\");if($(e,1,\"respond\"),e=Q(e,\"First parameter\"),void 0===this._associatedReadableByteStreamController)throw new TypeError(\"This BYOB request has been invalidated\");if(le(this._view.buffer))throw new TypeError(\"The BYOB request's buffer has been detached and so cannot be used as a response\");Ge(this._associatedReadableByteStreamController,e)}respondWithNewView(e){if(!Ce(this))throw Ke(\"respondWithNewView\");if($(e,1,\"respondWithNewView\"),!ArrayBuffer.isView(e))throw new TypeError(\"You can only respond with array buffer views\");if(void 0===this._associatedReadableByteStreamController)throw new TypeError(\"This BYOB request has been invalidated\");if(le(e.buffer))throw new TypeError(\"The given view's buffer has been detached and so cannot be used as a response\");Xe(this._associatedReadableByteStreamController,e)}}Object.defineProperties(ReadableStreamBYOBRequest.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),o(ReadableStreamBYOBRequest.prototype.respond,\"respond\"),o(ReadableStreamBYOBRequest.prototype.respondWithNewView,\"respondWithNewView\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(ReadableStreamBYOBRequest.prototype,Symbol.toStringTag,{value:\"ReadableStreamBYOBRequest\",configurable:!0});class ReadableByteStreamController{constructor(){throw new TypeError(\"Illegal constructor\")}get byobRequest(){if(!Te(this))throw Ze(\"byobRequest\");return Ve(this)}get desiredSize(){if(!Te(this))throw Ze(\"desiredSize\");return Ue(this)}close(){if(!Te(this))throw Ze(\"close\");if(this._closeRequested)throw new TypeError(\"The stream has already been closed; do not close it again!\");const e=this._controlledReadableByteStream._state;if(\"readable\"!==e)throw new TypeError(`The stream (in ${e} state) is not in the readable state and cannot be closed`);xe(this)}enqueue(e){if(!Te(this))throw Ze(\"enqueue\");if($(e,1,\"enqueue\"),!ArrayBuffer.isView(e))throw new TypeError(\"chunk must be an array buffer view\");if(0===e.byteLength)throw new TypeError(\"chunk must have non-zero byteLength\");if(0===e.buffer.byteLength)throw new TypeError(\"chunk's buffer must have non-zero byteLength\");if(this._closeRequested)throw new TypeError(\"stream is closed or draining\");const t=this._controlledReadableByteStream._state;if(\"readable\"!==t)throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be enqueued to`);Qe(this,e)}error(e=void 0){if(!Te(this))throw Ze(\"error\");Ne(this,e)}[T](e){qe(this),we(this);const t=this._cancelAlgorithm(e);return Ye(this),t}[C](e){const t=this._controlledReadableByteStream;if(this._queueTotalSize>0)return void He(this,e);const r=this._autoAllocateChunkSize;if(void 0!==r){let t;try{t=new ArrayBuffer(r)}catch(t){return void e._errorSteps(t)}const o={buffer:t,bufferByteLength:r,byteOffset:0,byteLength:r,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:\"default\"};this._pendingPullIntos.push(o)}V(t,e),Pe(this)}[P](){if(this._pendingPullIntos.length>0){const e=this._pendingPullIntos.peek();e.readerType=\"none\",this._pendingPullIntos=new v,this._pendingPullIntos.push(e)}}}function Te(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_controlledReadableByteStream\")&&e instanceof ReadableByteStreamController)}function Ce(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_associatedReadableByteStreamController\")&&e instanceof ReadableStreamBYOBRequest)}function Pe(e){const t=function(e){const t=e._controlledReadableByteStream;if(\"readable\"!==t._state)return!1;if(e._closeRequested)return!1;if(!e._started)return!1;if(X(t)&&G(t)>0)return!0;if(nt(t)&&ot(t)>0)return!0;const r=Ue(e);if(r>0)return!0;return!1}(e);if(!t)return;if(e._pulling)return void(e._pullAgain=!0);e._pulling=!0;b(e._pullAlgorithm(),()=>(e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Pe(e)),null),t=>(Ne(e,t),null))}function qe(e){Le(e),e._pendingPullIntos=new v}function Ee(e,t){let r=!1;\"closed\"===e._state&&(r=!0);const o=Oe(t);\"default\"===t.readerType?U(e,o,r):function(e,t,r){const o=e._reader,n=o._readIntoRequests.shift();r?n._closeSteps(t):n._chunkSteps(t)}(e,o,r)}function We(e,t){for(let r=0;r<t.length;++r)Ee(e,t[r])}function Oe(e){const t=e.bytesFilled,r=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/r)}function Be(e,t,r,o){e._queue.push({buffer:t,byteOffset:r,byteLength:o}),e._queueTotalSize+=o}function ke(e,t,r,o){let n;try{n=se(t,r,r+o)}catch(t){throw Ne(e,t),t}Be(e,n,0,o)}function je(e,t){t.bytesFilled>0&&ke(e,t.buffer,t.byteOffset,t.bytesFilled),Me(e)}function Ae(e,t){const r=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),o=t.bytesFilled+r;let n=r,a=!1;const i=o-o%t.elementSize;i>=t.minimumFill&&(n=i-t.bytesFilled,a=!0);const l=e._queue;for(;n>0;){const r=l.peek(),o=Math.min(n,r.byteLength),a=t.byteOffset+t.bytesFilled;ae(t.buffer,a,r.buffer,r.byteOffset,o),r.byteLength===o?l.shift():(r.byteOffset+=o,r.byteLength-=o),e._queueTotalSize-=o,ze(e,o,t),n-=o}return a}function ze(e,t,r){r.bytesFilled+=t}function De(e){0===e._queueTotalSize&&e._closeRequested?(Ye(e),Br(e._controlledReadableByteStream)):Pe(e)}function Le(e){null!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Fe(e){const t=[];for(;e._pendingPullIntos.length>0&&0!==e._queueTotalSize;){const r=e._pendingPullIntos.peek();Ae(e,r)&&(Me(e),t.push(r))}return t}function Ie(e,t,r,o){const n=e._controlledReadableByteStream,a=t.constructor,i=function(e){return Re(e)?1:e.BYTES_PER_ELEMENT}(a),{byteOffset:l,byteLength:s}=t,u=r*i;let c;try{c=ie(t.buffer)}catch(e){return void o._errorSteps(e)}const d={buffer:c,bufferByteLength:c.byteLength,byteOffset:l,byteLength:s,bytesFilled:0,minimumFill:u,elementSize:i,viewConstructor:a,readerType:\"byob\"};if(e._pendingPullIntos.length>0)return e._pendingPullIntos.push(d),void rt(n,o);if(\"closed\"===n._state){const e=new a(d.buffer,d.byteOffset,0);return void o._closeSteps(e)}if(e._queueTotalSize>0){if(Ae(e,d)){const t=Oe(d);return De(e),void o._chunkSteps(t)}if(e._closeRequested){const t=new TypeError(\"Insufficient bytes to fill elements in the given buffer\");return Ne(e,t),void o._errorSteps(t)}}e._pendingPullIntos.push(d),rt(n,o),Pe(e)}function $e(e,t){const r=e._pendingPullIntos.peek();Le(e);\"closed\"===e._controlledReadableByteStream._state?function(e,t){\"none\"===t.readerType&&Me(e);const r=e._controlledReadableByteStream;if(nt(r)){const t=[];for(;t.length<ot(r);)t.push(Me(e));We(r,t)}}(e,r):function(e,t,r){if(ze(0,t,r),\"none\"===r.readerType){je(e,r);const t=Fe(e);return void We(e._controlledReadableByteStream,t)}if(r.bytesFilled<r.minimumFill)return;Me(e);const o=r.bytesFilled%r.elementSize;if(o>0){const t=r.byteOffset+r.bytesFilled;ke(e,r.buffer,t-o,o)}r.bytesFilled-=o;const n=Fe(e);Ee(e._controlledReadableByteStream,r),We(e._controlledReadableByteStream,n)}(e,t,r),Pe(e)}function Me(e){return e._pendingPullIntos.shift()}function Ye(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function xe(e){const t=e._controlledReadableByteStream;if(!e._closeRequested&&\"readable\"===t._state)if(e._queueTotalSize>0)e._closeRequested=!0;else{if(e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek();if(t.bytesFilled%t.elementSize!==0){const t=new TypeError(\"Insufficient bytes to fill elements in the given buffer\");throw Ne(e,t),t}}Ye(e),Br(t)}}function Qe(e,t){const r=e._controlledReadableByteStream;if(e._closeRequested||\"readable\"!==r._state)return;const{buffer:o,byteOffset:n,byteLength:a}=t;if(le(o))throw new TypeError(\"chunk's buffer is detached and so cannot be enqueued\");const i=ie(o);if(e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek();if(le(t.buffer))throw new TypeError(\"The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk\");Le(e),t.buffer=ie(t.buffer),\"none\"===t.readerType&&je(e,t)}if(X(r))if(function(e){const t=e._controlledReadableByteStream._reader;for(;t._readRequests.length>0;){if(0===e._queueTotalSize)return;He(e,t._readRequests.shift())}}(e),0===G(r))Be(e,i,n,a);else{e._pendingPullIntos.length>0&&Me(e);U(r,new Uint8Array(i,n,a),!1)}else if(nt(r)){Be(e,i,n,a);We(r,Fe(e))}else Be(e,i,n,a);Pe(e)}function Ne(e,t){const r=e._controlledReadableByteStream;\"readable\"===r._state&&(qe(e),we(e),Ye(e),kr(r,t))}function He(e,t){const r=e._queue.shift();e._queueTotalSize-=r.byteLength,De(e);const o=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);t._chunkSteps(o)}function Ve(e){if(null===e._byobRequest&&e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek(),r=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),o=Object.create(ReadableStreamBYOBRequest.prototype);!function(e,t,r){e._associatedReadableByteStreamController=t,e._view=r}(o,e,r),e._byobRequest=o}return e._byobRequest}function Ue(e){const t=e._controlledReadableByteStream._state;return\"errored\"===t?null:\"closed\"===t?0:e._strategyHWM-e._queueTotalSize}function Ge(e,t){const r=e._pendingPullIntos.peek();if(\"closed\"===e._controlledReadableByteStream._state){if(0!==t)throw new TypeError(\"bytesWritten must be 0 when calling respond() on a closed stream\")}else{if(0===t)throw new TypeError(\"bytesWritten must be greater than 0 when calling respond() on a readable stream\");if(r.bytesFilled+t>r.byteLength)throw new RangeError(\"bytesWritten out of range\")}r.buffer=ie(r.buffer),$e(e,t)}function Xe(e,t){const r=e._pendingPullIntos.peek();if(\"closed\"===e._controlledReadableByteStream._state){if(0!==t.byteLength)throw new TypeError(\"The view's length must be 0 when calling respondWithNewView() on a closed stream\")}else if(0===t.byteLength)throw new TypeError(\"The view's length must be greater than 0 when calling respondWithNewView() on a readable stream\");if(r.byteOffset+r.bytesFilled!==t.byteOffset)throw new RangeError(\"The region specified by view does not match byobRequest\");if(r.bufferByteLength!==t.buffer.byteLength)throw new RangeError(\"The buffer of view has different capacity than byobRequest\");if(r.bytesFilled+t.byteLength>r.byteLength)throw new RangeError(\"The region specified by view is larger than byobRequest\");const o=t.byteLength;r.buffer=ie(t.buffer),$e(e,o)}function Je(e,t,r,o,n,a,i){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,we(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=a,t._pullAlgorithm=o,t._cancelAlgorithm=n,t._autoAllocateChunkSize=i,t._pendingPullIntos=new v,e._readableStreamController=t;b(c(r()),()=>(t._started=!0,Pe(t),null),e=>(Ne(t,e),null))}function Ke(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Ze(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function et(e,t){if(\"byob\"!==(e=`${e}`))throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function tt(e){return new ReadableStreamBYOBReader(e)}function rt(e,t){e._reader._readIntoRequests.push(t)}function ot(e){return e._reader._readIntoRequests.length}function nt(e){const t=e._reader;return void 0!==t&&!!at(t)}Object.defineProperties(ReadableByteStreamController.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),o(ReadableByteStreamController.prototype.close,\"close\"),o(ReadableByteStreamController.prototype.enqueue,\"enqueue\"),o(ReadableByteStreamController.prototype.error,\"error\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(ReadableByteStreamController.prototype,Symbol.toStringTag,{value:\"ReadableByteStreamController\",configurable:!0});class ReadableStreamBYOBReader{constructor(e){if($(e,1,\"ReadableStreamBYOBReader\"),N(e,\"First parameter\"),Wr(e))throw new TypeError(\"This stream has already been locked for exclusive reading by another reader\");if(!Te(e._readableStreamController))throw new TypeError(\"Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source\");q(this,e),this._readIntoRequests=new v}get closed(){return at(this)?this._closedPromise:d(st(\"closed\"))}cancel(e=void 0){return at(this)?void 0===this._ownerReadableStream?d(O(\"cancel\")):E(this,e):d(st(\"cancel\"))}read(e,t={}){if(!at(this))return d(st(\"read\"));if(!ArrayBuffer.isView(e))return d(new TypeError(\"view must be an array buffer view\"));if(0===e.byteLength)return d(new TypeError(\"view must have non-zero byteLength\"));if(0===e.buffer.byteLength)return d(new TypeError(\"view's buffer must have non-zero byteLength\"));if(le(e.buffer))return d(new TypeError(\"view's buffer has been detached\"));let r;try{r=function(e,t){var r;return L(e,t),{min:Q(null!==(r=null==e?void 0:e.min)&&void 0!==r?r:1,`${t} has member 'min' that`)}}(t,\"options\")}catch(e){return d(e)}const o=r.min;if(0===o)return d(new TypeError(\"options.min must be greater than 0\"));if(function(e){return Re(e.constructor)}(e)){if(o>e.byteLength)return d(new RangeError(\"options.min must be less than or equal to view's byteLength\"))}else if(o>e.length)return d(new RangeError(\"options.min must be less than or equal to view's length\"));if(void 0===this._ownerReadableStream)return d(O(\"read from\"));let n,a;const i=u((e,t)=>{n=e,a=t});return it(this,e,o,{_chunkSteps:e=>n({value:e,done:!1}),_closeSteps:e=>n({value:e,done:!0}),_errorSteps:e=>a(e)}),i}releaseLock(){if(!at(this))throw st(\"releaseLock\");void 0!==this._ownerReadableStream&&function(e){W(e);const t=new TypeError(\"Reader was released\");lt(e,t)}(this)}}function at(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_readIntoRequests\")&&e instanceof ReadableStreamBYOBReader)}function it(e,t,r,o){const n=e._ownerReadableStream;n._disturbed=!0,\"errored\"===n._state?o._errorSteps(n._storedError):Ie(n._readableStreamController,t,r,o)}function lt(e,t){const r=e._readIntoRequests;e._readIntoRequests=new v,r.forEach(e=>{e._errorSteps(t)})}function st(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function ut(e,t){const{highWaterMark:r}=e;if(void 0===r)return t;if(ye(r)||r<0)throw new RangeError(\"Invalid highWaterMark\");return r}function ct(e){const{size:t}=e;return t||(()=>1)}function dt(e,t){L(e,t);const r=null==e?void 0:e.highWaterMark,o=null==e?void 0:e.size;return{highWaterMark:void 0===r?void 0:Y(r),size:void 0===o?void 0:ft(o,`${t} has member 'size' that`)}}function ft(e,t){return F(e,t),t=>Y(e(t))}function bt(e,t,r){return F(e,r),r=>g(e,t,[r])}function ht(e,t,r){return F(e,r),()=>g(e,t,[])}function mt(e,t,r){return F(e,r),r=>S(e,t,[r])}function _t(e,t,r){return F(e,r),(r,o)=>g(e,t,[r,o])}function pt(e,t){if(!gt(e))throw new TypeError(`${t} is not a WritableStream.`)}Object.defineProperties(ReadableStreamBYOBReader.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),o(ReadableStreamBYOBReader.prototype.cancel,\"cancel\"),o(ReadableStreamBYOBReader.prototype.read,\"read\"),o(ReadableStreamBYOBReader.prototype.releaseLock,\"releaseLock\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(ReadableStreamBYOBReader.prototype,Symbol.toStringTag,{value:\"ReadableStreamBYOBReader\",configurable:!0});class WritableStream{constructor(e={},t={}){void 0===e?e=null:I(e,\"First parameter\");const r=dt(t,\"Second parameter\"),o=function(e,t){L(e,t);const r=null==e?void 0:e.abort,o=null==e?void 0:e.close,n=null==e?void 0:e.start,a=null==e?void 0:e.type,i=null==e?void 0:e.write;return{abort:void 0===r?void 0:bt(r,e,`${t} has member 'abort' that`),close:void 0===o?void 0:ht(o,e,`${t} has member 'close' that`),start:void 0===n?void 0:mt(n,e,`${t} has member 'start' that`),write:void 0===i?void 0:_t(i,e,`${t} has member 'write' that`),type:a}}(e,\"First parameter\");St(this);if(void 0!==o.type)throw new RangeError(\"Invalid type is specified\");const n=ct(r);!function(e,t,r,o){const n=Object.create(WritableStreamDefaultController.prototype);let a,i,l,s;a=void 0!==t.start?()=>t.start(n):()=>{};i=void 0!==t.write?e=>t.write(e,n):()=>c(void 0);l=void 0!==t.close?()=>t.close():()=>c(void 0);s=void 0!==t.abort?e=>t.abort(e):()=>c(void 0);Ft(e,n,a,i,l,s,r,o)}(this,o,ut(r,1),n)}get locked(){if(!gt(this))throw Nt(\"locked\");return vt(this)}abort(e=void 0){return gt(this)?vt(this)?d(new TypeError(\"Cannot abort a stream that already has a writer\")):wt(this,e):d(Nt(\"abort\"))}close(){return gt(this)?vt(this)?d(new TypeError(\"Cannot close a stream that already has a writer\")):qt(this)?d(new TypeError(\"Cannot close an already-closing stream\")):Rt(this):d(Nt(\"close\"))}getWriter(){if(!gt(this))throw Nt(\"getWriter\");return yt(this)}}function yt(e){return new WritableStreamDefaultWriter(e)}function St(e){e._state=\"writable\",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new v,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function gt(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_writableStreamController\")&&e instanceof WritableStream)}function vt(e){return void 0!==e._writer}function wt(e,t){var r;if(\"closed\"===e._state||\"errored\"===e._state)return c(void 0);e._writableStreamController._abortReason=t,null===(r=e._writableStreamController._abortController)||void 0===r||r.abort(t);const o=e._state;if(\"closed\"===o||\"errored\"===o)return c(void 0);if(void 0!==e._pendingAbortRequest)return e._pendingAbortRequest._promise;let n=!1;\"erroring\"===o&&(n=!0,t=void 0);const a=u((r,o)=>{e._pendingAbortRequest={_promise:void 0,_resolve:r,_reject:o,_reason:t,_wasAlreadyErroring:n}});return e._pendingAbortRequest._promise=a,n||Ct(e,t),a}function Rt(e){const t=e._state;if(\"closed\"===t||\"errored\"===t)return d(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));const r=u((t,r)=>{const o={_resolve:t,_reject:r};e._closeRequest=o}),o=e._writer;var n;return void 0!==o&&e._backpressure&&\"writable\"===t&&or(o),ve(n=e._writableStreamController,Dt,0),Mt(n),r}function Tt(e,t){\"writable\"!==e._state?Pt(e):Ct(e,t)}function Ct(e,t){const r=e._writableStreamController;e._state=\"erroring\",e._storedError=t;const o=e._writer;void 0!==o&&jt(o,t),!function(e){if(void 0===e._inFlightWriteRequest&&void 0===e._inFlightCloseRequest)return!1;return!0}(e)&&r._started&&Pt(e)}function Pt(e){e._state=\"errored\",e._writableStreamController[R]();const t=e._storedError;if(e._writeRequests.forEach(e=>{e._reject(t)}),e._writeRequests=new v,void 0===e._pendingAbortRequest)return void Et(e);const r=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,r._wasAlreadyErroring)return r._reject(t),void Et(e);b(e._writableStreamController[w](r._reason),()=>(r._resolve(),Et(e),null),t=>(r._reject(t),Et(e),null))}function qt(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest}function Et(e){void 0!==e._closeRequest&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);const t=e._writer;void 0!==t&&Jt(t,e._storedError)}function Wt(e,t){const r=e._writer;void 0!==r&&t!==e._backpressure&&(t?function(e){Zt(e)}(r):or(r)),e._backpressure=t}Object.defineProperties(WritableStream.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),o(WritableStream.prototype.abort,\"abort\"),o(WritableStream.prototype.close,\"close\"),o(WritableStream.prototype.getWriter,\"getWriter\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(WritableStream.prototype,Symbol.toStringTag,{value:\"WritableStream\",configurable:!0});class WritableStreamDefaultWriter{constructor(e){if($(e,1,\"WritableStreamDefaultWriter\"),pt(e,\"First parameter\"),vt(e))throw new TypeError(\"This stream has already been locked for exclusive writing by another writer\");this._ownerWritableStream=e,e._writer=this;const t=e._state;if(\"writable\"===t)!qt(e)&&e._backpressure?Zt(this):tr(this),Gt(this);else if(\"erroring\"===t)er(this,e._storedError),Gt(this);else if(\"closed\"===t)tr(this),Gt(r=this),Kt(r);else{const t=e._storedError;er(this,t),Xt(this,t)}var r}get closed(){return Ot(this)?this._closedPromise:d(Vt(\"closed\"))}get desiredSize(){if(!Ot(this))throw Vt(\"desiredSize\");if(void 0===this._ownerWritableStream)throw Ut(\"desiredSize\");return function(e){const t=e._ownerWritableStream,r=t._state;if(\"errored\"===r||\"erroring\"===r)return null;if(\"closed\"===r)return 0;return $t(t._writableStreamController)}(this)}get ready(){return Ot(this)?this._readyPromise:d(Vt(\"ready\"))}abort(e=void 0){return Ot(this)?void 0===this._ownerWritableStream?d(Ut(\"abort\")):function(e,t){return wt(e._ownerWritableStream,t)}(this,e):d(Vt(\"abort\"))}close(){if(!Ot(this))return d(Vt(\"close\"));const e=this._ownerWritableStream;return void 0===e?d(Ut(\"close\")):qt(e)?d(new TypeError(\"Cannot close an already-closing stream\")):Bt(this)}releaseLock(){if(!Ot(this))throw Vt(\"releaseLock\");void 0!==this._ownerWritableStream&&At(this)}write(e=void 0){return Ot(this)?void 0===this._ownerWritableStream?d(Ut(\"write to\")):zt(this,e):d(Vt(\"write\"))}}function Ot(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_ownerWritableStream\")&&e instanceof WritableStreamDefaultWriter)}function Bt(e){return Rt(e._ownerWritableStream)}function kt(e,t){\"pending\"===e._closedPromiseState?Jt(e,t):function(e,t){Xt(e,t)}(e,t)}function jt(e,t){\"pending\"===e._readyPromiseState?rr(e,t):function(e,t){er(e,t)}(e,t)}function At(e){const t=e._ownerWritableStream,r=new TypeError(\"Writer was released and can no longer be used to monitor the stream's closedness\");jt(e,r),kt(e,r),t._writer=void 0,e._ownerWritableStream=void 0}function zt(e,t){const r=e._ownerWritableStream,o=r._writableStreamController,n=function(e,t){if(void 0===e._strategySizeAlgorithm)return 1;try{return e._strategySizeAlgorithm(t)}catch(t){return Yt(e,t),1}}(o,t);if(r!==e._ownerWritableStream)return d(Ut(\"write to\"));const a=r._state;if(\"errored\"===a)return d(r._storedError);if(qt(r)||\"closed\"===a)return d(new TypeError(\"The stream is closing or closed and cannot be written to\"));if(\"erroring\"===a)return d(r._storedError);const i=function(e){return u((t,r)=>{const o={_resolve:t,_reject:r};e._writeRequests.push(o)})}(r);return function(e,t,r){try{ve(e,t,r)}catch(t){return void Yt(e,t)}const o=e._controlledWritableStream;if(!qt(o)&&\"writable\"===o._state){Wt(o,xt(e))}Mt(e)}(o,t,n),i}Object.defineProperties(WritableStreamDefaultWriter.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),o(WritableStreamDefaultWriter.prototype.abort,\"abort\"),o(WritableStreamDefaultWriter.prototype.close,\"close\"),o(WritableStreamDefaultWriter.prototype.releaseLock,\"releaseLock\"),o(WritableStreamDefaultWriter.prototype.write,\"write\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(WritableStreamDefaultWriter.prototype,Symbol.toStringTag,{value:\"WritableStreamDefaultWriter\",configurable:!0});const Dt={};class WritableStreamDefaultController{constructor(){throw new TypeError(\"Illegal constructor\")}get abortReason(){if(!Lt(this))throw Ht(\"abortReason\");return this._abortReason}get signal(){if(!Lt(this))throw Ht(\"signal\");if(void 0===this._abortController)throw new TypeError(\"WritableStreamDefaultController.prototype.signal is not supported\");return this._abortController.signal}error(e=void 0){if(!Lt(this))throw Ht(\"error\");\"writable\"===this._controlledWritableStream._state&&Qt(this,e)}[w](e){const t=this._abortAlgorithm(e);return It(this),t}[R](){we(this)}}function Lt(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_controlledWritableStream\")&&e instanceof WritableStreamDefaultController)}function Ft(e,t,r,o,n,a,i,l){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,we(t),t._abortReason=void 0,t._abortController=function(){if(\"function\"==typeof AbortController)return new AbortController}(),t._started=!1,t._strategySizeAlgorithm=l,t._strategyHWM=i,t._writeAlgorithm=o,t._closeAlgorithm=n,t._abortAlgorithm=a;const s=xt(t);Wt(e,s);b(c(r()),()=>(t._started=!0,Mt(t),null),r=>(t._started=!0,Tt(e,r),null))}function It(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function $t(e){return e._strategyHWM-e._queueTotalSize}function Mt(e){const t=e._controlledWritableStream;if(!e._started)return;if(void 0!==t._inFlightWriteRequest)return;if(\"erroring\"===t._state)return void Pt(t);if(0===e._queue.length)return;const r=e._queue.peek().value;r===Dt?function(e){const t=e._controlledWritableStream;(function(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0})(t),ge(e);const r=e._closeAlgorithm();It(e),b(r,()=>(function(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,\"erroring\"===e._state&&(e._storedError=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state=\"closed\";const t=e._writer;void 0!==t&&Kt(t)}(t),null),e=>(function(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),Tt(e,t)}(t,e),null))}(e):function(e,t){const r=e._controlledWritableStream;!function(e){e._inFlightWriteRequest=e._writeRequests.shift()}(r);const o=e._writeAlgorithm(t);b(o,()=>{!function(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}(r);const t=r._state;if(ge(e),!qt(r)&&\"writable\"===t){const t=xt(e);Wt(r,t)}return Mt(e),null},t=>(\"writable\"===r._state&&It(e),function(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,Tt(e,t)}(r,t),null))}(e,r)}function Yt(e,t){\"writable\"===e._controlledWritableStream._state&&Qt(e,t)}function xt(e){return $t(e)<=0}function Qt(e,t){const r=e._controlledWritableStream;It(e),Ct(r,t)}function Nt(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Ht(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function Vt(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Ut(e){return new TypeError(\"Cannot \"+e+\" a stream using a released writer\")}function Gt(e){e._closedPromise=u((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r,e._closedPromiseState=\"pending\"})}function Xt(e,t){Gt(e),Jt(e,t)}function Jt(e,t){void 0!==e._closedPromise_reject&&(p(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState=\"rejected\")}function Kt(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState=\"resolved\")}function Zt(e){e._readyPromise=u((t,r)=>{e._readyPromise_resolve=t,e._readyPromise_reject=r}),e._readyPromiseState=\"pending\"}function er(e,t){Zt(e),rr(e,t)}function tr(e){Zt(e),or(e)}function rr(e,t){void 0!==e._readyPromise_reject&&(p(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState=\"rejected\")}function or(e){void 0!==e._readyPromise_resolve&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState=\"fulfilled\")}Object.defineProperties(WritableStreamDefaultController.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(WritableStreamDefaultController.prototype,Symbol.toStringTag,{value:\"WritableStreamDefaultController\",configurable:!0});const nr=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof self?self:\"undefined\"!=typeof global?global:void 0;const ar=function(){const e=null==nr?void 0:nr.DOMException;return function(e){if(\"function\"!=typeof e&&\"object\"!=typeof e)return!1;if(\"DOMException\"!==e.name)return!1;try{return new e,!0}catch(e){return!1}}(e)?e:void 0}()||function(){const e=function(e,t){this.message=e||\"\",this.name=t||\"Error\",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return o(e,\"DOMException\"),e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,\"constructor\",{value:e,writable:!0,configurable:!0}),e}();function ir(t,r,o,n,a,i){const l=H(t),s=yt(r);t._disturbed=!0;let _=!1,y=c(void 0);return u((S,g)=>{let v;if(void 0!==i){if(v=()=>{const e=void 0!==i.reason?i.reason:new ar(\"Aborted\",\"AbortError\"),o=[];n||o.push(()=>\"writable\"===r._state?wt(r,e):c(void 0)),a||o.push(()=>\"readable\"===t._state?Or(t,e):c(void 0)),q(()=>Promise.all(o.map(e=>e())),!0,e)},i.aborted)return void v();i.addEventListener(\"abort\",v)}var w,R,T;if(P(t,l._closedPromise,e=>(n?E(!0,e):q(()=>wt(r,e),!0,e),null)),P(r,s._closedPromise,e=>(a?E(!0,e):q(()=>Or(t,e),!0,e),null)),w=t,R=l._closedPromise,T=()=>(o?E():q(()=>function(e){const t=e._ownerWritableStream,r=t._state;return qt(t)||\"closed\"===r?c(void 0):\"errored\"===r?d(t._storedError):Bt(e)}(s)),null),\"closed\"===w._state?T():h(R,T),qt(r)||\"closed\"===r._state){const e=new TypeError(\"the destination writable stream closed before all data could be piped to it\");a?E(!0,e):q(()=>Or(t,e),!0,e)}function C(){const e=y;return f(y,()=>e!==y?C():void 0)}function P(e,t,r){\"errored\"===e._state?r(e._storedError):m(t,r)}function q(e,t,o){function n(){return b(e(),()=>O(t,o),e=>O(!0,e)),null}_||(_=!0,\"writable\"!==r._state||qt(r)?n():h(C(),n))}function E(e,t){_||(_=!0,\"writable\"!==r._state||qt(r)?O(e,t):h(C(),()=>O(e,t)))}function O(e,t){return At(s),W(l),void 0!==i&&i.removeEventListener(\"abort\",v),e?g(t):S(void 0),null}p(u((t,r)=>{!function o(n){n?t():f(_?c(!0):f(s._readyPromise,()=>u((t,r)=>{K(l,{_chunkSteps:r=>{y=f(zt(s,r),void 0,e),t(!1)},_closeSteps:()=>t(!0),_errorSteps:r})})),o,r)}(!1)}))})}class ReadableStreamDefaultController{constructor(){throw new TypeError(\"Illegal constructor\")}get desiredSize(){if(!lr(this))throw pr(\"desiredSize\");return hr(this)}close(){if(!lr(this))throw pr(\"close\");if(!mr(this))throw new TypeError(\"The stream is not in a state that permits close\");dr(this)}enqueue(e=void 0){if(!lr(this))throw pr(\"enqueue\");if(!mr(this))throw new TypeError(\"The stream is not in a state that permits enqueue\");return fr(this,e)}error(e=void 0){if(!lr(this))throw pr(\"error\");br(this,e)}[T](e){we(this);const t=this._cancelAlgorithm(e);return cr(this),t}[C](e){const t=this._controlledReadableStream;if(this._queue.length>0){const r=ge(this);this._closeRequested&&0===this._queue.length?(cr(this),Br(t)):sr(this),e._chunkSteps(r)}else V(t,e),sr(this)}[P](){}}function lr(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_controlledReadableStream\")&&e instanceof ReadableStreamDefaultController)}function sr(e){if(!ur(e))return;if(e._pulling)return void(e._pullAgain=!0);e._pulling=!0;b(e._pullAlgorithm(),()=>(e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,sr(e)),null),t=>(br(e,t),null))}function ur(e){const t=e._controlledReadableStream;if(!mr(e))return!1;if(!e._started)return!1;if(Wr(t)&&G(t)>0)return!0;return hr(e)>0}function cr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function dr(e){if(!mr(e))return;const t=e._controlledReadableStream;e._closeRequested=!0,0===e._queue.length&&(cr(e),Br(t))}function fr(e,t){if(!mr(e))return;const r=e._controlledReadableStream;if(Wr(r)&&G(r)>0)U(r,t,!1);else{let r;try{r=e._strategySizeAlgorithm(t)}catch(t){throw br(e,t),t}try{ve(e,t,r)}catch(t){throw br(e,t),t}}sr(e)}function br(e,t){const r=e._controlledReadableStream;\"readable\"===r._state&&(we(e),cr(e),kr(r,t))}function hr(e){const t=e._controlledReadableStream._state;return\"errored\"===t?null:\"closed\"===t?0:e._strategyHWM-e._queueTotalSize}function mr(e){const t=e._controlledReadableStream._state;return!e._closeRequested&&\"readable\"===t}function _r(e,t,r,o,n,a,i){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,we(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=i,t._strategyHWM=a,t._pullAlgorithm=o,t._cancelAlgorithm=n,e._readableStreamController=t;b(c(r()),()=>(t._started=!0,sr(t),null),e=>(br(t,e),null))}function pr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function yr(e,t){return Te(e._readableStreamController)?function(e){let t,r,o,n,a,i=H(e),l=!1,s=!1,d=!1,f=!1,b=!1;const h=u(e=>{a=e});function _(e){m(e._closedPromise,t=>(e!==i||(Ne(o._readableStreamController,t),Ne(n._readableStreamController,t),f&&b||a(void 0)),null))}function p(){at(i)&&(W(i),i=H(e),_(i));K(i,{_chunkSteps:t=>{y(()=>{s=!1,d=!1;const r=t;let i=t;if(!f&&!b)try{i=Se(t)}catch(t){return Ne(o._readableStreamController,t),Ne(n._readableStreamController,t),void a(Or(e,t))}f||Qe(o._readableStreamController,r),b||Qe(n._readableStreamController,i),l=!1,s?g():d&&v()})},_closeSteps:()=>{l=!1,f||xe(o._readableStreamController),b||xe(n._readableStreamController),o._readableStreamController._pendingPullIntos.length>0&&Ge(o._readableStreamController,0),n._readableStreamController._pendingPullIntos.length>0&&Ge(n._readableStreamController,0),f&&b||a(void 0)},_errorSteps:()=>{l=!1}})}function S(t,r){J(i)&&(W(i),i=tt(e),_(i));const u=r?n:o,c=r?o:n;it(i,t,1,{_chunkSteps:t=>{y(()=>{s=!1,d=!1;const o=r?b:f;if(r?f:b)o||Xe(u._readableStreamController,t);else{let r;try{r=Se(t)}catch(t){return Ne(u._readableStreamController,t),Ne(c._readableStreamController,t),void a(Or(e,t))}o||Xe(u._readableStreamController,t),Qe(c._readableStreamController,r)}l=!1,s?g():d&&v()})},_closeSteps:e=>{l=!1;const t=r?b:f,o=r?f:b;t||xe(u._readableStreamController),o||xe(c._readableStreamController),void 0!==e&&(t||Xe(u._readableStreamController,e),!o&&c._readableStreamController._pendingPullIntos.length>0&&Ge(c._readableStreamController,0)),t&&o||a(void 0)},_errorSteps:()=>{l=!1}})}function g(){if(l)return s=!0,c(void 0);l=!0;const e=Ve(o._readableStreamController);return null===e?p():S(e._view,!1),c(void 0)}function v(){if(l)return d=!0,c(void 0);l=!0;const e=Ve(n._readableStreamController);return null===e?p():S(e._view,!0),c(void 0)}function w(o){if(f=!0,t=o,b){const o=ne([t,r]),n=Or(e,o);a(n)}return h}function R(o){if(b=!0,r=o,f){const o=ne([t,r]),n=Or(e,o);a(n)}return h}function T(){}return o=Pr(T,g,w),n=Pr(T,v,R),_(i),[o,n]}(e):function(e){const t=H(e);let r,o,n,a,i,l=!1,s=!1,d=!1,f=!1;const b=u(e=>{i=e});function h(){if(l)return s=!0,c(void 0);l=!0;return K(t,{_chunkSteps:e=>{y(()=>{s=!1;const t=e,r=e;d||fr(n._readableStreamController,t),f||fr(a._readableStreamController,r),l=!1,s&&h()})},_closeSteps:()=>{l=!1,d||dr(n._readableStreamController),f||dr(a._readableStreamController),d&&f||i(void 0)},_errorSteps:()=>{l=!1}}),c(void 0)}function _(t){if(d=!0,r=t,f){const t=ne([r,o]),n=Or(e,t);i(n)}return b}function p(t){if(f=!0,o=t,d){const t=ne([r,o]),n=Or(e,t);i(n)}return b}function S(){}return n=Cr(S,h,_),a=Cr(S,h,p),m(t._closedPromise,e=>(br(n._readableStreamController,e),br(a._readableStreamController,e),d&&f||i(void 0),null)),[n,a]}(e)}function Sr(r){return t(o=r)&&void 0!==o.getReader?function(r){let o;function n(){let e;try{e=r.read()}catch(e){return d(e)}return _(e,e=>{if(!t(e))throw new TypeError(\"The promise returned by the reader.read() method must fulfill with an object\");if(e.done)dr(o._readableStreamController);else{const t=e.value;fr(o._readableStreamController,t)}})}function a(e){try{return c(r.cancel(e))}catch(e){return d(e)}}return o=Cr(e,n,a,0),o}(r.getReader()):function(r){let o;const n=fe(r,\"async\");function a(){let e;try{e=be(n)}catch(e){return d(e)}return _(c(e),e=>{if(!t(e))throw new TypeError(\"The promise returned by the iterator.next() method must fulfill with an object\");if(e.done)dr(o._readableStreamController);else{const t=e.value;fr(o._readableStreamController,t)}})}function i(e){const r=n.iterator;let o;try{o=ue(r,\"return\")}catch(e){return d(e)}if(void 0===o)return c(void 0);return _(g(o,r,[e]),e=>{if(!t(e))throw new TypeError(\"The promise returned by the iterator.return() method must fulfill with an object\")})}return o=Cr(e,a,i,0),o}(r);var o}function gr(e,t,r){return F(e,r),r=>g(e,t,[r])}function vr(e,t,r){return F(e,r),r=>g(e,t,[r])}function wr(e,t,r){return F(e,r),r=>S(e,t,[r])}function Rr(e,t){if(\"bytes\"!==(e=`${e}`))throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function Tr(e,t){L(e,t);const r=null==e?void 0:e.preventAbort,o=null==e?void 0:e.preventCancel,n=null==e?void 0:e.preventClose,a=null==e?void 0:e.signal;return void 0!==a&&function(e,t){if(!function(e){if(\"object\"!=typeof e||null===e)return!1;try{return\"boolean\"==typeof e.aborted}catch(e){return!1}}(e))throw new TypeError(`${t} is not an AbortSignal.`)}(a,`${t} has member 'signal' that`),{preventAbort:Boolean(r),preventCancel:Boolean(o),preventClose:Boolean(n),signal:a}}Object.defineProperties(ReadableStreamDefaultController.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),o(ReadableStreamDefaultController.prototype.close,\"close\"),o(ReadableStreamDefaultController.prototype.enqueue,\"enqueue\"),o(ReadableStreamDefaultController.prototype.error,\"error\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(ReadableStreamDefaultController.prototype,Symbol.toStringTag,{value:\"ReadableStreamDefaultController\",configurable:!0});class ReadableStream{constructor(e={},t={}){void 0===e?e=null:I(e,\"First parameter\");const r=dt(t,\"Second parameter\"),o=function(e,t){L(e,t);const r=e,o=null==r?void 0:r.autoAllocateChunkSize,n=null==r?void 0:r.cancel,a=null==r?void 0:r.pull,i=null==r?void 0:r.start,l=null==r?void 0:r.type;return{autoAllocateChunkSize:void 0===o?void 0:Q(o,`${t} has member 'autoAllocateChunkSize' that`),cancel:void 0===n?void 0:gr(n,r,`${t} has member 'cancel' that`),pull:void 0===a?void 0:vr(a,r,`${t} has member 'pull' that`),start:void 0===i?void 0:wr(i,r,`${t} has member 'start' that`),type:void 0===l?void 0:Rr(l,`${t} has member 'type' that`)}}(e,\"First parameter\");if(qr(this),\"bytes\"===o.type){if(void 0!==r.size)throw new RangeError(\"The strategy for a byte stream cannot have a size function\");!function(e,t,r){const o=Object.create(ReadableByteStreamController.prototype);let n,a,i;n=void 0!==t.start?()=>t.start(o):()=>{},a=void 0!==t.pull?()=>t.pull(o):()=>c(void 0),i=void 0!==t.cancel?e=>t.cancel(e):()=>c(void 0);const l=t.autoAllocateChunkSize;if(0===l)throw new TypeError(\"autoAllocateChunkSize must be greater than 0\");Je(e,o,n,a,i,r,l)}(this,o,ut(r,0))}else{const e=ct(r);!function(e,t,r,o){const n=Object.create(ReadableStreamDefaultController.prototype);let a,i,l;a=void 0!==t.start?()=>t.start(n):()=>{},i=void 0!==t.pull?()=>t.pull(n):()=>c(void 0),l=void 0!==t.cancel?e=>t.cancel(e):()=>c(void 0),_r(e,n,a,i,l,r,o)}(this,o,ut(r,1),e)}}get locked(){if(!Er(this))throw jr(\"locked\");return Wr(this)}cancel(e=void 0){return Er(this)?Wr(this)?d(new TypeError(\"Cannot cancel a stream that already has a reader\")):Or(this,e):d(jr(\"cancel\"))}getReader(e=void 0){if(!Er(this))throw jr(\"getReader\");return void 0===function(e,t){L(e,t);const r=null==e?void 0:e.mode;return{mode:void 0===r?void 0:et(r,`${t} has member 'mode' that`)}}(e,\"First parameter\").mode?H(this):tt(this)}pipeThrough(e,t={}){if(!Er(this))throw jr(\"pipeThrough\");$(e,1,\"pipeThrough\");const r=function(e,t){L(e,t);const r=null==e?void 0:e.readable;M(r,\"readable\",\"ReadableWritablePair\"),N(r,`${t} has member 'readable' that`);const o=null==e?void 0:e.writable;return M(o,\"writable\",\"ReadableWritablePair\"),pt(o,`${t} has member 'writable' that`),{readable:r,writable:o}}(e,\"First parameter\"),o=Tr(t,\"Second parameter\");if(Wr(this))throw new TypeError(\"ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream\");if(vt(r.writable))throw new TypeError(\"ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream\");return p(ir(this,r.writable,o.preventClose,o.preventAbort,o.preventCancel,o.signal)),r.readable}pipeTo(e,t={}){if(!Er(this))return d(jr(\"pipeTo\"));if(void 0===e)return d(\"Parameter 1 is required in 'pipeTo'.\");if(!gt(e))return d(new TypeError(\"ReadableStream.prototype.pipeTo's first argument must be a WritableStream\"));let r;try{r=Tr(t,\"Second parameter\")}catch(e){return d(e)}return Wr(this)?d(new TypeError(\"ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream\")):vt(e)?d(new TypeError(\"ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream\")):ir(this,e,r.preventClose,r.preventAbort,r.preventCancel,r.signal)}tee(){if(!Er(this))throw jr(\"tee\");return ne(yr(this))}values(e=void 0){if(!Er(this))throw jr(\"values\");return function(e,t){const r=H(e),o=new he(r,t),n=Object.create(me);return n._asyncIteratorImpl=o,n}(this,function(e,t){L(e,t);const r=null==e?void 0:e.preventCancel;return{preventCancel:Boolean(r)}}(e,\"First parameter\").preventCancel)}[de](e){return this.values(e)}static from(e){return Sr(e)}}function Cr(e,t,r,o=1,n=()=>1){const a=Object.create(ReadableStream.prototype);qr(a);return _r(a,Object.create(ReadableStreamDefaultController.prototype),e,t,r,o,n),a}function Pr(e,t,r){const o=Object.create(ReadableStream.prototype);qr(o);return Je(o,Object.create(ReadableByteStreamController.prototype),e,t,r,0,void 0),o}function qr(e){e._state=\"readable\",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Er(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_readableStreamController\")&&e instanceof ReadableStream)}function Wr(e){return void 0!==e._reader}function Or(t,r){if(t._disturbed=!0,\"closed\"===t._state)return c(void 0);if(\"errored\"===t._state)return d(t._storedError);Br(t);const o=t._reader;if(void 0!==o&&at(o)){const e=o._readIntoRequests;o._readIntoRequests=new v,e.forEach(e=>{e._closeSteps(void 0)})}return _(t._readableStreamController[T](r),e)}function Br(e){e._state=\"closed\";const t=e._reader;if(void 0!==t&&(A(t),J(t))){const e=t._readRequests;t._readRequests=new v,e.forEach(e=>{e._closeSteps()})}}function kr(e,t){e._state=\"errored\",e._storedError=t;const r=e._reader;void 0!==r&&(j(r,t),J(r)?Z(r,t):lt(r,t))}function jr(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Ar(e,t){L(e,t);const r=null==e?void 0:e.highWaterMark;return M(r,\"highWaterMark\",\"QueuingStrategyInit\"),{highWaterMark:Y(r)}}Object.defineProperties(ReadableStream,{from:{enumerable:!0}}),Object.defineProperties(ReadableStream.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),o(ReadableStream.from,\"from\"),o(ReadableStream.prototype.cancel,\"cancel\"),o(ReadableStream.prototype.getReader,\"getReader\"),o(ReadableStream.prototype.pipeThrough,\"pipeThrough\"),o(ReadableStream.prototype.pipeTo,\"pipeTo\"),o(ReadableStream.prototype.tee,\"tee\"),o(ReadableStream.prototype.values,\"values\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(ReadableStream.prototype,Symbol.toStringTag,{value:\"ReadableStream\",configurable:!0}),Object.defineProperty(ReadableStream.prototype,de,{value:ReadableStream.prototype.values,writable:!0,configurable:!0});const zr=e=>e.byteLength;o(zr,\"size\");class ByteLengthQueuingStrategy{constructor(e){$(e,1,\"ByteLengthQueuingStrategy\"),e=Ar(e,\"First parameter\"),this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!Lr(this))throw Dr(\"highWaterMark\");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Lr(this))throw Dr(\"size\");return zr}}function Dr(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Lr(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_byteLengthQueuingStrategyHighWaterMark\")&&e instanceof ByteLengthQueuingStrategy)}Object.defineProperties(ByteLengthQueuingStrategy.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(ByteLengthQueuingStrategy.prototype,Symbol.toStringTag,{value:\"ByteLengthQueuingStrategy\",configurable:!0});const Fr=()=>1;o(Fr,\"size\");class CountQueuingStrategy{constructor(e){$(e,1,\"CountQueuingStrategy\"),e=Ar(e,\"First parameter\"),this._countQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!$r(this))throw Ir(\"highWaterMark\");return this._countQueuingStrategyHighWaterMark}get size(){if(!$r(this))throw Ir(\"size\");return Fr}}function Ir(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function $r(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_countQueuingStrategyHighWaterMark\")&&e instanceof CountQueuingStrategy)}function Mr(e,t,r){return F(e,r),r=>g(e,t,[r])}function Yr(e,t,r){return F(e,r),r=>S(e,t,[r])}function xr(e,t,r){return F(e,r),(r,o)=>g(e,t,[r,o])}function Qr(e,t,r){return F(e,r),r=>g(e,t,[r])}Object.defineProperties(CountQueuingStrategy.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(CountQueuingStrategy.prototype,Symbol.toStringTag,{value:\"CountQueuingStrategy\",configurable:!0});class TransformStream{constructor(e={},t={},r={}){void 0===e&&(e=null);const o=dt(t,\"Second parameter\"),n=dt(r,\"Third parameter\"),a=function(e,t){L(e,t);const r=null==e?void 0:e.cancel,o=null==e?void 0:e.flush,n=null==e?void 0:e.readableType,a=null==e?void 0:e.start,i=null==e?void 0:e.transform,l=null==e?void 0:e.writableType;return{cancel:void 0===r?void 0:Qr(r,e,`${t} has member 'cancel' that`),flush:void 0===o?void 0:Mr(o,e,`${t} has member 'flush' that`),readableType:n,start:void 0===a?void 0:Yr(a,e,`${t} has member 'start' that`),transform:void 0===i?void 0:xr(i,e,`${t} has member 'transform' that`),writableType:l}}(e,\"First parameter\");if(void 0!==a.readableType)throw new RangeError(\"Invalid readableType specified\");if(void 0!==a.writableType)throw new RangeError(\"Invalid writableType specified\");const i=ut(n,0),l=ct(n),s=ut(o,1),f=ct(o);let h;!function(e,t,r,o,n,a){function i(){return t}function l(t){return function(e,t){const r=e._transformStreamController;if(e._backpressure){return _(e._backpressureChangePromise,()=>{const o=e._writable;if(\"erroring\"===o._state)throw o._storedError;return Zr(r,t)})}return Zr(r,t)}(e,t)}function s(t){return function(e,t){const r=e._transformStreamController;if(void 0!==r._finishPromise)return r._finishPromise;const o=e._readable;r._finishPromise=u((e,t)=>{r._finishPromise_resolve=e,r._finishPromise_reject=t});const n=r._cancelAlgorithm(t);return Jr(r),b(n,()=>(\"errored\"===o._state?ro(r,o._storedError):(br(o._readableStreamController,t),to(r)),null),e=>(br(o._readableStreamController,e),ro(r,e),null)),r._finishPromise}(e,t)}function c(){return function(e){const t=e._transformStreamController;if(void 0!==t._finishPromise)return t._finishPromise;const r=e._readable;t._finishPromise=u((e,r)=>{t._finishPromise_resolve=e,t._finishPromise_reject=r});const o=t._flushAlgorithm();return Jr(t),b(o,()=>(\"errored\"===r._state?ro(t,r._storedError):(dr(r._readableStreamController),to(t)),null),e=>(br(r._readableStreamController,e),ro(t,e),null)),t._finishPromise}(e)}function d(){return function(e){return Gr(e,!1),e._backpressureChangePromise}(e)}function f(t){return function(e,t){const r=e._transformStreamController;if(void 0!==r._finishPromise)return r._finishPromise;const o=e._writable;r._finishPromise=u((e,t)=>{r._finishPromise_resolve=e,r._finishPromise_reject=t});const n=r._cancelAlgorithm(t);return Jr(r),b(n,()=>(\"errored\"===o._state?ro(r,o._storedError):(Yt(o._writableStreamController,t),Ur(e),to(r)),null),t=>(Yt(o._writableStreamController,t),Ur(e),ro(r,t),null)),r._finishPromise}(e,t)}e._writable=function(e,t,r,o,n=1,a=()=>1){const i=Object.create(WritableStream.prototype);return St(i),Ft(i,Object.create(WritableStreamDefaultController.prototype),e,t,r,o,n,a),i}(i,l,c,s,r,o),e._readable=Cr(i,d,f,n,a),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Gr(e,!0),e._transformStreamController=void 0}(this,u(e=>{h=e}),s,f,i,l),function(e,t){const r=Object.create(TransformStreamDefaultController.prototype);let o,n,a;o=void 0!==t.transform?e=>t.transform(e,r):e=>{try{return Kr(r,e),c(void 0)}catch(e){return d(e)}};n=void 0!==t.flush?()=>t.flush(r):()=>c(void 0);a=void 0!==t.cancel?e=>t.cancel(e):()=>c(void 0);!function(e,t,r,o,n){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=r,t._flushAlgorithm=o,t._cancelAlgorithm=n,t._finishPromise=void 0,t._finishPromise_resolve=void 0,t._finishPromise_reject=void 0}(e,r,o,n,a)}(this,a),void 0!==a.start?h(a.start(this._transformStreamController)):h(void 0)}get readable(){if(!Nr(this))throw oo(\"readable\");return this._readable}get writable(){if(!Nr(this))throw oo(\"writable\");return this._writable}}function Nr(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_transformStreamController\")&&e instanceof TransformStream)}function Hr(e,t){br(e._readable._readableStreamController,t),Vr(e,t)}function Vr(e,t){Jr(e._transformStreamController),Yt(e._writable._writableStreamController,t),Ur(e)}function Ur(e){e._backpressure&&Gr(e,!1)}function Gr(e,t){void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=u(t=>{e._backpressureChangePromise_resolve=t}),e._backpressure=t}Object.defineProperties(TransformStream.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(TransformStream.prototype,Symbol.toStringTag,{value:\"TransformStream\",configurable:!0});class TransformStreamDefaultController{constructor(){throw new TypeError(\"Illegal constructor\")}get desiredSize(){if(!Xr(this))throw eo(\"desiredSize\");return hr(this._controlledTransformStream._readable._readableStreamController)}enqueue(e=void 0){if(!Xr(this))throw eo(\"enqueue\");Kr(this,e)}error(e=void 0){if(!Xr(this))throw eo(\"error\");var t;t=e,Hr(this._controlledTransformStream,t)}terminate(){if(!Xr(this))throw eo(\"terminate\");!function(e){const t=e._controlledTransformStream;dr(t._readable._readableStreamController);const r=new TypeError(\"TransformStream terminated\");Vr(t,r)}(this)}}function Xr(e){return!!t(e)&&(!!Object.prototype.hasOwnProperty.call(e,\"_controlledTransformStream\")&&e instanceof TransformStreamDefaultController)}function Jr(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0,e._cancelAlgorithm=void 0}function Kr(e,t){const r=e._controlledTransformStream,o=r._readable._readableStreamController;if(!mr(o))throw new TypeError(\"Readable side is not in a state that permits enqueue\");try{fr(o,t)}catch(e){throw Vr(r,e),r._readable._storedError}const n=function(e){return!ur(e)}(o);n!==r._backpressure&&Gr(r,!0)}function Zr(e,t){return _(e._transformAlgorithm(t),void 0,t=>{throw Hr(e._controlledTransformStream,t),t})}function eo(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function to(e){void 0!==e._finishPromise_resolve&&(e._finishPromise_resolve(),e._finishPromise_resolve=void 0,e._finishPromise_reject=void 0)}function ro(e,t){void 0!==e._finishPromise_reject&&(p(e._finishPromise),e._finishPromise_reject(t),e._finishPromise_resolve=void 0,e._finishPromise_reject=void 0)}function oo(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}Object.defineProperties(TransformStreamDefaultController.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),o(TransformStreamDefaultController.prototype.enqueue,\"enqueue\"),o(TransformStreamDefaultController.prototype.error,\"error\"),o(TransformStreamDefaultController.prototype.terminate,\"terminate\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(TransformStreamDefaultController.prototype,Symbol.toStringTag,{value:\"TransformStreamDefaultController\",configurable:!0});export{ByteLengthQueuingStrategy,CountQueuingStrategy,ReadableByteStreamController,ReadableStream,ReadableStreamBYOBReader,ReadableStreamBYOBRequest,ReadableStreamDefaultController,ReadableStreamDefaultReader,TransformStream,TransformStreamDefaultController,WritableStream,WritableStreamDefaultController,WritableStreamDefaultWriter};\n", "import { ICloudbasePlatformInfo } from '@cloudbase/types'\nimport adapterForWxMp, { WxRequest, WxMpWebSocket, wxMpStorage, parseQueryString } from '@cloudbase/adapter-wx_mp'\nimport { IUploadRequestOptions, StorageType } from '@cloudbase/adapter-interface'\n\ndeclare const wx: any\ndeclare const App: any\ndeclare const getApp: any\n\nexport const Platform: ICloudbasePlatformInfo = {}\n\nexport const getWxDefaultAdapter = () => {\n  WxRequest.prototype.upload = function (options: IUploadRequestOptions) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const self = this\n    return new Promise((resolve) => {\n      const { url, file, data, headers } = options\n      const fs = wx.getFileSystemManager() // 读取文件 二进制内容\n      const task = wx.request({\n        url,\n        method: options.method,\n        header: {\n          'content-type': ' ', // 小程序 content-type 默认为 application/json， 这里一定要强制为 空， 否则签名错误\n          ...headers,\n        },\n        data: fs.readFileSync(file), // 将二进制文件转为字符串直接赋值到 request payload， 不要以 form 的方式传输\n        timeout: this._timeout,\n        success(res: { statusCode: number; data: unknown }) {\n          const result = {\n            statusCode: res.statusCode,\n            data: res.data || {},\n          }\n          if (res.statusCode === 200 && data?.success_action_status) {\n            result.statusCode = parseInt(data.success_action_status, 10)\n          }\n          resolve(result)\n        },\n        fail(err: unknown) {\n          resolve(err)\n        },\n        complete(err: { errMsg: string }) {\n          if (!err?.errMsg) {\n            return\n          }\n          if (!self._timeout || self._restrictedMethods.indexOf('upload') === -1) {\n            return\n          }\n          const { errMsg } = err\n          if (errMsg === 'request:fail timeout') {\n            console.warn(self._timeoutMsg)\n            try {\n              task.abort()\n            } catch (e) {}\n          }\n        },\n      })\n    })\n  }\n\n  function isPlugin() {\n    return (\n      typeof App === 'undefined'\n      && typeof getApp === 'undefined'\n      && !wx.onAppHide\n      && !wx.offAppHide\n      && !wx.onAppShow\n      && !wx.offAppShow\n    )\n  }\n  adapterForWxMp.genAdapter = function genAdapter(options) {\n    const adapter = {\n      root: { globalThis: {} },\n      reqClass: WxRequest,\n      wsClass: WxMpWebSocket,\n      captchaOptions: {\n        openURIWithCallback: (_url: string) => {\n          // eslint-disable-next-line @typescript-eslint/naming-convention\n          const { EventBus } = options\n          let queryObj: Record<string, string> = {}\n          let url = _url\n          console.log('openURIWithCallback', _url)\n          const matched = _url.match(/^(data:.*?)(\\?[^#\\s]*)?$/)\n          if (matched) {\n            // eslint-disable-next-line prefer-destructuring\n            url = matched[1]\n            console.log('openURIWithCallback url', url)\n            const search = matched[2]\n            if (search) {\n              queryObj = parseQueryString(search)\n            }\n          }\n          console.log('openURIWithCallback queryObj', queryObj)\n          const { token, ...restQueryObj } = queryObj\n          if (/^data:/.test(url) && !token) {\n            // 如果是 data: 开头的 URL 且没有 token，则直接返回\n            return Promise.reject({\n              error: 'invalid_argument',\n              error_description: `invalie captcha data: ${_url}`,\n            })\n          }\n          if (!token) {\n            return Promise.reject({\n              error: 'unimplemented',\n              error_description: 'need to impl captcha data',\n            })\n          }\n          return new Promise((resolve) => {\n            console.log('wait for captcha...')\n            EventBus.$emit('CAPTCHA_DATA_CHANGE', { ...restQueryObj, token, url })\n\n            // 监听事件总线，等待验证码数据变化\n            EventBus.$once('RESOLVE_CAPTCHA_DATA', (res: { captcha_token: string; expires_in: number }) => {\n              resolve(res)\n            })\n          })\n        },\n      },\n      localStorage: wxMpStorage,\n      primaryStorage: StorageType.local,\n      getAppSign() {\n        const info = wx.getAccountInfoSync()\n        if (isPlugin()) {\n          // 插件环境返回插件appid\n          return info && info.plugin ? info.plugin.appId : ''\n        }\n        return info && info.miniProgram ? info.miniProgram.appId : ''\n      },\n    }\n    return adapter\n  }\n\n  return adapterForWxMp\n}\n", "import { KV } from '@cloudbase/types'\nimport { cache } from '@cloudbase/utilities'\nimport { ICloudbaseCache, ICacheConfig } from '@cloudbase/types/cache'\n\nconst USER_INFO_KEY = 'user_info'\n\nconst { CloudbaseCache } = cache\n\nconst cacheMap: KV<ICloudbaseCache> = {}\n// 本地存储\nconst localCacheMap: KV<ICloudbaseCache> = {}\n\nexport function initCache(config: ICacheConfig & { env: string }) {\n  const { env, platformInfo } = config\n\n  const userInfoKey = `${USER_INFO_KEY}_${env}`\n\n  const keys = {\n    userInfoKey,\n  }\n  // 若指定env已存在cache则尝试更新persistence\n  cacheMap[env] = cacheMap[env] || (new CloudbaseCache({\n    ...config,\n    keys,\n    platformInfo,\n  }))\n  localCacheMap[env] = localCacheMap[env] || new CloudbaseCache({\n    ...config,\n    keys,\n    platformInfo,\n    persistence: 'local',\n  })\n}\n\nexport function getCacheByEnvId(env: string): ICloudbaseCache {\n  return cacheMap[env]\n}\n\nexport function getLocalCache(env: string): ICloudbaseCache {\n  return localCacheMap[env]\n}\n", "import { EndPointKey } from '@cloudbase/types'\nimport { constants } from '@cloudbase/utilities'\n\nconst ZONE_CHINA = ['ap-shanghai', 'ap-guangzhou', 'ap-shenzhen-fsi', 'ap-shanghai-fsi', 'ap-nanjing', 'ap-beijing', 'ap-chengdu', 'ap-chongqing', 'ap-hongkong']\n\n// @ts-ignore\nconst { setSdkName: setUtilitiesSdkName, setProtocol: setUtilitiesProtocol } = constants\n/**\n * SDK\n */\nlet sdkVersion = ''\nlet sdkName = '@cloudbase/js-sdk'\n\nexport function setSdkVersion(version: string) {\n  sdkVersion = version\n}\nexport function getSdkVersion() {\n  return sdkVersion\n}\nexport function setSdkName(name: string) {\n  sdkName = name\n  setUtilitiesSdkName(name)\n}\nexport function getSdkName() {\n  return sdkName\n}\nexport const DATA_VERSION = '2020-01-10'\n\ninterface EndPointInfo {\n  env: string\n  endPointKey: EndPointKey\n  region?: string\n  baseUrl?: string\n  protocol?: Protocol\n}\n\ntype Protocol = 'http' | 'https' | 'http:' | 'https:'\n\n/**\n *  所有 endPoint 信息\n *  避免直接操作该数组\n *  使用 setEndPointInfo、 getEndPointInfo\n */\nconst END_POINT_INFO_ARR: Array<EndPointInfo> = []\n\n/** 用来查找 endPoint 的字段 */\nconst END_POINT_INFO_SEARCH_KEYS = ['env', 'endPointKey', 'region']\n\nexport const DEFAULT_PROTOCOL: 'http:' | 'https:' = 'https:'\n\nfunction findMatchedInfo(info: EndPointInfo) {\n  // eslint-disable-next-line max-len, eqeqeq\n  return END_POINT_INFO_ARR.find(targetInfo => END_POINT_INFO_SEARCH_KEYS.filter(searchKey => info[searchKey] != null).every(searchKey => targetInfo[searchKey] === info[searchKey],),)\n}\n\nexport function setEndPointInfo(newInfo: EndPointInfo) {\n  if (newInfo.protocol && !/:$/.test(newInfo.protocol)) {\n    newInfo.protocol = `${newInfo.protocol}:` as Protocol\n  }\n\n  const endPointInfo = findMatchedInfo(newInfo)\n  if (endPointInfo) {\n    // eslint-disable-next-line eqeqeq\n    if (newInfo.baseUrl != null) {\n      endPointInfo.baseUrl = newInfo.baseUrl\n    }\n    // eslint-disable-next-line eqeqeq\n    if (newInfo.protocol != null) {\n      endPointInfo.protocol = newInfo.protocol\n    }\n  } else {\n    END_POINT_INFO_ARR.push({ ...newInfo, protocol: newInfo.protocol ?? DEFAULT_PROTOCOL })\n  }\n\n  // 保持旧代码逻辑\n  if (newInfo.endPointKey === 'CLOUD_API') {\n    setUtilitiesProtocol((newInfo.protocol ?? DEFAULT_PROTOCOL) as 'http:' | 'https:')\n  }\n}\n\nexport function getEndPointInfo(env: string, endPointKey: EndPointKey, region?: string) {\n  return findMatchedInfo({ env, endPointKey, region })\n}\n\nexport interface ISetEndPointWithKey {\n  key: EndPointKey\n  url?: string\n  protocol?: 'http' | 'https'\n}\n\nexport function setGatewayEndPointWithEnv(env: string, protocol?: Protocol, region = 'ap-shanghai') {\n  region = region || 'ap-shanghai'\n  let baseUrl = `//${env}.api.tcloudbasegateway.com/v1`\n\n  if (!ZONE_CHINA.includes(region)) {\n    baseUrl = `//${env}.api.intl.tcloudbasegateway.com/v1`\n  }\n\n  setEndPointInfo({ endPointKey: 'GATEWAY', env, baseUrl, protocol })\n}\nexport function setRegionLevelEndpoint(env: string, region: string, protocol?: Protocol) {\n  const baseUrl = `//${env}.${region || 'ap-shanghai'}.tcb-api.tencentcloudapi.com/web`\n  setEndPointInfo({ env, region, baseUrl, protocol, endPointKey: 'CLOUD_API' })\n}\n\nexport function getBaseEndPoint(env: string, endPointKey: EndPointKey = 'CLOUD_API') {\n  const info = getEndPointInfo(env, endPointKey || 'CLOUD_API')\n\n  const { protocol: PROTOCOL, baseUrl: BASE_URL } = info\n  const webEndpoint = `${PROTOCOL}${BASE_URL}`\n  // @todo 临时兼容小程序\n  return webEndpoint.match(/(http(s)?:)?\\/\\/([^/?#]*)/)[0]\n  // return `${new URL(webEndpoint).origin}`\n}\n\nexport enum LOGINTYPE {\n  NULL = 'NULL',\n  ANONYMOUS = 'ANONYMOUS',\n  WECHAT = 'WECHAT',\n  WECHAT_PUBLIC = 'WECHAT-PUBLIC',\n  WECHAT_OPEN = 'WECHAT-OPEN',\n  CUSTOM = 'CUSTOM',\n  EMAIL = 'EMAIL',\n  USERNAME = 'USERNAME',\n  PHONE = 'PHONE',\n}\n\nexport const OAUTH2_LOGINTYPE_PREFIX = 'OAUTH2'\n", "import { DATA_VERSION, getSdkVersion, getBaseEndPoint, getEndPointInfo } from '../constants/common'\nimport {\n  IRequestOptions,\n  SDKRequestInterface,\n  ResponseObject,\n  IUploadRequestOptions,\n  IRequestConfig,\n  IFetchOptions,\n} from '@cloudbase/adapter-interface'\nimport { utils, constants, langEvent } from '@cloudbase/utilities'\nimport { EndPointKey, KV } from '@cloudbase/types'\nimport { ICustomReqOpts } from '@cloudbase/types/functions'\nimport {\n  IGetAccessTokenResult,\n  ICloudbaseRequestConfig,\n  IAppendedRequestInfo,\n  IRequestBeforeHook,\n} from '@cloudbase/types/request'\nimport { ICloudbaseCache } from '@cloudbase/types/cache'\nimport { getLocalCache } from './cache'\nimport { Platform } from './adapter'\nconst { ERRORS } = constants\nconst { genSeqId, isFormData, formatUrl } = utils\n\n// 下面几种 action 不需要 access token\nconst ACTIONS_WITHOUT_ACCESSTOKEN = [\n  'auth.getJwt',\n  'auth.logout',\n  'auth.signInWithTicket',\n  'auth.signInAnonymously',\n  'auth.signIn',\n  'auth.fetchAccessTokenWithRefreshToken',\n  'auth.signUpWithEmailAndPassword',\n  'auth.activateEndUserMail',\n  'auth.sendPasswordResetEmail',\n  'auth.resetPasswordWithToken',\n  'auth.isUsernameRegistered',\n]\n\nfunction bindHooks(instance: SDKRequestInterface, name: string, hooks: IRequestBeforeHook[]) {\n  const originMethod = instance[name]\n  instance[name] = function (options: IRequestOptions) {\n    const data = {}\n    const headers = {}\n    hooks.forEach((hook) => {\n      const { data: appendedData, headers: appendedHeaders } = hook.call(instance, options)\n      Object.assign(data, appendedData)\n      Object.assign(headers, appendedHeaders)\n    })\n    const originData = options.data\n    originData\n      && (() => {\n        if (isFormData(originData)) {\n          Object.keys(data).forEach((key) => {\n            (originData as FormData).append(key, data[key])\n          })\n          return\n        }\n        options.data = {\n          ...originData,\n          ...data,\n        }\n      })()\n    options.headers = {\n      ...(options.headers || {}),\n      ...headers,\n    }\n    return (originMethod as Function).call(instance, options)\n  }\n}\nfunction beforeEach(): IAppendedRequestInfo {\n  const seqId = genSeqId()\n  return {\n    data: {\n      seqId,\n    },\n    headers: {\n      'X-SDK-Version': `@cloudbase/js-sdk/${getSdkVersion()}`,\n      'x-seqid': seqId,\n    },\n  }\n}\nexport interface IGateWayOptions {\n  name: string\n  data?: any\n  path: string\n  method: string\n  header?: {}\n}\nexport interface ICloudbaseRequest {\n  post: (options: IRequestOptions) => Promise<ResponseObject>\n  upload: (options: IUploadRequestOptions) => Promise<ResponseObject>\n  download: (options: IRequestOptions) => Promise<ResponseObject>\n  request: (action: string, params: KV<any>, options?: KV<any>) => Promise<ResponseObject>\n  send: (action: string, data: KV<any>) => Promise<any>\n  fetch: (options: IFetchOptions) => Promise<ResponseObject>\n}\n\n/**\n * @class CloudbaseRequest\n */\nexport class CloudbaseRequest implements ICloudbaseRequest {\n  config: ICloudbaseRequestConfig\n  private reqClass: SDKRequestInterface\n  // 请求失败是否抛出Error\n  private throwWhenRequestFail = false\n  // 持久化本地存储\n  private localCache: ICloudbaseCache\n  /**\n   * 初始化\n   * @param config\n   */\n  constructor(config: ICloudbaseRequestConfig & { throw?: boolean }) {\n    this.config = config\n    const reqConfig: IRequestConfig = {\n      timeout: this.config.timeout,\n      timeoutMsg: `[@cloudbase/js-sdk] 请求在${this.config.timeout / 1000}s内未完成，已中断`,\n      restrictedMethods: ['post', 'put'],\n    }\n    this.reqClass = new Platform.adapter.reqClass(reqConfig)\n    this.throwWhenRequestFail = config.throw || false\n    this.localCache = getLocalCache(this.config.env)\n\n    if (this.config.endPointMode !== 'GATEWAY') {\n      bindHooks(this.reqClass, 'post', [beforeEach])\n      bindHooks(this.reqClass, 'upload', [beforeEach])\n      bindHooks(this.reqClass, 'download', [beforeEach])\n    }\n\n    langEvent.bus.on(langEvent.LANG_CHANGE_EVENT, (params) => {\n      this.config.i18n = params.data?.i18n || this.config.i18n\n    })\n  }\n\n  public async getAccessToken(token = null) {\n    // eslint-disable-next-line eqeqeq\n    if (token != null) {\n      return token\n    }\n    const app = this.config._fromApp\n\n    if (!app.oauthInstance) {\n      throw new Error('you can\\'t request without auth')\n    }\n\n    const { oauthInstance } = app\n    const oauthClient = oauthInstance.oauth2client\n    return (await this.getOauthAccessTokenV2(oauthClient)).accessToken\n  }\n\n  public getDefaultHeaders() {\n    return {\n      [this.config.i18n?.LANG_HEADER_KEY]: this.config.i18n?.lang,\n      'X-SDK-Version': `@cloudbase/js-sdk/${getSdkVersion()}`,\n    }\n  }\n\n  public async post(options: IRequestOptions, customReqOpts?: ICustomReqOpts): Promise<ResponseObject> {\n    const res = await this.reqClass.post({\n      ...options,\n      headers: { ...options.headers, ...this.getDefaultHeaders() },\n      customReqOpts,\n    })\n    return res\n  }\n  public async upload(options: IUploadRequestOptions): Promise<ResponseObject> {\n    const res = await this.reqClass.upload({ ...options, headers: { ...options.headers, ...this.getDefaultHeaders() } })\n    return res\n  }\n  public async download(options: IRequestOptions): Promise<ResponseObject> {\n    const res = await this.reqClass.download({\n      ...options,\n      headers: { ...options.headers, ...this.getDefaultHeaders() },\n    })\n    return res\n  }\n\n  public getBaseEndPoint(endPointKey: EndPointKey = 'CLOUD_API') {\n    return getBaseEndPoint(this.config.env, endPointKey)\n  }\n\n  public async getOauthAccessTokenV2(oauthClient: any): Promise<IGetAccessTokenResult> {\n    const validAccessToken = await oauthClient.getAccessToken()\n    const credentials = await oauthClient.getCredentials()\n    return {\n      accessToken: validAccessToken,\n      accessTokenExpire: new Date(credentials.expires_at).getTime(),\n    }\n  }\n\n  /* eslint-disable complexity */\n  public async request(\n    action: string,\n    params: KV<any>,\n    options?: {\n      onUploadProgress?: Function\n      pathname?: string\n      parse?: boolean\n      inQuery?: KV<any>\n      search?: string\n      defaultQuery?: KV<any>\n      headers?: KV<string>\n    },\n    customReqOpts?: ICustomReqOpts,\n  ): Promise<ResponseObject> {\n    const tcbTraceKey = `x-tcb-trace_${this.config.env}`\n    let contentType = 'application/x-www-form-urlencoded'\n\n    const tmpObj: KV<any> = {\n      action,\n      dataVersion: DATA_VERSION,\n      env: this.config.env,\n      ...params,\n    }\n\n    if (ACTIONS_WITHOUT_ACCESSTOKEN.indexOf(action) === -1) {\n      const app = this.config._fromApp\n\n      if (!app.oauthInstance) {\n        throw new Error('you can\\'t request without auth')\n      }\n\n      const { oauthInstance } = app\n      const oauthClient = oauthInstance.oauth2client\n      tmpObj.access_token = (await this.getOauthAccessTokenV2(oauthClient)).accessToken\n    }\n\n    // 拼body和content-type\n    let payload\n    if (action === 'storage.uploadFile') {\n      payload = new FormData()\n      Object.keys(payload).forEach((key) => {\n        if (Object.prototype.hasOwnProperty.call(payload, key) && payload[key] !== undefined) {\n          payload.append(key, tmpObj[key])\n        }\n      })\n      contentType = 'multipart/form-data'\n    } else {\n      contentType = 'application/json;charset=UTF-8'\n      payload = {}\n      Object.keys(tmpObj).forEach((key) => {\n        if (tmpObj[key] !== undefined) {\n          payload[key] = tmpObj[key]\n        }\n      })\n    }\n    const opts: any = {\n      headers: {\n        'content-type': contentType,\n        ...this.getDefaultHeaders(),\n        ...options?.headers,\n      },\n    }\n    if (options?.onUploadProgress) {\n      opts.onUploadProgress = options.onUploadProgress\n    }\n\n    if (this.config.region) {\n      opts.headers['X-TCB-Region'] = this.config.region\n    }\n\n    const traceHeader = this.localCache.getStore(tcbTraceKey)\n    if (traceHeader) {\n      opts.headers['X-TCB-Trace'] = traceHeader\n    }\n\n    // 发出请求\n    // 新的 url 需要携带 env 参数进行 CORS 校验\n    // 请求链接支持添加动态 query 参数，方便用户调试定位请求\n    const parse = options?.parse !== undefined ? options.parse : params.parse\n    const inQuery = options?.inQuery !== undefined ? options.inQuery : params.inQuery\n    const search = options?.search !== undefined ? options.search : params.search\n\n    let formatQuery: Record<string, any> = {\n      ...(options?.defaultQuery || {}),\n      env: this.config.env,\n    }\n    // 尝试解析响应数据为 JSON\n    parse && (formatQuery.parse = true)\n    inQuery\n      && (formatQuery = {\n        ...inQuery,\n        ...formatQuery,\n      })\n\n    const endPointMode = this.config.endPointMode || 'CLOUD_API'\n\n    const url = getEndPointInfo(this.config.env, endPointMode)\n    let BASE_URL = url.baseUrl\n    const PROTOCOL = url.protocol\n\n    if (endPointMode === 'GATEWAY') {\n      // opts.headers.Authorization = `Bearer ${await this.getAccessToken()}`\n\n      if (action === 'functions.invokeFunction' || /^(storage|database)\\./.test(action)) {\n        BASE_URL = `${BASE_URL.match(/\\/\\/([^/?#]*)/)[0]}/web`\n      }\n    }\n\n    // 生成请求 url\n    let newUrl\n    if (options.pathname) {\n      newUrl = formatUrl(\n        PROTOCOL,\n        `${getBaseEndPoint(this.config.env, endPointMode)?.replace(/^https?:/, '')}/${options.pathname}`,\n        formatQuery,\n      )\n    } else {\n      newUrl = formatUrl(PROTOCOL, BASE_URL, formatQuery)\n    }\n\n    if (search) {\n      newUrl += search\n    }\n\n    const res: ResponseObject = await this.post(\n      {\n        url: newUrl,\n        data: payload,\n        ...opts,\n      },\n      customReqOpts,\n    )\n\n    // 保存 trace header\n    const resTraceHeader = res.header?.['x-tcb-trace']\n    if (resTraceHeader) {\n      this.localCache.setStore(tcbTraceKey, resTraceHeader)\n    }\n\n    if ((Number(res.status) !== 200 && Number(res.statusCode) !== 200) || !res.data) {\n      throw new Error('network request error')\n    }\n\n    return res\n  }\n\n  public async fetch(options: IFetchOptions & { token?: string; customReqOpts?: ICustomReqOpts },): Promise<ResponseObject> {\n    const { token, headers = {}, ...restOptions } = options\n\n    const doFetch = async () => this.reqClass.fetch({\n      headers: {\n        // 'Content-Type': 'application/json',\n        // 'X-Request-Id': `${utils.generateRequestId()}`,\n        // 'X-Request-Timestamp': `${Date.now()}`,\n        'X-SDK-Version': `@cloudbase/js-sdk/${getSdkVersion()}`,\n        Authorization: `Bearer ${await this.getAccessToken(token)}`,\n        ...this.getDefaultHeaders(),\n        ...headers,\n      },\n      ...restOptions,\n    })\n\n    try {\n      const result = await doFetch()\n      return result\n    } catch (err) {\n      if (err?.code === 'ACCESS_TOKEN_EXPIRED') {\n        // 如果是因为 token 过期失败，刷 token 后再试一次\n        if (typeof this.config?._fromApp?.oauthInstance?.authApi?.refreshTokenForce !== 'function') {\n          throw err\n        }\n        await this.config?._fromApp?.oauthInstance?.authApi?.refreshTokenForce()\n        return doFetch()\n      }\n      // 其他原因向上抛出\n\n      throw err\n    }\n  }\n\n  public async send(\n    action: string,\n    data: KV<any> = {},\n    options: KV<any> = {},\n    customReqOpts?: ICustomReqOpts,\n  ): Promise<any> {\n    const response = await this.request(\n      action,\n      data,\n      { ...options, onUploadProgress: data.onUploadProgress },\n      customReqOpts,\n    )\n\n    if (response.data.code && this.throwWhenRequestFail) {\n      throw new Error(JSON.stringify({\n        code: ERRORS.OPERATION_FAIL,\n        msg: `[${response.data.code}] ${response.data.message}`,\n      }),)\n    }\n\n    return response.data\n  }\n\n  public async gateWay(options: IGateWayOptions, customReqOpts?: ICustomReqOpts) {\n    const { name, data, path = '', method, header = {} } = options\n\n    if (!name || !path) {\n      throw new Error(JSON.stringify({\n        code: ERRORS.INVALID_PARAMS,\n        msg: '[gateWay] invalid function name or path',\n      }),)\n    }\n    let jsonData\n    try {\n      jsonData = data ? JSON.stringify(data) : ''\n    } catch (e) {\n      throw new Error(JSON.stringify({\n        code: ERRORS.INVALID_PARAMS,\n        msg: '[gateWay] invalid data',\n      }),)\n    }\n\n    const requestId = utils.generateRequestId()\n    const { baseUrl, protocol } = getEndPointInfo(this.config.env, 'GATEWAY')\n    const endpoint = `${protocol}${baseUrl}/${path}/${name}`\n    const response = await this.fetch({\n      method: method || 'POST',\n      headers: {\n        'Content-Type': 'application/json; charset=utf-8',\n        'X-Request-Id': requestId,\n        ...header,\n      },\n      body: jsonData,\n      url: endpoint,\n      customReqOpts,\n    })\n\n    return { requestId, ...response, data: await response.data }\n  }\n}\n\nconst requestMap: KV<CloudbaseRequest> = {}\n\nexport function initRequest(config: ICloudbaseRequestConfig) {\n  requestMap[config.env] = new CloudbaseRequest({\n    ...config,\n    throw: true,\n  })\n}\n\nexport function getRequestByEnvId(env: string): CloudbaseRequest {\n  return requestMap[env]\n}\n", "import { langEvent } from '@cloudbase/utilities'\n\nexport enum LANGS {\n  ZH = 'zh-CN',\n  EN = 'en-US',\n}\n\nexport const LANG_HEADER_KEY = 'Accept-Language'\n\nexport const langMap = {\n  [LANGS.EN]: {\n    '请检查调用方式，或前往云开发 AI+ 首页查看文档':\n      'Please check the calling method or visit the AI+ homepage to view the documentation',\n    'AI+ 请求出错，错误码': 'AI+ request error, error code',\n    错误信息: 'error message',\n    未实现: 'not implemented',\n    '小程序不支持 wasm 加载': 'wasm loading is not supported in mini programs',\n    '小程序不支持动态 js 加载': 'dynamic js loading is not supported in mini programs',\n    请求超时: 'request timeout',\n    '缺少 privatelink sdk 地址': 'missing privatelink sdk address',\n  },\n}\n\nexport const t = (text: string, lang: LANGS) => langMap[lang]?.[text] || text\n\nconst getLangCacheKey = config => `lang_${config.clientId || config.env}`\n\nexport const i18nProxy = (platform, config) => {\n  const cacheKey = getLangCacheKey(config)\n  const { localStorage } = platform.adapter || {}\n  const lang = config.lang || localStorage?.getItem?.(cacheKey) || LANGS.ZH\n  localStorage?.setItem?.(cacheKey, lang)\n\n  return new Proxy(\n    {\n      t: (text: string) => t(text, lang),\n      LANG_HEADER_KEY,\n      lang,\n    },\n    {\n      get(target, prop) {\n        if (prop === 'lang') {\n          return localStorage?.getItem?.(cacheKey) || target[prop]\n        }\n        return target[prop]\n      },\n      set(target, prop, newValue) {\n        if (prop === 'lang' && newValue !== target[prop]) {\n          target[prop] = newValue\n          target.t = (text: string) => t(text, newValue)\n          localStorage?.setItem?.(cacheKey, newValue)\n          langEvent.bus.fire(langEvent.LANG_CHANGE_EVENT, { i18n: target })\n        }\n\n        target[prop] = newValue\n\n        return true\n      },\n    },\n  )\n}\n", "import { adapters, constants, utils, helpers } from '@cloudbase/utilities'\nimport { SDKAdapterInterface, CloudbaseAdapter, IRequestConfig } from '@cloudbase/adapter-interface'\nimport {\n  ICloudbaseConfig,\n  ICloudbaseUpgradedConfig,\n  ICloudbase,\n  ICloudbaseExtension,\n  KV,\n  ICloudbasePlatformInfo,\n  EndPointKey,\n  ICloudbaseApis,\n} from '@cloudbase/types'\nimport { ICloudbaseAuth } from '@cloudbase/types/auth'\nimport { registerComponent, registerHook } from './libs/component'\nimport { getWxDefaultAdapter, Platform } from './libs/adapter'\nimport { ICloudbaseComponent, ICloudbaseHook } from '@cloudbase/types/component'\nimport { ICloudbaseCache } from '@cloudbase/types/cache'\nimport { initCache, getCacheByEnvId, getLocalCache } from './libs/cache'\nimport { ICloudbaseRequest } from '@cloudbase/types/request'\nimport { initRequest, getRequestByEnvId } from './libs/request'\nimport {\n  getSdkName,\n  setSdkVersion,\n  setRegionLevelEndpoint,\n  setSdkName,\n  setGatewayEndPointWithEnv,\n  type ISetEndPointWithKey,\n  setEndPointInfo,\n  getEndPointInfo,\n  getSdkVersion,\n  DEFAULT_PROTOCOL,\n} from './constants/common'\nimport { i18nProxy, LANGS } from './libs/lang'\nexport { getBaseEndPoint } from './constants/common'\nexport { LANGS } from './libs/lang'\nconst { useAdapters, useDefaultAdapter } = adapters\nconst { ERRORS, COMMUNITY_SITE_URL } = constants\nconst { printWarn } = utils\nconst { catchErrorsDecorator } = helpers\n\n/**\n * @constant 默认配置\n */\nconst DEFAULT_INIT_CONFIG: Partial<ICloudbaseConfig> = {\n  timeout: 15000,\n  persistence: 'local', // 持久化存储类型\n}\n\n// timeout上限10分钟\nconst MAX_TIMEOUT = 1000 * 60 * 10\n// timeout下限100ms\nconst MIN_TIMEOUT = 100\n\nconst extensionMap: KV<ICloudbaseExtension> = {}\n\nclass Cloudbase implements ICloudbase {\n  public authInstance: ICloudbaseAuth\n  public oauthInstance: any\n  public requestClient: any\n  public oauthClient: any\n  public version: string\n  public auth: ICloudbase['auth'] & ICloudbaseAuth\n  public apis: ICloudbaseApis\n  private cloudbaseConfig: ICloudbaseConfig\n\n  constructor(config?: ICloudbaseConfig) {\n    this.cloudbaseConfig = config ? config : this.cloudbaseConfig\n    this.authInstance = null\n    this.oauthInstance = null\n    this.version = getSdkVersion()\n  }\n\n  get config() {\n    return this.cloudbaseConfig\n  }\n\n  get platform(): ICloudbasePlatformInfo {\n    return Platform\n  }\n\n  get cache(): ICloudbaseCache {\n    return getCacheByEnvId(this.cloudbaseConfig.env)\n  }\n\n  get localCache(): ICloudbaseCache {\n    return getLocalCache(this.cloudbaseConfig.env)\n  }\n\n  get request(): ICloudbaseRequest {\n    return getRequestByEnvId(this.cloudbaseConfig.env)\n  }\n\n  @catchErrorsDecorator({\n    mode: 'sync',\n    title: 'Cloudbase 初始化失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 调用 cloudbase.init() 的语法或参数是否正确',\n      '  2 - 如果是非浏览器环境，是否配置了安全应用来源（https://docs.cloudbase.net/api-reference/webv3/adapter#%E7%AC%AC-2-%E6%AD%A5%E9%85%8D%E7%BD%AE%E5%AE%89%E5%85%A8%E5%BA%94%E7%94%A8%E6%9D%A5%E6%BA%90）',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public init(config: ICloudbaseConfig & { lang?: LANGS }): Cloudbase {\n    if (!config.env) {\n      throw new Error(JSON.stringify({\n        code: ERRORS.INVALID_PARAMS,\n        msg: 'env must not be specified',\n      }),)\n    }\n    // config.endPointMode = config.endPointMode || 'GATEWAY'\n\n    // 初始化时若未兼容平台，则使用默认adapter\n    if (!Platform.adapter) {\n      this.useDefaultAdapter()\n    }\n\n    const reqConfig: IRequestConfig = {\n      timeout: config.timeout || 5000,\n      timeoutMsg: `[${getSdkName()}][REQUEST TIMEOUT] request had been abort since didn't finished within${\n        config.timeout / 1000\n      }s`,\n    }\n\n    this.requestClient = new Platform.adapter.reqClass(reqConfig)\n\n    this.cloudbaseConfig = {\n      ...DEFAULT_INIT_CONFIG,\n      ...config,\n      i18n: i18nProxy(Platform, config),\n    }\n\n    delete (this.cloudbaseConfig as any).lang\n    // 修正timeout取值\n    this.cloudbaseConfig.timeout = this.formatTimeout(this.cloudbaseConfig.timeout)\n    // 初始化cache和request\n    const { env, persistence, debug, timeout, oauthClient, i18n } = this.cloudbaseConfig\n    initCache({ env, persistence, debug, platformInfo: this.platform })\n\n    setRegionLevelEndpoint(env, config.region || '')\n    setGatewayEndPointWithEnv(env, DEFAULT_PROTOCOL, config.region || '')\n\n    const app = new Cloudbase(this.cloudbaseConfig)\n    initRequest({\n      env,\n      region: config.region || '',\n      timeout,\n      oauthClient,\n      _fromApp: app,\n      i18n,\n      endPointMode: config.endPointMode,\n    })\n    app.requestClient = this.requestClient\n    ;(this as any)?.fire?.('cloudbase_init', app)\n\n    this.try2InitAuth(app)\n\n    return app\n  }\n\n  public updateConfig(config: ICloudbaseUpgradedConfig) {\n    const { persistence, debug } = config\n    this.cloudbaseConfig.persistence = persistence\n    this.cloudbaseConfig.debug = debug\n    // persistence改动影响cache\n    initCache({ env: this.cloudbaseConfig.env, persistence, debug, platformInfo: this.platform })\n  }\n\n  public updateLang(lang: LANGS) {\n    if (!lang || lang === this.cloudbaseConfig.i18n?.lang) return\n\n    this.cloudbaseConfig.i18n.lang = lang\n  }\n\n  public registerExtension(ext: ICloudbaseExtension) {\n    extensionMap[ext.name] = ext\n  }\n  @catchErrorsDecorator({\n    title: '调用扩展能力失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 调用 invokeExtension() 的语法或参数是否正确',\n      '  2 - 被调用的扩展能力是否已经安装并通过 registerExtension() 注册',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async invokeExtension(name: string, opts: any) {\n    const ext = extensionMap[name]\n    if (!ext) {\n      throw new Error(JSON.stringify({\n        code: ERRORS.INVALID_PARAMS,\n        msg: `extension:${name} must be registered before invoke`,\n      }),)\n    }\n\n    return await ext.invoke(opts, this)\n  }\n\n  public useAdapters(adapters: CloudbaseAdapter | CloudbaseAdapter[], options?: any) {\n    const { adapter, runtime } = useAdapters(adapters, options) || {}\n    adapter && (Platform.adapter = adapter as SDKAdapterInterface)\n    runtime && (Platform.runtime = runtime as string)\n  }\n\n  public registerHook(hook: ICloudbaseHook) {\n    registerHook(Cloudbase, hook)\n  }\n\n  public registerComponent(component: ICloudbaseComponent) {\n    registerComponent(Cloudbase, component)\n  }\n\n  public registerVersion(version: string) {\n    setSdkVersion(version)\n    this.version = version\n  }\n\n  public registerSdkName(name: string) {\n    setSdkName(name)\n  }\n\n  /** 设置 tcb api 的 endpoint */\n  public registerEndPoint(url: string, protocol?: 'http' | 'https') {\n    setEndPointInfo({ baseUrl: url, protocol, env: this.config.env, endPointKey: 'CLOUD_API' })\n  }\n\n  /** 设置网关/tcb api的 endPoint，通过 key 指定 */\n  public registerEndPointWithKey(props: ISetEndPointWithKey) {\n    setEndPointInfo({\n      env: this.config.env,\n      endPointKey: props.key,\n      baseUrl: props.url,\n      protocol: props.protocol,\n    })\n  }\n\n  /** 拿网关/tcb api的 endPoint，通过 key 指定 */\n  public getEndPointWithKey(key: EndPointKey) {\n    const info = getEndPointInfo(this.config.env, key)\n    return {\n      BASE_URL: info.baseUrl,\n      PROTOCOL: info.protocol,\n    }\n  }\n\n  // 解析URL参数\n  public parseCaptcha(url) {\n    return utils.parseCaptcha(url)\n  }\n\n  private useDefaultAdapter() {\n    const { adapter, runtime } = useDefaultAdapter.bind(this)()\n    Platform.adapter = adapter as SDKAdapterInterface\n    Platform.runtime = runtime as string\n  }\n\n  private formatTimeout(timeout: number) {\n    switch (true) {\n      case timeout > MAX_TIMEOUT:\n        printWarn(ERRORS.INVALID_PARAMS, 'timeout is greater than maximum value[10min]')\n        return MAX_TIMEOUT\n      case timeout < MIN_TIMEOUT:\n        printWarn(ERRORS.INVALID_PARAMS, 'timeout is less than maximum value[100ms]')\n        return MIN_TIMEOUT\n      default:\n        return timeout\n    }\n  }\n\n  private try2InitAuth(app) {\n    try {\n      app.auth()\n    } catch (error) {\n      console.log('try2InitAuth error:', error)\n    }\n  }\n}\n\n// 类型导出\nexport type { Cloudbase }\n\n// 值导出\nexport const cloudbase: ICloudbase = new Cloudbase()\n\ncloudbase.useAdapters(getWxDefaultAdapter())\n\n// 默认导出实例\nexport default cloudbase\n", "export const AUTH_API_PREFIX = '/auth';\nexport var ApiUrls;\n(function (ApiUrls) {\n    ApiUrls[\"AUTH_SIGN_UP_URL\"] = \"/v1/signup\";\n    ApiUrls[\"AUTH_TOKEN_URL\"] = \"/v1/token\";\n    ApiUrls[\"AUTH_REVOKE_URL\"] = \"/v1/revoke\";\n    ApiUrls[\"WEDA_USER_URL\"] = \"/v1/plugin/weda/userinfo\";\n    ApiUrls[\"AUTH_RESET_PASSWORD\"] = \"/v1/reset\";\n    ApiUrls[\"AUTH_GET_DEVICE_CODE\"] = \"/v1/device/code\";\n    ApiUrls[\"CHECK_USERNAME\"] = \"/v1/checkUsername\";\n    ApiUrls[\"CHECK_IF_USER_EXIST\"] = \"/v1/checkIfUserExist\";\n    ApiUrls[\"GET_PROVIDER_TYPE\"] = \"/v1/mgr/provider/providerSubType\";\n    ApiUrls[\"AUTH_SIGN_IN_URL\"] = \"/v1/signin\";\n    ApiUrls[\"AUTH_SIGN_IN_ANONYMOUSLY_URL\"] = \"/v1/signin/anonymously\";\n    ApiUrls[\"AUTH_SIGN_IN_WITH_PROVIDER_URL\"] = \"/v1/signin/with/provider\";\n    ApiUrls[\"AUTH_SIGN_IN_WITH_WECHAT_URL\"] = \"/v1/signin/wechat/noauth\";\n    ApiUrls[\"AUTH_SIGN_IN_CUSTOM\"] = \"/v1/signin/custom\";\n    ApiUrls[\"PROVIDER_TOKEN_URL\"] = \"/v1/provider/token\";\n    ApiUrls[\"PROVIDER_URI_URL\"] = \"/v1/provider/uri\";\n    ApiUrls[\"USER_ME_URL\"] = \"/v1/user/me\";\n    ApiUrls[\"AUTH_SIGNOUT_URL\"] = \"/v1/user/signout\";\n    ApiUrls[\"USER_QUERY_URL\"] = \"/v1/user/query\";\n    ApiUrls[\"USER_PRIFILE_URL\"] = \"/v1/user/profile\";\n    ApiUrls[\"USER_BASIC_EDIT_URL\"] = \"/v1/user/basic/edit\";\n    ApiUrls[\"USER_TRANS_BY_PROVIDER_URL\"] = \"/v1/user/trans/by/provider\";\n    ApiUrls[\"PROVIDER_LIST\"] = \"/v1/user/provider\";\n    ApiUrls[\"PROVIDER_BIND_URL\"] = \"/v1/user/provider/bind\";\n    ApiUrls[\"PROVIDER_UNBIND_URL\"] = \"/v1/user/provider\";\n    ApiUrls[\"CHECK_PWD_URL\"] = \"/v1/user/sudo\";\n    ApiUrls[\"SUDO_URL\"] = \"/v1/user/sudo\";\n    ApiUrls[\"BIND_CONTACT_URL\"] = \"/v1/user/contact\";\n    ApiUrls[\"AUTH_SET_PASSWORD\"] = \"/v1/user/password\";\n    ApiUrls[\"AUTHORIZE_DEVICE_URL\"] = \"/v1/user/device/authorize\";\n    ApiUrls[\"AUTHORIZE_URL\"] = \"/v1/user/authorize\";\n    ApiUrls[\"AUTHORIZE_INFO_URL\"] = \"/v1/user/authorize/info\";\n    ApiUrls[\"AUTHORIZED_DEVICES_DELETE_URL\"] = \"/v1/user/authorized/devices/\";\n    ApiUrls[\"AUTH_REVOKE_ALL_URL\"] = \"/v1/user/revoke/all\";\n    ApiUrls[\"GET_USER_BEHAVIOR_LOG\"] = \"/v1/user/security/history\";\n    ApiUrls[\"VERIFICATION_URL\"] = \"/v1/verification\";\n    ApiUrls[\"VERIFY_URL\"] = \"/v1/verification/verify\";\n    ApiUrls[\"CAPTCHA_DATA_URL\"] = \"/v1/captcha/data\";\n    ApiUrls[\"VERIFY_CAPTCHA_DATA_URL\"] = \"/v1/captcha/data/verify\";\n    ApiUrls[\"GET_CAPTCHA_URL\"] = \"/v1/captcha/init\";\n    ApiUrls[\"GET_MINIPROGRAM_QRCODE\"] = \"/v1/qrcode/generate\";\n    ApiUrls[\"GET_MINIPROGRAM_QRCODE_STATUS\"] = \"/v1/qrcode/get/status\";\n})(ApiUrls || (ApiUrls = {}));\nexport var ApiUrlsV2;\n(function (ApiUrlsV2) {\n    ApiUrlsV2[\"AUTH_SIGN_IN_URL\"] = \"/v2/signin/username\";\n    ApiUrlsV2[\"AUTH_TOKEN_URL\"] = \"/v2/token\";\n    ApiUrlsV2[\"USER_ME_URL\"] = \"/v2/user/me\";\n    ApiUrlsV2[\"VERIFY_URL\"] = \"/v2/signin/verificationcode\";\n    ApiUrlsV2[\"AUTH_SIGN_IN_WITH_PROVIDER_URL\"] = \"/v2/signin/with/provider\";\n    ApiUrlsV2[\"AUTH_PUBLIC_KEY\"] = \"/v2/signin/publichkey\";\n    ApiUrlsV2[\"AUTH_RESET_PASSWORD\"] = \"/v2/signin/password/update\";\n})(ApiUrlsV2 || (ApiUrlsV2 = {}));\nexport var VerificationUsages;\n(function (VerificationUsages) {\n    VerificationUsages[\"REGISTER\"] = \"REGISTER\";\n    VerificationUsages[\"SIGN_IN\"] = \"SIGN_IN\";\n    VerificationUsages[\"PASSWORD_RESET\"] = \"PASSWORD_RESET\";\n    VerificationUsages[\"EMAIL_ADDRESS_CHANGE\"] = \"EMAIL_ADDRESS_CHANGE\";\n    VerificationUsages[\"PHONE_NUMBER_CHANGE\"] = \"PHONE_NUMBER_CHANGE\";\n})(VerificationUsages || (VerificationUsages = {}));\nexport var ErrorType;\n(function (ErrorType) {\n    ErrorType[\"UNREACHABLE\"] = \"unreachable\";\n    ErrorType[\"LOCAL\"] = \"local\";\n    ErrorType[\"CANCELLED\"] = \"cancelled\";\n    ErrorType[\"UNKNOWN\"] = \"unknown\";\n    ErrorType[\"UNAUTHENTICATED\"] = \"unauthenticated\";\n    ErrorType[\"RESOURCE_EXHAUSTED\"] = \"resource_exhausted\";\n    ErrorType[\"FAILED_PRECONDITION\"] = \"failed_precondition\";\n    ErrorType[\"INVALID_ARGUMENT\"] = \"invalid_argument\";\n    ErrorType[\"DEADLINE_EXCEEDED\"] = \"deadline_exceeded\";\n    ErrorType[\"NOT_FOUND\"] = \"not_found\";\n    ErrorType[\"ALREADY_EXISTS\"] = \"already_exists\";\n    ErrorType[\"PERMISSION_DENIED\"] = \"permission_denied\";\n    ErrorType[\"ABORTED\"] = \"aborted\";\n    ErrorType[\"OUT_OF_RANGE\"] = \"out_of_range\";\n    ErrorType[\"UNIMPLEMENTED\"] = \"unimplemented\";\n    ErrorType[\"INTERNAL\"] = \"internal\";\n    ErrorType[\"UNAVAILABLE\"] = \"unavailable\";\n    ErrorType[\"DATA_LOSS\"] = \"data_loss\";\n    ErrorType[\"INVALID_PASSWORD\"] = \"invalid_password\";\n    ErrorType[\"PASSWORD_NOT_SET\"] = \"password_not_set\";\n    ErrorType[\"INVALID_STATUS\"] = \"invalid_status\";\n    ErrorType[\"USER_PENDING\"] = \"user_pending\";\n    ErrorType[\"USER_BLOCKED\"] = \"user_blocked\";\n    ErrorType[\"INVALID_VERIFICATION_CODE\"] = \"invalid_verification_code\";\n    ErrorType[\"TWO_FACTOR_REQUIRED\"] = \"two_factor_required\";\n    ErrorType[\"INVALID_TWO_FACTOR\"] = \"invalid_two_factor\";\n    ErrorType[\"INVALID_TWO_FACTOR_RECOVERY\"] = \"invalid_two_factor_recovery\";\n    ErrorType[\"UNDER_REVIEW\"] = \"under_review\";\n    ErrorType[\"INVALID_REQUEST\"] = \"invalid_request\";\n    ErrorType[\"UNAUTHORIZED_CLIENT\"] = \"unauthorized_client\";\n    ErrorType[\"ACCESS_DENIED\"] = \"access_denied\";\n    ErrorType[\"UNSUPPORTED_RESPONSE_TYPE\"] = \"unsupported_response_type\";\n    ErrorType[\"INVALID_SCOPE\"] = \"invalid_scope\";\n    ErrorType[\"INVALID_GRANT\"] = \"invalid_grant\";\n    ErrorType[\"SERVER_ERROR\"] = \"server_error\";\n    ErrorType[\"TEMPORARILY_UNAVAILABLE\"] = \"temporarily_unavailable\";\n    ErrorType[\"INTERACTION_REQUIRED\"] = \"interaction_required\";\n    ErrorType[\"LOGIN_REQUIRED\"] = \"login_required\";\n    ErrorType[\"ACCOUNT_SELECTION_REQUIRED\"] = \"account_selection_required\";\n    ErrorType[\"CONSENT_REQUIRED\"] = \"consent_required\";\n    ErrorType[\"INVALID_REQUEST_URI\"] = \"invalid_request_uri\";\n    ErrorType[\"INVALID_REQUEST_OBJECT\"] = \"invalid_request_object\";\n    ErrorType[\"REQUEST_NOT_SUPPORTED\"] = \"request_not_supported\";\n    ErrorType[\"REQUEST_URI_NOT_SUPPORTED\"] = \"request_uri_not_supported\";\n    ErrorType[\"REGISTRATION_NOT_SUPPORTED\"] = \"registration_not_supported\";\n    ErrorType[\"CAPTCHA_REQUIRED\"] = \"captcha_required\";\n    ErrorType[\"CAPTCHA_INVALID\"] = \"captcha_invalid\";\n})(ErrorType || (ErrorType = {}));\nexport const LOGIN_STATE_CHANGED_TYPE = {\n    SIGN_OUT: 'sign_out',\n    SIGN_IN: 'sign_in',\n    CREDENTIALS_ERROR: 'credentials_error',\n};\nexport const AUTH_STATE_CHANGED_TYPE = {\n    SIGNED_OUT: 'SIGNED_OUT',\n    SIGNED_IN: 'SIGNED_IN',\n    INITIAL_SESSION: 'INITIAL_SESSION',\n    PASSWORD_RECOVERY: 'PASSWORD_RECOVERY',\n    TOKEN_REFRESHED: 'TOKEN_REFRESHED',\n    USER_UPDATED: 'USER_UPDATED',\n    BIND_IDENTITY: 'BIND_IDENTITY',\n};\nexport const EVENTS = {\n    LOGIN_STATE_CHANGED: 'loginStateChanged',\n    AUTH_STATE_CHANGED: 'authStateChanged',\n};\nexport const OAUTH_TYPE = {\n    SIGN_IN: 'sign_in',\n    BIND_IDENTITY: 'bind_identity',\n};\n", "export { ErrorType } from '../auth/consts';\nexport var Syntax;\n(function (Syntax) {\n    Syntax[\"CLIENT_ID\"] = \"client_id\";\n    Syntax[\"CLIENT_SECRET\"] = \"client_secret\";\n    Syntax[\"RESPONSE_TYPE\"] = \"response_type\";\n    Syntax[\"SCOPE\"] = \"scope\";\n    Syntax[\"STATE\"] = \"state\";\n    Syntax[\"REDIRECT_URI\"] = \"redirect_uri\";\n    Syntax[\"ERROR\"] = \"error\";\n    Syntax[\"ERROR_DESCRIPTION\"] = \"error_description\";\n    Syntax[\"ERROR_URI\"] = \"error_uri\";\n    Syntax[\"GRANT_TYPE\"] = \"grant_type\";\n    Syntax[\"CODE\"] = \"code\";\n    Syntax[\"ACCESS_TOKEN\"] = \"access_token\";\n    Syntax[\"TOKEN_TYPE\"] = \"token_type\";\n    Syntax[\"EXPIRES_IN\"] = \"expires_in\";\n    Syntax[\"USERNAME\"] = \"username\";\n    Syntax[\"PASSWORD\"] = \"password\";\n    Syntax[\"REFRESH_TOKEN\"] = \"refresh_token\";\n})(Syntax || (Syntax = {}));\n", "export function uuidv4() {\n    return 'xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n        const r = (Math.random() * 16) | 0;\n        const v = c === 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\n", "import { ErrorType } from './consts';\nimport { ApiUrls, ApiUrlsV2, AUTH_API_PREFIX, AUTH_STATE_CHANGED_TYPE, EVENTS } from '../auth/consts';\nimport { uuidv4 } from '../utils/uuid';\nimport { getPathName } from '../utils/index';\nimport { SinglePromise } from '../utils/function/single-promise';\nimport { weBtoa } from '../utils/base64';\nimport { isMp } from '../utils/mp';\nimport { langEvent } from '@cloudbase/utilities';\nconst RequestIdHeaderName = 'x-request-id';\nconst DeviceIdHeaderName = 'x-device-id';\nconst DeviceIdSectionName = 'device_id';\nexport const defaultRequest = async function (url, options) {\n    let result = null;\n    let responseError = null;\n    try {\n        const copyOptions = Object.assign({}, options);\n        if (!copyOptions.method) {\n            copyOptions.method = 'GET';\n        }\n        if (copyOptions.body && typeof copyOptions.body !== 'string') {\n            copyOptions.body = JSON.stringify(copyOptions.body);\n        }\n        const responseResult = await fetch(url, copyOptions);\n        const jsonResponse = await responseResult.json();\n        if (jsonResponse?.error) {\n            responseError = jsonResponse;\n            responseError.error_uri = new URL(url).pathname;\n        }\n        else {\n            result = jsonResponse;\n        }\n    }\n    catch (error) {\n        responseError = {\n            error: ErrorType.UNREACHABLE,\n            error_description: error.message,\n            error_uri: new URL(url).pathname,\n        };\n    }\n    if (responseError) {\n        throw responseError;\n    }\n    else {\n        return result;\n    }\n};\nexport const toResponseError = (error, options) => {\n    let responseError;\n    const formatOptions = options || {};\n    if (error instanceof Error) {\n        responseError = {\n            error: formatOptions.error || ErrorType.LOCAL,\n            error_description: formatOptions.error_description || error.message,\n            error_uri: formatOptions.error_uri,\n            details: formatOptions.details || error.stack,\n        };\n    }\n    else {\n        const formatError = error || {};\n        responseError = {\n            error: formatOptions.error || formatError.error || ErrorType.LOCAL,\n            error_description: formatOptions.error_description || formatError.error_description,\n            error_uri: formatOptions.error_uri || formatError.error_uri,\n            details: formatOptions.details || formatError.details,\n        };\n    }\n    return responseError;\n};\nexport function generateRequestId() {\n    return uuidv4();\n}\nclass DefaultStorage {\n    constructor(opts) {\n        this._env = opts?.env || '';\n    }\n    async getItem(key) {\n        return window.localStorage.getItem(`${key}${this._env}`);\n    }\n    async removeItem(key) {\n        window.localStorage.removeItem(`${key}${this._env}`);\n    }\n    async setItem(key, value) {\n        window.localStorage.setItem(`${key}${this._env}`, value);\n    }\n    getItemSync(key) {\n        return window.localStorage.getItem(`${key}${this._env}`);\n    }\n    removeItemSync(key) {\n        window.localStorage.removeItem(`${key}${this._env}`);\n    }\n    setItemSync(key, value) {\n        window.localStorage.setItem(`${key}${this._env}`, value);\n    }\n}\nexport const defaultStorage = new DefaultStorage();\nfunction isCredentialsExpired(credentials) {\n    let isExpired = true;\n    if (credentials?.expires_at && credentials?.access_token) {\n        isExpired = credentials.expires_at < new Date();\n    }\n    return isExpired;\n}\nclass LocalCredentials {\n    constructor(options) {\n        this.credentials = null;\n        this.accessKeyCredentials = null;\n        this.singlePromise = null;\n        this.tokenSectionName = options.tokenSectionName;\n        this.storage = options.storage;\n        this.clientId = options.clientId;\n        this.singlePromise = new SinglePromise({ clientId: this.clientId });\n        this.credentials = options.credentials || null;\n    }\n    getStorageCredentialsSync() {\n        let credentials = null;\n        const tokenStr = this.storage.getItemSync(this.tokenSectionName);\n        if (tokenStr !== undefined && tokenStr !== null) {\n            try {\n                credentials = JSON.parse(tokenStr);\n                if (credentials?.expires_at) {\n                    credentials.expires_at = new Date(credentials.expires_at);\n                }\n            }\n            catch (error) {\n                this.storage.removeItem(this.tokenSectionName);\n                credentials = null;\n            }\n        }\n        return credentials;\n    }\n    async setCredentials(credentials) {\n        if (credentials?.expires_in) {\n            if (!credentials?.expires_at) {\n                credentials.expires_at = new Date(Date.now() + (credentials.expires_in - 30) * 1000);\n            }\n            if (this.storage) {\n                const tokenStr = JSON.stringify(credentials);\n                await this.storage.setItem(this.tokenSectionName, tokenStr);\n            }\n            this.credentials = credentials;\n        }\n        else {\n            if (this.storage) {\n                await this.storage.removeItem(this.tokenSectionName);\n            }\n            this.credentials = null;\n        }\n    }\n    setAccessKeyCredentials(credentials) {\n        this.accessKeyCredentials = credentials;\n    }\n    async getCredentials() {\n        return this.singlePromise.run('getCredentials', async () => {\n            if (isCredentialsExpired(this.credentials)) {\n                const { credentials, isAccessKeyCredentials } = await this.getStorageCredentials();\n                if (isAccessKeyCredentials) {\n                    return credentials;\n                }\n                this.credentials = credentials;\n            }\n            return this.credentials;\n        });\n    }\n    async getStorageCredentials() {\n        return this.singlePromise.run('_getStorageCredentials', async () => {\n            let credentials = null;\n            let isAccessKeyCredentials = false;\n            const tokenStr = await this.storage.getItem(this.tokenSectionName);\n            if (!!tokenStr) {\n                try {\n                    credentials = JSON.parse(tokenStr);\n                    if (credentials?.expires_at) {\n                        credentials.expires_at = new Date(credentials.expires_at);\n                    }\n                }\n                catch (error) {\n                    await this.storage.removeItem(this.tokenSectionName);\n                    credentials = null;\n                }\n            }\n            else {\n                credentials = this.accessKeyCredentials || null;\n                isAccessKeyCredentials = true;\n            }\n            return { credentials, isAccessKeyCredentials };\n        });\n    }\n}\nclass OAuth2Client {\n    constructor(options) {\n        this.initializePromise = null;\n        this.lockAcquired = false;\n        this.pendingInLock = [];\n        this.singlePromise = null;\n        if (!options.clientSecret) {\n            options.clientSecret = '';\n        }\n        if (!options.clientId && options.env) {\n            options.clientId = options.env;\n        }\n        this.apiOrigin = options.apiOrigin;\n        this.apiPath = options.apiPath || AUTH_API_PREFIX;\n        this.clientId = options.clientId;\n        this.i18n = options.i18n;\n        this.eventBus = options.eventBus;\n        this.singlePromise = new SinglePromise({ clientId: this.clientId });\n        this.retry = this.formatRetry(options.retry, OAuth2Client.defaultRetry);\n        if (options.baseRequest) {\n            this.baseRequest = options.baseRequest;\n        }\n        else {\n            this.baseRequest = defaultRequest;\n        }\n        this.tokenInURL = options.tokenInURL;\n        this.headers = options.headers;\n        this.storage = options.storage || defaultStorage;\n        this.localCredentials = new LocalCredentials({\n            tokenSectionName: `credentials_${options.clientId}`,\n            storage: this.storage,\n            clientId: options.clientId,\n        });\n        this.clientSecret = options.clientSecret;\n        if (options.clientId) {\n            this.basicAuth = `Basic ${weBtoa(`${options.clientId}:${this.clientSecret}`)}`;\n        }\n        this.wxCloud = options.wxCloud;\n        try {\n            if (isMp()) {\n                this.useWxCloud = options.useWxCloud;\n                if (this.wxCloud === undefined && options.env) {\n                    wx.cloud.init({ env: options.env });\n                    this.wxCloud = wx.cloud;\n                }\n            }\n        }\n        catch (error) {\n        }\n        this.refreshTokenFunc = options.refreshTokenFunc || this.defaultRefreshTokenFunc;\n        this.anonymousSignInFunc = options.anonymousSignInFunc;\n        this.onCredentialsError = options.onCredentialsError;\n        this.getInitialSession = options.getInitialSession;\n        this.onInitialSessionObtained = options.onInitialSessionObtained;\n        this.logDebugMessages = options.debug ?? false;\n        langEvent.bus.on(langEvent.LANG_CHANGE_EVENT, (params) => {\n            this.i18n = params.data?.i18n || this.i18n;\n        });\n    }\n    setGetInitialSession(callback) {\n        this.getInitialSession = callback;\n    }\n    setOnInitialSessionObtained(callback) {\n        this.onInitialSessionObtained = callback;\n    }\n    async initialize(func) {\n        if (this.initializePromise) {\n            return await this.initializePromise;\n        }\n        if (func !== undefined) {\n            this.initializePromise = func;\n            return await this.initializePromise;\n        }\n        this.initializePromise = (async () => await this._acquireLock(-1, async () => await this._initialize()))();\n        return await this.initializePromise;\n    }\n    async setCredentials(credentials) {\n        await this.initializePromise;\n        return this._acquireLock(-1, async () => this.localCredentials.setCredentials(credentials));\n    }\n    setAccessKeyCredentials(credentials) {\n        return this.localCredentials.setAccessKeyCredentials(credentials);\n    }\n    async getAccessToken() {\n        await this.initializePromise;\n        const credentials = await this.getCredentials();\n        if (credentials?.access_token) {\n            return Promise.resolve(credentials.access_token);\n        }\n        const respErr = { error: ErrorType.UNAUTHENTICATED };\n        return Promise.reject(respErr);\n    }\n    async request(url, options) {\n        if (!options) {\n            options = {};\n        }\n        const retry = this.formatRetry(options.retry, this.retry);\n        options.headers = { ...options.headers, [this.i18n?.LANG_HEADER_KEY]: this.i18n?.lang };\n        if (this.headers) {\n            options.headers = {\n                ...this.headers,\n                ...options.headers,\n            };\n        }\n        if (!options.headers[RequestIdHeaderName]) {\n            options.headers[RequestIdHeaderName] = generateRequestId();\n        }\n        if (!options.headers[DeviceIdHeaderName]) {\n            const deviceId = await this.getDeviceId();\n            options.headers[DeviceIdHeaderName] = deviceId;\n        }\n        if (options?.withBasicAuth && this.basicAuth) {\n            options.headers.Authorization = this.basicAuth;\n        }\n        if (options?.withCredentials) {\n            const credentials = options.getCredentials ? await options.getCredentials() : await this.getCredentials();\n            if (credentials) {\n                if (this.tokenInURL) {\n                    if (url.indexOf('?') < 0) {\n                        url += '?';\n                    }\n                    url += `access_token=${credentials.access_token}`;\n                }\n                else {\n                    options.headers.Authorization = `${credentials.token_type} ${credentials.access_token}`;\n                }\n            }\n        }\n        else {\n            if (this.clientId && url.indexOf('client_id') < 0) {\n                url += url.indexOf('?') < 0 ? '?' : '&';\n                url += `client_id=${this.clientId}`;\n            }\n        }\n        if (url.startsWith('/')) {\n            url = `${this.apiOrigin}${this.apiPath}${url}`;\n        }\n        let response = null;\n        const maxRequestTimes = retry + 1;\n        for (let requestTime = 0; requestTime < maxRequestTimes; requestTime++) {\n            try {\n                if (options.useWxCloud || this.useWxCloud) {\n                    response = await this.wxCloudCallFunction(url, options);\n                }\n                else {\n                    response = await this.baseRequest(url, options);\n                }\n                if (!!response?.code) {\n                    throw ({\n                        error: response.code,\n                        error_description: response.message,\n                        error_uri: new URL(url).pathname,\n                    });\n                }\n                break;\n            }\n            catch (responseError) {\n                if (options.withCredentials && responseError && responseError.error === ErrorType.UNAUTHENTICATED) {\n                    await this.setCredentials(null);\n                    return Promise.reject(responseError);\n                }\n                if (requestTime === retry || !responseError || responseError.error !== 'unreachable') {\n                    return Promise.reject(responseError);\n                }\n            }\n            await this.sleep(OAuth2Client.retryInterval);\n        }\n        return response;\n    }\n    async wxCloudCallFunction(url, options) {\n        let result = null;\n        let responseError = null;\n        try {\n            let userAgent = '';\n            try {\n                userAgent = await wx.getRendererUserAgent();\n            }\n            catch (error) { }\n            const { result: responseResult } = await this.wxCloud.callFunction({\n                name: 'httpOverCallFunction',\n                data: {\n                    url,\n                    method: options.method,\n                    headers: {\n                        origin: 'https://servicewechat.com',\n                        'User-Agent': userAgent,\n                        ...options.headers,\n                    },\n                    body: options.body,\n                },\n            });\n            if (responseResult?.body?.error_code) {\n                responseError = responseResult?.body;\n                responseError.error_uri = getPathName(url);\n            }\n            else {\n                result = responseResult?.body;\n            }\n        }\n        catch (error) {\n            responseError = {\n                error: ErrorType.UNREACHABLE,\n                error_description: error.message,\n                error_uri: getPathName(url),\n            };\n        }\n        if (responseError) {\n            throw responseError;\n        }\n        else {\n            return result;\n        }\n    }\n    async getCredentials() {\n        await this.initializePromise;\n        return this._acquireLock(-1, async () => this._getCredentials());\n    }\n    getCredentialsSync() {\n        const credentials = this.localCredentials.getStorageCredentialsSync();\n        return credentials;\n    }\n    getCredentialsAsync() {\n        return this.getCredentials();\n    }\n    async getScope() {\n        const credentials = await this.localCredentials.getCredentials();\n        if (!credentials) {\n            const msg = 'credentials not found';\n            this.onCredentialsError?.({ msg });\n            return this.unAuthenticatedError(msg);\n        }\n        return credentials.scope;\n    }\n    async getGroups() {\n        const credentials = await this.localCredentials.getCredentials();\n        if (!credentials) {\n            const msg = 'credentials not found';\n            this.onCredentialsError?.({ msg });\n            return this.unAuthenticatedError(msg);\n        }\n        return credentials.groups;\n    }\n    async refreshToken(credentials, options) {\n        await this.initializePromise;\n        return this._acquireLock(-1, async () => this._refreshToken(credentials, options));\n    }\n    async _refreshToken(credentials, options) {\n        return this.singlePromise.run('_refreshToken', async () => {\n            if (!credentials || !credentials.refresh_token) {\n                const msg = 'no refresh token found in credentials';\n                this.onCredentialsError?.({ msg });\n                return this.unAuthenticatedError(msg);\n            }\n            try {\n                const newCredentials = await this.refreshTokenFunc(credentials.refresh_token, credentials);\n                await this.localCredentials.setCredentials(newCredentials);\n                this.eventBus?.fire(EVENTS.AUTH_STATE_CHANGED, { event: AUTH_STATE_CHANGED_TYPE.TOKEN_REFRESHED });\n                return newCredentials;\n            }\n            catch (error) {\n                if (options?.throwError) {\n                    throw error;\n                }\n                if (error.error === ErrorType.INVALID_GRANT) {\n                    await this.localCredentials.setCredentials(null);\n                    const msg = error.error_description;\n                    this.onCredentialsError?.({ msg });\n                    return this.unAuthenticatedError(msg);\n                }\n                this.onCredentialsError?.({ msg: error.error_description });\n                return Promise.reject(error);\n            }\n        });\n    }\n    async anonymousLogin(credentials) {\n        return this.singlePromise.run('_anonymousLogin', async () => {\n            if (this.anonymousSignInFunc) {\n                const c = await this.anonymousSignInFunc(credentials);\n                credentials = c || (await this.localCredentials.getCredentials());\n            }\n            else {\n                credentials = await this.anonymousSignIn(credentials);\n            }\n            return credentials;\n        });\n    }\n    checkRetry(retry) {\n        let responseError = null;\n        if (typeof retry !== 'number' || retry < OAuth2Client.minRetry || retry > OAuth2Client.maxRetry) {\n            responseError = {\n                error: ErrorType.UNREACHABLE,\n                error_description: 'wrong options param: retry',\n            };\n        }\n        if (responseError) {\n            throw responseError;\n        }\n        return retry;\n    }\n    formatRetry(retry, defaultVale) {\n        if (typeof retry === 'undefined') {\n            return defaultVale;\n        }\n        return this.checkRetry(retry);\n    }\n    async sleep(ms) {\n        return new Promise((resolve) => {\n            setTimeout(() => {\n                resolve();\n            }, ms);\n        });\n    }\n    async anonymousSignIn(credentials) {\n        return this.singlePromise.run('_anonymous', async () => {\n            if (!credentials || credentials.scope !== 'anonymous') {\n                return this.unAuthenticatedError('no anonymous in credentials');\n            }\n            try {\n                const newCredentials = await this.request(ApiUrls.AUTH_SIGN_IN_ANONYMOUSLY_URL, {\n                    method: 'POST',\n                    withBasicAuth: true,\n                    body: {},\n                });\n                await this.localCredentials.setCredentials(newCredentials);\n                return newCredentials;\n            }\n            catch (error) {\n                if (error.error === ErrorType.INVALID_GRANT) {\n                    await this.localCredentials.setCredentials(null);\n                    return this.unAuthenticatedError(error.error_description);\n                }\n                return Promise.reject(error);\n            }\n        });\n    }\n    async defaultRefreshTokenFunc(refreshToken, credentials) {\n        if (refreshToken === undefined || refreshToken === '') {\n            const msg = 'refresh token not found';\n            this.onCredentialsError?.({ msg });\n            return this.unAuthenticatedError(msg);\n        }\n        let url = ApiUrls.AUTH_TOKEN_URL;\n        if (credentials?.version === 'v2') {\n            url = ApiUrlsV2.AUTH_TOKEN_URL;\n        }\n        const newCredentials = await this.request(url, {\n            method: 'POST',\n            body: {\n                client_id: this.clientId,\n                client_secret: this.clientSecret,\n                grant_type: 'refresh_token',\n                refresh_token: refreshToken,\n            },\n        });\n        return { ...newCredentials, version: credentials?.version || 'v1' };\n    }\n    async getDeviceId() {\n        if (this.deviceID) {\n            return this.deviceID;\n        }\n        let deviceId = await this.storage.getItem(DeviceIdSectionName);\n        if (!(typeof deviceId === 'string' && deviceId.length >= 16 && deviceId.length <= 48)) {\n            deviceId = uuidv4();\n            await this.storage.setItem(DeviceIdSectionName, deviceId);\n        }\n        this.deviceID = deviceId;\n        return deviceId;\n    }\n    unAuthenticatedError(err) {\n        const respErr = {\n            error: ErrorType.UNAUTHENTICATED,\n            error_description: err,\n        };\n        return Promise.reject(respErr);\n    }\n    _debug(...args) {\n        if (this.logDebugMessages) {\n            console.log('[OAuth2Client]', ...args);\n        }\n    }\n    async _initialize() {\n        try {\n            if (!this.getInitialSession) {\n                this._debug('#_initialize()', 'no getInitialSession callback set, skipping');\n                return { error: null };\n            }\n            this._debug('#_initialize()', 'calling getInitialSession callback');\n            try {\n                const { data, error } = await this.getInitialSession();\n                if (data?.session) {\n                    this._debug('#_initialize()', 'session obtained from getInitialSession', data.session);\n                    await this.localCredentials.setCredentials(data?.session);\n                }\n                if (this.onInitialSessionObtained) {\n                    this._debug('#_initialize()', 'calling onInitialSessionObtained callback');\n                    try {\n                        await this.onInitialSessionObtained(data, error);\n                    }\n                    catch (callbackError) {\n                        this._debug('#_initialize()', 'error in onInitialSessionObtained', callbackError);\n                    }\n                }\n                if (error) {\n                    this._debug('#_initialize()', 'error from getInitialSession', error);\n                    return { error };\n                }\n                return { error: null };\n            }\n            catch (err) {\n                this._debug('#_initialize()', 'exception during getInitialSession', err);\n                return { error: err instanceof Error ? err : new Error(String(err)) };\n            }\n        }\n        catch (error) {\n            this._debug('#_initialize()', 'unexpected error', error);\n            return { error: error instanceof Error ? error : new Error(String(error)) };\n        }\n        finally {\n            this._debug('#_initialize()', 'end');\n        }\n    }\n    async _acquireLock(acquireTimeout, fn) {\n        this._debug('#_acquireLock', 'begin', acquireTimeout);\n        try {\n            if (this.lockAcquired) {\n                const last = this.pendingInLock.length ? this.pendingInLock[this.pendingInLock.length - 1] : Promise.resolve();\n                const result = (async () => {\n                    await last;\n                    return await fn();\n                })();\n                this.pendingInLock.push((async () => {\n                    try {\n                        await result;\n                    }\n                    catch (_e) {\n                    }\n                })());\n                return result;\n            }\n            this._debug('#_acquireLock', 'acquiring lock for client', this.clientId);\n            try {\n                this.lockAcquired = true;\n                const result = fn();\n                this.pendingInLock.push((async () => {\n                    try {\n                        await result;\n                    }\n                    catch (_e) {\n                    }\n                })());\n                await result;\n                while (this.pendingInLock.length) {\n                    const waitOn = [...this.pendingInLock];\n                    await Promise.all(waitOn);\n                    this.pendingInLock.splice(0, waitOn.length);\n                }\n                return await result;\n            }\n            finally {\n                this._debug('#_acquireLock', 'releasing lock for client', this.clientId);\n                this.lockAcquired = false;\n            }\n        }\n        finally {\n            this._debug('#_acquireLock', 'end');\n        }\n    }\n    async _getCredentials() {\n        let credentials = await this.localCredentials.getCredentials();\n        if (!credentials) {\n            const msg = 'credentials not found';\n            this.onCredentialsError?.({ msg });\n            return this.unAuthenticatedError(msg);\n        }\n        if (isCredentialsExpired(credentials)) {\n            if (credentials.refresh_token) {\n                try {\n                    credentials = await this._refreshToken(credentials);\n                }\n                catch (error) {\n                    if (credentials.scope === 'anonymous') {\n                        credentials = await this.anonymousLogin(credentials);\n                    }\n                    else {\n                        this.onCredentialsError?.({ msg: error.error_description });\n                        return Promise.reject(error);\n                    }\n                }\n            }\n            else if (credentials.scope === 'anonymous') {\n                credentials = await this.anonymousLogin(credentials);\n            }\n            else {\n                const msg = 'no refresh token found in credentials';\n                this.onCredentialsError?.({ msg });\n                return this.unAuthenticatedError(msg);\n            }\n        }\n        return credentials;\n    }\n}\nOAuth2Client.defaultRetry = 2;\nOAuth2Client.minRetry = 0;\nOAuth2Client.maxRetry = 5;\nOAuth2Client.retryInterval = 1000;\nexport { OAuth2Client };\n", "let jsSdkFnPromiseMap = new Map();\nexport class SinglePromise {\n    constructor(options) {\n        this.clientId = options?.clientId || '';\n        jsSdkFnPromiseMap = (jsSdkFnPromiseMap || new Map());\n    }\n    async run(key, fn) {\n        key = `${this.clientId}_${key}`;\n        let result = jsSdkFnPromiseMap.get(key);\n        if (!result) {\n            result = new Promise((resolve, reject) => {\n                (async () => {\n                    try {\n                        await this.runIdlePromise();\n                        const fnResult = fn();\n                        resolve(await fnResult);\n                    }\n                    catch (error) {\n                        reject(error);\n                    }\n                    finally {\n                        jsSdkFnPromiseMap.delete(key);\n                    }\n                })();\n            });\n            jsSdkFnPromiseMap.set(key, result);\n        }\n        return result;\n    }\n    runIdlePromise() {\n        return Promise.resolve();\n    }\n}\n", "const b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nconst b64re = /^(?:[A-Za-z\\d+/]{4})*?(?:[A-Za-z\\d+/]{2}(?:==)?|[A-Za-z\\d+/]{3}=?)?$/;\nexport function weBtoa(string) {\n    string = String(string);\n    let bitmap;\n    let a;\n    let b;\n    let c;\n    let result = '';\n    let i = 0;\n    const rest = string.length % 3;\n    for (; i < string.length;) {\n        if ((a = string.charCodeAt(i++)) > 255 || (b = string.charCodeAt(i++)) > 255 || (c = string.charCodeAt(i++)) > 255)\n            throw new TypeError('Failed to execute \\'btoa\\' on \\'Window\\': The string to be encoded contains characters outside of the Latin1 range.');\n        bitmap = (a << 16) | (b << 8) | c;\n        result\n            += b64.charAt((bitmap >> 18) & 63)\n                + b64.charAt((bitmap >> 12) & 63)\n                + b64.charAt((bitmap >> 6) & 63)\n                + b64.charAt(bitmap & 63);\n    }\n    return rest ? result.slice(0, rest - 3) + '==='.substring(rest) : result;\n}\nexport const weAtob = function (string) {\n    string = String(string).replace(/[\\t\\n\\f\\r ]+/g, '');\n    if (!b64re.test(string))\n        throw new TypeError('Failed to execute \\'atob\\' on \\'Window\\': The string to be decoded is not correctly encoded.');\n    string += '=='.slice(2 - (string.length & 3));\n    let bitmap;\n    let result = '';\n    let r1;\n    let r2;\n    let i = 0;\n    for (; i < string.length;) {\n        bitmap = (b64.indexOf(string.charAt(i++)) << 18)\n            | (b64.indexOf(string.charAt(i++)) << 12)\n            | ((r1 = b64.indexOf(string.charAt(i++))) << 6)\n            | (r2 = b64.indexOf(string.charAt(i++)));\n        result\n            += r1 === 64\n                ? String.fromCharCode((bitmap >> 16) & 255)\n                : r2 === 64\n                    ? String.fromCharCode((bitmap >> 16) & 255, (bitmap >> 8) & 255)\n                    : String.fromCharCode((bitmap >> 16) & 255, (bitmap >> 8) & 255, bitmap & 255);\n    }\n    return result;\n};\nfunction b64DecodeUnicode(str) {\n    return decodeURIComponent(weAtob(str).replace(/(.)/g, (p) => {\n        let code = p.charCodeAt(0).toString(16)\n            .toUpperCase();\n        if (code.length < 2) {\n            code = `0${code}`;\n        }\n        return `%${code}`;\n    }));\n}\nexport function base64_url_decode(str) {\n    let output = str.replace(/-/g, '+').replace(/_/g, '/');\n    switch (output.length % 4) {\n        case 0:\n            break;\n        case 2:\n            output += '==';\n            break;\n        case 3:\n            output += '=';\n            break;\n        default:\n            throw new Error('Illegal base64url string!');\n    }\n    try {\n        return b64DecodeUnicode(output);\n    }\n    catch (err) {\n        return weAtob(output);\n    }\n}\nexport function weappJwtDecode(token, options) {\n    if (typeof token !== 'string') {\n        throw new Error('Invalid token specified');\n    }\n    options = options || {};\n    const pos = options.header === true ? 0 : 1;\n    try {\n        return JSON.parse(base64_url_decode(token.split('.')[pos]));\n    }\n    catch (e) {\n        throw new Error(`Invalid token specified: ${e}` ? e.message : '');\n    }\n}\nexport function weappJwtDecodeAll(token) {\n    if (typeof token !== 'string') {\n        throw new Error('Invalid token specified');\n    }\n    try {\n        const parts = token.split('.').map((segment, i) => i === 2 ? segment : JSON.parse(base64_url_decode(segment)));\n        return { claims: parts[1], header: parts[0], signature: parts[2] };\n    }\n    catch (e) {\n        throw new Error(`Invalid token specified: ${e}` ? e.message : '');\n    }\n}\n", "export function isMp() {\n    if (typeof globalThis === 'undefined') {\n        return false;\n    }\n    const { wx } = globalThis;\n    if (typeof wx === 'undefined') {\n        return false;\n    }\n    if (globalThis.Page === undefined) {\n        return false;\n    }\n    if (!wx.getDeviceInfo) {\n        return false;\n    }\n    if (!wx.getStorageSync) {\n        return false;\n    }\n    if (!wx.setStorageSync) {\n        return false;\n    }\n    if (!wx.connectSocket) {\n        return false;\n    }\n    if (!wx.request) {\n        return false;\n    }\n    try {\n        if (!wx.getDeviceInfo()) {\n            return false;\n        }\n        if (wx.getDeviceInfo().platform === 'qq') {\n            return false;\n        }\n    }\n    catch (e) {\n        return false;\n    }\n    return true;\n}\nlet IS_IN_MP_WEBVIEW = false;\nfunction ready() {\n    IS_IN_MP_WEBVIEW = IS_IN_MP_WEBVIEW || (typeof window !== undefined && window.__wxjs_environment === 'miniprogram');\n}\ntry {\n    if (!isMp()) {\n        IS_IN_MP_WEBVIEW = IS_IN_MP_WEBVIEW\n            || !!navigator.userAgent.match(/miniprogram/i)\n            || window.__wxjs_environment === 'miniprogram';\n        if (window && window.WeixinJSBridge && window.WeixinJSBridge.invoke) {\n            ready();\n        }\n        else if (typeof document !== 'undefined') {\n            document.addEventListener('WeixinJSBridgeReady', ready, false);\n        }\n    }\n}\ncatch (e) { }\nexport function isInMpWebView() {\n    return IS_IN_MP_WEBVIEW;\n}\n", "import { CloudbaseEventEmitter } from '@cloudbase/utilities/dist/cjs/libs/events';\nimport { parseCaptcha } from '@cloudbase/utilities/dist/cjs/libs/util';\nconst debounce = (func, delay) => {\n    let timeoutId;\n    return (...args) => {\n        clearTimeout(timeoutId);\n        timeoutId = setTimeout(() => func.apply(null, args), delay);\n    };\n};\nconst eventBus = new CloudbaseEventEmitter();\nconst CAPTCHA_EVENT = {\n    CAPTCHA_DATA_CHANGE: 'captchaDataChange',\n    RESOLVE_CAPTCHA_DATA: 'resolveCaptchaData',\n};\nconst CAPTCHA_STYLES = {\n    overlay: 'position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:999',\n    modal: 'position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:320px;padding:20px;background:#fff;border-radius:8px;box-shadow:0 0 10px rgba(0,0,0,0.2);z-index:1000',\n    prompt: 'margin-bottom:15px',\n    captchaWrap: 'display:flex;align-items:center;justify-content:space-between;margin-bottom:15px',\n    captchaImg: 'width:100%;height:auto;border:1px solid #eee',\n    refreshBtn: 'padding:10px 8px;background:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer;flex:1;white-space:nowrap;margin-left:10px',\n    input: 'width:100%;padding:14px 16px;margin-bottom:15px;box-sizing:border-box;border:2px solid #e8ecf4;border-radius:10px;font-size:15px',\n    confirmBtn: 'width:100%;padding:10px;background:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer',\n    loading: 'background:#6c757d;cursor:not-allowed',\n};\nconst genCaptchaDom = ({ oauthInstance, captchaState }) => {\n    const CAPTCHA_IMG_ID = 'captcha-image';\n    const refreshCaptcha = async () => {\n        try {\n            const result = await oauthInstance.createCaptchaData({ state: captchaState.state });\n            captchaState = { ...captchaState, captchaData: result.data, token: result.token };\n            document.getElementById(CAPTCHA_IMG_ID).src = result.data;\n        }\n        catch (error) {\n            console.error('刷新图形验证码失败', error);\n        }\n    };\n    const createElement = (tag, styles, text) => {\n        const el = document.createElement(tag);\n        if (styles)\n            el.style.cssText = styles;\n        if (text)\n            el.textContent = text;\n        return el;\n    };\n    const overlay = createElement('div', CAPTCHA_STYLES.overlay);\n    const modal = createElement('div', CAPTCHA_STYLES.modal);\n    modal.appendChild(createElement('p', CAPTCHA_STYLES.prompt, '请输入你看到的字符：'));\n    const captchaWrap = createElement('div', CAPTCHA_STYLES.captchaWrap);\n    const captchaImg = createElement('img', CAPTCHA_STYLES.captchaImg);\n    captchaImg.id = CAPTCHA_IMG_ID;\n    captchaImg.src = captchaState.captchaData;\n    captchaWrap.appendChild(captchaImg);\n    const refreshBtn = createElement('button', CAPTCHA_STYLES.refreshBtn, '刷新');\n    refreshBtn.onclick = debounce(async () => {\n        refreshBtn.textContent = '加载中...';\n        refreshBtn.disabled = true;\n        refreshBtn.style.cssText = `${CAPTCHA_STYLES.refreshBtn};${CAPTCHA_STYLES.loading}`;\n        try {\n            await refreshCaptcha();\n        }\n        finally {\n            refreshBtn.textContent = '刷新';\n            refreshBtn.disabled = false;\n            refreshBtn.style.cssText = CAPTCHA_STYLES.refreshBtn;\n        }\n    }, 500);\n    captchaWrap.appendChild(refreshBtn);\n    modal.appendChild(captchaWrap);\n    const input = createElement('input', CAPTCHA_STYLES.input);\n    input.type = 'text';\n    input.placeholder = '输入字符';\n    input.maxLength = 4;\n    modal.appendChild(input);\n    const errorMsg = createElement('div', 'color:#dc3545;font-size:12px;margin-bottom:10px;display:none;padding:8px;background:#f8d7da;border:1px solid #f5c6cb;border-radius:4px');\n    modal.appendChild(errorMsg);\n    const showError = (message) => {\n        errorMsg.textContent = message;\n        errorMsg.style.display = 'block';\n    };\n    const confirmBtn = createElement('button', CAPTCHA_STYLES.confirmBtn, '确定');\n    confirmBtn.onclick = debounce(async () => {\n        const inputValue = input.value.trim();\n        if (!inputValue) {\n            showError('请输入字符');\n            return;\n        }\n        errorMsg.style.display = 'none';\n        confirmBtn.textContent = '验证中...';\n        confirmBtn.disabled = true;\n        confirmBtn.style.cssText = `${CAPTCHA_STYLES.confirmBtn};${CAPTCHA_STYLES.loading}`;\n        try {\n            const verifyResult = await oauthInstance.verifyCaptchaData({\n                token: captchaState.token,\n                key: inputValue,\n            });\n            eventBus.fire(CAPTCHA_EVENT.RESOLVE_CAPTCHA_DATA, verifyResult);\n            console.log('图形验证码校验成功');\n            document.body.removeChild(overlay);\n            document.body.removeChild(modal);\n        }\n        catch (error) {\n            console.error('图形验证码校验失败', error);\n            const errorMessage = error.error_description || '图形验证码校验失败';\n            showError(errorMessage);\n            input.value = '';\n            input.focus();\n            await refreshCaptcha();\n        }\n        finally {\n            confirmBtn.textContent = '确定';\n            confirmBtn.disabled = false;\n            confirmBtn.style.cssText = CAPTCHA_STYLES.confirmBtn;\n        }\n    }, 500);\n    modal.appendChild(confirmBtn);\n    document.body.appendChild(overlay);\n    document.body.appendChild(modal);\n};\nexport const openURIWithCallback = async (url, oauthInstance) => {\n    const { captchaData, state, token } = parseCaptcha(url);\n    genCaptchaDom({ oauthInstance, captchaState: { captchaData, state, token } });\n    return new Promise((resolve) => {\n        console.log('等待图形验证码校验结果...');\n        eventBus.on(CAPTCHA_EVENT.RESOLVE_CAPTCHA_DATA, (res) => {\n            resolve(res?.data);\n        });\n    });\n};\n", "import { ApiUrls, ErrorType } from '../auth/consts';\nimport { defaultStorage } from '../oauth2client/oauth2client';\nimport { isMp } from '../utils/mp';\nimport { openURIWithCallback } from './captcha-dom';\nexport class Captcha {\n    constructor(opts) {\n        if (!opts.openURIWithCallback) {\n            opts.openURIWithCallback = this.getDefaultOpenURIWithCallback();\n        }\n        if (!opts.storage) {\n            opts.storage = defaultStorage;\n        }\n        this.config = opts;\n        this.tokenSectionName = `captcha_${opts.clientId || opts.env}`;\n    }\n    isMatch() {\n        return this.config?.adapter?.isMatch?.() || isMp();\n    }\n    async request(url, options) {\n        if (!options) {\n            options = {};\n        }\n        if (!options.method) {\n            options.method = 'GET';\n        }\n        const state = `${options.method}:${url}`;\n        let reqURL = url;\n        if (options.withCaptcha) {\n            reqURL = await this.appendCaptchaTokenToURL(url, state, false);\n        }\n        let resp;\n        try {\n            resp = await this.config.request(reqURL, options);\n        }\n        catch (err) {\n            if (err.error === ErrorType.CAPTCHA_REQUIRED || err.error === ErrorType.CAPTCHA_INVALID) {\n                url = await this.appendCaptchaTokenToURL(url, state, err.error === ErrorType.CAPTCHA_INVALID);\n                return this.config.request(url, options);\n            }\n            return Promise.reject(err);\n        }\n        return resp;\n    }\n    getDefaultOpenURIWithCallback() {\n        return (url) => openURIWithCallback(url, this.config.oauthInstance);\n    }\n    async getCaptchaToken(forceNewToken, state) {\n        if (!forceNewToken) {\n            const captchaToken = await this.findCaptchaToken();\n            if (captchaToken) {\n                return captchaToken;\n            }\n        }\n        const captchaDataResp = await this.config.request(ApiUrls.CAPTCHA_DATA_URL, {\n            method: 'POST',\n            body: {\n                state,\n                redirect_uri: '',\n            },\n            withCredentials: false,\n        });\n        const captchaTokenUrl = `${captchaDataResp.data}?state=${encodeURIComponent(state)}&token=${encodeURIComponent(captchaDataResp.token)}`;\n        const captchaToken = await this.config.openURIWithCallback(captchaTokenUrl);\n        this.saveCaptchaToken(captchaToken);\n        return captchaToken.captcha_token;\n    }\n    async appendCaptchaTokenToURL(url, state, forceNewToken) {\n        const captchaToken = await this.getCaptchaToken(forceNewToken, state);\n        if (url.indexOf('?') > 0) {\n            url += `&captcha_token=${captchaToken}`;\n        }\n        else {\n            url += `?captcha_token=${captchaToken}`;\n        }\n        return url;\n    }\n    async saveCaptchaToken(token) {\n        token.expires_at = new Date(Date.now() + (token.expires_in - 10) * 1000);\n        const tokenStr = JSON.stringify(token);\n        await this.config.storage.setItem(this.tokenSectionName, tokenStr);\n    }\n    async findCaptchaToken() {\n        const tokenStr = await this.config.storage.getItem(this.tokenSectionName);\n        if (tokenStr !== undefined && tokenStr !== null) {\n            try {\n                const captchaToken = JSON.parse(tokenStr);\n                if (captchaToken?.expires_at) {\n                    captchaToken.expires_at = new Date(captchaToken.expires_at);\n                }\n                const isExpired = captchaToken.expires_at < new Date();\n                if (isExpired) {\n                    return null;\n                }\n                return captchaToken.captcha_token;\n            }\n            catch (error) {\n                await this.config.storage.removeItem(this.tokenSectionName);\n                return null;\n            }\n        }\n        return null;\n    }\n}\n", "'use strict';\nimport { ApiUrls, ApiUrlsV2, AUTH_STATE_CHANGED_TYPE, ErrorType, EVENTS, OAUTH_TYPE } from './consts';\nimport { OAuth2Client, defaultStorage } from '../oauth2client/oauth2client';\nimport { Captcha } from '../captcha/captcha';\nimport { deepClone } from '../utils';\nimport MyURLSearchParams from '../utils/urlSearchParams';\nimport { AuthError } from '..';\nasync function getEncryptUtils(isEncrypt, adapter) {\n    const getUtils = async () => {\n        try {\n            const utils = require('../utils/encrypt');\n            return utils;\n        }\n        catch (error) {\n            try {\n                const utils = await import('../utils/encrypt');\n                return utils;\n            }\n            catch (error) {\n                return;\n            }\n        }\n    };\n    try {\n        if ((adapter?.root?.globalThis || globalThis).IS_MP_BUILD) {\n            return;\n        }\n        if (!process.env.IS_MP_BUILD && isEncrypt) {\n            return getUtils();\n        }\n    }\n    catch (error) {\n        if (isEncrypt) {\n            return getUtils();\n        }\n    }\n}\nexport class Auth {\n    static parseParamsToSearch(params) {\n        Object.keys(params).forEach((key) => {\n            if (!params[key]) {\n                delete params[key];\n            }\n        });\n        const searchParams = new MyURLSearchParams(params);\n        return searchParams.toString();\n    }\n    constructor(opts) {\n        let { request } = opts;\n        let oAuth2Client = opts.credentialsClient;\n        if (!oAuth2Client) {\n            const initOptions = {\n                apiOrigin: opts.apiOrigin,\n                apiPath: opts.apiPath,\n                clientId: opts.clientId,\n                storage: opts.storage,\n                env: opts.env,\n                baseRequest: opts.baseRequest,\n                anonymousSignInFunc: opts.anonymousSignInFunc,\n                wxCloud: opts.wxCloud,\n                onCredentialsError: opts.onCredentialsError,\n                headers: opts.headers || {},\n                i18n: opts.i18n,\n                debug: opts.debug,\n            };\n            oAuth2Client = new OAuth2Client(initOptions);\n        }\n        if (!request) {\n            const baseRequest = oAuth2Client.request.bind(oAuth2Client);\n            const captcha = new Captcha({\n                env: opts.env,\n                clientId: opts.clientId,\n                request: baseRequest,\n                storage: opts.storage,\n                adapter: opts.adapter,\n                oauthInstance: this,\n                ...opts.captchaOptions,\n            });\n            request = captcha.request.bind(captcha);\n        }\n        this.config = {\n            env: opts.env,\n            apiOrigin: opts.apiOrigin,\n            apiPath: opts.apiPath,\n            clientId: opts.clientId,\n            request,\n            credentialsClient: oAuth2Client,\n            storage: opts.storage || defaultStorage,\n            adapter: opts.adapter,\n        };\n    }\n    getParamsByVersion(params, key) {\n        const paramsTemp = deepClone(params);\n        const url = { v2: ApiUrlsV2 }[paramsTemp?.version]?.[key] || ApiUrls[key];\n        if (paramsTemp) {\n            delete paramsTemp.version;\n        }\n        return { params: paramsTemp, url };\n    }\n    async signIn(params) {\n        const version = params.version || 'v1';\n        const res = this.getParamsByVersion(params, 'AUTH_SIGN_IN_URL');\n        if (res.params.query) {\n            delete res.params.query;\n        }\n        const body = await this.getEncryptParams(res.params);\n        const credentials = await this.config.request(res.url, {\n            method: 'POST',\n            body,\n        });\n        await this.config.credentialsClient.setCredentials({\n            ...credentials,\n            version,\n        });\n        return Promise.resolve(credentials);\n    }\n    async signInAnonymously(data = {}, useWxCloud = false) {\n        const credentials = await this.config.request(ApiUrls.AUTH_SIGN_IN_ANONYMOUSLY_URL, {\n            method: 'POST',\n            body: data,\n            useWxCloud,\n        });\n        await this.config.credentialsClient.setCredentials(credentials);\n        return Promise.resolve(credentials);\n    }\n    async signUp(params) {\n        const data = await this.config.request(ApiUrls.AUTH_SIGN_UP_URL, {\n            method: 'POST',\n            body: params,\n        });\n        await this.config.credentialsClient.setCredentials(data);\n        return Promise.resolve(data);\n    }\n    async signOut(params) {\n        let resp = {};\n        if (params) {\n            try {\n                resp = await this.config.request(ApiUrls.AUTH_SIGNOUT_URL, {\n                    method: 'POST',\n                    withCredentials: true,\n                    body: params,\n                });\n            }\n            catch (err) {\n                if (err.error !== ErrorType.UNAUTHENTICATED) {\n                    console.log('sign_out_error', err);\n                }\n            }\n            await this.config.credentialsClient.setCredentials();\n            return resp;\n        }\n        const accessToken = await this.config.credentialsClient.getAccessToken();\n        const data = await this.config.request(ApiUrls.AUTH_REVOKE_URL, {\n            method: 'POST',\n            body: {\n                token: accessToken,\n            },\n        });\n        await this.config.credentialsClient.setCredentials();\n        return Promise.resolve(data);\n    }\n    async revokeAllDevices() {\n        await this.config.request(ApiUrls.AUTH_REVOKE_ALL_URL, {\n            method: 'DELETE',\n            withCredentials: true,\n        });\n    }\n    async revokeDevice(params) {\n        await this.config.request(ApiUrls.AUTHORIZED_DEVICES_DELETE_URL + params.device_id, {\n            method: 'DELETE',\n            withCredentials: true,\n        });\n    }\n    async getVerification(params, options) {\n        let withCredentials = false;\n        if (params.target === 'CUR_USER') {\n            withCredentials = true;\n        }\n        else {\n            const hasLogin = await this.hasLoginState();\n            if (hasLogin) {\n                withCredentials = true;\n            }\n        }\n        const body = deepClone(params);\n        if (body.phone_number && !/^\\+\\d{1,3}\\s+\\d+/.test(body.phone_number)) {\n            body.phone_number = `+86 ${body.phone_number}`;\n        }\n        return this.config.request(ApiUrls.VERIFICATION_URL, {\n            method: 'POST',\n            body,\n            withCaptcha: options?.withCaptcha || false,\n            withCredentials,\n        });\n    }\n    async verify(params) {\n        const res = this.getParamsByVersion(params, 'VERIFY_URL');\n        const data = await this.config.request(res.url, {\n            method: 'POST',\n            body: res.params,\n        });\n        if (params?.version === 'v2') {\n            await this.config.credentialsClient.setCredentials({\n                ...data,\n                version: 'v2',\n            });\n        }\n        return data;\n    }\n    async genProviderRedirectUri(params) {\n        const { provider_redirect_uri: redirect_uri, other_params: otherParams = {}, ...restParams } = params;\n        if (redirect_uri && !restParams.redirect_uri) {\n            restParams.redirect_uri = redirect_uri;\n        }\n        let url = `${ApiUrls.PROVIDER_URI_URL}?${Auth.parseParamsToSearch(restParams)}`;\n        Object.keys(otherParams).forEach((key) => {\n            const value = otherParams[key];\n            if (key === 'sign_out_uri' && !(value?.length > 0)) {\n                return;\n            }\n            url += `&other_params[${key}]=${encodeURIComponent(value)}`;\n        });\n        return this.config.request(url, {\n            method: 'GET',\n        });\n    }\n    async grantProviderToken(params, useWxCloud = false) {\n        return this.config.request(ApiUrls.PROVIDER_TOKEN_URL, {\n            method: 'POST',\n            body: params,\n            useWxCloud,\n        });\n    }\n    async patchProviderToken(params) {\n        return this.config.request(ApiUrls.PROVIDER_TOKEN_URL, {\n            method: 'PATCH',\n            body: params,\n        });\n    }\n    async signInWithProvider(params, useWxCloud = false) {\n        const res = this.getParamsByVersion(params, 'AUTH_SIGN_IN_WITH_PROVIDER_URL');\n        const credentials = await this.config.request(res.url, {\n            method: 'POST',\n            body: res.params,\n            useWxCloud,\n        });\n        await this.config.credentialsClient.setCredentials({\n            ...credentials,\n            version: params?.version || 'v1',\n        });\n        return Promise.resolve(credentials);\n    }\n    async toBindIdentity(params) {\n        const credentials = params.credentials || (await this.config.credentialsClient.localCredentials.getCredentials());\n        let res;\n        try {\n            await this.bindWithProvider({\n                provider_token: params.provider_token,\n            }, credentials);\n            res = { data: { type: OAUTH_TYPE.BIND_IDENTITY, provider: params.provider }, error: null };\n        }\n        catch (error) {\n            res = { data: { type: OAUTH_TYPE.BIND_IDENTITY }, error: new AuthError(error) };\n        }\n        if (params.fireEvent) {\n            this.config.eventBus?.fire?.(EVENTS.AUTH_STATE_CHANGED, {\n                event: AUTH_STATE_CHANGED_TYPE.BIND_IDENTITY,\n                info: res,\n            });\n        }\n        return res;\n    }\n    async getInitialSession() {\n        let data = {};\n        try {\n            if (typeof window === 'undefined' || typeof document === 'undefined') {\n                return { data: null, error: null };\n            }\n            const localSearch = new URLSearchParams(location?.search);\n            const code = localSearch.get('code');\n            const state = localSearch.get('state');\n            if (!code || !state) {\n                return { data: null, error: null };\n            }\n            let cacheData = null;\n            try {\n                cacheData = JSON.parse(sessionStorage.getItem(state) || 'null');\n            }\n            catch {\n            }\n            data = { type: cacheData?.type };\n            const errorParam = localSearch.get('error');\n            const errorDescription = localSearch.get('error_description');\n            if (errorParam || errorDescription) {\n                return {\n                    data,\n                    error: new AuthError({ message: errorDescription || errorParam || 'Unknown error from OAuth provider' }),\n                };\n            }\n            const provider = cacheData?.provider || localSearch.get('provider');\n            if (!provider) {\n                return { data, error: new AuthError({ message: 'Provider is required for OAuth verification' }) };\n            }\n            const redirectUri = location.origin + location.pathname;\n            const { provider_token: providerToken } = await this.grantProviderToken({\n                provider_id: provider,\n                provider_redirect_uri: redirectUri,\n                provider_code: code,\n            });\n            let credentials;\n            let user = null;\n            let res;\n            if (cacheData.type === OAUTH_TYPE.BIND_IDENTITY) {\n                credentials = await this.config.credentialsClient.localCredentials.getCredentials();\n                res = await this.toBindIdentity({ provider, provider_token: providerToken, credentials });\n            }\n            else if (cacheData.type === OAUTH_TYPE.SIGN_IN) {\n                res = this.getParamsByVersion({ provider }, 'AUTH_SIGN_IN_WITH_PROVIDER_URL');\n                credentials = await this.config.request(res.url, {\n                    method: 'POST',\n                    body: { provider_token: providerToken },\n                });\n                try {\n                    user = await this.getUserInfo({ credentials });\n                }\n                catch (e) {\n                    console.error('get user info error', e);\n                }\n                res = { data: { ...data, session: credentials, user }, error: null };\n            }\n            localSearch.delete('code');\n            localSearch.delete('state');\n            localSearch.delete('provider');\n            this.restoreUrlState(cacheData?.search === undefined ? `?${localSearch.toString()}` : cacheData.search, cacheData?.hash || location.hash);\n            try {\n                sessionStorage.removeItem(state);\n            }\n            catch {\n            }\n            return res;\n        }\n        catch (error) {\n            return { data, error: new AuthError(error) };\n        }\n    }\n    async signInCustom(params) {\n        const credentials = await this.config.request(ApiUrls.AUTH_SIGN_IN_CUSTOM, {\n            method: 'POST',\n            body: params,\n        });\n        await this.config.credentialsClient.setCredentials(credentials);\n        return Promise.resolve(credentials);\n    }\n    async signInWithWechat(params = {}) {\n        const credentials = await this.config.request(ApiUrls.AUTH_SIGN_IN_WITH_WECHAT_URL, {\n            method: 'POST',\n            body: params,\n        });\n        await this.config.credentialsClient.setCredentials(credentials);\n        return Promise.resolve(credentials);\n    }\n    async bindWithProvider(params, credentials) {\n        return this.config.request(ApiUrls.PROVIDER_BIND_URL, {\n            method: 'POST',\n            body: params,\n            withCredentials: true,\n            getCredentials: credentials ? () => credentials : undefined,\n        });\n    }\n    async getUserProfile(params) {\n        return this.getUserInfo(params);\n    }\n    async getUserInfo(params = {}) {\n        const res = this.getParamsByVersion(params, 'USER_ME_URL');\n        if (res.params?.query) {\n            const searchParams = new MyURLSearchParams(res.params.query);\n            res.url += `?${searchParams.toString()}`;\n        }\n        const userInfo = await this.config.request(res.url, {\n            method: 'GET',\n            withCredentials: true,\n            getCredentials: params.credentials ? () => params.credentials : undefined,\n        });\n        if (userInfo.sub) {\n            userInfo.uid = userInfo.sub;\n        }\n        return userInfo;\n    }\n    async getWedaUserInfo() {\n        const userInfo = await this.config.request(ApiUrls.WEDA_USER_URL, {\n            method: 'GET',\n            withCredentials: true,\n        });\n        return userInfo;\n    }\n    async deleteMe(params) {\n        const res = this.getParamsByVersion(params, 'USER_ME_URL');\n        const url = `${res.url}?${Auth.parseParamsToSearch(res.params)}`;\n        return this.config.request(url, {\n            method: 'DELETE',\n            withCredentials: true,\n        });\n    }\n    async hasLoginState() {\n        try {\n            await this.config.credentialsClient.getAccessToken();\n            return true;\n        }\n        catch (error) {\n            return false;\n        }\n    }\n    hasLoginStateSync() {\n        const credentials = this.config.credentialsClient.getCredentialsSync();\n        return credentials;\n    }\n    async getLoginState() {\n        return this.config.credentialsClient.getCredentialsAsync();\n    }\n    async transByProvider(params) {\n        return this.config.request(ApiUrls.USER_TRANS_BY_PROVIDER_URL, {\n            method: 'PATCH',\n            body: params,\n            withCredentials: true,\n        });\n    }\n    async grantToken(params) {\n        const res = this.getParamsByVersion(params, 'AUTH_TOKEN_URL');\n        return this.config.request(res.url, {\n            method: 'POST',\n            body: res.params,\n        });\n    }\n    async getProviders() {\n        return this.config.request(ApiUrls.PROVIDER_LIST, {\n            method: 'GET',\n            withCredentials: true,\n        });\n    }\n    async unbindProvider(params) {\n        return this.config.request(`${ApiUrls.PROVIDER_UNBIND_URL}/${params.provider_id}`, {\n            method: 'DELETE',\n            withCredentials: true,\n        });\n    }\n    async checkPassword(params) {\n        return this.config.request(`${ApiUrls.CHECK_PWD_URL}`, {\n            method: 'POST',\n            withCredentials: true,\n            body: params,\n        });\n    }\n    async editContact(params) {\n        return this.config.request(`${ApiUrls.BIND_CONTACT_URL}`, {\n            method: 'PATCH',\n            withCredentials: true,\n            body: params,\n        });\n    }\n    async setPassword(params) {\n        return this.config.request(`${ApiUrls.AUTH_SET_PASSWORD}`, {\n            method: 'PATCH',\n            withCredentials: true,\n            body: params,\n        });\n    }\n    async updatePasswordByOld(params) {\n        const sudoToken = await this.sudo({ password: params.old_password });\n        return this.setPassword({\n            sudo_token: sudoToken.sudo_token,\n            new_password: params.new_password,\n        });\n    }\n    async sudo(params) {\n        return this.config.request(`${ApiUrls.SUDO_URL}`, {\n            method: 'POST',\n            withCredentials: true,\n            body: params,\n        });\n    }\n    async sendVerificationCodeToCurrentUser(params) {\n        params.target = 'CUR_USER';\n        return this.config.request(ApiUrls.VERIFICATION_URL, {\n            method: 'POST',\n            body: params,\n            withCredentials: true,\n            withCaptcha: true,\n        });\n    }\n    async changeBoundProvider(params) {\n        return this.config.request(`${ApiUrls.PROVIDER_LIST}/${params.provider_id}/trans`, {\n            method: 'POST',\n            body: {\n                provider_trans_token: params.trans_token,\n            },\n            withCredentials: true,\n        });\n    }\n    async setUserProfile(params) {\n        return this.config.request(ApiUrls.USER_PRIFILE_URL, {\n            method: 'PATCH',\n            body: params,\n            withCredentials: true,\n        });\n    }\n    async updateUserBasicInfo(params) {\n        return this.config.request(ApiUrls.USER_BASIC_EDIT_URL, {\n            method: 'POST',\n            withCredentials: true,\n            body: params,\n        });\n    }\n    async queryUserProfile(params) {\n        const searchParams = new MyURLSearchParams(params);\n        return this.config.request(`${ApiUrls.USER_QUERY_URL}?${searchParams.toString()}`, {\n            method: 'GET',\n            withCredentials: true,\n        });\n    }\n    setCustomSignFunc(getTickFn) {\n        this.getCustomSignTicketFn = getTickFn;\n    }\n    async signInWithCustomTicket() {\n        const customSignTicketFn = this.getCustomSignTicketFn;\n        if (!customSignTicketFn) {\n            return Promise.reject({\n                error: 'failed_precondition',\n                error_description: 'please use setCustomSignFunc to set custom sign function',\n            });\n        }\n        const customTicket = await customSignTicketFn();\n        return this.signInCustom({\n            provider_id: 'custom',\n            ticket: customTicket,\n        });\n    }\n    async resetPassword(params) {\n        return this.config.request(ApiUrls.AUTH_RESET_PASSWORD, {\n            method: 'POST',\n            body: params,\n        });\n    }\n    async authorize(params) {\n        return this.config.request(ApiUrls.AUTHORIZE_URL, {\n            method: 'POST',\n            withCredentials: true,\n            body: params,\n        });\n    }\n    async authorizeDevice(params) {\n        return this.config.request(ApiUrls.AUTHORIZE_DEVICE_URL, {\n            method: 'POST',\n            withCredentials: true,\n            body: params,\n        });\n    }\n    async deviceAuthorize(params) {\n        return this.config.request(ApiUrls.AUTH_GET_DEVICE_CODE, {\n            method: 'POST',\n            body: params,\n            withCredentials: true,\n        });\n    }\n    async authorizeInfo(params) {\n        const url = `${ApiUrls.AUTHORIZE_INFO_URL}?${Auth.parseParamsToSearch(params)}`;\n        let withBasicAuth = true;\n        let withCredentials = false;\n        const hasLogin = await this.hasLoginState();\n        if (hasLogin) {\n            withCredentials = true;\n            withBasicAuth = false;\n        }\n        return this.config.request(url, {\n            method: 'GET',\n            withBasicAuth,\n            withCredentials,\n        });\n    }\n    async checkUsername(params) {\n        return this.config.request(ApiUrls.CHECK_USERNAME, {\n            method: 'GET',\n            body: params,\n            withCredentials: true,\n        });\n    }\n    async checkIfUserExist(params) {\n        const searchParams = new MyURLSearchParams(params);\n        return this.config.request(`${ApiUrls.CHECK_IF_USER_EXIST}?${searchParams.toString()}`, {\n            method: 'GET',\n        });\n    }\n    async loginScope() {\n        return this.config.credentialsClient.getScope();\n    }\n    async loginGroups() {\n        return this.config.credentialsClient.getGroups();\n    }\n    async refreshTokenForce(params) {\n        const credentials = await this.config.credentialsClient.getCredentials();\n        return await this.config.credentialsClient.refreshToken({\n            ...credentials,\n            version: params?.version || 'v1',\n        });\n    }\n    async getCredentials() {\n        return this.config.credentialsClient.getCredentials();\n    }\n    async getPublicKey() {\n        return this.config.request(ApiUrlsV2.AUTH_PUBLIC_KEY, {\n            method: 'POST',\n            body: {},\n        });\n    }\n    async getEncryptParams(params) {\n        const { isEncrypt } = params;\n        delete params.isEncrypt;\n        const payload = deepClone(params);\n        const encryptUtils = await getEncryptUtils(isEncrypt, this.config.adapter);\n        if (!encryptUtils) {\n            return params;\n        }\n        let publicKey = '';\n        let public_key_thumbprint = '';\n        try {\n            const res = await this.getPublicKey();\n            publicKey = res.public_key;\n            public_key_thumbprint = res.public_key_thumbprint;\n            if (!publicKey || !public_key_thumbprint) {\n                throw res;\n            }\n        }\n        catch (error) {\n            throw error;\n        }\n        return {\n            params: encryptUtils.getEncryptInfo({ publicKey, payload }),\n            public_key_thumbprint,\n        };\n    }\n    async getProviderSubType() {\n        return this.config.request(ApiUrls.GET_PROVIDER_TYPE, {\n            method: 'POST',\n            body: {\n                provider_id: 'weda',\n            },\n        });\n    }\n    async verifyCaptchaData({ token, key }) {\n        return this.config.request(ApiUrls.VERIFY_CAPTCHA_DATA_URL, {\n            method: 'POST',\n            body: { token, key },\n            withCredentials: false,\n        });\n    }\n    async createCaptchaData({ state, redirect_uri = undefined }) {\n        return this.config.request(ApiUrls.CAPTCHA_DATA_URL, {\n            method: 'POST',\n            body: { state, redirect_uri },\n            withCredentials: false,\n        });\n    }\n    async getMiniProgramCode(params) {\n        return this.config.request(ApiUrls.GET_MINIPROGRAM_QRCODE, {\n            method: 'POST',\n            body: params,\n        });\n    }\n    async getMiniProgramQrCodeStatus(params) {\n        return this.config.request(ApiUrls.GET_MINIPROGRAM_QRCODE_STATUS, {\n            method: 'POST',\n            body: params,\n        });\n    }\n    async getUserBehaviorLog(params) {\n        const action = { LOGIN: 'query[action]=USER_LOGIN', MODIFY: 'ne_query[action]=USER_LOGIN' };\n        const url = `${ApiUrls.GET_USER_BEHAVIOR_LOG}?${action[params.type]}&limit=${params.limit}${params.page_token ? `&page_token=${params.page_token}` : ''}`;\n        return this.config.request(url, {\n            method: 'GET',\n            withCredentials: true,\n        });\n    }\n    async modifyPassword(params) {\n        let publicKey = '';\n        let public_key_thumbprint = '';\n        const encryptUtils = await getEncryptUtils(true, this.config.adapter);\n        if (!encryptUtils) {\n            throw new Error('do not support encrypt, a encrypt util required.');\n        }\n        try {\n            const res = await this.getPublicKey();\n            publicKey = res.public_key;\n            public_key_thumbprint = res.public_key_thumbprint;\n            if (!publicKey || !public_key_thumbprint) {\n                throw res;\n            }\n        }\n        catch (error) {\n            throw error;\n        }\n        const encrypt_password = params.password ? encryptUtils.getEncryptInfo({ publicKey, payload: params.password }) : '';\n        const encrypt_new_password = encryptUtils.getEncryptInfo({ publicKey, payload: params.new_password });\n        return this.config.request(ApiUrls.USER_BASIC_EDIT_URL, {\n            method: 'POST',\n            withCredentials: true,\n            body: {\n                user_id: params.user_id,\n                encrypt_password,\n                encrypt_new_password,\n                public_key_thumbprint,\n            },\n        });\n    }\n    async modifyPasswordWithoutLogin(params) {\n        let publicKey = '';\n        let public_key_thumbprint = '';\n        const encryptUtils = await getEncryptUtils(true, this.config.adapter);\n        if (!encryptUtils) {\n            throw new Error('do not support encrypt, a encrypt util required.');\n        }\n        try {\n            const res = await this.getPublicKey();\n            publicKey = res.public_key;\n            public_key_thumbprint = res.public_key_thumbprint;\n            if (!publicKey || !public_key_thumbprint) {\n                throw res;\n            }\n        }\n        catch (error) {\n            throw error;\n        }\n        const encrypt_password = params.password ? encryptUtils.getEncryptInfo({ publicKey, payload: params.password }) : '';\n        const encrypt_new_password = encryptUtils.getEncryptInfo({ publicKey, payload: params.new_password });\n        return this.config.request(ApiUrlsV2.AUTH_RESET_PASSWORD, {\n            method: 'POST',\n            body: {\n                username: params.username,\n                password: encrypt_password,\n                new_password: encrypt_new_password,\n                public_key_thumbprint,\n            },\n        });\n    }\n    restoreUrlState(search, hash) {\n        if (search === undefined)\n            return;\n        try {\n            const url = new URL(window.location.href);\n            url.search = search;\n            url.hash = hash || '';\n            window.history.replaceState(null, '', url.toString());\n        }\n        catch {\n        }\n    }\n}\n", "class MyURLSearchParams {\n    constructor(init) {\n        this.params = {};\n        if (typeof init === 'string') {\n            this.parse(init);\n        }\n        else if (init && typeof init === 'object') {\n            for (const key in init) {\n                if (Object.prototype.hasOwnProperty.call(init, key)) {\n                    this.append(key, init[key]);\n                }\n            }\n        }\n    }\n    parse(str) {\n        const params = str.split('&');\n        params.forEach((param) => {\n            const [key, value] = param.split('=').map(decodeURIComponent);\n            this.append(key, value);\n        });\n    }\n    append(key, value) {\n        if (this.params[key]) {\n            this.params[key] = this.params[key].concat([value]);\n        }\n        else {\n            this.params[key] = [value];\n        }\n    }\n    get(key) {\n        return this.params[key] ? this.params[key][0] : null;\n    }\n    getAll(key) {\n        return this.params[key] || [];\n    }\n    delete(key) {\n        delete this.params[key];\n    }\n    has(key) {\n        return Object.prototype.hasOwnProperty.call(this.params, key);\n    }\n    set(key, value) {\n        this.params[key] = [value];\n    }\n    toString() {\n        const items = [];\n        for (const key in this.params) {\n            if (Object.prototype.hasOwnProperty.call(this.params, key)) {\n                this.params[key].forEach((value) => {\n                    items.push(`${encodeURIComponent(key)}=${encodeURIComponent(value)}`);\n                });\n            }\n        }\n        return items.join('&');\n    }\n}\nexport default MyURLSearchParams;\n", "export class AuthError extends Error {\n    constructor(error) {\n        super(error.error_description || error.message);\n        this.__isAuthError = true;\n        this.name = 'AuthError';\n        this.status = error.error;\n        this.code = error.error_code;\n    }\n}\n", "import { OAuth2Client } from './oauth2client/oauth2client';\nimport { Auth } from './auth/apis';\nimport { AUTH_API_PREFIX } from './auth/consts';\nexport { Auth } from './auth/apis';\nexport { AUTH_API_PREFIX, OAUTH_TYPE } from './auth/consts';\nexport { AuthError } from './auth/auth-error';\nimport * as authModels_1 from './auth/models';\nexport { authModels_1 as authModels };\nexport { weappJwtDecodeAll } from './utils/base64';\nexport { LOGIN_STATE_CHANGED_TYPE, EVENTS, AUTH_STATE_CHANGED_TYPE } from './auth/consts';\nexport class CloudbaseOAuth {\n    constructor(authOptions) {\n        const { apiOrigin, apiPath = AUTH_API_PREFIX, clientId, env, storage, request, baseRequest, anonymousSignInFunc, wxCloud, adapter, onCredentialsError, headers, i18n, useWxCloud, eventBus, detectSessionInUrl, debug, } = authOptions;\n        this.detectSessionInUrl = detectSessionInUrl ?? false;\n        this.oauth2client = new OAuth2Client({\n            apiOrigin,\n            apiPath,\n            clientId,\n            env,\n            storage,\n            baseRequest: baseRequest || request,\n            anonymousSignInFunc,\n            wxCloud,\n            onCredentialsError,\n            headers: headers || {},\n            i18n,\n            useWxCloud,\n            eventBus,\n            debug,\n        });\n        this.authApi = new Auth({\n            credentialsClient: this.oauth2client,\n            ...authOptions,\n            request: request ? this.oauth2client.request.bind(this.oauth2client) : undefined,\n            adapter,\n        });\n        if (detectSessionInUrl) {\n            this.oauth2client.setGetInitialSession(this.authApi.getInitialSession.bind(this.authApi));\n        }\n    }\n    initializeSession(onUserObtained) {\n        if (!this.detectSessionInUrl) {\n            this.oauth2client.initialize(Promise.resolve({ error: null }));\n            return;\n        }\n        this.oauth2client.setOnInitialSessionObtained(onUserObtained);\n        this.oauth2client.initialize();\n    }\n}\n", "// 为了减少小程序体积，导出方法并 boudle，同时防止其中使用了 web 运行环境\nexport { printWarn, throwError } from '@cloudbase/utilities/dist/cjs/libs/util'\nexport { ERRORS, COMMUNITY_SITE_URL } from '@cloudbase/utilities/dist/cjs/constants'\nexport { catchErrorsDecorator } from '@cloudbase/utilities/dist/cjs/helpers'\nexport { CloudbaseEventEmitter } from '@cloudbase/utilities/dist/cjs/libs/events'\nexport { CloudbaseCache } from '@cloudbase/utilities/dist/cjs/libs/cache'\nexport { default as adapterForWxMp } from '@cloudbase/adapter-wx_mp'\nexport { useDefaultAdapter } from '@cloudbase/utilities/dist/cjs/adapters'\n", "import { SDKAdapterInterface } from '@cloudbase/adapter-interface'\nimport { adapterForWxMp } from './utilities'\nimport type { AuthOptions } from '@cloudbase/oauth'\n\ndeclare const wx: any\n\nclass OauthClientStorageBase {\n  public readonly localStorage\n  constructor(config?: { localStorage: any /* StorageInterface */; adapter: SDKAdapterInterface }) {\n    try {\n      this.localStorage = config?.localStorage || (config?.adapter?.root?.globalThis || globalThis).localStorage\n    } catch (error) {\n      this.localStorage = config?.localStorage || {}\n    }\n  }\n  /**\n   * Get Item\n   * @param {string} key\n   * @return {Promise<string | null>}\n   */\n  async getItem(key: string): Promise<string | null> {\n    return this.localStorage.getItem(key)\n  }\n\n  /**\n   * Remove Item.\n   * @param {string} key\n   * @return {Promise<void>}\n   */\n  async removeItem(key: string) {\n    this.localStorage.removeItem(key)\n  }\n\n  /**\n   * Set Item.\n   * @param {string} key\n   * @param {string} value\n   * @return {Promise<void>}\n   */\n  async setItem(key: string, value: string): Promise<void> {\n    this.localStorage.setItem(key, value)\n  }\n\n  getItemSync(key: string): string | null {\n    return this.localStorage.getItem(key)\n  }\n\n  setItemSync(key: string, value: string) {\n    this.localStorage.setItem(key, value)\n  }\n\n  removeItemSync(key: string) {\n    this.localStorage.removeItem(key)\n  }\n}\n\n/**\n * copy to git@git.woa.com:QBase/lcap/datasource.git/packages/cloud-sdk/common\n * 同步修改\n */\nconst URL_REG = /^[^:]+:\\/\\/[^/]+(\\/[^?#]+)/\n\nconst dealAdapterRequestData = (res, options) => {\n  const requestId = options?.headers?.['x-request-id']\n\n  if (!res) {\n    res = {}\n  }\n\n  if (res?.code || res?.data?.error_code) {\n    res = {\n      error: res.code || res.data.error,\n      error_description: res.data.error_description || res.message || res.code || res.data.error_code,\n      request_id: res.requestId,\n      error_code: res.data?.error_code,\n    }\n  }\n\n  if (!res?.request_id) {\n    res.request_id = res.request_id || requestId\n  }\n\n  if (res?.error) {\n    res.error_uri = getUrlPath(options?.url)\n    return res\n  }\n\n  return res?.data || {}\n}\n\nfunction generateOauthClientRequest(reqClass) {\n  return async function (\n    url: string,\n    options?: {\n      body?: any | null\n      headers?: any | null\n      method?: string\n      [key: string]: any\n    },\n  ) {\n    return new Promise((resolve, reject) => {\n      // Objects must be copied to prevent modification of data such as body.\n      const copyOptions = Object.assign({}, options)\n      if (copyOptions.body && typeof copyOptions.body !== 'string') {\n        copyOptions.body = JSON.stringify(copyOptions.body)\n      }\n\n      const task = wx.request({\n        url,\n        data: copyOptions.body,\n        timeout: reqClass._timeout,\n        method: copyOptions.method || 'GET',\n        header: copyOptions.headers,\n        success(res) {\n          res = dealAdapterRequestData(res, { ...options, url })\n\n          if (res.error) {\n            reject(res)\n          }\n          resolve(res)\n        },\n        fail(err) {\n          reject({\n            error: 'unreachable',\n            error_description: (err as Error).message,\n          })\n        },\n        complete(err) {\n          if (!err || !err.errMsg) {\n            return\n          }\n          if (!reqClass._timeout || reqClass._restrictedMethods.indexOf('request') === -1) {\n            return\n          }\n          const { errMsg } = err\n          if (errMsg === 'request:fail timeout') {\n            console.warn(reqClass._timeoutMsg)\n            try {\n              task.abort()\n            } catch (e) {}\n          }\n        },\n      })\n    })\n  }\n}\n\n/**\n * Get url path.\n * @param {string} url\n * @return {string}\n */\nfunction getUrlPath(url: string) {\n  // return path if matched, or original url\n  return URL_REG.test(url) ? RegExp.$1 : url\n}\n\n/**\n * 用户自定义adapter处理\n * @param config\n * @param adapter\n * @returns\n */\nconst dealUserAdapter = (config: AuthOptions, adapter: SDKAdapterInterface) => {\n  const data = { ...config }\n\n  try {\n    if (!config?.storage && adapter?.localStorage) {\n      data.storage = new OauthClientStorageBase({ localStorage: adapter.localStorage, adapter })\n    }\n\n    if (!config.captchaOptions && adapter?.captchaOptions) {\n      data.captchaOptions = adapter.captchaOptions\n    }\n\n    // 用户未传入baseRequest和request时处理\n    // OAuth2Client优先以 baseRequest 为准\n    // Auth 在没有 request 的时候会初始化 Captcha，从而使用 Captcha 的 request\n    if (!config.baseRequest && !config.request && adapter?.reqClass) {\n      const reqClassParams = {\n        timeout: 10000,\n        restrictedMethods: ['get', 'post', 'upload', 'download', 'request'],\n      }\n      const adapterReq = new adapter.reqClass(reqClassParams)\n      data.baseRequest = async function (url: string, options?: { method?: string; [key: string]: any }) {\n        let res: any = {}\n\n        const requestType = options.method?.toLocaleLowerCase() || 'post'\n\n        const func = adapterReq?.[requestType]?.bind?.(adapterReq)\n\n        if (typeof func !== 'function') {\n          throw new Error(`invalid 【${requestType}】 request method`)\n        }\n\n        try {\n          // 兼容非小程序的adapter\n          if ((!options.headers?.['content-type'] || options.headers?.['content-type'].includes('application/json')) && !['string', 'undefined'].includes(typeof options.body)) {\n            options.data = options.data || options.body\n            options.body = JSON.stringify(options.body)\n          }\n          res = await func({ url, ...options })\n          res = dealAdapterRequestData(res, { ...options, url })\n        } catch (error) {\n          res = { ...error?.data, ...error }\n          throw res\n        }\n\n        if (res?.error) {\n          throw res\n        }\n\n        return res\n      }\n    }\n  } catch (e) {\n    console.error('user adapter generate fail:', e)\n  }\n\n  return data\n}\n\n/**\n * 内置默认adapter处理\n * @param config\n * @returns\n */\nconst dealAuthAdapter = (config: AuthOptions, adapter: SDKAdapterInterface) => {\n  const data = { ...config }\n  const authOptions: any = {}\n\n  if (adapter?.captchaOptions) {\n    data.captchaOptions = adapter.captchaOptions\n  }\n\n  if (!adapterForWxMp.isMatch() || (config.storage && config.baseRequest)) return data\n\n  try {\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    const { localStorage, reqClass: ReqClass } = adapterForWxMp.genAdapter({})\n    if (localStorage) {\n      authOptions.storage = new OauthClientStorageBase({ localStorage, adapter })\n    }\n    if (ReqClass) {\n      const reqClass = new ReqClass({\n        timeout: 10000,\n        restrictedMethods: ['get', 'post', 'upload', 'download', 'request'],\n      })\n      authOptions.request = generateOauthClientRequest(reqClass)\n    }\n\n    if (data.captchaOptions) {\n      authOptions.baseRequest = authOptions.request\n      authOptions.request = undefined\n    }\n\n    return { ...data, ...authOptions }\n  } catch (e) {\n    console.error('adapter generate fail:', e)\n  }\n\n  return data\n}\n\nexport const useAuthAdapter = (config: AuthOptions) => {\n  // 兼容微搭cloud-sdk，auth中js-sdk默认的adapter不进行配置\n  if (config.adapter && (config.adapter as any).type !== 'default') {\n    return dealUserAdapter(config, config.adapter)\n  }\n\n  return dealAuthAdapter(config, config.adapter)\n}\n", "/**\n * 存储参数到浏览器sessionStorage\n * @param key\n * @param value\n */\nexport function saveToBrowserSession(key: string, value: Record<string, any>) {\n  try {\n    sessionStorage.setItem(key, JSON.stringify(value))\n  } catch (error) {\n    console.error('Failed to save to browser session:', error)\n  }\n}\n\nexport function getBrowserSession(key: string) {\n  try {\n    const data = JSON.parse(sessionStorage.getItem(key))\n    return data\n  } catch (error) {\n    console.error('Failed to get browser session:', error)\n    return null\n  }\n}\n\nexport function removeBrowserSession(key: string) {\n  try {\n    sessionStorage.removeItem(key)\n    return true\n  } catch (error) {\n    console.error('Failed to remove browser session:', error)\n    return null\n  }\n}\n\nexport function addUrlSearch(search: Location['search'], hash?: Location['hash']) {\n  if (search === undefined) return\n\n  // 1. 解析当前 URL\n  const url = new URL(window.location.href)\n\n  // 2. 操作查询参数\n  url.search = search // 覆盖已有参数或新增参数\n\n  url.hash = hash || url.hash\n\n  // 3. 更新地址栏（保留哈希值）\n  window.history.replaceState({}, '', url.href)\n}\n\n/**\n * 从 URL 中移除指定的查询参数\n * @param params 要移除的参数名数组\n */\nexport function removeUrlParams(params: string[]) {\n  if (typeof window === 'undefined') return\n\n  try {\n    const url = new URL(window.location.href)\n\n    // 移除指定的参数\n    params.forEach((param) => {\n      url.searchParams.delete(param)\n    })\n\n    // 使用 replaceState 更新 URL，不会在浏览器历史中留下记录\n    window.history.replaceState({}, '', url.href)\n  } catch (error) {\n    console.error('Failed to remove URL params:', error)\n  }\n}\n", "import type { ICloudbaseAuthConfig } from '@cloudbase/types/auth'\nimport type { authModels, CloudbaseOAuth, Credentials } from '@cloudbase/oauth'\nimport type { ICloudbaseCache } from '@cloudbase/types/cache'\nimport {\n  weappJwtDecodeAll,\n  EVENTS,\n  AUTH_STATE_CHANGED_TYPE,\n  AuthError,\n  OAUTH_TYPE,\n  LOGIN_STATE_CHANGED_TYPE,\n} from '@cloudbase/oauth'\nimport {\n  CommonRes,\n  DeleteMeReq,\n  GetClaimsRes,\n  GetUserIdentitiesRes,\n  GetUserRes,\n  LinkIdentityReq,\n  LinkIdentityRes,\n  OnAuthStateChangeCallback,\n  ReauthenticateRes,\n  ResendReq,\n  ResendRes,\n  ResetPasswordForEmailRes,\n  ResetPasswordForOldReq,\n  SetSessionReq,\n  SignInAnonymouslyReq,\n  SignInOAuthRes,\n  SignInRes,\n  SignInWithIdTokenReq,\n  SignInWithOAuthReq,\n  SignInWithOtpReq,\n  SignInWithOtpRes,\n  SignInWithPasswordReq,\n  SignUpRes,\n  UnlinkIdentityReq,\n  UpdateUserAttributes,\n  UpdateUserReq,\n  UpdateUserWithVerificationRes,\n  VerifyOAuthReq,\n  VerifyOtpReq,\n} from './type'\nimport { LoginState, User } from '.'\nimport { saveToBrowserSession, getBrowserSession, removeBrowserSession, addUrlSearch } from './utils'\nimport { utils } from '@cloudbase/utilities'\nimport { adapterForWxMp } from './utilities'\nexport const isBrowser = () => typeof window !== 'undefined' && typeof document !== 'undefined'\n\ndeclare const wx: any\n\nexport class SbaseApi {\n  readonly config: ICloudbaseAuthConfig\n  oauthInstance: CloudbaseOAuth\n  readonly cache: ICloudbaseCache\n  private listeners: Map<string, Set<OnAuthStateChangeCallback>> = new Map()\n  private hasListenerSetUp = false\n\n  constructor(config: ICloudbaseAuthConfig & { cache: ICloudbaseCache }) {\n    this.config = config\n    this.oauthInstance = config.oauthInstance\n    this.cache = config.cache\n    this.init()\n  }\n\n  /**\n   * 获取当前登录的用户信息-同步\n   */\n  get currentUser() {\n    const loginState = this.hasLoginState()\n\n    if (loginState) {\n      return loginState.user || null\n    }\n    return null\n  }\n\n  hasLoginState(): LoginState | null {\n    throw new Error('Auth.hasLoginState() is not implemented')\n  }\n\n  async setAccessKey() {\n    throw new Error('Auth.setAccessKey() is not implemented')\n  }\n\n  async signIn(_params: authModels.SignInRequest): Promise<LoginState> {\n    throw new Error('Auth.signIn() is not implemented')\n  }\n\n  async signInWithProvider(_params: authModels.SignInWithProviderRequest): Promise<LoginState> {\n    throw new Error('Auth.signInWithProvider() is not implemented')\n  }\n\n  async genProviderRedirectUri(_params: authModels.GenProviderRedirectUriRequest,): Promise<authModels.GenProviderRedirectUriResponse> {\n    throw new Error('Auth.genProviderRedirectUri() is not implemented')\n  }\n\n  async getAccessToken(): Promise<{\n    accessToken: any\n    env: string\n  }> {\n    throw new Error('Auth.getAccessToken() is not implemented')\n  }\n\n  async getUserInfo(): Promise<(authModels.UserInfo & Partial<User>) | null> {\n    throw new Error('Auth.getUserInfo() is not implemented')\n  }\n\n  async updateUserBasicInfo(_params: authModels.ModifyUserBasicInfoRequest) {\n    throw new Error('Auth.updateUserBasicInfo() is not implemented')\n  }\n\n  setCustomSignFunc(_getTickFn: authModels.GetCustomSignTicketFn): void {\n    throw new Error('Auth.setCustomSignFunc() is not implemented')\n  }\n\n  async grantProviderToken(_params: authModels.GrantProviderTokenRequest,): Promise<authModels.GrantProviderTokenResponse> {\n    throw new Error('Auth.grantProviderToken() is not implemented')\n  }\n\n  async bindWithProvider(_params: authModels.BindWithProviderRequest): Promise<void> {\n    throw new Error('Auth.bindWithProvider() is not implemented')\n  }\n\n  async signInWithUsername(_params: {\n    verificationInfo?: { verification_id: string; is_user: boolean }\n    verificationCode?: string\n    username?: string // 用户名称，长度 5-24 位，支持字符中英文、数字、特殊字符（仅支持_-），不支持中文\n    bindInfo?: any\n    loginType?: string\n    autoSignUp?: boolean\n  }): Promise<LoginState> {\n    throw new Error('Auth.signInWithUsername() is not implemented')\n  }\n\n  async getVerification(\n    _params: authModels.GetVerificationRequest,\n    _options?: { withCaptcha: boolean },\n  ): Promise<authModels.GetVerificationResponse> {\n    throw new Error('Auth.getVerification() is not implemented')\n  }\n\n  async createLoginState(\n    _params?: { version?: string; query?: any },\n    _options?: { asyncRefreshUser?: boolean },\n  ): Promise<LoginState> {\n    throw new Error('Auth.createLoginState() is not implemented')\n  }\n\n  async verify(_params: authModels.VerifyRequest): Promise<authModels.VerifyResponse> {\n    throw new Error('Auth.verify() is not implemented')\n  }\n\n  /**\n   * https://supabase.com/docs/reference/javascript/auth-signinanonymously\n   * Sign in a user anonymously.\n   * const { data, error } = await auth.signInAnonymously();\n   * @param params\n   * @returns  Promise<SignInRes>\n   */\n  async signInAnonymously(params: SignInAnonymouslyReq): Promise<SignInRes> {\n    try {\n      await this.oauthInstance.authApi.signInAnonymously(params)\n      const loginState = await this.createLoginState()\n\n      const { data: { session } = {} } = await this.getSession()\n\n      // loginState返回是为了兼容v2版本\n      return { ...(loginState as any), data: { user: session.user, session }, error: null }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n  }\n\n  /**\n   * https://supabase.com/docs/reference/javascript/auth-signup\n   * Sign up a new user with email or phone using a one-time password (OTP). If the account not exist, a new account will be created.\n   * let signUpResolve = null;\n    const res = await app.auth.signUp({\n      phone: \"xxxxxx\",\n    });\n\n    signUpResolve = res.data.verify\n\n    const res = await signUpResolve(code);\n\n    // res.data.callback支持 messageId 参数用于重新发送验证码进行验证，messageId 可以从 resend() 方法中获取\n    const { data } = await app.auth.resend({\n      type: \"signup\",\n      phone: \"xxxxxx\",\n    })\n    const res = await signUpResolve(code, data.messageId);\n   * @param params\n   * @returns Promise<SignUpRes>\n   */\n  async signUp(params: authModels.SignUpRequest): Promise<SignUpRes> {\n    if (params.phone_number || params.verification_code || params.verification_token || params.provider_token) {\n      await this.oauthInstance.authApi.signUp(params)\n      return this.createLoginState() as any\n    }\n    try {\n      // 参数校验：email或phone必填其一\n      this.validateAtLeastOne(params, [['email'], ['phone']], 'You must provide either an email or phone number')\n\n      // 第一步：发送验证码并存储 verificationInfo\n      const verificationInfo = await this.getVerification(params.email ? { email: params.email } : { phone_number: this.formatPhone(params.phone) },)\n\n      return {\n        data: {\n          // 第二步：等待用户输入验证码（通过 Promise 包装用户输入事件）\n          verifyOtp: async ({ token, messageId = verificationInfo.verification_id }): Promise<SignInRes> => {\n            try {\n              // 第三步：待用户输入完验证码之后，验证短信验证码\n              const verificationTokenRes = await this.verify({\n                verification_id: messageId || verificationInfo.verification_id,\n                verification_code: token,\n              })\n\n              // 第四步：注册并登录或直接登录\n              // 如果用户已经存在，直接登录\n              if (verificationInfo.is_user) {\n                await this.signIn({\n                  username: params.email || this.formatPhone(params.phone),\n                  verification_token: verificationTokenRes.verification_token,\n                })\n              } else {\n                // 如果用户不存在，注册用户\n                const data = JSON.parse(JSON.stringify(params))\n                delete data.email\n                delete data.phone\n\n                await this.oauthInstance.authApi.signUp({\n                  ...data,\n                  ...(params.email ? { email: params.email } : { phone_number: this.formatPhone(params.phone) }),\n                  verification_token: verificationTokenRes.verification_token,\n                  verification_code: token,\n                })\n                await this.createLoginState()\n              }\n\n              const { data: { session } = {} } = await this.getSession()\n\n              return { data: { user: session.user, session }, error: null }\n            } catch (error) {\n              return { data: {}, error: new AuthError(error) }\n            }\n          },\n        },\n        error: null,\n      }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n  }\n\n  /**\n   * https://supabase.com/docs/reference/javascript/auth-signout\n   * const result = await auth.signOut();\n   *\n   * @param params\n   */\n  async signOut(params?: authModels.SignoutRequest): Promise<void | authModels.SignoutReponse> {\n    try {\n      const { userInfoKey } = this.cache.keys\n      const res = await this.oauthInstance.authApi.signOut(params)\n      await this.cache.removeStoreAsync(userInfoKey)\n      this.setAccessKey()\n\n      this.config.eventBus?.fire(EVENTS.LOGIN_STATE_CHANGED, { eventType: LOGIN_STATE_CHANGED_TYPE.SIGN_OUT })\n\n      this.config.eventBus?.fire(EVENTS.AUTH_STATE_CHANGED, { event: AUTH_STATE_CHANGED_TYPE.SIGNED_OUT })\n\n      // res返回是为了兼容v2版本\n      return { ...res, data: {}, error: null }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n  }\n\n  /**\n   * https://supabase.com/docs/reference/javascript/auth-onauthstatechange\n   * Receive a notification every time an auth event happens. Safe to use without an async function as callback.\n   * const { data } = app.auth.onAuthStateChange((event, session) => {\n      console.log(event, session);\n      if (event === \"INITIAL_SESSION\") {\n        // handle initial session\n      } else if (event === \"SIGNED_IN\") {\n        // handle sign in event\n      } else if (event === \"SIGNED_OUT\") {\n        // handle sign out event\n      } else if (event === \"PASSWORD_RECOVERY\") {\n        // handle password recovery event\n      } else if (event === \"TOKEN_REFRESHED\") {\n        // handle token refreshed event\n      } else if (event === \"USER_UPDATED\") {\n        // handle user updated event\n      }\n    });\n    // call unsubscribe to remove the callback\n    data.subscription.unsubscribe();\n   * @param callback\n   * @returns Promise<{ data: { subscription: Subscription }, error: Error | null }>\n   */\n  onAuthStateChange(callback: OnAuthStateChangeCallback) {\n    if (!this.hasListenerSetUp) {\n      this.setupListeners()\n      this.hasListenerSetUp = true\n    }\n\n    const id = Math.random().toString(36)\n\n    if (!this.listeners.has(id)) {\n      this.listeners.set(id, new Set())\n    }\n\n    this.listeners.get(id)!.add(callback)\n\n    // 返回 Subscription 对象\n    const subscription = {\n      id,\n      callback,\n      unsubscribe: () => {\n        const callbacks = this.listeners.get(id)\n        if (callbacks) {\n          callbacks.delete(callback)\n          if (callbacks.size === 0) {\n            this.listeners.delete(id)\n          }\n        }\n      },\n    }\n\n    return {\n      data: { subscription },\n    }\n  }\n\n  /**\n   * https://supabase.com/docs/reference/javascript/auth-signinwithpassword\n   * Log in an existing user with an email and password or phone and password or username and password.\n   * const { data } = await app.auth.signInWithPassword({\n      username: \"xxx\",\n      password: \"xxx\",\n    })\n   * @param params\n   * @returns Promise<SignInRes>\n   */\n  async signInWithPassword(params: SignInWithPasswordReq): Promise<SignInRes> {\n    try {\n      // 参数校验：username/email/phone三选一，password必填\n      this.validateAtLeastOne(\n        params,\n        [['username'], ['email'], ['phone']],\n        'You must provide either username, email, or phone',\n      )\n      this.validateParams(params, {\n        password: { required: true, message: 'Password is required' },\n      })\n\n      await this.signIn({\n        username: params.username || params.email || this.formatPhone(params.phone),\n        password: params.password,\n        ...(params.is_encrypt ? { isEncrypt: true, version: 'v2' } : {}),\n      })\n      const { data: { session } = {} } = await this.getSession()\n\n      return { data: { user: session.user, session }, error: null }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n  }\n\n  /**\n   * https://supabase.com/docs/reference/javascript/auth-signinwithidtoken\n   * 第三方平台登录。如果用户不存在，会根据云开发平台-登录方式中对应身份源的登录模式配置，判断是否自动注册\n   * @param params\n   * @returns Promise<SignInRes>\n   */\n  async signInWithIdToken(params: SignInWithIdTokenReq): Promise<SignInRes> {\n    try {\n      // 参数校验：token必填\n      this.validateParams(params, {\n        token: { required: true, message: 'Token is required' },\n      })\n\n      await this.signInWithProvider({\n        provider_token: params.token,\n      })\n      const { data: { session } = {} } = await this.getSession()\n\n      return { data: { user: session.user, session }, error: null }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n  }\n\n  /**\n   * https://supabase.com/docs/reference/javascript/auth-signinwithotp\n   * Log in a user using a one-time password (OTP).\n   * let signResolve = null;\n    const res = await app.auth.signInWithOtp({\n      phone: \"xxxxxx\",\n    });\n\n    signResolve = res.data.verify\n\n    const res = await signResolve(code);\n\n    // res.data.callback支持 messageId 参数用于重新发送验证码进行验证，messageId 可以从 resend() 方法中获取\n    const { data } = await app.auth.resend({\n      type: \"signup\",\n      phone: \"xxxxxx\",\n    })\n    const res = await signUpResolve(code, data.messageId);\n   * @param params\n   * @returns Promise<SignInWithOtpRes>\n   */\n  async signInWithOtp(params: SignInWithOtpReq): Promise<SignInWithOtpRes> {\n    try {\n      // 参数校验：email或phone必填其一\n      this.validateAtLeastOne(params, [['email'], ['phone']], 'You must provide either an email or phone number')\n\n      // 第一步：发送验证码并存储 verificationInfo\n      const verificationInfo = await this.getVerification(params.email ? { email: params.email } : { phone_number: this.formatPhone(params.phone) },)\n\n      return {\n        data: {\n          user: null,\n          session: null,\n          // 第二步：等待用户输入验证码（通过 Promise 包装用户输入事件）\n          verifyOtp: async ({ token, messageId = verificationInfo.verification_id }): Promise<SignInRes> => this.verifyOtp({\n            email: params.email,\n            phone: params.phone,\n            token,\n            messageId,\n          }),\n        },\n        error: null,\n      }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n  }\n\n  /**\n   * 校验第三方平台授权登录回调，需先调用 signInWithOAuth 生成第三方平台授权 Uri，访问该 Uri 后，会跳转到第三方平台授权页面，授权完成后回调回来再调用该方法，不传参数则从 url query 和 sessionStorage 中获取\n   * // 1. 获取第三方平台授权页地址\n    const { data } = app.auth.signInWithOAuth({\n      provider: 'string'\n      options: {\n        redirectTo: 'https://example.com/callback'\n        state: 'string'\n      }\n    })\n\n    // 2. 访问uri （如 location.href = uri）\n\n    // 3. 校验第三方平台授权回调\n    const { data } = await app.auth.verifyOAuth()\n   * @param params\n   * @returns Promise<SignInRes>\n   */\n  async verifyOAuth(params?: VerifyOAuthReq): Promise<SignInRes | LinkIdentityRes> {\n    const data: any = {}\n    try {\n      // 回调至 provider_redirect_uri 地址（url query中携带 授权code，state等参数），此时检查 state 是否符合预期（如 自己设置的 wx_open)\n      const code = params?.code || utils.getQuery('code')\n      const state = params?.state || utils.getQuery('state')\n\n      // 参数校验：code和state必填\n      if (!code) {\n        return { data: {}, error: new AuthError({ message: 'Code is required' }) }\n      }\n\n      if (!state) {\n        return { data: {}, error: new AuthError({ message: 'State is required' }) }\n      }\n\n      const cacheData = getBrowserSession(state)\n      data.type = cacheData?.type\n\n      const provider = params?.provider || cacheData?.provider || utils.getQuery('provider')\n\n      if (!provider) {\n        return { data, error: new AuthError({ message: 'Provider is required' }) }\n      }\n\n      // state符合预期，则获取该三方平台token\n      const { provider_token: token } = await this.grantProviderToken({\n        provider_id: provider,\n        provider_redirect_uri: location.origin + location.pathname, // 指定三方平台跳回的 url 地址\n        provider_code: code, // 第三方平台跳转回页面时，url param 中携带的 code 参数\n      })\n\n      let res: SignInRes | LinkIdentityRes\n\n      if (cacheData.type === OAUTH_TYPE.BIND_IDENTITY) {\n        res = await this.oauthInstance.authApi.toBindIdentity({ provider_token: token, provider, fireEvent: true })\n      } else {\n        // 通过 provider_token 仅登录或登录并注册（与云开发平台-登录方式-身份源登录模式配置有关）\n        res = await this.signInWithIdToken({\n          token,\n        })\n        res.data = { ...data, ...res.data }\n      }\n\n      const localSearch = new URLSearchParams(location?.search)\n      localSearch.delete('code')\n      localSearch.delete('state')\n      addUrlSearch(\n        cacheData?.search === undefined ? `?${localSearch.toString()}` : cacheData?.search,\n        cacheData?.hash || location.hash,\n      )\n      removeBrowserSession(state)\n\n      return res\n    } catch (error) {\n      return { data, error: new AuthError(error) }\n    }\n  }\n\n  /**\n   * https://supabase.com/docs/reference/javascript/auth-signinwithoauth\n   * 生成第三方平台授权 Uri （如微信二维码扫码授权网页）\n   * @param params\n   * @returns Promise<SignInOAuthRes>\n   */\n  async signInWithOAuth(params: SignInWithOAuthReq): Promise<SignInOAuthRes> {\n    try {\n      // 参数校验：provider必填\n      this.validateParams(params, {\n        provider: { required: true, message: 'Provider is required' },\n      })\n\n      const href = params.options?.redirectTo || location.href\n\n      const urlObject = new URL(href)\n\n      const provider_redirect_uri = urlObject.origin + urlObject.pathname\n\n      const state = params.options?.state || `prd-${params.provider}-${Math.random().toString(36)\n        .slice(2)}`\n\n      const { uri } = await this.genProviderRedirectUri({\n        provider_id: params.provider,\n        provider_redirect_uri,\n        state,\n      })\n\n      // 对 URL 进行解码\n      const decodedUri = decodeURIComponent(uri)\n\n      // 合并额外的查询参数\n      let finalUri = decodedUri\n\n      if (params.options?.queryParams) {\n        const url = new URL(decodedUri)\n        Object.entries(params.options.queryParams).forEach(([key, value]) => {\n          url.searchParams.set(key, value)\n        })\n        finalUri = url.toString()\n      }\n\n      saveToBrowserSession(state, {\n        provider: params.provider,\n        search: urlObject.search,\n        hash: urlObject.hash,\n        type: params.options?.type || OAUTH_TYPE.SIGN_IN,\n      })\n\n      if (isBrowser() && !params.options?.skipBrowserRedirect) {\n        window.location.assign(finalUri)\n      }\n\n      return { data: { url: finalUri, provider: params.provider }, error: null }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n  }\n\n  // https://supabase.com/docs/reference/javascript/auth-signinwithsso\n  async signInWithSSO() {\n    //\n  }\n\n  // https://supabase.com/docs/reference/javascript/auth-signinwithweb3\n  async signInWithWeb3() {\n    //\n  }\n\n  // https://supabase.com/docs/reference/javascript/auth-getclaims\n  async getClaims(): Promise<GetClaimsRes> {\n    try {\n      const { accessToken } = await this.getAccessToken()\n      const parsedToken = weappJwtDecodeAll(accessToken)\n      return { data: parsedToken, error: null }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n  }\n\n  /**\n   * https://supabase.com/docs/reference/javascript/auth-resetpasswordforemail\n   * 通过 email 或手机号重置密码\n   * const { data } = await app.auth.resetPasswordForEmail(\"xxx@xx.com\");\n   * const { data } = await app.auth.resetPasswordForEmail(\"13800138000\");\n\n     await data.updateUser(code, newPassWord);\n   *\n   * @param emailOrPhone 邮箱或手机号\n   * @returns Promise<ResetPasswordForEmailRes>\n   */\n  async resetPasswordForEmail(\n    emailOrPhone: string,\n    options?: { redirectTo?: string },\n  ): Promise<ResetPasswordForEmailRes> {\n    try {\n      // 参数校验：emailOrPhone必填\n      this.validateParams(\n        { emailOrPhone },\n        {\n          emailOrPhone: { required: true, message: 'Email or phone is required' },\n        },\n      )\n\n      const { redirectTo } = options || {}\n\n      // 判断是邮箱还是手机号\n      const isEmail = emailOrPhone.includes('@')\n      let verificationParams: { email?: string; phone_number?: string }\n\n      if (isEmail) {\n        verificationParams = { email: emailOrPhone }\n      } else {\n        // 正规化手机号\n        const formattedPhone = this.formatPhone(emailOrPhone)\n        verificationParams = { phone_number: formattedPhone }\n      }\n\n      // 第一步：发送验证码并存储 verificationInfo\n      const verificationInfo = await this.getVerification(verificationParams)\n\n      return {\n        data: {\n          // 第二步：等待用户输入验证码（通过 Promise 包装用户输入事件）\n          updateUser: async (attributes: UpdateUserAttributes): Promise<SignInRes> => {\n            this.validateParams(attributes, {\n              nonce: { required: true, message: 'Nonce is required' },\n              password: { required: true, message: 'Password is required' },\n            })\n            try {\n              // 第三步：待用户输入完验证码之后，验证验证码\n              const verificationTokenRes = await this.verify({\n                verification_id: verificationInfo.verification_id,\n                verification_code: attributes.nonce,\n              })\n\n              await this.oauthInstance.authApi.resetPassword({\n                email: isEmail ? emailOrPhone : undefined,\n                phone: !isEmail ? emailOrPhone : undefined,\n                new_password: attributes.password,\n                verification_token: verificationTokenRes.verification_token,\n              })\n\n              this.config.eventBus?.fire(EVENTS.AUTH_STATE_CHANGED, { event: AUTH_STATE_CHANGED_TYPE.PASSWORD_RECOVERY })\n\n              const res = await this.signInWithPassword({\n                email: isEmail ? emailOrPhone : undefined,\n                phone: !isEmail ? emailOrPhone : undefined,\n                password: attributes.password,\n              })\n\n              if (redirectTo && isBrowser()) {\n                window.location.assign(redirectTo)\n              }\n\n              return res\n            } catch (error) {\n              return { data: {}, error: new AuthError(error) }\n            }\n          },\n        },\n        error: null,\n      }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n  }\n\n  /**\n   * 通过旧密码重置密码\n   * @param new_password\n   * @param old_password\n   * @returns\n   */\n  async resetPasswordForOld(params: ResetPasswordForOldReq) {\n    try {\n      await this.oauthInstance.authApi.updatePasswordByOld({\n        old_password: params.old_password,\n        new_password: params.new_password,\n      })\n\n      const { data: { session } = {} } = await this.getSession()\n\n      return { data: { user: session.user, session }, error: null }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n  }\n\n  /**\n   * https://supabase.com/docs/reference/javascript/auth-verifyotp\n   * Log in a user given a User supplied OTP and verificationId received through mobile or email.\n   * const verificationInfo = await app.auth.getVerification({\n      phone: \"xxxxxx\",\n    });\n\n    const data = await app.auth.verifyOtp({\n      type: \"sms\",\n      phone: \"xxxxxx\",\n      token: \"xxxxxx\",\n      verificationInfo,\n    })\n   * @param params\n   * @returns Promise<SignInRes>\n   */\n  async verifyOtp(params: VerifyOtpReq): Promise<SignInRes> {\n    try {\n      const { type } = params\n      // 参数校验：token和verificationInfo必填\n      this.validateParams(params, {\n        token: { required: true, message: 'Token is required' },\n        messageId: { required: true, message: 'messageId is required' },\n      })\n\n      if (['phone_change', 'email_change'].includes(type)) {\n        await this.verify({\n          verification_id: params.messageId,\n          verification_code: params.token,\n        })\n      } else {\n        await this.signInWithUsername({\n          verificationInfo: { verification_id: params.messageId, is_user: true },\n          verificationCode: params.token,\n          username: params.email || this.formatPhone(params.phone) || '',\n          loginType: params.email ? 'email' : 'phone',\n        })\n      }\n\n      const { data: { session } = {} } = await this.getSession()\n\n      return { data: { user: session.user, session }, error: null }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n  }\n\n  /**\n   * https://supabase.com/docs/reference/javascript/auth-getSession\n   * Returns the session, refreshing it if necessary.\n   * The session returned can be null if the session is not detected which can happen in the event a user is not signed-in or has logged out.\n   * const { data } = await app.auth.getSession()\n   * @returns Promise<SignInRes>\n   */\n  async getSession(): Promise<SignInRes> {\n    try {\n      const credentials: Credentials = await this.oauthInstance.oauth2client.getCredentials()\n\n      if (!credentials || credentials.scope === 'accessKey') {\n        return { data: { session: null }, error: null }\n      }\n\n      const { data: { user } = {} } = await this.getUser()\n\n      return { data: { session: { ...credentials, user } }, error: null }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n  }\n\n  /**\n   * https://supabase.com/docs/reference/javascript/auth-refreshsession\n   * 无论过期状态如何，都返回一个新的会话。接受一个可选的refresh_token。如果未传入当前会话，则refreshSession()将尝试从getSession()中检索它。如果当前会话的刷新令牌无效，则会抛出一个错误。\n   * const { data } = await app.auth.refreshSession()\n   * @param refresh_token\n   * @returns Promise<SignInRes>\n   */\n  async refreshSession(refresh_token?: string): Promise<SignInRes> {\n    try {\n      const credentials: Credentials = await this.oauthInstance.oauth2client.localCredentials.getCredentials()\n      credentials.refresh_token = refresh_token || credentials.refresh_token\n      const newTokens = await this.oauthInstance.oauth2client.refreshToken(credentials)\n      const { data: { user } = {} } = await this.getUser()\n\n      return { data: { user, session: { ...newTokens, user } }, error: null }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n  }\n\n  /**\n   * https://supabase.com/docs/reference/javascript/auth-getuser\n   * 如果存在现有会话，则获取当前用户详细信息。此方法会向服务器发起网络请求，因此返回的值是真实的，可用于制定授权规则。\n   * const { data } = await app.auth.getUser()\n   * @returns Promise<GetUserRes>\n   */\n  async getUser(): Promise<GetUserRes> {\n    try {\n      const user = this.convertToUser(await this.getUserInfo())\n      return { data: { user }, error: null }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n  }\n\n  /**\n   * 刷新用户信息\n   * @returns Promise<CommonRes>\n   */\n  async refreshUser(): Promise<CommonRes> {\n    try {\n      await this.currentUser.refresh()\n\n      const { data: { session } = {} } = await this.getSession()\n      return { data: { user: session.user, session }, error: null }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n  }\n\n  /**\n   * https://supabase.com/docs/reference/javascript/auth-updateuser\n   * 更新用户信息\n   * - 不支持更新密码，更新密码请使用 resetPasswordForEmail 或 reauthenticate\n   * - 如果更新 email 或 phone，需要先发送验证码，然后调用返回的 verifyOtp 回调进行验证\n   *\n   * // 更新不需要验证的字段\n   * const { data } = await app.auth.updateUser({\n      username: \"xxx\",\n      description: \"xxx\",\n      avatar_url: \"xxx\",\n      nickname: \"xxx\",\n      gender: 'MALE'\n    })\n   *\n   * // 更新 email 或 phone（需要验证）\n   * const { data } = await app.auth.updateUser({\n      email: \"new@example.com\"\n    })\n   * // 调用 verifyOtp 回调验证\n   * await data.verifyOtp({ email: \"new@example.com\", token: \"123456\" })\n   *\n   * @param params\n   * @returns Promise<GetUserRes | UpdateUserWithVerificationRes>\n   */\n  async updateUser(params: UpdateUserReq): Promise<GetUserRes | UpdateUserWithVerificationRes> {\n    try {\n      // 参数校验：至少有一个更新字段被提供\n      const hasValue = Object.keys(params).some(key => params[key] !== undefined && params[key] !== null && params[key] !== '',)\n      if (!hasValue) {\n        throw new AuthError({ message: 'At least one field must be provided for update' })\n      }\n\n      const { email, phone, ...restParams } = params\n\n      // 检查是否需要更新 email 或 phone\n      const needsEmailVerification = email !== undefined\n      const needsPhoneVerification = phone !== undefined\n\n      let extraRes = {}\n\n      if (needsEmailVerification || needsPhoneVerification) {\n        // 需要发送验证码\n        let verificationParams: { email?: string; phone_number?: string }\n        let verificationType: 'email_change' | 'phone_change'\n\n        if (needsEmailVerification) {\n          verificationParams = { email: params.email }\n          verificationType = 'email_change'\n        } else {\n          // 正规化手机号\n          const formattedPhone = this.formatPhone(params.phone)\n          verificationParams = { phone_number: formattedPhone }\n          verificationType = 'phone_change'\n        }\n\n        // 发送验证码\n        const verificationInfo = await this.getVerification(verificationParams)\n\n        Object.keys(restParams).length > 0 && await this.updateUserBasicInfo(restParams)\n\n        extraRes = {\n          messageId: verificationInfo.verification_id,\n          verifyOtp: async (verifyParams: { email?: string; phone?: string; token: string }): Promise<GetUserRes> => {\n            try {\n              if (verifyParams.email && params.email === verifyParams.email) {\n                // 验证码验证\n                await this.verifyOtp({\n                  type: 'email_change',\n                  email: params.email,\n                  token: verifyParams.token,\n                  messageId: verificationInfo.verification_id,\n                })\n                await this.updateUserBasicInfo({ email: params.email })\n              } else if (verifyParams.phone && params.phone === verifyParams.phone) {\n                // 验证码验证\n                await this.verifyOtp({\n                  type: 'phone_change',\n                  phone: params.phone,\n                  token: verifyParams.token,\n                  messageId: verificationInfo.verification_id,\n                })\n                await this.updateUserBasicInfo({ phone: this.formatPhone(params.phone) })\n              } else {\n                await this.verifyOtp({\n                  type: verificationType,\n                  email: needsEmailVerification ? params.email : undefined,\n                  phone: !needsEmailVerification ? params.phone : undefined,\n                  token: verifyParams.token,\n                  messageId: verificationInfo.verification_id,\n                })\n                // 验证成功后更新用户信息\n                await this.updateUserBasicInfo(params)\n              }\n\n              const {\n                data: { user },\n              } = await this.getUser()\n              this.config.eventBus?.fire(EVENTS.AUTH_STATE_CHANGED, { event: AUTH_STATE_CHANGED_TYPE.USER_UPDATED })\n\n              return { data: { user }, error: null }\n            } catch (error) {\n              return { data: {}, error: new AuthError(error) }\n            }\n          },\n        }\n      } else {\n        // 不需要验证，直接更新\n        await this.updateUserBasicInfo(params)\n      }\n      const {\n        data: { user },\n      } = await this.getUser()\n      this.config.eventBus?.fire(EVENTS.AUTH_STATE_CHANGED, { event: AUTH_STATE_CHANGED_TYPE.USER_UPDATED })\n\n      return { data: { user, ...extraRes }, error: null }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n  }\n\n  /**\n   * https://supabase.com/docs/reference/javascript/auth-getuseridentities\n   * 获取所有身份源\n   * const { data } = await app.auth.getUserIdentities()\n   * @returns Promise<GetUserIdentitiesRes>\n   */\n  async getUserIdentities(): Promise<GetUserIdentitiesRes> {\n    try {\n      const providers = await this.oauthInstance.authApi.getProviders()\n\n      return { data: { identities: providers?.data?.filter(v => !!v.bind) }, error: null }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n  }\n\n  /**\n   * https://supabase.com/docs/reference/javascript/auth-linkidentity\n   * 绑定身份源到当前用户，如果已有用户绑定该身份源，会抛出错误\n   * const { data } = await app.auth.linkIdentity({\n      provider: 'string'\n    })\n   * @param params\n   * @returns Promise<LinkIdentityRes>\n   */\n  async linkIdentity(params: LinkIdentityReq): Promise<LinkIdentityRes> {\n    try {\n      // 参数校验：provider必填\n      this.validateParams(params, {\n        provider: { required: true, message: 'Provider is required' },\n      })\n\n      await this.signInWithOAuth({\n        provider: params.provider,\n        options: {\n          type: OAUTH_TYPE.BIND_IDENTITY,\n        },\n      })\n\n      return { data: { provider: params.provider }, error: null }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n  }\n\n  /**\n   * https://supabase.com/docs/reference/javascript/auth-unlinkidentity\n   * 解绑身份源\n   * const { data } = await app.auth.unlinkIdentity({\n      provider: \"xxx\"\n    })\n   * @param params\n   * @returns Promise<CommonRes>\n   */\n  async unlinkIdentity(params: UnlinkIdentityReq): Promise<CommonRes> {\n    try {\n      // 参数校验：provider必填\n      this.validateParams(params, {\n        provider: { required: true, message: 'Provider is required' },\n      })\n\n      await this.oauthInstance.authApi.unbindProvider({ provider_id: params.provider })\n\n      return { data: {}, error: null }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n  }\n\n  /**\n   * https://supabase.com/docs/reference/javascript/auth-reauthentication\n   * 重新认证。通过发送验证码来重新认证用户身份，支持更新密码\n   * const { data } = await app.auth.reauthenticate()\n\n     await data.updateUser(code, newPassWord)\n   *\n   * @returns Promise<ReauthenticateRes>\n   */\n  async reauthenticate(): Promise<ReauthenticateRes> {\n    try {\n      const {\n        data: { user },\n      } = await this.getUser()\n\n      this.validateAtLeastOne(user, [['email', 'phone']], 'You must provide either an email or phone number')\n      const userInfo = user.email ? { email: user.email } : { phone_number: this.formatPhone(user.phone) }\n\n      // 第一步：发送验证码并存储 verificationInfo\n      const verificationInfo = await this.getVerification(userInfo)\n\n      return {\n        data: {\n          // 第二步：等待用户输入验证码（通过 Promise 包装用户输入事件）\n          updateUser: async (attributes: UpdateUserAttributes): Promise<SignInRes> => {\n            this.validateParams(attributes, {\n              nonce: { required: true, message: 'Nonce is required' },\n            })\n            try {\n              if (attributes.password) {\n                // 第三步：待用户输入完验证码之后，验证验证码\n                const verificationTokenRes = await this.verify({\n                  verification_id: verificationInfo.verification_id,\n                  verification_code: attributes.nonce,\n                })\n\n                // 第四步：获取 sudo_token\n                const sudoRes = await this.oauthInstance.authApi.sudo({\n                  verification_token: verificationTokenRes.verification_token,\n                })\n\n                await this.oauthInstance.authApi.setPassword({\n                  new_password: attributes.password,\n                  sudo_token: sudoRes.sudo_token,\n                })\n              } else {\n                await this.signInWithUsername({\n                  verificationInfo,\n                  verificationCode: attributes.nonce,\n                  ...userInfo,\n                  loginType: userInfo.email ? 'email' : 'phone',\n                })\n              }\n\n              const { data: { session } = {} } = await this.getSession()\n\n              return { data: { user: session.user, session }, error: null }\n            } catch (error) {\n              return { data: {}, error: new AuthError(error) }\n            }\n          },\n        },\n        error: null,\n      }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n  }\n\n  /**\n   * https://supabase.com/docs/reference/javascript/auth-resend\n   * 重新发送验证码\n   * - 向用户重新发送邮箱、手机号注册或登录的验证码。\n   * - 可以通过再次调用 signInWithOtp() 方法来重新发送验证码登录。\n   * - 可以通过再次调用 signUp() 方法来重新发送验证码注册。\n   * - 此方法仅在调用 signInWithOtp() 或 signUp() 后，重新发送验证码，收到验证码后再继续调用 signInWithOtp() 或 signUp() 的callback参数，将messageId传入callback。\n   * const result = await app.auth.signInWithOtp({ phone: \"xxx\" });\n\n    let signResolve = result.data.verify\n\n    const { data } = await app.auth.resend({\n      type: \"signup\",\n      phone: \"xxx\",\n    })\n\n    const res = await signResolve(code, data.messageId);\n   * @param params\n   * @returns Promise<ResendRes>\n   */\n  async resend(params: ResendReq): Promise<ResendRes> {\n    try {\n      // 参数校验：email或phone必填其一\n      this.validateAtLeastOne(params, [['email'], ['phone']], 'You must provide either an email or phone number')\n\n      const target = params.type === 'signup' ? 'ANY' : 'USER'\n      const data: { email?: string; phone_number?: string; target: 'USER' | 'ANY' } = { target }\n      if ('email' in params) {\n        data.email = params.email\n      }\n\n      if ('phone' in params) {\n        data.phone_number = this.formatPhone(params.phone)\n      }\n\n      // 重新发送验证码\n      const { verification_id: verificationId } = await this.oauthInstance.authApi.getVerification(data)\n\n      return {\n        data: { messageId: verificationId },\n        error: null,\n      }\n    } catch (error: any) {\n      return {\n        data: {},\n        error: new AuthError(error),\n      }\n    }\n  }\n\n  /**\n   * https://supabase.com/docs/reference/javascript/auth-setsession\n   * 使用access_token和refresh_token来设置会话\n   * 如果成功，则会触发一个SIGNED_IN事件\n   * const { data, error } = await app.auth.setSession({\n      access_token,\n      refresh_token\n    })\n   * @param params\n   * @returns Promise<SignInRes>\n   */\n  async setSession(params: SetSessionReq): Promise<SignInRes> {\n    try {\n      this.validateParams(params, {\n        access_token: { required: true, message: 'Access token is required' },\n        refresh_token: { required: true, message: 'Refresh token is required' },\n      })\n\n      await this.oauthInstance.oauth2client.refreshToken(params, { throwOnError: true })\n\n      const { data: { session } = {} } = await this.getSession()\n\n      this.config.eventBus?.fire(EVENTS.AUTH_STATE_CHANGED, { event: AUTH_STATE_CHANGED_TYPE.SIGNED_IN })\n\n      return { data: { user: session.user, session }, error: null }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n  }\n\n  // https://supabase.com/docs/reference/javascript/auth-exchangecodeforsession\n  async exchangeCodeForSession() {\n    //\n  }\n\n  /**\n   * 删除当前用户\n   * @param params\n   * @returns\n   */\n  async deleteUser(params: DeleteMeReq): Promise<CommonRes> {\n    try {\n      this.validateParams(params, {\n        password: { required: true, message: 'Password is required' },\n      })\n\n      const { sudo_token } = await this.oauthInstance.authApi.sudo(params)\n\n      await this.oauthInstance.authApi.deleteMe({ sudo_token })\n\n      return { data: {}, error: null }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n  }\n\n  /**\n   * 跳转系统默认登录页\n   * @returns {Promise<authModels.ToDefaultLoginPage>}\n   * @memberof Auth\n   */\n  async toDefaultLoginPage(params: authModels.ToDefaultLoginPage = {}): Promise<CommonRes> {\n    try {\n      const configVersion = params.config_version || 'env'\n      const query = Object.keys(params.query || {})\n        .map(key => `${key}=${params.query[key]}`)\n        .join('&')\n\n      if (adapterForWxMp.isMatch()) {\n        wx.navigateTo({ url: `/packages/$wd_system/pages/login/index${query ? `?${query}` : ''}` })\n      } else {\n        const redirectUri = params.redirect_uri || window.location.href\n        const urlObj = new URL(redirectUri)\n        const loginPage = `${urlObj.origin}/__auth/?app_id=${params.app_id || ''}&env_id=${this.config.env}&client_id=${\n          this.config.clientId || this.config.env\n        }&config_version=${configVersion}&redirect_uri=${encodeURIComponent(redirectUri)}${query ? `&${query}` : ''}`\n        window.location.href = loginPage\n      }\n      return { data: {}, error: null }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n  }\n\n  /**\n   * 自定义登录\n   * @param getTickFn () => Promise<string>, 获取自定义登录 ticket 的函数\n   * @returns\n   */\n  async signInWithCustomTicket(getTickFn?: authModels.GetCustomSignTicketFn): Promise<SignInRes> {\n    if (getTickFn) {\n      this.setCustomSignFunc(getTickFn)\n    }\n\n    try {\n      await this.oauthInstance.authApi.signInWithCustomTicket()\n      const loginState = await this.createLoginState()\n\n      const { data: { session } = {} } = await this.getSession()\n\n      // loginState返回是为了兼容v2版本\n      return { ...(loginState as any), data: { user: session.user, session }, error: null }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n  }\n\n  /**\n   * 小程序openId静默登录\n   * @param params\n   * @returns Promise<SignInRes>\n   */\n  async signInWithOpenId({ useWxCloud = true } = {}): Promise<SignInRes> {\n    if (!adapterForWxMp.isMatch()) {\n      throw Error('wx api undefined')\n    }\n    const wxInfo = wx.getAccountInfoSync().miniProgram\n\n    const mainFunc = async (code) => {\n      let result: authModels.GrantProviderTokenResponse | undefined = undefined\n      let credentials: Credentials | undefined = undefined\n\n      try {\n        result = await this.oauthInstance.authApi.grantProviderToken(\n          {\n            provider_id: wxInfo?.appId,\n            provider_code: code,\n            provider_params: {\n              provider_code_type: 'open_id',\n              appid: wxInfo?.appId,\n            },\n          },\n          useWxCloud,\n        )\n\n        if ((result as any)?.error_code || !result.provider_token) {\n          throw result\n        }\n\n        credentials = await this.oauthInstance.authApi.signInWithProvider(\n          { provider_token: result.provider_token },\n          useWxCloud,\n        )\n\n        if ((credentials as any)?.error_code) {\n          throw credentials\n        }\n      } catch (error) {\n        throw error\n      }\n      await this.oauthInstance.oauth2client.setCredentials(credentials as Credentials)\n    }\n\n    try {\n      await new Promise((resolve, reject) => {\n        wx.login({\n          success: async (res: { code: string }) => {\n            try {\n              await mainFunc(res.code)\n              resolve(true)\n            } catch (error) {\n              reject(error)\n            }\n          },\n          fail: (res: any) => {\n            const error = new Error(res?.errMsg)\n            ;(error as any).code = res?.errno\n            reject(error)\n          },\n        })\n      })\n\n      const loginState = await this.createLoginState()\n\n      const { data: { session } = {} } = await this.getSession()\n\n      // loginState返回是为了兼容v2版本\n      return { ...(loginState as any), data: { user: session.user, session }, error: null }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n  }\n\n  /**\n   * 小程序手机号授权登录，目前只支持全托管手机号授权登录\n   * @param params\n   * @returns Promise<SignInRes>\n   */\n  async signInWithPhoneAuth({ phoneCode = '' }): Promise<SignInRes> {\n    if (!adapterForWxMp.isMatch()) {\n      return { data: {}, error: new AuthError({ message: 'wx api undefined' }) }\n    }\n    const wxInfo = wx.getAccountInfoSync().miniProgram\n    const providerInfo = {\n      provider_params: { provider_code_type: 'phone' },\n      provider_id: wxInfo.appId,\n    }\n\n    const { code } = await wx.login()\n    ;(providerInfo as any).provider_code = code\n\n    try {\n      let providerToken = await this.oauthInstance.authApi.grantProviderToken(providerInfo)\n      if (providerToken.error_code) {\n        throw providerToken\n      }\n\n      providerToken = await this.oauthInstance.authApi.patchProviderToken({\n        provider_token: providerToken.provider_token,\n        provider_id: wxInfo.appId,\n        provider_params: {\n          code: phoneCode,\n          provider_code_type: 'phone',\n        },\n      })\n      if (providerToken.error_code) {\n        throw providerToken\n      }\n\n      const signInRes = await this.oauthInstance.authApi.signInWithProvider({\n        provider_token: providerToken.provider_token,\n      })\n\n      if ((signInRes as any)?.error_code) {\n        throw signInRes\n      }\n    } catch (error) {\n      return { data: {}, error: new AuthError(error) }\n    }\n\n    const loginState = await this.createLoginState()\n\n    const { data: { session } = {} } = await this.getSession()\n\n    // loginState返回是为了兼容v2版本\n    return { ...(loginState as any), data: { user: session.user, session }, error: null }\n  }\n\n  private formatPhone(phone: string) {\n    if (!/\\s+/.test(phone) && /^\\+\\d{1,3}\\d+/.test(phone)) {\n      return phone.replace(/^(\\+\\d{1,2})(\\d+)$/, '$1 $2')\n    }\n    return /^\\+\\d{1,3}\\s+/.test(phone) ? phone : `+86 ${phone}`\n  }\n\n  private notifyListeners(event, session, info): OnAuthStateChangeCallback {\n    this.listeners.forEach((callbacks) => {\n      callbacks.forEach((callback) => {\n        try {\n          callback(event, session, info)\n        } catch (error) {\n          console.error('Error in auth state change callback:', error)\n        }\n      })\n    })\n    return\n  }\n\n  private async init(): Promise<{ error: Error | null }> {\n    try {\n      const credentials: Credentials = await this.oauthInstance.oauth2client.localCredentials.getCredentials()\n      if (credentials) {\n        this.config.eventBus?.fire(EVENTS.AUTH_STATE_CHANGED, { event: AUTH_STATE_CHANGED_TYPE.INITIAL_SESSION })\n      }\n    } catch (error) {\n      // Ignore errors when checking for existing credentials\n    }\n\n    return { error: null }\n  }\n\n  private setupListeners() {\n    this.config.eventBus?.on(EVENTS.AUTH_STATE_CHANGED, async (params) => {\n      const event = params?.data?.event\n      const info = params?.data?.info\n      const {\n        data: { session },\n      } = await this.getSession()\n\n      this.notifyListeners(event, session, info)\n    })\n  }\n\n  private convertToUser(userInfo: authModels.UserInfo & Partial<User>) {\n    if (!userInfo) return null\n\n    // 优先使用 userInfo 中的数据（V3 API）\n    const email = userInfo?.email || userInfo?.username\n    const phone = userInfo?.phone_number\n    const userId = userInfo?.sub || userInfo?.uid || ''\n\n    return {\n      id: userId,\n      aud: 'authenticated',\n      role: userInfo.groups,\n      email: email || '',\n      email_confirmed_at: userInfo?.email_verified ? userInfo.created_at : userInfo.created_at,\n      phone,\n      phone_confirmed_at: phone ? userInfo.created_at : undefined,\n      confirmed_at: userInfo.created_at,\n      last_sign_in_at: userInfo.last_sign_in_at,\n      app_metadata: {\n        provider: userInfo.loginType?.toLowerCase() || 'cloudbase',\n        providers: [userInfo.loginType?.toLowerCase() || 'cloudbase'],\n      },\n      user_metadata: {\n        // V3 API 用户信息\n        name: userInfo?.name,\n        picture: userInfo?.picture,\n        username: userInfo?.username, // 用户名称，长度 5-24 位，支持字符中英文、数字、特殊字符（仅支持_-），不支持中文\n        gender: userInfo?.gender,\n        locale: userInfo?.locale,\n        // V2 API 兼容（使用 any 避免类型错误）\n        uid: userInfo.uid,\n        nickName: userInfo.nickName,\n        avatarUrl: userInfo.avatarUrl || userInfo.picture,\n        location: userInfo.location,\n        hasPassword: userInfo.hasPassword,\n      },\n      identities:\n        userInfo?.providers?.map(p => ({\n          id: p.id || '',\n          identity_id: p.id || '',\n          user_id: userId,\n          identity_data: {\n            provider_id: p.id,\n            provider_user_id: p.provider_user_id,\n            name: p.name,\n          },\n          provider: p.id || 'cloudbase',\n          created_at: userInfo.created_at,\n          updated_at: userInfo.updated_at,\n          last_sign_in_at: userInfo.last_sign_in_at,\n        })) || [],\n      created_at: userInfo.created_at,\n      updated_at: userInfo.updated_at,\n      is_anonymous: userInfo.name === 'anonymous',\n    }\n  }\n\n  /**\n   * 参数校验辅助方法\n   */\n  private validateParams(params: any, rules: { [key: string]: { required?: boolean; message: string } }): void {\n    for (const [key, rule] of Object.entries(rules)) {\n      if (rule.required && (params?.[key] === undefined || params?.[key] === null || params?.[key] === '')) {\n        throw new AuthError({ message: rule.message })\n      }\n    }\n  }\n\n  /**\n   * 校验必填参数组（至少有一个参数必须有值）\n   */\n  private validateAtLeastOne(params: any, fieldGroups: string[][], message: string): void {\n    const hasValue = fieldGroups.some(group => group.some(field => params?.[field] !== undefined && params?.[field] !== null && params?.[field] !== ''),)\n\n    if (!hasValue) {\n      throw new AuthError({ message })\n    }\n  }\n}\n", "import type { ICloudbase, ICloudbaseConfig, ICloudbasePlatformInfo } from '@cloudbase/types'\nimport type { ICloudbaseCache } from '@cloudbase/types/cache'\nimport type { ICloudbaseRequest } from '@cloudbase/types/request'\nimport type { ICloudbaseAuthConfig, IUser, IUserInfo, ILoginState } from '@cloudbase/types/auth'\nimport type { ICloudbaseComponent } from '@cloudbase/types/component'\nimport type { GrantProviderTokenResponse, ProviderSubType } from '@cloudbase/oauth/dist/cjs/auth/models'\nimport type { authModels, AuthOptions, Credentials } from '@cloudbase/oauth'\nimport {\n  CloudbaseOAuth,\n  AUTH_API_PREFIX,\n  LOGIN_STATE_CHANGED_TYPE,\n  EVENTS,\n  AUTH_STATE_CHANGED_TYPE,\n  OAUTH_TYPE,\n} from '@cloudbase/oauth'\nimport { useAuthAdapter } from './adapter'\nimport {\n  printWarn,\n  throwError,\n  ERRORS,\n  COMMUNITY_SITE_URL,\n  catchErrorsDecorator,\n  CloudbaseEventEmitter,\n  CloudbaseCache,\n  adapterForWxMp,\n  useDefaultAdapter,\n} from './utilities'\nimport { SbaseApi } from './sbaseApi'\n\nexport type {\n  SignInRes,\n  GetUserRes,\n  CommonRes,\n  SignInWithOtpRes,\n  SignInOAuthRes,\n  GetClaimsRes,\n  ResetPasswordForEmailRes,\n  GetUserIdentitiesRes,\n  LinkIdentityRes,\n  ReauthenticateRes,\n  ResendRes,\n  UpdateUserWithVerificationRes,\n  OnAuthStateChangeCallback,\n  SignInWithPasswordReq,\n  SignInWithIdTokenReq,\n  SignInWithOAuthReq,\n  VerifyOAuthReq,\n  VerifyOtpReq,\n  LinkIdentityReq,\n  UnlinkIdentityReq,\n  UpdateUserReq,\n  SignInWithOtpReq,\n  ResetPasswordForOldReq,\n  ResendReq,\n  SetSessionReq,\n  DeleteMeReq,\n  SignUpRes,\n} from './type'\n\ndeclare const cloudbase: ICloudbase\ndeclare const wx: any\n\nconst COMPONENT_NAME = 'auth'\n\ninterface UserInfo {\n  uid?: string\n  gender?: string\n  picture?: string\n  email?: string\n  email_verified?: boolean\n  phone_number?: string\n  username?: string\n  name?: string\n  birthdate?: string\n  zoneinfo?: string\n  locale?: string\n  sub?: string\n  created_from?: string\n}\n\n\nconst onCredentialsError = eventBus => (params) => {\n  eventBus.fire(EVENTS.LOGIN_STATE_CHANGED, { ...params, eventType: LOGIN_STATE_CHANGED_TYPE.CREDENTIALS_ERROR })\n}\n\ninterface IUserOptions {\n  cache: ICloudbaseCache\n  oauthInstance: CloudbaseOAuth\n}\n\nexport class User implements IUser {\n  public uid?: string\n  public gender?: string\n  public picture?: string\n  public email?: string\n  public emailVerified?: boolean\n  public phoneNumber?: string\n  public username?: string // 用户名称，长度 5-24 位，支持字符中英文、数字、特殊字符（仅支持_-），不支持中文\n  public name?: string\n  public providers?: {\n    id?: string\n    providerUserId?: string\n    name?: string\n  }[]\n  public birthdate?: string\n  public zoneinfo?: string\n  public locale?: string\n  public sub?: string\n  public createdFrom?: string\n\n  private cache: ICloudbaseCache\n  private oauthInstance: CloudbaseOAuth // CloudbaseOAuth 类型\n\n  constructor(options: IUserOptions) {\n    const { cache, oauthInstance } = options\n    this.cache = cache\n    this.oauthInstance = oauthInstance\n\n    this.setUserInfo()\n  }\n  /**\n   * 获取本地用户信息-同步\n   */\n  public async checkLocalInfo() {\n    this.uid = this.getLocalUserInfo('uid') as string\n    this.gender = this.getLocalUserInfo('gender') as string\n    this.picture = this.getLocalUserInfo('picture') as string\n    this.email = this.getLocalUserInfo('email') as string\n    this.emailVerified = this.getLocalUserInfo('email_verified') as boolean\n    this.phoneNumber = this.getLocalUserInfo('phone_number') as string\n    this.username = this.getLocalUserInfo('username') as string\n    this.name = this.getLocalUserInfo('name') as string\n    this.birthdate = this.getLocalUserInfo('birthdate') as string\n    this.zoneinfo = this.getLocalUserInfo('zoneinfo') as string\n    this.locale = this.getLocalUserInfo('locale') as string\n    this.sub = this.getLocalUserInfo('sub') as string\n    this.createdFrom = this.getLocalUserInfo('created_from') as string\n    this.providers = this.getLocalUserInfo('providers') as any\n  }\n  /**\n   * 获取本地用户信息-异步\n   */\n  public async checkLocalInfoAsync() {\n    this.uid = await this.getLocalUserInfoAsync('uid')\n    this.gender = await this.getLocalUserInfoAsync('gender')\n    this.picture = this.getLocalUserInfo('picture') as string\n    this.email = await this.getLocalUserInfoAsync('email')\n    this.emailVerified = this.getLocalUserInfo('email_verified') as boolean\n    this.phoneNumber = this.getLocalUserInfo('phone_number') as string\n    this.username = await this.getLocalUserInfoAsync('username')\n    this.name = this.getLocalUserInfo('name') as string\n    this.birthdate = this.getLocalUserInfo('birthdate') as string\n    this.zoneinfo = this.getLocalUserInfo('zoneinfo') as string\n    this.locale = this.getLocalUserInfo('locale') as string\n    this.sub = this.getLocalUserInfo('sub') as string\n    this.createdFrom = this.getLocalUserInfo('created_from') as string\n    this.providers = this.getLocalUserInfo('providers') as any\n  }\n\n  /**\n   * 更新用户信息\n   * @param userInfo\n   */\n  @catchErrorsDecorator({\n    title: '更新用户信息失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 调用 User.update() 的语法或参数是否正确',\n      '  2 - 用户信息中是否包含非法值',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async update(userInfo: authModels.UserProfile): Promise<void> {\n    // const { name, gender, avatarUrl, province, country, city } = userInfo\n    const newUserInfo = await this.oauthInstance.authApi.setUserProfile({ ...userInfo })\n\n    this.setLocalUserInfo(newUserInfo)\n  }\n\n  public async updateUserBasicInfo(params: authModels.ModifyUserBasicInfoRequest): Promise<void> {\n    await this.oauthInstance.authApi.updateUserBasicInfo({ ...params })\n    await this.refresh()\n  }\n\n  /**\n   * 更新密码\n   * @param newPassword\n   * @param oldPassword\n   */\n  @catchErrorsDecorator({\n    title: '更新密码失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 调用 User.updatePassword() 的语法或参数是否正确',\n      '  3 - 新密码中是否包含非法字符',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public updatePassword(newPassword: string, oldPassword: string) {\n    return this.oauthInstance.authApi.updatePasswordByOld({\n      old_password: oldPassword,\n      new_password: newPassword,\n    })\n  }\n\n  /**\n   * 更新用户名\n   * @param username\n   */\n  @catchErrorsDecorator({\n    title: '更新用户名失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 调用 User.updateUsername() 的语法或参数是否正确',\n      '  2 - 当前环境是否开通了用户名密码登录',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public updateUsername(username: string) {\n    if (typeof username !== 'string') {\n      throwError(ERRORS.INVALID_PARAMS, 'username must be a string')\n    }\n\n    return this.update({\n      username,\n    })\n  }\n\n  /**\n   * 刷新本地用户信息。当用户在其他客户端更新用户信息之后，可以调用此接口同步更新之后的信息。\n   */\n  @catchErrorsDecorator({\n    title: '刷新本地用户信息失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 调用 User.refresh() 的语法或参数是否正确',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async refresh(params?: { version?: string; query?: any }): Promise<IUserInfo> {\n    const newUserInfo = await this.oauthInstance.authApi.getUserInfo(params)\n    if ((newUserInfo as any).code === 'INVALID_ACCESS_TOKEN') {\n      this.setLocalUserInfo({})\n      throw newUserInfo\n    }\n    this.setLocalUserInfo(newUserInfo)\n    return newUserInfo\n  }\n\n  public getLocalUserInfo(key?: string): string | boolean | Record<string, any> {\n    const { userInfoKey } = this.cache.keys\n    const userInfo = this.cache.getStore(userInfoKey)\n\n    if (!key) return userInfo || {}\n\n    return userInfo[key]\n  }\n\n  public setLocalUserInfo(userInfo: any) {\n    const { userInfoKey } = this.cache.keys\n    this.cache.setStore(userInfoKey, userInfo)\n    this.setUserInfo()\n  }\n\n  private async getLocalUserInfoAsync(key: string): Promise<string> {\n    const { userInfoKey } = this.cache.keys\n    const userInfo = await this.cache.getStoreAsync(userInfoKey)\n    return userInfo[key]\n  }\n\n  private setUserInfo() {\n    const { userInfoKey } = this.cache.keys\n    const userInfo = this.cache.getStore(userInfoKey)\n    ;[\n      'uid',\n      'email',\n      'name',\n      'gender',\n      'picture',\n      'email_verified',\n      'phone_number',\n      'birthdate',\n      'zoneinfo',\n      'locale',\n      'sub',\n      'created_from',\n      'providers',\n      'username',\n      'created_at',\n    ].forEach((infoKey) => {\n      this[infoKey] = userInfo[infoKey]\n    })\n  }\n}\ninterface ILoginStateOptions extends IUserOptions {\n  envId: string\n}\nexport class LoginState implements ILoginState {\n  public user: User\n  public oauthLoginState: any\n\n  private oauthInstance: CloudbaseOAuth\n  private cache: ICloudbaseCache\n\n  constructor(options: ILoginStateOptions) {\n    const { envId, cache, oauthInstance } = options\n    if (!envId) {\n      throwError(ERRORS.INVALID_PARAMS, 'envId is not defined')\n    }\n    this.cache = cache\n    this.oauthInstance = oauthInstance\n\n    this.user = new User({\n      cache: this.cache,\n      oauthInstance,\n    })\n  }\n\n  public checkLocalState() {\n    this.oauthLoginState = this.oauthInstance?.authApi.hasLoginStateSync()\n    this.user.checkLocalInfo()\n  }\n\n  public async checkLocalStateAsync() {\n    await this.oauthInstance?.authApi.getLoginState()\n    await this.user.checkLocalInfoAsync()\n  }\n}\n\nclass Auth extends SbaseApi {\n  constructor(config: ICloudbaseAuthConfig & {\n    cache: ICloudbaseCache\n    request?: ICloudbaseRequest\n    runtime?: string\n  },) {\n    super(config)\n    this.setAccessKey()\n  }\n\n  /**\n   * 绑定手机号\n   * @param phoneNumber\n   * @param phoneCode\n   */\n  @catchErrorsDecorator({\n    title: '绑定手机号失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 调用 auth().bindPhoneNumber() 的语法或参数是否正确',\n      '  2 - 当前环境是否开通了短信验证码登录',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async bindPhoneNumber(params: authModels.BindPhoneRequest) {\n    return this.oauthInstance.authApi.editContact(params)\n  }\n\n  /**\n   * 解绑三方绑定\n   * @param loginType\n   */\n  @catchErrorsDecorator({\n    title: '解除三方绑定失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 调用 auth().unbindProvider() 的语法或参数是否正确',\n      '  2 - 当前账户是否已经与此登录方式解绑',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async unbindProvider(params: authModels.UnbindProviderRequest): Promise<void> {\n    return this.oauthInstance.authApi.unbindProvider(params)\n  }\n\n  /**\n   * 更新邮箱地址\n   * @param email\n   * @param sudo_token\n   * @param verification_token\n   */\n  @catchErrorsDecorator({\n    title: '绑定邮箱地址失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 调用 auth().bindEmail() 的语法或参数是否正确',\n      '  2 - 当前环境是否开通了邮箱密码登录',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public bindEmail(params: authModels.BindEmailRequest) {\n    return this.oauthInstance.authApi.editContact(params)\n  }\n\n  /**\n   * verify\n   * @param {authModels.VerifyRequest} params\n   * @returns {Promise<authModels.VerifyResponse>}\n   * @memberof User\n   */\n  @catchErrorsDecorator({\n    title: '验证码验证失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 调用 auth().verify() 的语法或参数是否正确',\n      '  2 - 当前环境是否开通了手机验证码/邮箱登录',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async verify(params: authModels.VerifyRequest): Promise<authModels.VerifyResponse> {\n    return this.oauthInstance.authApi.verify(params)\n  }\n\n  /**\n   * 获取验证码\n   * @param {authModels.GetVerificationRequest} params\n   * @returns {Promise<authModels.GetVerificationResponse>}\n   * @memberof User\n   */\n  @catchErrorsDecorator({\n    title: '获取验证码失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 调用 auth().getVerification() 的语法或参数是否正确',\n      '  2 - 当前环境是否开通了手机验证码/邮箱登录',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async getVerification(\n    params: authModels.GetVerificationRequest,\n    options?: { withCaptcha: boolean },\n  ): Promise<authModels.GetVerificationResponse> {\n    return this.oauthInstance.authApi.getVerification(params, options)\n  }\n\n  /**\n   * 获取当前登录的用户信息-同步\n   */\n  get currentUser() {\n    if (this.cache.mode === 'async') {\n      // async storage的平台调用此API提示\n      printWarn(\n        ERRORS.INVALID_OPERATION,\n        'current platform\\'s storage is asynchronous, please use getCurrentUser instead',\n      )\n      return\n    }\n\n    const loginState = this.hasLoginState()\n\n    if (loginState) {\n      return loginState.user || null\n    }\n    return null\n  }\n\n  /**\n   * 获取当前登录的用户信息-异步\n   */\n  @catchErrorsDecorator({\n    title: '获取用户信息失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 调用 auth().getCurrentUser() 的语法或参数是否正确',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async getCurrentUser(): Promise<(authModels.UserInfo & Partial<User>) | null> {\n    const loginState = await this.getLoginState()\n    if (loginState) {\n      const userInfo = loginState.user.getLocalUserInfo() as authModels.UserInfo\n      await loginState.user.checkLocalInfoAsync()\n      return { ...loginState.user, ...userInfo }\n    }\n    return null\n  }\n\n  // /**\n  //  * 匿名登录\n  //  * @returns {Promise<LoginState>}\n  //  * @memberof Auth\n  //  */\n  // @catchErrorsDecorator({\n  //   title: '匿名登录失败',\n  //   messages: [\n  //     '请确认以下各项：',\n  //     '  1 - 当前环境是否开启了匿名登录',\n  //     '  2 - 调用 auth().signInAnonymously() 的语法或参数是否正确',\n  //     `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n  //   ],\n  // })\n  // public async signInAnonymously(data: {\n  //   provider_token?: string\n  // } = {},): Promise<LoginState> {\n  // await this.oauthInstance.authApi.signInAnonymously(data)\n  // return this.createLoginState()\n  // }\n\n  /**\n   * 匿名登录\n   * @returns {Promise<LoginState>}\n   * @memberof Auth\n   */\n  @catchErrorsDecorator({\n    title: '小程序匿名登录失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 当前环境是否开启了匿名登录',\n      '  2 - 调用 auth().signInAnonymouslyInWx() 的语法或参数是否正确',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async signInAnonymouslyInWx({\n    useWxCloud,\n  }: {\n    useWxCloud?: boolean\n  } = {}): Promise<LoginState> {\n    if (!adapterForWxMp.isMatch()) {\n      throw Error('wx api undefined')\n    }\n    const wxInfo = wx.getAccountInfoSync().miniProgram\n\n    const mainFunc = async (code) => {\n      let result: GrantProviderTokenResponse | undefined = undefined\n      let credentials: Credentials | undefined = undefined\n\n      try {\n        result = await this.oauthInstance.authApi.grantProviderToken(\n          {\n            provider_id: wxInfo?.appId,\n            provider_code: code,\n            provider_params: {\n              provider_code_type: 'open_id',\n              appid: wxInfo?.appId,\n            },\n          },\n          useWxCloud,\n        )\n\n        if ((result as any)?.error_code || !result.provider_token) {\n          throw result\n        }\n\n        credentials = await this.oauthInstance.authApi.signInAnonymously(\n          { provider_token: result.provider_token },\n          useWxCloud,\n        )\n\n        if ((credentials as any)?.error_code) {\n          throw credentials\n        }\n      } catch (error) {\n        throw error\n      }\n    }\n\n    await new Promise((resolve, reject) => {\n      wx.login({\n        success: async (res: { code: string }) => {\n          try {\n            await mainFunc(res.code)\n            resolve(true)\n          } catch (error) {\n            reject(error)\n          }\n        },\n        fail: (res: any) => {\n          const error = new Error(res?.errMsg)\n          ;(error as any).code = res?.errno\n          reject(error)\n        },\n      })\n    })\n\n    return this.createLoginState(undefined, { asyncRefreshUser: true })\n  }\n\n  /**\n   * 小程序绑定OpenID\n   * @returns {Promise<LoginState>}\n   * @memberof Auth\n   */\n  @catchErrorsDecorator({\n    title: '小程序绑定OpenID失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 当前环境是否开启了小程序openId静默登录',\n      '  2 - 调用 auth().bindOpenId() 的语法或参数是否正确',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async bindOpenId(): Promise<void> {\n    if (!adapterForWxMp.isMatch()) {\n      throw Error('wx api undefined')\n    }\n    const wxInfo = wx.getAccountInfoSync().miniProgram\n\n    const mainFunc = async (code) => {\n      let result: GrantProviderTokenResponse | undefined = undefined\n\n      try {\n        result = await this.oauthInstance.authApi.grantProviderToken({\n          provider_id: wxInfo?.appId,\n          provider_code: code,\n          provider_params: {\n            provider_code_type: 'open_id',\n            appid: wxInfo?.appId,\n          },\n        })\n\n        if ((result as any)?.error_code || !result.provider_token) {\n          throw result\n        }\n\n        await this.oauthInstance.authApi.bindWithProvider({ provider_token: result.provider_token })\n      } catch (error) {\n        throw error\n      }\n    }\n\n    await new Promise((resolve, reject) => {\n      wx.login({\n        success: async (res: { code: string }) => {\n          try {\n            await mainFunc(res.code)\n            resolve(true)\n          } catch (error) {\n            reject(error)\n          }\n        },\n        fail: (res: any) => {\n          const error = new Error(res?.errMsg)\n          ;(error as any).code = res?.errno\n          reject(error)\n        },\n      })\n    })\n\n    return\n  }\n\n  /**\n   * 小程序openId静默登录\n   * @returns {Promise<LoginState>}\n   * @memberof Auth\n   */\n  // @catchErrorsDecorator({\n  //   title: '小程序openId静默登录失败',\n  //   messages: [\n  //     '请确认以下各项：',\n  //     '  1 - 当前环境是否开启了小程序openId静默登录',\n  //     '  2 - 调用 auth().signInWithOpenId() 的语法或参数是否正确',\n  //     `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n  //   ],\n  // })\n  // public async signInWithOpenId({ useWxCloud = true } = {}): Promise<LoginState> {\n  //   if (!adapterForWxMp.isMatch()) {\n  //     throw Error('wx api undefined')\n  //   }\n  //   const wxInfo = wx.getAccountInfoSync().miniProgram\n\n  //   const mainFunc = async (code) => {\n  //     let result: GrantProviderTokenResponse | undefined = undefined\n  //     let credentials: Credentials | undefined = undefined\n\n  //     try {\n  //       result = await this.oauthInstance.authApi.grantProviderToken(\n  //         {\n  //           provider_id: wxInfo?.appId,\n  //           provider_code: code,\n  //           provider_params: {\n  //             provider_code_type: 'open_id',\n  //             appid: wxInfo?.appId,\n  //           },\n  //         },\n  //         useWxCloud,\n  //       )\n\n  //       if ((result as any)?.error_code || !result.provider_token) {\n  //         throw result\n  //       }\n\n  //       credentials = await this.oauthInstance.authApi.signInWithProvider(\n  //         { provider_token: result.provider_token },\n  //         useWxCloud,\n  //       )\n\n  //       if ((credentials as any)?.error_code) {\n  //         throw credentials\n  //       }\n  //     } catch (error) {\n  //       throw error\n  //     }\n  //     await this.oauthInstance.oauth2client.setCredentials(credentials as Credentials)\n  //   }\n\n  //   await new Promise((resolve, reject) => {\n  //     wx.login({\n  //       success: async (res: { code: string }) => {\n  //         try {\n  //           await mainFunc(res.code)\n  //           resolve(true)\n  //         } catch (error) {\n  //           reject(error)\n  //         }\n  //       },\n  //       fail: (res: any) => {\n  //         const error = new Error(res?.errMsg)\n  //         ;(error as any).code = res?.errno\n  //         reject(error)\n  //       },\n  //     })\n  //   })\n\n  //   return this.createLoginState()\n  // }\n\n  /**\n   * 小程序unionId静默登录\n   * @returns {Promise<LoginState>}\n   * @memberof Auth\n   */\n  @catchErrorsDecorator({\n    title: '小程序unionId静默登录失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 当前环境是否开启了小程序unionId静默登录',\n      '  2 - 调用 auth().signInWithUnionId() 的语法或参数是否正确',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async signInWithUnionId(): Promise<LoginState> {\n    if (!adapterForWxMp.isMatch()) {\n      throw Error('wx api undefined')\n    }\n    try {\n      await new Promise((resolve, reject) => {\n        const wxInfo = wx.getAccountInfoSync().miniProgram\n        wx.login({\n          success: async (res: { code: string }) => {\n            const providerId = wxInfo?.appId\n            try {\n              const result = await this.oauthInstance.authApi.grantProviderToken({\n                provider_code: res.code,\n                provider_id: providerId,\n                provider_params: {\n                  provider_code_type: 'union_id',\n                  appid: wxInfo?.appId,\n                },\n              })\n\n              const { provider_token: providerToken } = result\n\n              if (!providerToken) {\n                reject(result)\n                return\n              }\n\n              const signInRes = await this.oauthInstance.authApi.signInWithProvider({\n                provider_id: providerId,\n                provider_token: providerToken,\n              })\n\n              if ((signInRes as any)?.error_code) {\n                reject(signInRes)\n                return\n              }\n              resolve(true)\n            } catch (error) {\n              reject(error)\n            }\n          },\n          fail: (res: any) => {\n            const error = new Error(res?.errMsg)\n            ;(error as any).code = res?.errno\n            reject(error)\n          },\n        })\n      })\n    } catch (error) {\n      throw error\n    }\n\n    return this.createLoginState()\n  }\n\n  /**\n   * 小程序手机号授权登录，目前只支持全托管手机号授权登录\n   * @returns {Promise<LoginState>}\n   * @memberof Auth\n   */\n  // @catchErrorsDecorator({\n  //   title: '小程序手机号授权登录失败',\n  //   messages: [\n  //     '请确认以下各项：',\n  //     '  1 - 当前环境是否开启了小程序手机号授权登录',\n  //     '  2 - 调用 auth().signInWithPhoneAuth() 的语法或参数是否正确',\n  //     `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n  //   ],\n  // })\n  // public async signInWithPhoneAuth({ phoneCode = '' }): Promise<LoginState> {\n  //   if (!adapterForWxMp.isMatch()) {\n  //     throw Error('wx api undefined')\n  //   }\n  //   const wxInfo = wx.getAccountInfoSync().miniProgram\n  //   const providerInfo = {\n  //     provider_params: { provider_code_type: 'phone' },\n  //     provider_id: wxInfo.appId,\n  //   }\n\n  //   const { code } = await wx.login()\n  //   ;(providerInfo as any).provider_code = code\n\n  //   try {\n  //     let providerToken = await this.oauthInstance.authApi.grantProviderToken(providerInfo)\n  //     if (providerToken.error_code) {\n  //       throw providerToken\n  //     }\n\n  //     providerToken = await this.oauthInstance.authApi.patchProviderToken({\n  //       provider_token: providerToken.provider_token,\n  //       provider_id: wxInfo.appId,\n  //       provider_params: {\n  //         code: phoneCode,\n  //         provider_code_type: 'phone',\n  //       },\n  //     })\n  //     if (providerToken.error_code) {\n  //       throw providerToken\n  //     }\n\n  //     const signInRes = await this.oauthInstance.authApi.signInWithProvider({\n  //       provider_token: providerToken.provider_token,\n  //     })\n\n  //     if ((signInRes as any)?.error_code) {\n  //       throw signInRes\n  //     }\n  //   } catch (error) {\n  //     throw error\n  //   }\n\n  //   return this.createLoginState()\n  // }\n\n  /**\n   * 小程序短信验证码登陆\n   * @returns {Promise<LoginState>}\n   * @memberof Auth\n   */\n  @catchErrorsDecorator({\n    title: '短信验证码登陆',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 当前环境是否开启了小程序短信验证码登陆',\n      '  2 - 调用 auth().signInWithSms() 的语法或参数是否正确',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async signInWithSms({\n    verificationInfo = { verification_id: '', is_user: false },\n    verificationCode = '',\n    phoneNum = '',\n    bindInfo = undefined,\n  }): Promise<LoginState> {\n    try {\n      return this.signInWithUsername({\n        verificationInfo,\n        verificationCode,\n        bindInfo,\n        username: phoneNum,\n        loginType: 'sms',\n      })\n    } catch (error) {\n      throw error\n    }\n  }\n\n  /**\n   * 邮箱验证码登陆\n   * @returns {Promise<LoginState>}\n   * @memberof Auth\n   */\n  @catchErrorsDecorator({\n    title: '邮箱验证码登陆',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 当前环境是否开启了邮箱登陆',\n      '  2 - 调用 auth().signInWithEmail() 的语法或参数是否正确',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async signInWithEmail({\n    verificationInfo = { verification_id: '', is_user: false },\n    verificationCode = '',\n    bindInfo = undefined,\n    email = '',\n  }): Promise<LoginState> {\n    try {\n      return this.signInWithUsername({\n        verificationInfo,\n        verificationCode,\n        bindInfo,\n        username: email,\n        loginType: 'email',\n      })\n    } catch (error) {\n      throw error\n    }\n  }\n\n  /**\n   * 设置获取自定义登录 ticket 函数\n   * @param {authModels.GetCustomSignTicketFn} getTickFn\n   * @memberof Auth\n   */\n  public setCustomSignFunc(getTickFn: authModels.GetCustomSignTicketFn): void {\n    this.oauthInstance.authApi.setCustomSignFunc(getTickFn)\n  }\n\n  /**\n   *\n   * @returns {Promise<LoginState>}\n   * @memberof Auth\n   */\n  // @catchErrorsDecorator({\n  //   title: '自定义登录失败',\n  //   messages: [\n  //     '请确认以下各项：',\n  //     '  1 - 当前环境是否开启了自定义登录',\n  //     '  2 - 调用 auth().signInWithCustomTicket() 的语法或参数是否正确',\n  //     '  3 - ticket 是否归属于当前环境',\n  //     '  4 - 创建 ticket 的自定义登录私钥是否过期',\n  //     `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n  //   ],\n  // })\n  // public async signInWithCustomTicket(): Promise<LoginState> {\n  //   await this.oauthInstance.authApi.signInWithCustomTicket()\n  //   return this.createLoginState()\n  // }\n\n  /**\n   *\n   * @param {authModels.SignInRequest} params\n   * @returns {Promise<LoginState>}\n   * @memberof Auth\n   */\n  public async signIn(params: authModels.SignInRequest): Promise<LoginState> {\n    await this.oauthInstance.authApi.signIn(params)\n    return this.createLoginState(params)\n  }\n\n  // /**\n  //  *\n  //  * @param {authModels.SignUpRequest} params\n  //  * @returns {Promise<LoginState>}\n  //  * @memberof Auth\n  //  */\n  // @catchErrorsDecorator({\n  //   title: '注册失败',\n  //   messages: [\n  //     '请确认以下各项：',\n  //     '  1 - 当前环境是否开启了指定登录方式',\n  //     '  2 - 调用 auth().signUp() 的语法或参数是否正确',\n  //     `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n  //   ],\n  // })\n  // public async signUp(params: authModels.SignUpRequest): Promise<any> {\n  //   await this.oauthInstance.authApi.signUp(params)\n  //   return this.createLoginState()\n  // }\n\n  /**\n   * 设置密码\n   * @param {authModels.SetPasswordRequest} params\n   * @returns {Promise<void>}\n   * @memberof Auth\n   */\n  public async setPassword(params: authModels.SetPasswordRequest): Promise<void> {\n    return this.oauthInstance.authApi.setPassword(params)\n  }\n\n  /**\n   * 检测用户名是否已经占用\n   * @param username\n   */\n  @catchErrorsDecorator({\n    title: '获取用户是否被占用失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 调用 auth().isUsernameRegistered() 的语法或参数是否正确',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async isUsernameRegistered(username: string): Promise<boolean> {\n    if (typeof username !== 'string') {\n      throwError(ERRORS.INVALID_PARAMS, 'username must be a string')\n    }\n\n    const { exist } = await this.oauthInstance.authApi.checkIfUserExist({ username })\n    return exist\n  }\n\n  /**\n   * 登出\n   */\n  // @catchErrorsDecorator({\n  //   title: '用户登出失败',\n  //   messages: [\n  //     '请确认以下各项：',\n  //     '  1 - 调用 auth().signOut() 的语法或参数是否正确',\n  //     '  2 - 当前用户是否为匿名登录（匿名登录不支持signOut）',\n  //     `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n  //   ],\n  // })\n  // public async signOut(params?: authModels.SignoutRequest): Promise<void | authModels.SignoutReponse> {\n  //   const { userInfoKey } = this.cache.keys\n  //   const res = await this.oauthInstance.authApi.signOut(params)\n  //   await this.cache.removeStoreAsync(userInfoKey)\n\n  //   eventBus.fire(EVENTS.LOGIN_STATE_CHANGED, { eventType: LOGIN_STATE_CHANGED_TYPE.SIGN_OUT })\n\n  //   eventBus.fire(EVENTS.AUTH_STATE_CHANGED, { event: AUTH_STATE_CHANGED_TYPE.SIGNED_OUT })\n  //   return res\n  // }\n\n  /**\n   * 获取本地登录态-同步\n   */\n  public hasLoginState(): LoginState | null {\n    if (this.cache.mode === 'async') {\n      // async storage的平台调用此API提示\n      printWarn(\n        ERRORS.INVALID_OPERATION,\n        'current platform\\'s storage is asynchronous, please use getLoginState insteed',\n      )\n      return\n    }\n\n    const oauthLoginState = this.oauthInstance?.authApi.hasLoginStateSync()\n    if (oauthLoginState) {\n      const loginState = new LoginState({\n        envId: this.config.env,\n        cache: this.cache,\n        oauthInstance: this.oauthInstance,\n      })\n      return loginState\n    }\n    return null\n  }\n\n  /**\n   * 获取本地登录态-异步\n   * 此API为兼容异步storage的平台\n   */\n  @catchErrorsDecorator({\n    title: '获取本地登录态失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 调用 auth().getLoginState() 的语法或参数是否正确',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async getLoginState() {\n    let oauthLoginState = null\n\n    try {\n      oauthLoginState = await this.oauthInstance.authApi.getLoginState()\n    } catch (error) {\n      return null\n    }\n\n    if (oauthLoginState) {\n      const loginState = new LoginState({\n        envId: this.config.env,\n        cache: this.cache,\n        oauthInstance: this.oauthInstance,\n      })\n      return loginState\n    }\n\n    return null\n  }\n\n  @catchErrorsDecorator({\n    title: '获取用户信息失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 是否已登录',\n      '  2 - 调用 auth().getUserInfo() 的语法或参数是否正确',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async getUserInfo(): Promise<(authModels.UserInfo & Partial<User>) | null> {\n    return this.getCurrentUser()\n  }\n\n  @catchErrorsDecorator({\n    title: '获取微搭插件用户信息失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 是否已登录',\n      '  2 - 调用 auth().getWedaUserInfo() 的语法或参数是否正确',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async getWedaUserInfo(): Promise<any> {\n    return this.oauthInstance.authApi.getWedaUserInfo()\n  }\n\n  public async updateUserBasicInfo(params: authModels.ModifyUserBasicInfoRequest) {\n    const loginState = await this.getLoginState()\n    if (loginState) {\n      await (loginState.user as User).updateUserBasicInfo(params)\n    }\n    return\n  }\n\n  /**\n   * getAuthHeader 兼容处理\n   * 返回空对象\n   */\n  public getAuthHeader(): {} {\n    console.error('Auth.getAuthHeader API 已废弃')\n    return {}\n  }\n\n  /**\n   * 为已有账户绑第三方账户\n   * @param {authModels.BindWithProviderRequest} params\n   * @returns {Promise<void>}\n   * @memberof Auth\n   */\n  @catchErrorsDecorator({\n    title: '绑定第三方登录方式失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 调用 auth().bindWithProvider() 的语法或参数是否正确',\n      '  2 - 此账户是否已经绑定此第三方',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async bindWithProvider(params: authModels.BindWithProviderRequest): Promise<void> {\n    return this.oauthInstance.authApi.bindWithProvider(params)\n  }\n\n  /**\n   * 查询用户\n   * @param {authModels.QueryUserProfileRequest} appended_params\n   * @returns {Promise<authModels.UserProfile>}\n   * @memberof Auth\n   */\n  public async queryUser(queryObj: authModels.QueryUserProfileRequest): Promise<authModels.QueryUserProfileResponse> {\n    return this.oauthInstance.authApi.queryUserProfile(queryObj)\n  }\n\n  public async getAccessToken() {\n    const oauthAccessTokenRes = await this.oauthInstance.oauth2client.getAccessToken()\n    return {\n      accessToken: oauthAccessTokenRes,\n      env: this.config.env,\n    }\n  }\n\n  public async grantProviderToken(params: authModels.GrantProviderTokenRequest,): Promise<authModels.GrantProviderTokenResponse> {\n    return this.oauthInstance.authApi.grantProviderToken(params)\n  }\n\n  public async patchProviderToken(params: authModels.PatchProviderTokenRequest,): Promise<authModels.PatchProviderTokenResponse> {\n    return this.oauthInstance.authApi.patchProviderToken(params)\n  }\n\n  public async signInWithProvider(params: authModels.SignInWithProviderRequest): Promise<LoginState> {\n    await this.oauthInstance.authApi.signInWithProvider(params)\n    return this.createLoginState(params)\n  }\n\n  public async signInWithWechat(params: any = {}) {\n    await this.oauthInstance.authApi.signInWithWechat(params)\n    return this.createLoginState(params)\n  }\n\n  public async grantToken(params: authModels.GrantTokenRequest): Promise<LoginState> {\n    await this.oauthInstance.authApi.grantToken(params)\n    return this.createLoginState()\n  }\n\n  public async genProviderRedirectUri(params: authModels.GenProviderRedirectUriRequest,): Promise<authModels.GenProviderRedirectUriResponse> {\n    return this.oauthInstance.authApi.genProviderRedirectUri(params)\n  }\n\n  public async resetPassword(params: authModels.ResetPasswordRequest): Promise<void> {\n    return this.oauthInstance.authApi.resetPassword(params)\n  }\n\n  public async deviceAuthorize(params: authModels.DeviceAuthorizeRequest): Promise<authModels.DeviceAuthorizeResponse> {\n    return this.oauthInstance.authApi.deviceAuthorize(params)\n  }\n\n  public async sudo(params: authModels.SudoRequest): Promise<authModels.SudoResponse> {\n    return this.oauthInstance.authApi.sudo(params)\n  }\n\n  public async deleteMe(params: authModels.WithSudoRequest): Promise<authModels.UserProfile> {\n    return this.oauthInstance.authApi.deleteMe(params)\n  }\n\n  public async getProviders(): Promise<authModels.ProvidersResponse> {\n    return this.oauthInstance.authApi.getProviders()\n  }\n\n  public async loginScope(): Promise<string> {\n    return this.oauthInstance.authApi.loginScope()\n  }\n\n  public async loginGroups(): Promise<string[]> {\n    return this.oauthInstance.authApi.loginGroups()\n  }\n\n  public async onLoginStateChanged(callback: Function) {\n    this.config.eventBus?.on(EVENTS.LOGIN_STATE_CHANGED, async (params) => {\n      // getLoginState会重复触发getCredentials，导致死循环，所以getCredentials出错不再出发getLoginState\n      const loginState =        params?.data?.eventType !== LOGIN_STATE_CHANGED_TYPE.CREDENTIALS_ERROR ? await this.getLoginState() : {}\n      callback.call(this, { ...params, ...loginState })\n    })\n    // 立刻执行一次回调\n    const loginState = await this.getLoginState()\n    callback.call(this, loginState)\n  }\n\n  /**\n   * 强制刷新token\n   * @param params\n   * @returns\n   */\n  public async refreshTokenForce(params: { version?: string }): Promise<Credentials> {\n    return this.oauthInstance.authApi.refreshTokenForce(params)\n  }\n\n  /**\n   * 获取身份信息\n   * @returns\n   */\n  public async getCredentials(): Promise<Credentials> {\n    return this.oauthInstance.authApi.getCredentials()\n  }\n  /**\n   * 写入身份信息\n   */\n  public async setCredentials(credentials: Credentials) {\n    await this.oauthInstance.oauth2client.setCredentials(credentials)\n  }\n\n  @catchErrorsDecorator({\n    title: '获取身份源类型',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 调用 auth().getProviderSubType() 的语法或参数是否正确',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async getProviderSubType(): Promise<ProviderSubType> {\n    return this.oauthInstance.authApi.getProviderSubType()\n  }\n\n  public async createCaptchaData(params: { state: string; redirect_uri?: string }) {\n    return this.oauthInstance.authApi.createCaptchaData(params)\n  }\n\n  public async verifyCaptchaData(params: { token: string; key: string }) {\n    return this.oauthInstance.authApi.verifyCaptchaData(params)\n  }\n\n  public async getMiniProgramQrCode(params: authModels.GetMiniProgramQrCodeRequest,): Promise<authModels.GetMiniProgramQrCodeResponse> {\n    return this.oauthInstance.authApi.getMiniProgramCode(params)\n  }\n\n  public async getMiniProgramQrCodeStatus(params: authModels.GetMiniProgramQrCodeStatusRequest,): Promise<authModels.GetMiniProgramQrCodeStatusResponse> {\n    return this.oauthInstance.authApi.getMiniProgramQrCodeStatus(params)\n  }\n\n  public async modifyPassword(params: authModels.ModifyUserBasicInfoRequest): Promise<void> {\n    return this.oauthInstance.authApi.modifyPassword(params)\n  }\n\n  public async modifyPasswordWithoutLogin(params: authModels.ModifyPasswordWithoutLoginRequest): Promise<void> {\n    return this.oauthInstance.authApi.modifyPasswordWithoutLogin(params)\n  }\n\n  public async getUserBehaviorLog(params: authModels.GetUserBehaviorLog): Promise<authModels.GetUserBehaviorLogRes> {\n    return this.oauthInstance.authApi.getUserBehaviorLog(params)\n  }\n\n  /**\n   * sms/email 验证码登录/注册，逻辑一致收敛\n   */\n  public async signInWithUsername({\n    verificationInfo = { verification_id: '', is_user: false },\n    verificationCode = '',\n    username: rawUsername = '',\n    bindInfo = undefined,\n    loginType = '',\n  }): Promise<LoginState> {\n    try {\n      // 1. 验证验证码\n      const verifyRes = await this.oauthInstance.authApi.verify({\n        verification_id: verificationInfo.verification_id,\n        verification_code: verificationCode,\n      })\n\n      if ((verifyRes as any)?.error_code) {\n        throw verifyRes\n      }\n\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      const { verification_token } = verifyRes\n\n      // 手机登录参数\n      let username = /^\\+\\d{1,3}\\s+/.test(rawUsername) ? rawUsername : `+86 ${rawUsername}`\n      let signUpParam: any = { phone_number: username }\n\n      // 邮箱登录参数\n      if (loginType === 'email') {\n        username = rawUsername\n        signUpParam = { email: username }\n      }\n\n      // 2. 根据是否已经是用户，分别走登录或注册逻辑\n      if (verificationInfo.is_user) {\n        // 私有化环境或者自定义应用走v1版本的老逻辑\n        const signInRes = await this.oauthInstance.authApi.signIn({\n          username,\n          verification_token,\n        })\n\n        if ((signInRes as any)?.error_code) {\n          throw signInRes\n        }\n\n        if (bindInfo) {\n          const bindRes = await this.oauthInstance.authApi.bindWithProvider({\n            provider_token: (bindInfo as any)?.providerToken,\n          })\n\n          if ((bindRes as any)?.error_code) {\n            throw bindRes\n          }\n        }\n      } else {\n        // 自定义应用走signUp逻辑\n        const signUpRes = await this.oauthInstance.authApi.signUp({\n          ...signUpParam,\n          verification_token,\n          provider_token: (bindInfo as any)?.providerId,\n        })\n\n        if ((signUpRes as any)?.error_code) {\n          throw signUpRes\n        }\n      }\n\n      return this.createLoginState()\n    } catch (error) {\n      throw error\n    }\n  }\n\n  async createLoginState(\n    params?: { version?: string; query?: any },\n    options?: { asyncRefreshUser?: boolean; userInfo?: any },\n  ): Promise<LoginState> {\n    const loginState = new LoginState({\n      envId: this.config.env,\n      cache: this.cache,\n      oauthInstance: this.oauthInstance,\n    })\n\n    await loginState.checkLocalStateAsync()\n\n    if (options?.userInfo) {\n      loginState.user.setLocalUserInfo(options.userInfo)\n    } else {\n      if (options?.asyncRefreshUser) {\n        loginState.user.refresh(params)\n      } else {\n        await loginState.user.refresh(params)\n      }\n    }\n\n    this.config.eventBus?.fire(EVENTS.LOGIN_STATE_CHANGED, { eventType: LOGIN_STATE_CHANGED_TYPE.SIGN_IN })\n\n    this.config.eventBus?.fire(EVENTS.AUTH_STATE_CHANGED, { event: AUTH_STATE_CHANGED_TYPE.SIGNED_IN })\n    return loginState\n  }\n\n  async setAccessKey() {\n    if (this.config.accessKey) {\n      try {\n        this.oauthInstance.oauth2client.setAccessKeyCredentials({\n          access_token: this.config.accessKey,\n          token_type: 'Bearer',\n          scope: 'accessKey',\n          expires_at: new Date(+new Date() + +new Date()),\n          expires_in: +new Date() + +new Date(),\n        })\n      } catch (error) {\n        console.warn('accessKey error: ', error)\n      }\n    }\n  }\n}\n\ntype TInitAuthOptions = Pick<ICloudbaseAuthConfig, 'region' | 'persistence' | 'i18n' | 'accessKey' | 'useWxCloud'> &\nPartial<AuthOptions> & {\n  detectSessionInUrl?: boolean\n}\n\nexport function generateAuthInstance(\n  config: TInitAuthOptions,\n  options?: {\n    clientId: ICloudbaseConfig['clientId']\n    env: ICloudbaseConfig['env']\n    apiOrigin: string\n    cache?: ICloudbaseCache\n    platform?: ICloudbase['platform']\n    app?: ICloudbase\n    debug?: ICloudbaseAuthConfig['debug']\n    detectSessionInUrl?: ICloudbaseAuthConfig['detectSessionInUrl']\n  },\n) {\n  const { region = 'ap-shanghai', i18n, accessKey, useWxCloud } = config\n  const platform = options?.platform || (useDefaultAdapter.bind(options)() as ICloudbasePlatformInfo)\n  const { runtime, adapter } = platform\n\n  const { env, clientId, debug, cache, app: cloudbase } = options || {}\n  let { apiOrigin } = options || {}\n  if (!apiOrigin) {\n    apiOrigin = `https://${env}.${region}.tcb-api.tencentcloudapi.com`\n  }\n\n  const commonOpts = {\n    env,\n    clientId,\n    i18n,\n    accessKey,\n    useWxCloud,\n    eventBus: new CloudbaseEventEmitter(),\n  }\n\n  const oauthInstance = new CloudbaseOAuth(useAuthAdapter({\n    ...commonOpts,\n    apiOrigin,\n    apiPath: config?.apiPath || AUTH_API_PREFIX,\n    // @todo 以下最好走adaptor处理，目前oauth模块没按adaptor接口设计\n    storage: config?.storage,\n    baseRequest: config?.baseRequest,\n    request: config?.request,\n    anonymousSignInFunc: config?.anonymousSignInFunc,\n    captchaOptions: config?.captchaOptions,\n    wxCloud: config?.wxCloud,\n    adapter,\n    onCredentialsError: onCredentialsError(commonOpts.eventBus),\n    headers: { 'X-SDK-Version': `@cloudbase/js-sdk/${config.sdkVersion}`, ...(config.headers || {}) },\n    detectSessionInUrl: config.detectSessionInUrl,\n    debug,\n  }),)\n\n  const authInstance = new Auth({\n    ...commonOpts,\n    region,\n    persistence: config.persistence,\n    debug,\n    cache:\n      cache\n      || new CloudbaseCache({\n        persistence: config.persistence,\n        keys: { userInfoKey: `user_info_${env}` },\n        platformInfo: platform,\n      }),\n    runtime: runtime || 'web',\n    _fromApp: cloudbase,\n    oauthInstance,\n  })\n\n  // Initialize session with user info callback\n  // This handles OAuth callback URL detection and creates login state atomically\n  oauthInstance.initializeSession(async (data, error) => {\n    if (!data) return\n\n    if (data.type === OAUTH_TYPE.SIGN_IN) {\n      if (error) {\n        commonOpts.eventBus.fire(EVENTS.AUTH_STATE_CHANGED, {\n          event: AUTH_STATE_CHANGED_TYPE.SIGNED_IN,\n          info: { ...data, error },\n        })\n      } else if (data.user) {\n        // 使用已获取的 user 信息创建 LoginState，复用 createLoginState 逻辑\n        // 但跳过 refresh() 避免再次请求 API 导致死锁\n        authInstance.createLoginState({}, { userInfo: data.user })\n      }\n    } else if (data.type === OAUTH_TYPE.BIND_IDENTITY) {\n      commonOpts.eventBus.fire(EVENTS.AUTH_STATE_CHANGED, {\n        event: AUTH_STATE_CHANGED_TYPE.BIND_IDENTITY,\n        info: { ...data, error },\n      })\n    }\n  })\n\n  return { authInstance, oauthInstance }\n}\n\nconst NAMESPACE = 'auth'\n\nconst component: ICloudbaseComponent = {\n  name: COMPONENT_NAME,\n  namespace: NAMESPACE,\n  entity(config?: TInitAuthOptions) {\n    const auth = function (config?: TInitAuthOptions) {\n      if (this.authInstance && !config) {\n        // printWarn(ERRORS.INVALID_OPERATION, 'every cloudbase instance should has only one auth object')\n        return this.authInstance\n      }\n\n      config = config || {\n        region: '',\n        persistence: 'local',\n        apiPath: AUTH_API_PREFIX,\n      }\n      const { adapter } = this.platform\n      // 如不明确指定persistence则优先取各平台adapter首选，其次localStorage\n      const newPersistence = config.persistence || adapter.primaryStorage\n      if (newPersistence && newPersistence !== this.config.persistence) {\n        this.updateConfig({ persistence: newPersistence })\n      }\n\n      const { authInstance, oauthInstance } = generateAuthInstance(\n        {\n          wxCloud: this.config.wxCloud,\n          storage: this.config.storage,\n          ...config,\n          persistence: this.config.persistence,\n          i18n: this.config.i18n,\n          accessKey: this.config.accessKey,\n          useWxCloud: this.config.useWxCloud,\n          sdkVersion: this.version,\n          detectSessionInUrl: this.config.auth?.detectSessionInUrl,\n        },\n        {\n          env: this.config.env,\n          clientId: this.config.clientId,\n          apiOrigin: this.request.getBaseEndPoint(this.config.endPointMode || 'CLOUD_API'),\n          platform: this.platform,\n          cache: this.cache,\n          app: this,\n          debug: this.config.debug,\n        },\n      )\n\n      this.oauthInstance = oauthInstance\n\n      this.authInstance = authInstance\n\n      return this.authInstance\n    }\n\n    const authProto = auth.call(this, config)\n    Object.assign(auth, authProto)\n    Object.setPrototypeOf(auth, Object.getPrototypeOf(authProto))\n    this[NAMESPACE] = auth\n    return auth\n  },\n}\n\ntry {\n  // 尝试自动注册至全局变量cloudbase\n  // 此行为只在浏览器环境下有效\n  cloudbase.registerComponent(component)\n} catch (e) {}\n\nexport { UserInfo, Auth }\n/**\n * @api 手动注册至cloudbase app\n */\nexport function registerAuth(app: Pick<ICloudbase, 'registerComponent'>) {\n  try {\n    app.registerComponent(component)\n  } catch (e) {\n    console.warn(e)\n  }\n}\n", "import { ICloudbase } from '@cloudbase/types'\nimport { ICloudbaseComponent } from '@cloudbase/types/component'\nimport { ICallFunctionOptions, ICustomReqOpts } from '@cloudbase/types/functions'\nimport { constants } from '@cloudbase/utilities'\n\ndeclare const cloudbase: ICloudbase\n\nconst { ERRORS } = constants\n\nconst COMPONENT_NAME = 'cloudrun'\n\nclass CloudbaseRun {\n  public async callContainer(options: ICallFunctionOptions, customReqOpts?: ICustomReqOpts) {\n    const { name, data } = options\n\n    if (!name) {\n      throw new Error(JSON.stringify({\n        code: ERRORS.INVALID_PARAMS,\n        msg: `[${COMPONENT_NAME}.callContainer] invalid name`,\n      }),)\n    }\n    let jsonData\n    try {\n      jsonData = data ? JSON.stringify(data) : ''\n    } catch (e) {\n      throw new Error(JSON.stringify({\n        code: ERRORS.INVALID_PARAMS,\n        msg: `[${COMPONENT_NAME}.callContainer] invalid data`,\n      }),)\n    }\n\n    return await requestContainer.call(this, { ...options, data: jsonData }, customReqOpts)\n  }\n}\n\nexport async function requestContainer(this: any, options: ICallFunctionOptions, customReqOpts?: ICustomReqOpts) {\n  const { name, data, path = '', method, header = {} } = options\n  const { BASE_URL, PROTOCOL } = this.getEndPointWithKey('GATEWAY')\n  const endpoint = `${PROTOCOL}${BASE_URL}/cloudrun/${name}`\n  const reqPath = path.startsWith('/') ? path : `/${path}`\n  // @ts-ignore\n  const response = await this.request.fetch({\n    method: method || 'POST',\n    headers: Object.assign(\n      {},\n      {\n        'Content-Type': 'application/json; charset=utf-8',\n      },\n      header,\n    ),\n    body: data,\n    url: `${endpoint}${reqPath}`,\n    customReqOpts,\n  })\n\n  if (customReqOpts?.from === 'node-sdk') {\n    return response\n  }\n\n  return await response.data\n}\n\nconst cloudbaseRun = new CloudbaseRun()\n\nconst component: ICloudbaseComponent = {\n  name: COMPONENT_NAME,\n  entity: {\n    callContainer: cloudbaseRun.callContainer,\n  },\n}\ntry {\n  cloudbase.registerComponent(component)\n} catch (e) {}\n\nexport function registerCloudrun(app: Pick<ICloudbase, 'registerComponent'>) {\n  try {\n    app.registerComponent(component)\n  } catch (e) {\n    console.warn(e)\n  }\n}\n\ntry {\n  (window as any).registerCloudrun = registerCloudrun\n} catch (e) {}\n", "import { ICloudbase } from '@cloudbase/types'\nimport { ICloudbaseComponent } from '@cloudbase/types/component'\nimport { ICallFunctionOptions, ICustomReqOpts } from '@cloudbase/types/functions'\nimport { constants, utils, helpers } from '@cloudbase/utilities'\nimport { requestContainer } from '@cloudbase/cloudrun'\n\ndeclare const cloudbase: ICloudbase\n\nconst { getSdkName, ERRORS, COMMUNITY_SITE_URL } = constants\nconst { execCallback } = utils\nconst { catchErrorsDecorator } = helpers\n\nconst COMPONENT_NAME = 'functions'\n\nclass CloudbaseFunctions {\n  @catchErrorsDecorator({\n    customInfo: {\n      className: 'Cloudbase',\n      methodName: 'callFunction',\n    },\n    title: '函数调用失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 调用 callFunction() 的语法或参数是否正确',\n      '  2 - 当前环境下是否存在此函数',\n      '  3 - 函数安全规则是否限制了当前登录状态访问',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async callFunction(options: ICallFunctionOptions, callback?: Function, customReqOpts?: ICustomReqOpts) {\n    const { name, data, query, parse, search, type, path = '', method, header = {} } = options\n\n    if (!name) {\n      throw new Error(JSON.stringify({\n        code: ERRORS.INVALID_PARAMS,\n        msg: `[${COMPONENT_NAME}.callFunction] invalid function name`,\n      }),)\n    }\n    let jsonData\n    try {\n      jsonData = data ? JSON.stringify(data) : ''\n    } catch (e) {\n      throw new Error(JSON.stringify({\n        code: ERRORS.INVALID_PARAMS,\n        msg: `[${COMPONENT_NAME}.callFunction] invalid data`,\n      }),)\n    }\n\n    if (type === 'cloudrun') {\n      const requestId = utils.generateRequestId()\n      const result = await requestContainer.call(this, {\n        name,\n        data: jsonData,\n        path,\n        method,\n        header: { ...header, 'X-Request-Id': requestId },\n      })\n\n      return {\n        result,\n        requestId,\n      }\n    }\n\n    // @ts-ignore\n    const { request, config } = this\n    const action = 'functions.invokeFunction'\n    const params = {\n      inQuery: query,\n      parse,\n      search,\n      function_name: name,\n      request_data: jsonData,\n    }\n    let res: any = {}\n\n    try {\n      if (config.endPointMode === 'GATEWAY') {\n        const response = await request.gateWay({ ...options, path: 'functions' }, customReqOpts)\n\n        res = {\n          requestId: response.requestId,\n          ...(response.data?.code\n            ? response.data\n            : {\n              data: {\n                response_data: response.data,\n              },\n            }),\n        }\n      } else {\n        res = await request.send(\n          action,\n          params,\n          {\n            defaultQuery: data?.params?.action ? { action: data?.params?.action } : {},\n          },\n          customReqOpts,\n        )\n      }\n      if (res.code) {\n        return execCallback(callback, null, res)\n      }\n      let result = res.data.response_data\n      // parse 为 true 时服务端解析 JSON，SDK 不再次解析\n      if (parse || config.endPointMode === 'GATEWAY') {\n        return execCallback(callback, null, {\n          result,\n          requestId: res.requestId,\n        })\n      }\n      try {\n        result = JSON.parse(res.data.response_data)\n        return execCallback(callback, null, {\n          result,\n          requestId: res.requestId,\n        })\n      } catch (e) {\n        execCallback(\n          callback,\n          new Error(`[${getSdkName()}][${ERRORS.INVALID_PARAMS}][${COMPONENT_NAME}.callFunction] response data must be json`,),\n        )\n      }\n    } catch (e) {\n      execCallback(callback, e)\n    }\n  }\n}\n\nconst cloudbaseFunctions = new CloudbaseFunctions()\n\nconst component: ICloudbaseComponent = {\n  name: COMPONENT_NAME,\n  entity: {\n    callFunction: cloudbaseFunctions.callFunction,\n  },\n}\ntry {\n  cloudbase.registerComponent(component)\n} catch (e) {}\n\nexport function registerFunctions(app: Pick<ICloudbase, 'registerComponent'>) {\n  try {\n    app.registerComponent(component)\n  } catch (e) {\n    console.warn(e)\n  }\n}\n", "import { constants, utils, helpers } from '@cloudbase/utilities'\n\nimport {\n  ICloudbaseFileMetaDataRes,\n  ICloudbaseFileInfo,\n  ICloudbaseUploadFileParams,\n  ICloudbaseUploadFileResult,\n  ICloudbaseGetUploadMetadataParams,\n  ICloudbaseDeleteFileParams,\n  ICloudbaseDeleteFileResult,\n  ICloudbaseGetTempFileURLResult,\n  ICloudbaseGetTempFileURLParams,\n  ICloudbaseDownloadFileResult,\n  ICloudbaseDownloadFileParams,\n  ICloudbaseCopyFileParams,\n  ICloudbaseCopyFileResult,\n} from '@cloudbase/types/storage'\n\nenum EUploadMethod {\n  put = 'put',\n  post = 'post',\n}\n\ninterface IUploadMetadata {\n  url: string\n  token: string\n  authorization: string\n  fileId: string\n  cosFileId: string\n  download_url?: string\n}\n\nconst { getSdkName, ERRORS, COMMUNITY_SITE_URL } = constants\nconst { isArray, isString, isPalinObject, execCallback } = utils\nconst { catchErrorsDecorator } = helpers\n\nexport const COMPONENT_NAME = 'storage'\n\n// function basename(path) {\n//   const lastSlashIndex = path.lastIndexOf('/')\n//   if (lastSlashIndex === -1) return path\n//   return path.slice(lastSlashIndex + 1)\n// }\n\nconst storageGateWay = {\n  getUploadInfo: async (\n    request,\n    params: { path: string; headers?: Record<string, string> },\n    customReqOpts: ICloudbaseUploadFileParams['customReqOpts'],\n  ) => {\n    let res = await request.gateWay(\n      {\n        path: 'storages',\n        name: 'get-objects-upload-info',\n        data: [\n          {\n            objectId: params.path,\n            ...(params.headers ? { signedHeader: params.headers } : {}),\n          },\n        ],\n      },\n      customReqOpts,\n    )\n    const data = res.data?.[0] || {}\n\n    res = {\n      ...res,\n      data: {\n        ...(data.code ? { ...data } : {}),\n        authorization: data.authorization,\n        token: data.token,\n        url: data.uploadUrl,\n        fileId: data.cloudObjectId,\n        cosFileId: data.cloudObjectMeta,\n        download_url: data.downloadUrl,\n      },\n    }\n\n    return res\n  },\n  getDownLoadInfo: async (\n    request,\n    params: { convertedFileList: Array<{ fileid: string }> },\n    customReqOpts: ICloudbaseUploadFileParams['customReqOpts'],\n  ) => {\n    let res = await request.gateWay(\n      {\n        path: 'storages',\n        name: 'get-objects-download-info',\n        data: params.convertedFileList.map((v: any) => ({ cloudObjectId: v.fileid })),\n      },\n      customReqOpts,\n    )\n    res = {\n      ...res,\n      data: {\n        download_list: res.data?.map(v => ({\n          code: v.code || 'SUCCESS',\n          message: v.message,\n          fileid: v.cloudObjectId,\n          download_url: v.downloadUrl,\n          fileID: v.cloudObjectId,\n          tempFileURL: v.downloadUrl,\n        })),\n      },\n    }\n\n    return res\n  },\n  delete: async (\n    request,\n    params: { fileList: Array<string> },\n    customReqOpts: ICloudbaseUploadFileParams['customReqOpts'],\n  ) => {\n    let res = await request.gateWay(\n      {\n        path: 'storages',\n        name: 'delete-objects',\n        data: params.fileList.map(v => ({ cloudObjectId: v })),\n      },\n      customReqOpts,\n    )\n    res = {\n      ...res,\n      data: {\n        delete_list: res.data?.map(v => ({\n          code: v.code || 'SUCCESS',\n          fileID: v.cloudObjectId,\n          message: v.message,\n        })),\n      },\n    }\n\n    return res\n  },\n  copyFile: async (\n    request,\n    params: {\n      convertedFileList: Array<{ src_path: string; dst_path: string; overwrite: boolean; remove_original: boolean }>\n    },\n    customReqOpts: ICloudbaseUploadFileParams['customReqOpts'],\n  ) => {\n    let res = await request.gateWay(\n      {\n        path: 'storages',\n        name: 'copy-objects',\n        data: params.convertedFileList.map((v: any) => ({\n          srcPath: v.src_path,\n          dstPath: v.dst_path,\n          overwrite: v.overwrite,\n          removeOriginal: v.remove_original,\n        })),\n      },\n      customReqOpts,\n    )\n    res = {\n      ...res,\n      data: {\n        copy_list: res.data?.map(v => ({\n          code: v.code || 'SUCCESS',\n          fileID: v.cloudObjectId,\n          message: v.message,\n        })),\n      },\n    }\n\n    return res\n  },\n}\n\nexport interface ICloudbaseContext {\n  config: any\n  request: any\n}\n\nexport class CloudbaseStorage {\n  public isGateWay() {\n    // @ts-ignore\n    const { config } = this\n    const endPointMode = config.endPointMode || 'CLOUD_API'\n\n    return endPointMode === 'GATEWAY'\n  }\n\n  @catchErrorsDecorator({\n    customInfo: {\n      className: 'Cloudbase',\n      methodName: 'uploadFile',\n    },\n    title: '上传文件失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 调用 uploadFile() 的语法或参数是否正确',\n      '  2 - 当前域名是否在安全域名列表中：https://console.cloud.tencent.com/tcb/env/safety',\n      '  3 - 云存储安全规则是否限制了当前登录状态访问',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async uploadFile(\n    params: Omit<ICloudbaseUploadFileParams, 'filePath'> & { filePath?: string },\n    callback?: Function,\n  ): Promise<ICloudbaseUploadFileResult> {\n    const { cloudPath, filePath, onUploadProgress, method = 'put', headers = {}, fileContent } = params\n    if (!isString(cloudPath) || (!filePath && !fileContent)) {\n      throw new Error(JSON.stringify({\n        code: ERRORS.INVALID_PARAMS,\n        msg: `[${COMPONENT_NAME}.uploadFile] invalid params`,\n      }),)\n    }\n    const uploadMethod =      { put: EUploadMethod.put, post: EUploadMethod.post }[method.toLocaleLowerCase()] || EUploadMethod.put\n\n    // 调用 getUploadMetadata 获取上传元数据\n    const metadataResult = await this.getUploadMetadata({\n      cloudPath,\n      method: uploadMethod,\n      headers: uploadMethod === EUploadMethod.put ? headers : undefined,\n      customReqOpts: params.customReqOpts,\n    })\n\n    const { data: metadata, requestId } = metadataResult\n    const { url, authorization, token, fileId, cosFileId, download_url: downloadUrl } = metadata\n\n    const commonParams = {\n      url,\n      file: filePath,\n      name: cloudPath,\n      onUploadProgress,\n      fileContent,\n      fileId,\n      requestId,\n    }\n\n    const putParams = {\n      ...commonParams,\n      method: EUploadMethod.put,\n      headers: {\n        ...headers,\n        authorization,\n        'x-cos-meta-fileid': cosFileId,\n        'x-cos-security-token': token,\n      },\n    }\n\n    const postParams = {\n      ...commonParams,\n      method: EUploadMethod.post,\n      data: {\n        key: cloudPath,\n        signature: authorization,\n        'x-cos-meta-fileid': cosFileId,\n        success_action_status: '201',\n        'x-cos-security-token': token,\n      },\n    }\n\n    const uploadConfig = {\n      [EUploadMethod.put]: {\n        params: putParams,\n        isSuccess: (code: number) => code >= 200 && code < 300,\n      },\n      [EUploadMethod.post]: {\n        params: postParams,\n        isSuccess: (code: number) => code === 201,\n      },\n    }\n\n    // @ts-ignore\n    const res = await this.request.upload(uploadConfig[uploadMethod].params)\n\n    if (uploadConfig[uploadMethod].isSuccess(res.statusCode)) {\n      return execCallback(callback, null, {\n        fileID: fileId,\n        download_url: downloadUrl,\n        requestId,\n      })\n    }\n    return execCallback(\n      callback,\n      new Error(`[${getSdkName()}][${ERRORS.OPERATION_FAIL}][${COMPONENT_NAME}]:${res.data}`),\n    )\n  }\n  @catchErrorsDecorator({\n    customInfo: {\n      className: 'Cloudbase',\n      methodName: 'getUploadMetadata',\n    },\n    title: '获取上传元信息失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 调用 getUploadMetadata() 的语法或参数是否正确',\n      '  2 - 当前域名是否在安全域名列表中：https://console.cloud.tencent.com/tcb/env/safety',\n      '  3 - 云存储安全规则是否限制了当前登录状态访问',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async getUploadMetadata(\n    params: ICloudbaseGetUploadMetadataParams & {\n      method?: EUploadMethod\n      headers?: Record<string, string>\n    },\n    callback?: Function,\n  ): Promise<{ data: IUploadMetadata; requestId: string }> {\n    const { cloudPath, method, headers } = params\n    if (!isString(cloudPath)) {\n      throw new Error(JSON.stringify({\n        code: ERRORS.INVALID_PARAMS,\n        msg: `[${COMPONENT_NAME}.getUploadMetadata] invalid cloudPath`,\n      }),)\n    }\n    // @ts-ignore\n    const { request } = this\n    const action = 'storage.getUploadMetadata'\n\n    try {\n      let metaData: ICloudbaseFileMetaDataRes\n\n      const metaDataParam: {\n        path: string\n        method?: EUploadMethod\n        headers?: Record<string, string>\n      } = { path: cloudPath }\n\n      if (method) {\n        metaDataParam.method = method\n      }\n      if (method === EUploadMethod.put && headers) {\n        metaDataParam.headers = headers\n      }\n\n      if (this.isGateWay()) {\n        metaData = await storageGateWay.getUploadInfo(request, metaDataParam, params.customReqOpts)\n      } else {\n        metaData = await request.send(action, metaDataParam, params.customReqOpts)\n      }\n      return execCallback(callback, null, metaData)\n    } catch (err) {\n      return execCallback(callback, err)\n    }\n  }\n  @catchErrorsDecorator({\n    customInfo: {\n      className: 'Cloudbase',\n      methodName: 'deleteFile',\n    },\n    title: '删除文件失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 调用 deleteFile() 的语法或参数是否正确',\n      '  2 - 当前域名是否在安全域名列表中：https://console.cloud.tencent.com/tcb/env/safety',\n      '  3 - 云存储安全规则是否限制了当前登录状态访问',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async deleteFile(\n    params: ICloudbaseDeleteFileParams,\n    callback?: Function,\n  ): Promise<ICloudbaseDeleteFileResult> {\n    const { fileList } = params\n\n    if (!fileList || !isArray(fileList) || fileList.length === 0) {\n      throw new Error(JSON.stringify({\n        code: ERRORS.INVALID_PARAMS,\n        msg: `[${COMPONENT_NAME}.deleteFile] fileList must not be empty`,\n      }),)\n    }\n\n    for (const fileId of fileList) {\n      if (!fileId || !isString(fileId)) {\n        throw new Error(JSON.stringify({\n          code: ERRORS.INVALID_PARAMS,\n          msg: `[${COMPONENT_NAME}.deleteFile] fileID must be string`,\n        }),)\n      }\n    }\n\n    const action = 'storage.batchDeleteFile'\n    // @ts-ignore\n    const { request } = this\n    let res: any = {}\n\n    if (this.isGateWay()) {\n      res = await storageGateWay.delete(request, { fileList }, params.customReqOpts)\n    } else {\n      res = await request.send(\n        action,\n        {\n          fileid_list: fileList,\n        },\n        params.customReqOpts,\n      )\n    }\n\n    if (res.code) {\n      return execCallback(callback, null, res)\n    }\n    const data = {\n      fileList: res.data.delete_list,\n      requestId: res.requestId,\n    }\n    return execCallback(callback, null, data)\n  }\n  @catchErrorsDecorator({\n    customInfo: {\n      className: 'Cloudbase',\n      methodName: 'getTempFileURL',\n    },\n    title: '获取文件下载链接',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 调用 getTempFileURL() 的语法或参数是否正确',\n      '  2 - 当前域名是否在安全域名列表中：https://console.cloud.tencent.com/tcb/env/safety',\n      '  3 - 云存储安全规则是否限制了当前登录状态访问',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async getTempFileURL(\n    params: ICloudbaseGetTempFileURLParams,\n    callback?: Function,\n  ): Promise<ICloudbaseGetTempFileURLResult> {\n    const { fileList } = params\n\n    if (!fileList || !isArray(fileList) || fileList.length === 0) {\n      throw new Error(JSON.stringify({\n        code: ERRORS.INVALID_PARAMS,\n        msg: `[${COMPONENT_NAME}.getTempFileURL] fileList must not be empty`,\n      }),)\n    }\n\n    const convertedFileList = []\n    for (const file of fileList) {\n      if (isPalinObject(file)) {\n        if (!Object.prototype.hasOwnProperty.call(file, 'fileID')) {\n          throw new Error(JSON.stringify({\n            code: ERRORS.INVALID_PARAMS,\n            msg: `[${COMPONENT_NAME}.getTempFileURL] file info must include fileID`,\n          }),)\n        }\n\n        convertedFileList.push({\n          fileid: (file as ICloudbaseFileInfo).fileID,\n          max_age: (file as ICloudbaseFileInfo).maxAge || 7200,\n        })\n      } else if (isString(file)) {\n        convertedFileList.push({\n          fileid: file,\n        })\n      } else {\n        throw new Error(JSON.stringify({\n          code: ERRORS.INVALID_PARAMS,\n          msg: `[${COMPONENT_NAME}.getTempFileURL] invalid fileList`,\n        }),)\n      }\n    }\n\n    const action = 'storage.batchGetDownloadUrl'\n    // @ts-ignore\n    const { request } = this\n    let res: any = {}\n\n    if (this.isGateWay()) {\n      res = await storageGateWay.getDownLoadInfo(request, { convertedFileList }, params.customReqOpts)\n    } else {\n      res = await request.send(action, { file_list: convertedFileList }, params.customReqOpts)\n    }\n\n    if (res.code) {\n      return execCallback(callback, null, res)\n    }\n\n    return execCallback(callback, null, {\n      fileList: res.data.download_list,\n      requestId: res.requestId,\n    })\n  }\n  @catchErrorsDecorator({\n    customInfo: {\n      className: 'Cloudbase',\n      methodName: 'downloadFile',\n    },\n    title: '下载文件失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 调用 downloadFile() 的语法或参数是否正确',\n      '  2 - 当前域名是否在安全域名列表中：https://console.cloud.tencent.com/tcb/env/safety',\n      '  3 - 云存储安全规则是否限制了当前登录状态访问',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async downloadFile(\n    params: ICloudbaseDownloadFileParams,\n    callback?: Function,\n  ): Promise<ICloudbaseDownloadFileResult> {\n    const { fileID } = params\n    if (!isString(fileID)) {\n      throw new Error(JSON.stringify({\n        code: ERRORS.INVALID_PARAMS,\n        msg: `[${COMPONENT_NAME}.getTempFileURL] fileID must be string`,\n      }),)\n    }\n\n    const tmpUrlRes = await this.getTempFileURL.call(this, {\n      fileList: [\n        {\n          fileID,\n          maxAge: 600,\n        },\n      ],\n      customReqOpts: params.customReqOpts,\n    })\n\n    const res = tmpUrlRes.fileList[0]\n\n    if (res.code !== 'SUCCESS') {\n      return execCallback(callback, res)\n    }\n    // @ts-ignore\n    const { request } = this\n\n    const tmpUrl = encodeURI(res.download_url)\n\n    const result = await request.download({ url: tmpUrl, tempFilePath: params.tempFilePath })\n    return execCallback(callback, null, result)\n  }\n  @catchErrorsDecorator({\n    customInfo: {\n      className: 'Cloudbase',\n      methodName: 'copyFile',\n    },\n    title: '批量复制文件',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 调用 copyFile() 的语法或参数是否正确',\n      '  2 - 当前域名是否在安全域名列表中：https://console.cloud.tencent.com/tcb/env/safety',\n      '  3 - 云存储安全规则是否限制了当前登录状态访问',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async copyFile(params: ICloudbaseCopyFileParams, callback?: Function): Promise<ICloudbaseCopyFileResult> {\n    const { fileList } = params\n\n    if (!fileList || !isArray(fileList) || fileList.length === 0) {\n      throw new Error(JSON.stringify({\n        code: ERRORS.INVALID_PARAMS,\n        msg: `[${COMPONENT_NAME}.copyFile] fileList must not be empty`,\n      }),)\n    }\n\n    const convertedFileList = []\n\n    for (const file of fileList) {\n      const { srcPath, dstPath } = file\n      if (!srcPath || !dstPath || typeof srcPath !== 'string' || typeof dstPath !== 'string') {\n        throw new Error(JSON.stringify({\n          code: ERRORS.INVALID_PARAMS,\n          msg: `[${COMPONENT_NAME}.copyFile] srcPath and dstPath may not be empty`,\n        }),)\n      }\n      if (srcPath === dstPath) {\n        throw new Error(JSON.stringify({\n          code: ERRORS.INVALID_PARAMS,\n          msg: `[${COMPONENT_NAME}.copyFile] srcPath and dstPath can not be the same`,\n        }),)\n      }\n      //   if (basename(srcPath) !== basename(dstPath)) {\n      //     throw new Error(JSON.stringify({\n      //       code: ERRORS.INVALID_PARAMS,\n      //       msg: `[${COMPONENT_NAME}.copyFile] srcPath and dstPath file name must be the same`,\n      //     }),)\n      //   }\n      convertedFileList.push({\n        src_path: srcPath,\n        dst_path: dstPath,\n        overwrite: file.overwrite,\n        remove_original: file.removeOriginal,\n      })\n    }\n\n    // @ts-ignore\n    const { request } = this\n    let res: any = {}\n\n    if (this.isGateWay()) {\n      res = await storageGateWay.copyFile(request, { convertedFileList }, params.customReqOpts)\n    } else {\n      const action = 'storage.batchCopyFile'\n      res = await request.send(action, { file_list: convertedFileList }, params.customReqOpts)\n    }\n\n    if (res.code) {\n      return execCallback(callback, null, res)\n    }\n\n    return execCallback(callback, null, {\n      fileList: res.data.copy_list,\n      requestId: res.requestId,\n    })\n  }\n\n  public async getFileInfo(params: ICloudbaseGetTempFileURLParams): Promise<{\n    fileList: (Pick<ICloudbaseGetTempFileURLResult['fileList'][0], 'code' | 'fileID' | 'tempFileURL' | 'message'> & {\n      fileName?: string\n      cloudId?: ICloudbaseGetTempFileURLResult['fileList'][0]['fileID']\n      contentType?: string\n      mime?: string\n      size?: number\n      cacheControl?: string\n      lastModified?: string\n      etag?: string\n    })[]\n    requestId: string\n  }> {\n    const fileInfo = await this.getTempFileURL(params)\n\n    if (fileInfo?.fileList && fileInfo?.fileList?.length > 0) {\n      const fileList = await Promise.all(fileInfo.fileList.map(async (item: ICloudbaseGetTempFileURLResult['fileList'][0]) => {\n        if (item.code !== 'SUCCESS') {\n          return {\n            code: item.code,\n            fileID: item.fileID,\n            tempFileURL: item.tempFileURL,\n            message: item.message,\n          }\n        }\n\n        try {\n          // @ts-ignore\n          const { request } = this\n          const res = await request.fetch({ url: item.tempFileURL, method: 'HEAD' })\n          let { header } = res\n\n          if (Headers && header instanceof Headers) {\n            header = Object.fromEntries(res.header.entries())\n          }\n          // eslint-disable-next-line radix\n          const fileSize = parseInt(header['content-length']) || 0\n          const contentType = header['content-type'] || ''\n\n          if ([400, 404].includes(Number(res.statusCode))) {\n            return {\n              code: 'FILE_NOT_FOUND',\n              fileID: item.fileID,\n              tempFileURL: item.tempFileURL,\n              message: 'file not found',\n            }\n          }\n\n          const fileInfo = {\n            code: item.code,\n            fileID: item.fileID,\n            tempFileURL: item.tempFileURL,\n            cloudId: item.fileID,\n            fileName: item.fileID.split('/').pop(),\n            contentType,\n            mime: contentType.split(';')[0].trim(),\n            size: fileSize,\n            etag: header.etag || '',\n            lastModified: header['last-modified'] || '',\n            cacheControl: header['cache-control'] || '',\n          }\n\n          return fileInfo\n        } catch (e) {\n          return {\n            code: 'FETCH_FILE_INFO_ERROR',\n            fileID: item.fileID,\n            tempFileURL: item.tempFileURL,\n            message: e.message,\n          }\n        }\n      }),)\n\n      return {\n        fileList,\n        requestId: fileInfo.requestId,\n      }\n    }\n\n    return {\n      fileList: [],\n      requestId: fileInfo.requestId,\n    }\n  }\n}\n", "export class StorageError extends Error {\n  protected __isStorageError = true\n\n  constructor(message: string) {\n    super(message)\n    this.name = 'StorageError'\n  }\n}\n\nexport function isStorageError(error: unknown): error is StorageError {\n  return typeof error === 'object' && error !== null && '__isStorageError' in error\n}\n\nexport class StorageApiError extends StorageError {\n  status: number\n  statusCode: string\n\n  constructor(message: string, status: number, statusCode: string) {\n    super(message)\n    this.name = 'StorageApiError'\n    this.status = status\n    this.statusCode = statusCode\n  }\n\n  toJSON() {\n    return {\n      name: this.name,\n      message: this.message,\n      status: this.status,\n      statusCode: this.statusCode,\n    }\n  }\n}\n\nexport class StorageUnknownError extends StorageError {\n  originalError: unknown\n\n  constructor(message: string, originalError: unknown) {\n    super(message)\n    this.name = 'StorageUnknownError'\n    this.originalError = originalError\n  }\n}\n", "import { constants } from '@cloudbase/utilities'\n\nimport { CloudbaseStorage, COMPONENT_NAME, ICloudbaseContext } from '../storage'\n\nimport { Camelize, FileBody, FileObject, FileObjectV2, FileOptions, TransformOptions } from './types'\nimport { isStorageError, StorageError } from './errors'\n\nconst { ERRORS } = constants\n\nexport class SupabaseFileAPILikeStorage extends CloudbaseStorage {\n  private shouldThrowOnError = false\n  private bucketId = ''\n  private context: ICloudbaseContext\n\n  constructor(context?: ICloudbaseContext) {\n    super()\n    this.context = context\n  }\n\n  get config() {\n    // @ts-ignore\n    return this.context?.config\n  }\n\n  get request() {\n    // @ts-ignore\n    return this.context?.request\n  }\n\n  throwOnError(): this {\n    this.shouldThrowOnError = true\n    return this\n  }\n\n  from(bucket?: string) {\n    this.bucketId = bucket || ''\n    return this\n  }\n\n  async upload(\n    path: string,\n    fileBody: FileBody,\n    fileOptions?: FileOptions,\n  ): Promise<\n    { data: { id: string; path: string; fullPath: string }; error: null } | { data: null; error: StorageError }\n    > {\n    const options = { upsert: true, ...fileOptions }\n    const { cacheControl, contentType, metadata } = options\n    try {\n      const cloudPath = this._getCloudPath(path)\n      const uploadFileParams: Parameters<CloudbaseStorage['uploadFile']>[0] = {\n        cloudPath,\n        filePath: fileBody as any,\n      }\n\n      if (cacheControl || contentType || metadata) {\n        const headers = {}\n        if (cacheControl) {\n          headers['cache-control'] = cacheControl\n        }\n        if (contentType) {\n          headers['content-type'] = contentType\n        }\n\n        if (metadata) {\n          headers['x-cos-metadata-metadata'] = this.toBase64(JSON.stringify(metadata))\n        }\n\n        uploadFileParams.headers = headers\n      }\n\n      const result = await this.uploadFile(uploadFileParams)\n\n      // IUploadFileRes 没有 code 字段，如果没有 fileID 则表示失败\n      if (!result.fileID) {\n        throw new Error(JSON.stringify({\n          code: ERRORS.OPERATION_FAIL,\n          msg: `[${COMPONENT_NAME}.update] no fileID returned`,\n        }),)\n      }\n\n      return {\n        data: {\n          id: result.fileID,\n          path,\n          fullPath: path,\n        },\n        error: null,\n      }\n    } catch (error: any) {\n      if (this.shouldThrowOnError) throw error\n      if (isStorageError(error)) {\n        return {\n          data: null,\n          error,\n        }\n      }\n      throw error\n    }\n  }\n\n  async uploadToSignedUrl(\n    path: string,\n    _token: string,\n    fileBody: FileBody,\n    fileOptions?: FileOptions,\n  ): Promise<\n    { data: { id: string; path: string; fullPath: string }; error: null } | { data: null; error: StorageError }\n    > {\n    return this.upload(path, fileBody, fileOptions)\n  }\n\n  async createSignedUploadUrl(path: string): Promise<\n  | {\n    data: {\n      signedUrl: string\n      token: string\n      path: string\n      // CloudBase 额外的元数据字段\n      authorization?: string\n      id?: string\n      cosFileId?: string\n      downloadUrl?: string\n    }\n    error: null\n  }\n  | { data: null; error: StorageError }\n  > {\n    try {\n      const cloudPath = this._getCloudPath(path)\n\n      const { data: metadata } = await this.getUploadMetadata({ cloudPath })\n\n      return {\n        data: {\n          signedUrl: metadata.url,\n          token: metadata.token,\n          path,\n          // 返回 CloudBase 的额外元数据，供 uploadToSignedUrl 使用\n          authorization: metadata.authorization,\n          id: metadata.fileId,\n          cosFileId: metadata.cosFileId,\n          downloadUrl: metadata.download_url,\n        },\n        error: null,\n      }\n    } catch (error: any) {\n      if (this.shouldThrowOnError) throw error\n      return {\n        data: null,\n        error: error instanceof StorageError ? error : new StorageError(error.message),\n      }\n    }\n  }\n\n  async update(\n    path: string,\n    fileBody: FileBody,\n    fileOptions?: FileOptions,\n  ): Promise<\n    { data: { id: string; path: string; fullPath: string }; error: null } | { data: null; error: StorageError }\n    > {\n    return this.upload(path, fileBody, { ...fileOptions, upsert: true })\n  }\n\n  async move(\n    fromPath: string,\n    toPath: string,\n    // options?: DestinationOptions,\n  ): Promise<{ data: { message: string }; error: null } | { data: null; error: StorageError }> {\n    try {\n      const result = await this.copyFile({\n        fileList: [\n          {\n            srcPath: this._getCloudPath(fromPath),\n            dstPath: this._getCloudPath(toPath),\n            overwrite: true,\n            removeOriginal: true,\n          },\n        ],\n      })\n\n      if (result.fileList[0].code && result.fileList[0].code !== 'SUCCESS') {\n        throw new StorageError(result.fileList[0].message || 'Move failed')\n      }\n\n      return {\n        data: { message: `File moved from ${fromPath} to ${toPath}` },\n        error: null,\n      }\n    } catch (error: any) {\n      if (this.shouldThrowOnError) throw error\n      if (isStorageError(error)) {\n        return {\n          data: null,\n          error,\n        }\n      }\n      throw error\n    }\n  }\n\n  async copy(\n    fromPath: string,\n    toPath: string,\n    // options?: DestinationOptions,\n  ): Promise<{ data: { path: string }; error: null } | { data: null; error: StorageError }> {\n    try {\n      const result = await this.copyFile({\n        fileList: [\n          {\n            srcPath: this._getCloudPath(fromPath),\n            dstPath: this._getCloudPath(toPath),\n            overwrite: true,\n            removeOriginal: false,\n          },\n        ],\n      })\n\n      if (result.fileList[0].code && result.fileList[0].code !== 'SUCCESS') {\n        throw new StorageError(result.fileList[0].message || 'Copy failed')\n      }\n\n      return {\n        data: { path: this._getCloudPath(toPath) },\n        error: null,\n      }\n    } catch (error: any) {\n      if (this.shouldThrowOnError) throw error\n      if (isStorageError(error)) {\n        return { data: null, error }\n      }\n      throw error\n    }\n  }\n\n  async createSignedUrl(\n    path: string,\n    expiresIn: number,\n    options?: {\n      download?: string | boolean\n      transform?: TransformOptions\n    },\n  ): Promise<{ data: { signedUrl: string }; error: null } | { data: null; error: StorageError }> {\n    try {\n      const cloudPath = this._normalizeCloudId(path)\n      const result = await this.getTempFileURL({\n        fileList: [\n          {\n            fileID: cloudPath,\n            maxAge: expiresIn,\n          },\n        ],\n      })\n\n      // IGetFileUrlItem 有 code 字段但没有 message 字段\n      if (result.fileList[0].code !== 'SUCCESS') {\n        throw new StorageError(`Failed to create signed URL: [${result.fileList[0].code}] ${result.fileList[0].fileID}`)\n      }\n\n      let signedUrl = result.fileList[0].download_url\n\n      // 构建查询参数\n      const queryParams: string[] = []\n\n      // 如果有 download 参数，添加到 URL 中\n      if (options?.download !== undefined) {\n        if (typeof options.download === 'string') {\n          // download 是文件名\n          queryParams.push(`download=${encodeURIComponent(options.download)}`)\n        } else if (options.download === true) {\n          // download 是 true，使用原文件名或默认值\n          queryParams.push('download=true')\n        }\n      }\n\n      // 如果有图片转换参数，添加到 URL 中\n      if (options?.transform) {\n        const transformQuery = this._transformOptsToQueryString(options.transform)\n        if (transformQuery) {\n          queryParams.push(transformQuery)\n        }\n      }\n\n      // 拼接所有查询参数\n      if (queryParams.length > 0) {\n        const separator = signedUrl.includes('?') ? '&' : '?'\n        signedUrl = `${signedUrl}${separator}${queryParams.join('&')}`\n      }\n\n      return {\n        data: { signedUrl },\n        error: null,\n      }\n    } catch (error: any) {\n      if (this.shouldThrowOnError) throw error\n      if (isStorageError(error)) {\n        return {\n          data: null,\n          error,\n        }\n      }\n      throw error\n    }\n  }\n\n  async createSignedUrls(\n    paths: string[],\n    expiresIn: number,\n    // options?: {\n    //   download?: string | boolean\n    // },\n  ): Promise<\n    | { data: Array<{ path: string; signedUrl: string; error: string | null }>; error: null }\n    | { data: null; error: StorageError }\n    > {\n    try {\n      const fileList = paths.map(p => ({\n        fileID: this._normalizeCloudId(p),\n        maxAge: expiresIn,\n      }))\n\n      const result = await this.getTempFileURL({ fileList })\n\n      return {\n        data: result.fileList.map((item: any, index: number) => ({\n          path: paths[index],\n          signedUrl: item.tempFileURL || '',\n          error: item.code === 'SUCCESS' ? null : item.message,\n        })),\n        error: null,\n      }\n    } catch (error: any) {\n      if (this.shouldThrowOnError) throw error\n      if (isStorageError(error)) {\n        return {\n          data: null,\n          error,\n        }\n      }\n      throw error\n    }\n  }\n\n  async download(\n    path: string,\n    options?: TransformOptions,\n  ): Promise<{\n      data: Blob\n      error: StorageError | null\n    }> {\n    try {\n      return {\n        data: await (async () => {\n          const signedUrlResult = await this.createSignedUrl(path, 600, { transform: options })\n          if (signedUrlResult.error) {\n            throw signedUrlResult.error\n          }\n          const tmpUrl = encodeURI(signedUrlResult.data?.signedUrl)\n\n          const { data } = await (this as any).request.reqClass.get({\n            url: tmpUrl,\n            headers: {}, // 下载资源请求不经过service，header清空\n            responseType: 'blob',\n          })\n\n          if (!data) {\n            throw new StorageError('Download failed: no file content')\n          }\n\n          // 将 Buffer 转换为 Uint8Array 以兼容 Blob\n          return new Blob([data])\n        })(),\n        error: null,\n      }\n    } catch (error: any) {\n      if (this.shouldThrowOnError) throw error\n      if (isStorageError(error)) {\n        return {\n          data: null,\n          error,\n        }\n      }\n      throw error\n    }\n  }\n\n  /**\n   * 获取文件信息\n   *\n   * @param pathOrFileId - 相对路径（如 'images/photo.jpg'）或 CloudBase fileID（以 'cloud://' 开头）\n   * @returns 文件信息对象\n   *\n   * @example\n   * ```typescript\n   * // 使用相对路径\n   * const { data } = await bucket.info('images/photo.jpg')\n   *\n   * // 使用 CloudBase fileID\n   * const { data } = await bucket.info('cloud://env-id.xxxx-xxxx/images/photo.jpg')\n   * ```\n   */\n  async info(pathOrFileId: string,): Promise<{ data: Camelize<FileObjectV2>; error: null } | { data: null; error: StorageError }> {\n    try {\n      // 判断是 fileID 还是相对路径\n      const isFileId = pathOrFileId.startsWith('cloud://')\n      const displayName = isFileId ? this._extractPathFromFileId(pathOrFileId) : pathOrFileId\n      const bucketId = isFileId ? this._extractBucketFromFileId(pathOrFileId) : this.bucketId\n\n      const fileInfo = await this.getFileInfo({\n        fileList: [this._normalizeCloudId(pathOrFileId)],\n      })\n\n      const item = fileInfo.fileList[0]\n\n      if (item.code !== 'SUCCESS') {\n        throw new StorageError(item.message)\n      }\n\n      const now = new Date().toISOString()\n      const lastModified = (item.lastModified ? new Date(item.lastModified) : new Date()).toISOString()\n      return {\n        data: {\n          id: item.fileID,\n          version: '1',\n          name: displayName,\n          bucketId,\n          updatedAt: lastModified,\n          createdAt: lastModified,\n          lastAccessedAt: now,\n          size: item.size,\n          cacheControl: item.cacheControl,\n          contentType: item.contentType,\n          etag: item.etag,\n          lastModified,\n          metadata: {},\n        },\n        error: null,\n      }\n    } catch (error: any) {\n      if (this.shouldThrowOnError) throw error\n      return {\n        data: null,\n        error: error instanceof StorageError ? error : new StorageError(error.message),\n      }\n    }\n  }\n\n  async exists(pathOrFileId: string): Promise<{ data: boolean; error: null } | { data: null; error: StorageError }> {\n    try {\n      // 判断是 fileID 还是相对路径\n      const fileInfo = await this.getFileInfo({\n        fileList: [this._normalizeCloudId(pathOrFileId)],\n      })\n\n      const item = fileInfo.fileList[0]\n\n      if (item.code === 'FILE_NOT_FOUND') {\n        return {\n          data: false,\n          error: null,\n        }\n      }\n\n      if (item.code !== 'SUCCESS') {\n        throw new StorageError(item.message)\n      }\n\n      return { data: true, error: null }\n    } catch (error: any) {\n      if (this.shouldThrowOnError) throw error\n      throw error\n    }\n  }\n\n  async getPublicUrl(\n    path: string,\n    options?: {\n      download?: string | boolean\n      transform?: TransformOptions\n    },\n  ): Promise<\n    | {\n      data: { publicUrl: string }\n    }\n    | { data: null; error: StorageError }\n    > {\n    const res = await this.createSignedUrl(path, 600, options)\n\n    if (res.data) {\n      return {\n        data: { publicUrl: res.data.signedUrl },\n      }\n    }\n\n    return { data: null, error: res.error as StorageError }\n  }\n\n  async remove(paths: string[]): Promise<{ data: FileObject[]; error: null } | { data: null; error: StorageError }> {\n    try {\n      // 分组获取文件信息，每组最多10个\n      const chunkSize = 10\n      const pathChunks: string[][] = []\n      for (let i = 0; i < paths.length; i += chunkSize) {\n        pathChunks.push(paths.slice(i, i + chunkSize))\n      }\n\n      // 并行获取所有分组的文件信息\n      const fileInfoResults = await Promise.all(pathChunks.map(chunk => Promise.all(chunk.map(path => this.info(path)))),)\n\n      // 合并所有文件信息并构建映射表（path -> fileInfo）\n      const fileInfoMap = new Map<string, Camelize<FileObjectV2>>()\n      fileInfoResults.flat().forEach((result, index) => {\n        if (result.data) {\n          fileInfoMap.set(paths[Math.floor(index / chunkSize) * chunkSize + (index % chunkSize)], result.data)\n        }\n      })\n\n      // 执行删除操作\n      const fileList = paths.map(p => this._normalizeCloudId(p))\n      const result = await this.deleteFile({ fileList })\n\n      // IDeleteFileRes 的 fileList 数组中每个项有 code 字段\n      const failedFiles = result.fileList.filter(item => item.code !== 'SUCCESS')\n      if (failedFiles.length > 0) {\n        throw new StorageError(`Delete failed for ${failedFiles.length} file(s)`)\n      }\n\n      const now = new Date().toISOString()\n\n      // 使用获取到的文件信息构建返回数据\n      return {\n        data: paths.map((p) => {\n          const info = fileInfoMap.get(p)\n\n          return {\n            name: info?.name,\n            id: info?.id,\n            bucket_id: info?.bucketId,\n            owner: undefined, // 无法计算owner\n            updated_at: info?.updatedAt || now,\n            created_at: info?.createdAt,\n            last_accessed_at: info?.lastAccessedAt || now,\n            metadata: info?.metadata || {},\n            /**\n             * TODO: 获取补全 Bucket 信息\n             */\n            buckets: {\n              id: info?.bucketId,\n              name: info?.bucketId,\n              owner: undefined, // 无法计算owner\n              public: false, // 未知\n              created_at: '', // 未知\n              updated_at: now, // 未知\n            },\n          }\n        }),\n        error: null,\n      }\n    } catch (error: any) {\n      if (this.shouldThrowOnError) throw error\n      if (isStorageError(error)) {\n        return {\n          data: null,\n          error,\n        }\n      }\n      throw error\n    }\n  }\n\n  async list() {\n    throw new StorageError('Not implemented')\n  }\n\n  private _getCloudPath(path: string): string {\n    // 清理路径：移除首尾斜杠，合并多个斜杠\n    const cleanPath = path.replace(/^\\/|\\/$/g, '').replace(/\\/+/g, '/')\n\n    // 否则返回清理后的相对路径\n    return cleanPath\n  }\n\n  private _normalizeCloudId(path: string) {\n    // 如果已经是 cloud:// 格式，直接返回\n    if (/^cloud:\\/\\//.test(path)) {\n      return path\n    }\n    const cleanPath = this._getCloudPath(path)\n\n    // 如果设置了 bucketId，构建完整的 cloud:// 路径\n    if (this.bucketId) {\n      // 获取环境 ID\n      const envId = this.config?.env || ''\n      if (envId) {\n        return `cloud://${envId}.${this.bucketId}/${cleanPath}`\n      }\n    } else {\n      throw new StorageError('bucketId is not set')\n    }\n  }\n\n  private toBase64(data: string) {\n    if (typeof Buffer !== 'undefined') {\n      return Buffer.from(data).toString('base64')\n    }\n    return btoa(data)\n  }\n\n  /**\n   * 将 TransformOptions 转换为腾讯云数据万象的 imageMogr2 查询字符串\n   *\n   * 腾讯云数据万象使用 imageMogr2 接口进行图片处理，支持以下参数：\n   * - /thumbnail/<Width>x<Height> - 缩放\n   * - /format/<Format> - 格式转换\n   * - /quality/<Quality> - 质量调整\n   * - /rquality/<Quality> - 相对质量\n   *\n   * @param transform - Supabase TransformOptions\n   * @returns 腾讯云数据万象的查询字符串\n   *\n   * @example\n   * ```typescript\n   * _transformOptsToQueryString({ width: 300, height: 200, quality: 80, format: 'origin' })\n   * // 返回: 'imageMogr2/thumbnail/300x200/quality/80'\n   * ```\n   */\n  private _transformOptsToQueryString(transform: TransformOptions): string {\n    const params: string[] = ['imageMogr2']\n\n    // 处理缩放参数\n    if (transform.width || transform.height) {\n      const width = transform.width || ''\n      const height = transform.height || ''\n\n      // 根据 resize 模式选择不同的缩放方式\n      if (transform.resize === 'fill') {\n        // fill: 强制缩放到指定尺寸，可能变形\n        params.push(`thumbnail/${width}x${height}!`)\n      } else if (transform.resize === 'contain') {\n        // contain: 等比缩放，完整显示在指定尺寸内\n        params.push(`thumbnail/${width}x${height}`)\n      } else {\n        // cover (默认): 等比缩放，填充指定尺寸，可能裁剪\n        // 使用 /thumbnail/<Width>x<Height>^ 表示填充模式\n        params.push(`thumbnail/${width}x${height}^`)\n      }\n    }\n\n    // 处理格式转换\n    // format: 'origin' 表示保持原格式，不传此参数\n    if (transform.format && transform.format !== 'origin') {\n      params.push(`format/${transform.format}`)\n    }\n\n    // 处理质量参数\n    if (transform.quality !== undefined) {\n      // 腾讯云数据万象的 quality 参数范围是 1-100\n      const quality = Math.max(1, Math.min(100, transform.quality))\n      params.push(`quality/${quality}`)\n    }\n\n    return params.join('/')\n  }\n\n  /**\n   * 从 CloudBase fileID 中提取文件路径\n   *\n   * @param fileId - CloudBase fileID (格式: cloud://env-id.bucket/path/to/file.jpg)\n   * @returns 提取的文件路径\n   *\n   * @example\n   * ```typescript\n   * _extractPathFromFileId('cloud://test-env.test-bucket/images/photo.jpg')\n   * // 返回: 'images/photo.jpg'\n   *\n   * _extractPathFromFileId('cloud://test-env.test-bucket/file.txt')\n   * // 返回: 'file.txt'\n   * ```\n   */\n  private _extractPathFromFileId(fileId: string): string {\n    // fileID 格式: cloud://env-id.bucket/path/to/file.jpg\n    // 需要提取第一个 / 后面的所有内容（包括 bucket 和路径）\n    // 然后再提取 bucket 后面的路径部分\n\n    // 移除 cloud:// 前缀\n    const withoutProtocol = fileId.replace(/^cloud:\\/\\//, '')\n\n    // 分割为 [env-id.bucket, path, to, file.jpg]\n    const parts = withoutProtocol.split('/')\n\n    if (parts.length < 2) {\n      // 如果无法解析，返回完整的 fileID\n      return fileId\n    }\n\n    // 移除第一部分（env-id.bucket），返回剩余路径\n    return parts.slice(1).join('/')\n  }\n\n  /**\n   * 从 CloudBase fileID 中提取 bucket 名称\n   *\n   * @param fileId - CloudBase fileID (格式: cloud://env-id.bucket/path/to/file.jpg)\n   * @returns 提取的 bucket 名称\n   *\n   * @example\n   * ```typescript\n   * _extractBucketFromFileId('cloud://test-env.test-bucket/images/photo.jpg')\n   * // 返回: 'test-bucket'\n   *\n   * _extractBucketFromFileId('cloud://prod-env.my-bucket/file.txt')\n   * // 返回: 'my-bucket'\n   * ```\n   */\n  private _extractBucketFromFileId(fileId: string): string {\n    // fileID 格式: cloud://env-id.bucket/path/to/file.jpg\n    // 需要提取 env-id.bucket 中的 bucket 部分\n\n    // 移除 cloud:// 前缀\n    const withoutProtocol = fileId.replace(/^cloud:\\/\\//, '')\n\n    // 分割为 [env-id.bucket, path, to, file.jpg]\n    const parts = withoutProtocol.split('/')\n\n    if (parts.length < 1) {\n      // 如果无法解析，返回默认 bucket\n      return ''\n    }\n\n    // 第一部分是 env-id.bucket，提取 bucket 部分\n    // 格式: env-id.bucket 或 env-id.bucket-name\n    const envAndBucket = parts[0]\n\n    // 查找第一个点的位置\n    const dotIndex = envAndBucket.indexOf('.')\n\n    if (dotIndex === -1) {\n      // 如果没有点，返回整个字符串\n      return envAndBucket\n    }\n\n    // 返回点后面的部分（bucket 名称）\n    return envAndBucket.substring(dotIndex + 1)\n  }\n}\n", "import { ICloudbase } from '@cloudbase/types'\nimport { ICloudbaseComponent } from '@cloudbase/types/component'\nimport { CloudbaseStorage, COMPONENT_NAME, ICloudbaseContext } from './storage'\nimport { SupabaseFileAPILikeStorage } from './supabase'\n\ndeclare const cloudbase: ICloudbase\n\nconst storage = new CloudbaseStorage()\nconst component: ICloudbaseComponent = {\n  name: COMPONENT_NAME,\n  entity: {\n    uploadFile: storage.uploadFile,\n    deleteFile: storage.deleteFile,\n    getTempFileURL: storage.getTempFileURL,\n    downloadFile: storage.downloadFile,\n    getUploadMetadata: storage.getUploadMetadata,\n    copyFile: storage.copyFile,\n    getFileInfo: storage.getFileInfo,\n    isGateWay: storage.isGateWay,\n  },\n}\n\nconst supabaseComponent: ICloudbaseComponent = {\n  name: `${COMPONENT_NAME}/supabase`,\n  IIFE: true,\n  entity() {\n    // 在 IIFE 中，this 是 Cloudbase 类（构造函数），不是实例\n    // 所以我们需要使用 getter 来延迟获取实例的 config 和 request\n\n    // 使用 WeakMap 缓存每个实例的 storage 对象\n    const storageCache = new WeakMap<any, SupabaseFileAPILikeStorage>()\n\n    // 定义 storage 属性的 getter，每个实例只创建一次\n    Object.defineProperty(this.prototype, 'storage', {\n      get() {\n        // 这里的 this 是 cloudbase 实例\n\n        // 如果已经创建过，直接返回缓存的实例\n        if (storageCache.has(this)) {\n          return storageCache.get(this)\n        }\n\n        // 创建动态 context，从当前实例获取 config 和 request\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const instance = this\n        // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n        const context = new Proxy<ICloudbaseContext>({} as ICloudbaseContext, {\n          get: (_target, prop) => {\n            if (prop === 'config') {\n              return instance.config\n            }\n            if (prop === 'request') {\n              return instance.request\n            }\n            return undefined\n          },\n        })\n\n        // 创建新的 storage 实例并缓存\n        const storage = new SupabaseFileAPILikeStorage(context)\n        storageCache.set(this, storage)\n        return storage\n      },\n      configurable: true,\n      enumerable: true,\n    })\n  },\n}\n\ntry {\n  cloudbase.registerComponent(component)\n  cloudbase.registerComponent(supabaseComponent)\n} catch (e) {}\n\nexport function registerStorage(app: Pick<ICloudbase, 'registerComponent'>) {\n  try {\n    app.registerComponent(component)\n    app.registerComponent(supabaseComponent)\n  } catch (e) {\n    console.warn(e)\n  }\n}\n\ntry {\n  (window as any).registerStorage = registerStorage\n} catch (e) {}\n", "import set from 'lodash/set'\nimport unset from 'lodash/unset'\nimport cloneDeep from 'lodash/cloneDeep'\nimport { genRequestId } from './message'\nimport {\n  IResponseMessage,\n  IRequestMessageInitWatchMsg,\n  IResponseMessageInitEventMsg,\n  IDBEvent,\n  IRequestMessageRebuildWatchMsg,\n  IRequestMessageCloseWatchMsg,\n  IRequestMsgType,\n  IResponseMessageNextEventMsg,\n  IRequestMessageCheckLastMsg,\n  IWatchOptions,\n} from '@cloudbase/types/realtime'\nimport {\n  ISingleDBEvent,\n} from '@cloudbase/types/database'\nimport { RealtimeListener } from './listener'\nimport { Snapshot } from './snapshot'\nimport { IWSSendOptions, ILoginResult } from './websocket-client'\nimport {\n  ERR_CODE,\n  CloudSDKError,\n  isTimeoutError,\n  CancelledError,\n  isCancelledError,\n  isRealtimeErrorMessageError,\n  RealtimeErrorMessageError,\n  TimeoutError,\n} from './error'\nimport { sleep } from './utils'\n\n// =============== Realtime Virtual WebSocket Client (Internal) ====================\n\ninterface IVirtualWebSocketClientConstructorOptions extends IWatchOptions {\n  envId?: string\n  collectionName: string\n  query: string\n  limit?: number\n  orderBy?: Record<string, string>\n  send: <T = any>(opts: IWSSendOptions) => Promise<T>\n  login: (envId?: string, refresh?: boolean) => Promise<any>\n  isWSConnected: () => boolean\n  onceWSConnected: () => Promise<void>\n  getWaitExpectedTimeoutLength: () => number\n  onWatchStart: (client: VirtualWebSocketClient, queryID: string) => void\n  onWatchClose: (client: VirtualWebSocketClient, queryID: string) => void\n  debug?: boolean\n}\n\ninterface IWatchSessionInfo {\n  queryID: string\n  currentEventId: number\n  currentDocs: Record<string, any>[]\n  expectEventId?: number\n}\n\ninterface IHandleCommonErrorOptions {\n  onSignError: (e: RealtimeErrorMessageError) => void\n  onTimeoutError: (e: TimeoutError) => void\n  onCancelledError: (e: CancelledError) => void\n  onNotRetryableError: (e: RealtimeErrorMessageError) => void\n  onUnknownError: (e: any) => void\n}\n\ninterface IHandleWatchEstablishmentErrorOptions {\n  operationName: 'INIT_WATCH' | 'REBUILD_WATCH'\n  resolve: (value?: PromiseLike<void> | undefined) => void\n  reject: (e: any) => void\n}\n\nenum WatchStatus {\n  LOGGINGIN = 'LOGGINGIN',\n  INITING = 'INITING',\n  REBUILDING = 'REBUILDING',\n  ACTIVE = 'ACTIVE',\n  ERRORED = 'ERRORED',\n  CLOSING = 'CLOSING',\n  CLOSED = 'CLOSED',\n  PAUSED = 'PAUSED',\n  RESUMING = 'RESUMING'\n}\n\nconst DEFAULT_WAIT_TIME_ON_UNKNOWN_ERROR = 100\nconst DEFAULT_MAX_AUTO_RETRY_ON_ERROR = 2\nconst DEFAULT_MAX_SEND_ACK_AUTO_RETRY_ON_ERROR = 2\nconst DEFAULT_SEND_ACK_DEBOUNCE_TIMEOUT = 10 * 1000\nconst DEFAULT_INIT_WATCH_TIMEOUT = 10 * 1000\nconst DEFAULT_REBUILD_WATCH_TIMEOUT = 10 * 1000\n\nexport class VirtualWebSocketClient {\n  // passed over\n  watchId: string\n  // own\n  listener: RealtimeListener\n  private envId?: string\n  private collectionName: string\n  private query: string\n  private limit: number\n  private orderBy: Record<string, string>\n  private send: <T = any>(opts: IWSSendOptions) => Promise<T>\n  private login: (envId?: string, refresh?: boolean) => Promise<any>\n  private isWSConnected: () => boolean\n  private onceWSConnected: () => Promise<void>\n  private getWaitExpectedTimeoutLength: () => number\n  private onWatchStart: (\n    client: VirtualWebSocketClient,\n    queryID: string\n  ) => void\n  private onWatchClose: (\n    client: VirtualWebSocketClient,\n    queryID: string\n  ) => void\n  private debug?: boolean\n\n  private watchStatus: WatchStatus = WatchStatus.INITING\n  private availableRetries: Partial<Record<IRequestMsgType, number>>\n  private ackTimeoutId?: number\n  private initWatchPromise?: Promise<void>\n  private rebuildWatchPromise?: Promise<void>\n\n  // obtained\n  private sessionInfo?: IWatchSessionInfo\n\n  // internal\n  private waitExpectedTimeoutId?: number\n\n  constructor(options: IVirtualWebSocketClientConstructorOptions) {\n    this.watchId = `watchid_${+new Date()}_${Math.random()}`\n    this.envId = options.envId\n    this.collectionName = options.collectionName\n    this.query = options.query\n    this.limit = options.limit\n    this.orderBy = options.orderBy\n    this.send = options.send\n    this.login = options.login\n    this.isWSConnected = options.isWSConnected\n    this.onceWSConnected = options.onceWSConnected\n    this.getWaitExpectedTimeoutLength = options.getWaitExpectedTimeoutLength\n    this.onWatchStart = options.onWatchStart\n    this.onWatchClose = options.onWatchClose\n    this.debug = options.debug\n\n    this.availableRetries = {\n      INIT_WATCH: DEFAULT_MAX_AUTO_RETRY_ON_ERROR,\n      REBUILD_WATCH: DEFAULT_MAX_AUTO_RETRY_ON_ERROR,\n      CHECK_LAST: DEFAULT_MAX_SEND_ACK_AUTO_RETRY_ON_ERROR,\n    }\n\n    this.listener = new RealtimeListener({\n      close: () => {\n        this.closeWatch()\n      },\n      onChange: options.onChange,\n      onError: options.onError,\n      debug: this.debug,\n      virtualClient: this,\n    })\n\n    this.initWatch()\n  }\n\n  onMessage(msg: IResponseMessage) {\n    // watchStatus sanity check\n    switch (this.watchStatus) {\n      case WatchStatus.PAUSED: {\n        // ignore all but error message\n        if (msg.msgType !== 'ERROR') {\n          return\n        }\n        break\n      }\n      case WatchStatus.LOGGINGIN:\n      case WatchStatus.INITING:\n      case WatchStatus.REBUILDING: {\n        console.warn(`[realtime listener] internal non-fatal error: unexpected message received while ${this.watchStatus}`)\n        return\n      }\n      case WatchStatus.CLOSED: {\n        console.warn('[realtime listener] internal non-fatal error: unexpected message received when the watch has closed')\n        return\n      }\n      case WatchStatus.ERRORED: {\n        console.warn('[realtime listener] internal non-fatal error: unexpected message received when the watch has ended with error')\n        return\n      }\n    }\n\n    if (!this.sessionInfo) {\n      console.warn('[realtime listener] internal non-fatal error: sessionInfo not found while message is received.')\n      return\n    }\n\n    this.scheduleSendACK()\n\n    switch (msg.msgType) {\n      case 'NEXT_EVENT': {\n        // if (process.env.DEBUG) {\n        // @ts-ignore\n        // if (wx._ignore) {\n        console.warn(`nextevent ${msg.msgData.currEvent} ignored`, msg)\n        // @ts-ignore\n        // wx._ignore = false\n        // return\n        // }\n        // }\n\n        this.handleServerEvents(msg)\n        break\n      }\n      case 'CHECK_EVENT': {\n        if (this.sessionInfo.currentEventId < msg.msgData.currEvent) {\n          // client eventID < server eventID:\n          // there might be one or more pending events not yet received but sent by the server\n          this.sessionInfo.expectEventId = msg.msgData.currEvent\n          this.clearWaitExpectedEvent()\n          // @ts-ignore\n          this.waitExpectedTimeoutId = setTimeout(() => {\n            // must rebuild watch\n            this.rebuildWatch()\n          }, this.getWaitExpectedTimeoutLength())\n\n          console.log(`[realtime] waitExpectedTimeoutLength ${this.getWaitExpectedTimeoutLength()}`)\n        }\n        break\n      }\n      case 'ERROR': {\n        // receive server error\n        this.closeWithError(new CloudSDKError({\n          errCode: ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG as string,\n          errMsg: `${msg.msgData.code} - ${msg.msgData.message}`,\n        }))\n        break\n      }\n      default: {\n        console.warn(\n          `[realtime listener] virtual client receive unexpected msg ${msg.msgType}: `,\n          msg\n        )\n        break\n      }\n    }\n  }\n\n  closeWithError(error: any) {\n    this.watchStatus = WatchStatus.ERRORED\n    this.clearACKSchedule()\n    this.listener.onError(error)\n    this.onWatchClose(\n      this,\n      (this.sessionInfo?.queryID) || ''\n    )\n\n    console.log(`[realtime] client closed (${this.collectionName} ${this.query}) (watchId ${this.watchId})`)\n  }\n\n  pause() {\n    this.watchStatus = WatchStatus.PAUSED\n    console.log(`[realtime] client paused (${this.collectionName} ${this.query}) (watchId ${this.watchId})`)\n  }\n\n\n  async resume(): Promise<void> {\n    this.watchStatus = WatchStatus.RESUMING\n\n    console.log(`[realtime] client resuming with ${\n      this.sessionInfo ? 'REBUILD_WATCH' : 'INIT_WATCH'\n    } (${this.collectionName} ${this.query}) (${this.watchId})`)\n\n    try {\n      await (this.sessionInfo ? this.rebuildWatch() : this.initWatch())\n\n      console.log(`[realtime] client successfully resumed (${this.collectionName} ${this.query}) (${this.watchId})`)\n    } catch (e) {\n      console.error(\n        `[realtime] client resume failed (${this.collectionName} ${this.query}) (${this.watchId})`,\n        e\n      )\n    }\n  }\n\n  private wsLogin = async (\n    envId?: string,\n    refresh?: boolean\n  ): Promise<ILoginResult> => {\n    this.watchStatus = WatchStatus.LOGGINGIN\n    const loginResult = await this.login(envId, refresh)\n    if (!this.envId) {\n      this.envId = loginResult.envId\n    }\n    return loginResult\n  }\n\n  private initWatch = async (forceRefreshLogin?: boolean): Promise<void> => {\n    if (this.initWatchPromise !== null && this.initWatchPromise !== undefined) {\n      return this.initWatchPromise\n    }\n\n    this.initWatchPromise = new Promise<void>((resolve, reject) => {\n      void (async () => {\n        try {\n          if (this.watchStatus === WatchStatus.PAUSED) {\n            console.log('[realtime] initWatch cancelled on pause')\n            return resolve()\n          }\n\n          const { envId } = await this.wsLogin(this.envId, forceRefreshLogin)\n          if ((this.watchStatus as WatchStatus) === WatchStatus.PAUSED) {\n            console.log('[realtime] initWatch cancelled on pause')\n            return resolve()\n          }\n\n          this.watchStatus = WatchStatus.INITING\n\n          const initWatchMsg: IRequestMessageInitWatchMsg = {\n            watchId: this.watchId,\n            requestId: genRequestId(),\n            msgType: 'INIT_WATCH',\n            msgData: {\n              envId,\n              collName: this.collectionName,\n              query: this.query,\n              limit: this.limit,\n              orderBy: this.orderBy,\n            },\n          }\n\n          const initEventMsg = await this.send<IResponseMessageInitEventMsg>({\n            msg: initWatchMsg,\n            waitResponse: true,\n            skipOnMessage: true,\n            timeout: DEFAULT_INIT_WATCH_TIMEOUT,\n          })\n\n          const { events, currEvent } = initEventMsg.msgData\n\n          this.sessionInfo = {\n            queryID: initEventMsg.msgData.queryID,\n            currentEventId: currEvent - 1,\n            currentDocs: [],\n          }\n\n          // FIX: in initEvent message, all events have id 0, which is inconsistent with currEvent\n          if (events.length > 0) {\n            for (const e of events) {\n              e.ID = currEvent\n            }\n            this.handleServerEvents(initEventMsg)\n          } else {\n            this.sessionInfo.currentEventId = currEvent\n            const snapshot = new Snapshot({\n              id: currEvent,\n              docChanges: [],\n              docs: [],\n              type: 'init',\n            })\n            this.listener.onChange(snapshot)\n            this.scheduleSendACK()\n          }\n          this.onWatchStart(this, this.sessionInfo.queryID)\n          this.watchStatus = WatchStatus.ACTIVE\n          this.availableRetries.INIT_WATCH = DEFAULT_MAX_AUTO_RETRY_ON_ERROR\n          resolve()\n        } catch (e) {\n          this.handleWatchEstablishmentError(e, {\n            operationName: 'INIT_WATCH',\n            resolve,\n            reject,\n          })\n        }\n      })()\n    })\n\n    let success = false\n\n    try {\n      await this.initWatchPromise\n      success = true\n    } finally {\n      this.initWatchPromise = undefined\n    }\n    console.log(`[realtime] initWatch ${success ? 'success' : 'fail'}`)\n  }\n\n  private rebuildWatch = async (forceRefreshLogin?: boolean): Promise<void> => {\n    if (this.rebuildWatchPromise !== null && this.rebuildWatchPromise !== undefined) {\n      return this.rebuildWatchPromise\n    }\n\n    this.rebuildWatchPromise = new Promise<void>((resolve, reject) => {\n      void (async () => {\n        try {\n          if (this.watchStatus === WatchStatus.PAUSED) {\n            console.log('[realtime] rebuildWatch cancelled on pause')\n            return resolve()\n          }\n          const { envId } = await this.wsLogin(this.envId, forceRefreshLogin)\n\n          if (!this.sessionInfo) {\n            throw new Error('can not rebuildWatch without a successful initWatch (lack of sessionInfo)')\n          }\n\n          if ((this.watchStatus as WatchStatus) === WatchStatus.PAUSED) {\n            console.log('[realtime] rebuildWatch cancelled on pause')\n            return resolve()\n          }\n\n          this.watchStatus = WatchStatus.REBUILDING\n\n          const rebuildWatchMsg: IRequestMessageRebuildWatchMsg = {\n            watchId: this.watchId,\n            requestId: genRequestId(),\n            msgType: 'REBUILD_WATCH',\n            msgData: {\n              envId,\n              collName: this.collectionName,\n              queryID: this.sessionInfo.queryID,\n              eventID: this.sessionInfo.currentEventId,\n            },\n          }\n\n          const nextEventMsg = await this.send<IResponseMessageNextEventMsg>({\n            msg: rebuildWatchMsg,\n            waitResponse: true,\n            skipOnMessage: false,\n            timeout: DEFAULT_REBUILD_WATCH_TIMEOUT,\n          })\n\n          this.handleServerEvents(nextEventMsg)\n\n          this.watchStatus = WatchStatus.ACTIVE\n          this.availableRetries.REBUILD_WATCH = DEFAULT_MAX_AUTO_RETRY_ON_ERROR\n          resolve()\n        } catch (e) {\n          this.handleWatchEstablishmentError(e, {\n            operationName: 'REBUILD_WATCH',\n            resolve,\n            reject,\n          })\n        }\n      })()\n    })\n\n    let success = false\n\n    try {\n      await this.rebuildWatchPromise\n      success = true\n    } finally {\n      this.rebuildWatchPromise = undefined\n    }\n\n    console.log(`[realtime] rebuildWatch ${success ? 'success' : 'fail'}`)\n  }\n\n  private handleWatchEstablishmentError = async (\n    e: any,\n    options: IHandleWatchEstablishmentErrorOptions\n  ) => {\n    const isInitWatch = options.operationName === 'INIT_WATCH'\n\n    const abortWatch = () => {\n      // mock temp comment\n      this.closeWithError(new CloudSDKError({\n        errCode: isInitWatch\n          ? (ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL as string)\n          : (ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL as string),\n        errMsg: e,\n      }))\n      options.reject(e)\n    }\n\n    const retry = (refreshLogin?: boolean) => {\n      if (this.useRetryTicket(options.operationName)) {\n        if (isInitWatch) {\n          this.initWatchPromise = undefined\n          options.resolve(this.initWatch(refreshLogin))\n        } else {\n          this.rebuildWatchPromise = undefined\n          options.resolve(this.rebuildWatch(refreshLogin))\n        }\n      } else {\n        abortWatch()\n      }\n    }\n\n    this.handleCommonError(e, {\n      onSignError: () => retry(true),\n      onTimeoutError: () => retry(false),\n      onNotRetryableError: abortWatch,\n      onCancelledError: options.reject,\n      onUnknownError: () => {\n        (async () => {\n          try {\n            const onWSDisconnected = async () => {\n              this.pause()\n              await this.onceWSConnected()\n              retry(true)\n            }\n\n            if (!this.isWSConnected()) {\n              await onWSDisconnected()\n            } else {\n              await sleep(DEFAULT_WAIT_TIME_ON_UNKNOWN_ERROR)\n              if (this.watchStatus === WatchStatus.PAUSED) {\n                // cancel\n                options.reject(new CancelledError(`${options.operationName} cancelled due to pause after unknownError`))\n              } else if (!this.isWSConnected()) {\n                await onWSDisconnected()\n              } else {\n                retry(false)\n              }\n            }\n          } catch (e) {\n            // unexpected error while handling error, in order to provide maximum effort on SEAMINGLESS FAULT TOLERANCE, just retry\n            retry(true)\n          }\n        })()\n      },\n    })\n  }\n\n  private closeWatch = async () => {\n    const queryId = this.sessionInfo ? this.sessionInfo.queryID : ''\n\n    if (this.watchStatus !== WatchStatus.ACTIVE) {\n      this.watchStatus = WatchStatus.CLOSED\n      this.onWatchClose(this, queryId)\n      return\n    }\n\n    try {\n      this.watchStatus = WatchStatus.CLOSING\n\n      const closeWatchMsg: IRequestMessageCloseWatchMsg = {\n        watchId: this.watchId,\n        requestId: genRequestId(),\n        msgType: 'CLOSE_WATCH',\n        msgData: null,\n      }\n\n      await this.send({\n        msg: closeWatchMsg,\n      })\n\n      this.sessionInfo = undefined\n      this.watchStatus = WatchStatus.CLOSED\n    } catch (e) {\n      this.closeWithError(new CloudSDKError({\n        errCode: ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL as string,\n        errMsg: e,\n      }))\n    } finally {\n      this.onWatchClose(this, queryId)\n    }\n  }\n\n  private scheduleSendACK = () => {\n    this.clearACKSchedule()\n\n    // TODO: should we check status after timeout\n    // @ts-ignore\n    this.ackTimeoutId = setTimeout(() => {\n      if (this.waitExpectedTimeoutId) {\n        this.scheduleSendACK()\n      } else {\n        this.sendACK()\n      }\n    }, DEFAULT_SEND_ACK_DEBOUNCE_TIMEOUT)\n  }\n\n  private clearACKSchedule = () => {\n    if (this.ackTimeoutId) {\n      clearTimeout(this.ackTimeoutId)\n    }\n  }\n\n  private sendACK = async (): Promise<void> => {\n    try {\n      if (this.watchStatus !== WatchStatus.ACTIVE) {\n        this.scheduleSendACK()\n        return\n      }\n\n      if (!this.sessionInfo) {\n        console.warn('[realtime listener] can not send ack without a successful initWatch (lack of sessionInfo)')\n        return\n      }\n\n      const ackMsg: IRequestMessageCheckLastMsg = {\n        watchId: this.watchId,\n        requestId: genRequestId(),\n        msgType: 'CHECK_LAST',\n        msgData: {\n          queryID: this.sessionInfo.queryID,\n          eventID: this.sessionInfo.currentEventId,\n        },\n      }\n\n      await this.send({\n        msg: ackMsg,\n      })\n\n      this.scheduleSendACK()\n    } catch (e) {\n      // TODO: refactor\n      if (isRealtimeErrorMessageError(e)) {\n        const msg = e.payload\n        switch (msg.msgData.code) {\n          // signature error -> retry with refreshed signature\n          case 'CHECK_LOGIN_FAILED':\n          case 'SIGN_EXPIRED_ERROR':\n          case 'SIGN_INVALID_ERROR':\n          case 'SIGN_PARAM_INVALID': {\n            this.rebuildWatch()\n            return\n          }\n          // other -> throw\n          case 'QUERYID_INVALID_ERROR':\n          case 'SYS_ERR':\n          case 'INVALIID_ENV':\n          case 'COLLECTION_PERMISSION_DENIED': {\n            // must throw\n            this.closeWithError(new CloudSDKError({\n              errCode: ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL as string,\n              errMsg: msg.msgData.code,\n            }))\n            return\n          }\n          default: {\n            break\n          }\n        }\n      }\n\n      // maybe retryable\n      if (\n        this.availableRetries.CHECK_LAST\n        && this.availableRetries.CHECK_LAST > 0\n      ) {\n        this.availableRetries.CHECK_LAST -= 1\n        this.scheduleSendACK()\n      } else {\n        this.closeWithError(new CloudSDKError({\n          errCode: ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL as string,\n          errMsg: e,\n        }))\n      }\n    }\n  }\n\n  private handleCommonError = (\n    e: any,\n    options: IHandleCommonErrorOptions\n  ): void => {\n    if (isRealtimeErrorMessageError(e)) {\n      const msg = e.payload\n      switch (msg.msgData.code) {\n        // signature error -> retry with refreshed signature\n        case 'CHECK_LOGIN_FAILED':\n        case 'SIGN_EXPIRED_ERROR':\n        case 'SIGN_INVALID_ERROR':\n        case 'SIGN_PARAM_INVALID': {\n          options.onSignError(e)\n          return\n        }\n        // not-retryable error -> throw\n        case 'QUERYID_INVALID_ERROR':\n        case 'SYS_ERR':\n        case 'INVALIID_ENV':\n        case 'COLLECTION_PERMISSION_DENIED': {\n          options.onNotRetryableError(e)\n          return\n        }\n        default: {\n          options.onNotRetryableError(e)\n          return\n        }\n      }\n    } else if (isTimeoutError(e)) {\n      // timeout error\n      options.onTimeoutError(e)\n      return\n    } else if (isCancelledError(e)) {\n      // cancelled error\n      options.onCancelledError(e)\n      return\n    }\n\n    // unknown error\n    options.onUnknownError(e)\n  }\n\n  // credit a retry chance from availableRetries\n  private useRetryTicket(operationName: IRequestMsgType): boolean {\n    if (\n      this.availableRetries[operationName]\n      && this.availableRetries[operationName]! > 0\n    ) {\n      this.availableRetries[operationName]! -= 1\n      console.log(`[realtime] ${operationName} use a retry ticket, now only ${this.availableRetries[operationName]} retry left`)\n\n      return true\n    }\n    return false\n  }\n\n  private async handleServerEvents(msg: IResponseMessageInitEventMsg | IResponseMessageNextEventMsg) {\n    try {\n      this.scheduleSendACK()\n      await this.handleServerEventsInternel(msg)\n      this.postHandleServerEventsValidityCheck(msg)\n    } catch (e) {\n      // TODO: report\n      console.error(\n        '[realtime listener] internal non-fatal error: handle server events failed with error: ',\n        e\n      )\n      throw e\n    }\n  }\n\n  private async handleServerEventsInternel(msg: IResponseMessageInitEventMsg | IResponseMessageNextEventMsg) {\n    const { requestId } = msg\n\n    const { events } = msg.msgData\n    const { msgType } = msg\n\n    if (!events.length || !this.sessionInfo) {\n      return\n    }\n\n    const { sessionInfo } = this\n\n    let allChangeEvents: ISingleDBEvent[]\n    try {\n      allChangeEvents = events.map(getPublicEvent)\n    } catch (e) {\n      this.closeWithError(new CloudSDKError({\n        errCode: ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA as string,\n        errMsg: e,\n      }))\n      return\n    }\n\n    // aggregate docs\n    let docs = [...sessionInfo.currentDocs]\n    let initEncountered = false\n    for (let i = 0, len = allChangeEvents.length; i < len; i++) {\n      const change = allChangeEvents[i]\n\n      if (sessionInfo.currentEventId >= change.id) {\n        if (!allChangeEvents[i - 1] || change.id > allChangeEvents[i - 1].id) {\n          // duplicate event, dropable\n          // TODO: report\n          // if (process.env.DEBUG) {\n          console.warn(`[realtime] duplicate event received, cur ${sessionInfo.currentEventId} but got ${change.id}`)\n          // }\n        } else {\n          // allChangeEvents should be in ascending order according to eventId, this should never happens, must report a non-fatal error\n          console.error(`[realtime listener] server non-fatal error: events out of order (the latter event's id is smaller than that of the former) (requestId ${requestId})`)\n        }\n        continue\n      } else if (sessionInfo.currentEventId === change.id - 1) {\n        // correct sequence\n        // first handle dataType then queueType:\n        // 1. dataType: we ONLY populate change.doc if neccessary\n        // 2. queueType: we build the data snapshot\n\n        switch (change.dataType) {\n          case 'update': {\n            // only need to populate change.doc when it is not provided\n            if (!change.doc) {\n              switch (change.queueType) {\n                case 'update':\n                case 'dequeue': {\n                  const localDoc = docs.find(doc => doc._id === change.docId)\n                  if (localDoc) {\n                    // a partial update\n                    const doc = cloneDeep(localDoc)\n\n                    if (change.updatedFields) {\n                      Object.keys(change.updatedFields).forEach((fieldPath) => {\n                        set(doc, fieldPath, change.updatedFields[fieldPath])\n                      })\n                    }\n\n                    if (change.removedFields) {\n                      for (const fieldPath of change.removedFields) {\n                        unset(doc, fieldPath)\n                      }\n                    }\n\n                    change.doc = doc\n                  } else {\n                    // TODO report\n                    console.error('[realtime listener] internal non-fatal server error: unexpected update dataType event where no doc is associated.')\n                  }\n                  break\n                }\n                case 'enqueue': {\n                  // doc is provided by server, this should never occur\n                  const err = new CloudSDKError({\n                    errCode: ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR as string,\n                    errMsg: `HandleServerEvents: full doc is not provided with dataType=\"update\" and queueType=\"enqueue\" (requestId ${msg.requestId})`,\n                  })\n                  this.closeWithError(err)\n                  throw err\n                }\n                default: {\n                  break\n                }\n              }\n            }\n            break\n          }\n          case 'replace': {\n            // validation\n            if (!change.doc) {\n              // doc is provided by server, this should never occur\n              const err = new CloudSDKError({\n                errCode: ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR as string,\n                errMsg: `HandleServerEvents: full doc is not provided with dataType=\"replace\" (requestId ${msg.requestId})`,\n              })\n              this.closeWithError(err)\n              throw err\n            }\n            break\n          }\n          case 'remove': {\n            const doc = docs.find(doc => doc._id === change.docId)\n            if (doc) {\n              change.doc = doc\n            } else {\n              // TODO report\n              console.error('[realtime listener] internal non-fatal server error: unexpected remove event where no doc is associated.')\n            }\n            break\n          }\n          case 'limit': {\n            if (!change.doc) {\n              switch (change.queueType) {\n                case 'dequeue': {\n                  const doc = docs.find(doc => doc._id === change.docId)\n                  if (doc) {\n                    change.doc = doc\n                  } else {\n                    console.error('[realtime listener] internal non-fatal server error: unexpected limit dataType event where no doc is associated.')\n                  }\n                  break\n                }\n                case 'enqueue': {\n                  // doc is provided by server, this should never occur\n                  const err = new CloudSDKError({\n                    errCode: ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR as string,\n                    errMsg: `HandleServerEvents: full doc is not provided with dataType=\"limit\" and queueType=\"enqueue\" (requestId ${msg.requestId})`,\n                  })\n                  this.closeWithError(err)\n                  throw err\n                }\n                default: {\n                  break\n                }\n              }\n            }\n            break\n          }\n        }\n\n        switch (change.queueType) {\n          case 'init': {\n            if (!initEncountered) {\n              initEncountered = true\n              docs = [change.doc]\n            } else {\n              docs.push(change.doc)\n            }\n            break\n          }\n          case 'enqueue': {\n            docs.push(change.doc)\n            break\n          }\n          case 'dequeue': {\n            const ind = docs.findIndex(doc => doc._id === change.docId)\n            if (ind > -1) {\n              docs.splice(ind, 1)\n            } else {\n              // TODO report\n              console.error('[realtime listener] internal non-fatal server error: unexpected dequeue event where no doc is associated.')\n            }\n            break\n          }\n          case 'update': {\n            const ind = docs.findIndex(doc => doc._id === change.docId)\n            if (ind > -1) {\n              docs[ind] = change.doc\n            } else {\n              // TODO report\n              console.error('[realtime listener] internal non-fatal server error: unexpected queueType update event where no doc is associated.')\n            }\n            break\n          }\n        }\n\n        if (\n          i === len - 1\n          || (allChangeEvents[i + 1] && allChangeEvents[i + 1].id !== change.id)\n        ) {\n          // a shallow slice creates a shallow snapshot\n          const docsSnapshot = [...docs]\n\n          // we slice first cause' if there're allChangeEvents that are of the same id after this change, we don't want to involve it for it is unexpected invalid order\n          const docChanges = allChangeEvents\n            .slice(0, i + 1)\n            .filter(c => c.id === change.id)\n\n          // all changes of this event has been handle, we could dispatch the event now\n          this.sessionInfo.currentEventId = change.id\n          this.sessionInfo.currentDocs = docs\n\n          const snapshot = new Snapshot({\n            id: change.id,\n            docChanges,\n            docs: docsSnapshot,\n            msgType,\n          })\n\n          this.listener.onChange(snapshot)\n        }\n      } else {\n        // out-of-order event\n        // if (process.env.DEBUG) {\n        // TODO: report\n        console.warn(`[realtime listener] event received is out of order, cur ${this.sessionInfo.currentEventId} but got ${change.id}`)\n        // }\n        // rebuild watch\n        await this.rebuildWatch()\n        return\n      }\n    }\n  }\n\n  private postHandleServerEventsValidityCheck(msg: IResponseMessageInitEventMsg | IResponseMessageNextEventMsg) {\n    if (!this.sessionInfo) {\n      console.error('[realtime listener] internal non-fatal error: sessionInfo lost after server event handling, this should never occur')\n      return\n    }\n\n    if (\n      this.sessionInfo.expectEventId\n      && this.sessionInfo.currentEventId >= this.sessionInfo.expectEventId\n    ) {\n      this.clearWaitExpectedEvent()\n    }\n\n    if (this.sessionInfo.currentEventId < msg.msgData.currEvent) {\n      console.warn('[realtime listener] internal non-fatal error: client eventId does not match with server event id after server event handling')\n      return\n    }\n  }\n\n  private clearWaitExpectedEvent() {\n    if (this.waitExpectedTimeoutId) {\n      clearTimeout(this.waitExpectedTimeoutId)\n      this.waitExpectedTimeoutId = undefined\n    }\n  }\n}\n\nfunction getPublicEvent(event: IDBEvent): ISingleDBEvent {\n  const e: ISingleDBEvent = {\n    id: event.ID,\n    dataType: event.DataType,\n    queueType: event.QueueType,\n    docId: event.DocID,\n    doc: event.Doc && event.Doc !== '{}' ? JSON.parse(event.Doc) : undefined,\n  }\n\n  if (event.DataType === 'update') {\n    // @ts-ignore\n    if (event.UpdatedFields) {\n      e.updatedFields = JSON.parse(event.UpdatedFields)\n    }\n    // TODO: wait for tcb to change removedFields to RemovedFields\n    // @ts-ignore\n    if (event.removedFields || event.RemovedFields) {\n      // @ts-ignore\n      // e.removedFields = event.removedFields\n      //   ? JSON.parse(event.removedFields)\n      //   : JSON.parse(event.RemovedFields)\n      e.removedFields = JSON.parse(event.removedFields)\n    }\n  }\n\n  return e\n}\n", "import {\n  IResponseMessage,\n  IResponseMessageInitEventMsg,\n} from '@cloudbase/types/realtime'\n\nexport function genRequestId(prefix = '') {\n  return `${prefix ? `${prefix}_` : ''}${+new Date()}_${Math.random()}`\n}\n\nexport function isInitEventMessage(msg: IResponseMessage): msg is IResponseMessageInitEventMsg {\n  return msg.msgType === 'INIT_EVENT'\n}\n", "import { VirtualWebSocketClient } from './virtual-websocket-client'\nimport {\n  IRealtimeListenerConstructorOptions,\n  DBRealtimeListener,\n} from '@cloudbase/types/realtime'\n\n// =============== Realtime Listener (Public) ====================\n\ninterface IRealtimeListenerOptions extends IRealtimeListenerConstructorOptions {\n  // init\n  close: () => void\n  // debug\n  debug?: boolean\n  virtualClient?: VirtualWebSocketClient\n}\n\nexport class RealtimeListener implements DBRealtimeListener {\n  close: () => void\n  onChange: (res: any) => void\n  onError: (error: any) => void\n\n  constructor(options: IRealtimeListenerOptions) {\n    this.close = options.close\n    this.onChange = options.onChange\n    this.onError = options.onError\n\n    if (options.debug) {\n      Object.defineProperty(this, 'virtualClient', {\n        get: () => options.virtualClient,\n      })\n    }\n  }\n}\n", "import { SnapshotType, ISnapshot } from '@cloudbase/types/realtime'\nimport { ISingleDBEvent } from '@cloudbase/types/database'\n\n// =============== Realtime Snapshot / Change Event (Public) ====================\n\ninterface ISnapshotConstructorOptions {\n  id: number\n  docChanges: ISingleDBEvent[]\n  docs: Record<string, any>[]\n  type?: SnapshotType\n  // EJSON: any\n  msgType?: String\n}\n\nexport class Snapshot implements ISnapshot {\n  id!: number\n  docChanges!: ISingleDBEvent[]\n  docs!: Record<string, any>[]\n  type?: 'init'\n  // EJSON: any\n\n  constructor(options: ISnapshotConstructorOptions) {\n    const { id, docChanges, docs, msgType, type } = options\n\n    let cachedDocChanges: ISingleDBEvent[]\n    let cachedDocs: Record<string, any>[]\n\n    Object.defineProperties(this, {\n      id: {\n        get: () => id,\n        enumerable: true,\n      },\n      docChanges: {\n        get: () => {\n          if (!cachedDocChanges) {\n            cachedDocChanges = JSON.parse(JSON.stringify(docChanges))\n          }\n          return cachedDocChanges\n        },\n        enumerable: true,\n      },\n      docs: {\n        get: () => {\n          if (!cachedDocs) {\n            cachedDocs = JSON.parse(JSON.stringify(docs))\n          }\n          return cachedDocs\n        },\n        enumerable: true,\n      },\n      msgType: {\n        get: () => msgType,\n        enumerable: true,\n      },\n      type: {\n        get: () => type,\n        enumerable: true,\n      },\n    })\n  }\n}\n", "import { IGenericError } from '@cloudbase/types'\nimport { IResponseMessageErrorMsg } from '@cloudbase/types/realtime'\n\nexport class RealtimeErrorMessageError extends Error {\n  isRealtimeErrorMessageError = true\n  payload: IResponseMessageErrorMsg\n\n  constructor(serverErrorMsg: IResponseMessageErrorMsg) {\n    super(`Watch Error ${JSON.stringify(serverErrorMsg.msgData)} (requestid: ${\n      serverErrorMsg.requestId\n    })`)\n    this.payload = serverErrorMsg\n  }\n}\n\nexport const isRealtimeErrorMessageError = (e: any): e is RealtimeErrorMessageError => e?.isRealtimeErrorMessageError\n\nexport class TimeoutError extends Error\n  implements IGenericError<'timeout', null> {\n  type = 'timeout' as const\n  payload = null\n  generic = true\n}\n\nexport const isTimeoutError = (e: any): e is TimeoutError => e.type === 'timeout'\n\nexport class CancelledError extends Error\n  implements IGenericError<'cancelled', null> {\n  type = 'cancelled' as const\n  payload = null\n  generic = true\n}\n\nexport const isCancelledError = (e: any): e is CancelledError => e.type === 'cancelled'\n\nexport class CloudSDKError extends Error {\n  public errCode = 'UNKNOWN_ERROR'\n  public errMsg: string\n\n  public requestID?: string\n\n  constructor(options: IErrorConstructorOptions) {\n    super(options.errMsg)\n\n    Object.defineProperties(this, {\n      message: {\n        get() {\n          return (\n            `errCode: ${this.errCode} ${ERR_CODE[this.errCode]\n              || ''} | errMsg: ${this.errMsg}`\n          )\n        },\n        set(msg: string) {\n          this.errMsg = msg\n        },\n      },\n    })\n\n    this.errCode = options.errCode || 'UNKNOWN_ERROR'\n    this.errMsg = options.errMsg\n  }\n\n  get message() {\n    return `errCode: ${this.errCode} | errMsg: ${this.errMsg}`\n  }\n\n  set message(msg: string) {\n    this.errMsg = msg\n  }\n}\n\ninterface IErrorConstructorOptions {\n  errCode?: string\n  errMsg: string\n}\n\nexport const ERR_CODE: { [key: string]: string | number } = {\n  // \"-1\": \"\",\n  UNKNOWN_ERROR: 'UNKNOWN_ERROR',\n  SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:\n    'SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL',\n  // \"realtime listener init watch fail\",\n  SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WATCH_FAIL:\n    'SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WATCH_FAIL',\n  // \"realtime listener reconnect watch fail\",\n  SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL:\n    'SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL',\n  // \"realtime listener rebuild watch fail\",\n  SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL:\n    'SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL',\n  // \"realtime listener rebuild watch fail\",\n  SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG:\n    'SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG',\n  // \"realtime listener receive server error msg\",\n  SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA:\n    'SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA',\n  // \"realtime listener receive invalid server data\",\n  SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR:\n    'SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR',\n  // \"realtime listener websocket connection error\",\n  SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED:\n    'SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED',\n  // \"realtime listener websocket connection closed\",\n  SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL:\n    'SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL',\n  // \"realtime listener check last fail\",\n  SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR:\n    'SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR',\n  // \"realtime listener unexpected fatal error\"\n}\n", "export const sleep = (ms = 0) => new Promise(r => setTimeout(r, ms))\n", "import { ERR_CODE, CloudSDKError } from './error'\n\nexport const CLOSE_EVENT_CODE_INFO = {\n  1000: {\n    code: 1000,\n    name: 'Normal Closure',\n    description:\n      'Normal closure; the connection successfully completed whatever purpose for which it was created.',\n  },\n  1001: {\n    code: 1001,\n    name: 'Going Away',\n    description:\n      'The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection.',\n  },\n  1002: {\n    code: 1002,\n    name: 'Protocol Error',\n    description:\n      'The endpoint is terminating the connection due to a protocol error.',\n  },\n  1003: {\n    code: 1003,\n    name: 'Unsupported Data',\n    description:\n      'The connection is being terminated because the endpoint received data of a type it cannot accept (for example, a text-only endpoint received binary data).',\n  },\n  1005: {\n    code: 1005,\n    name: 'No Status Received',\n    description:\n      'Indicates that no status code was provided even though one was expected.',\n  },\n  1006: {\n    code: 1006,\n    name: 'Abnormal Closure',\n    description:\n      'Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected.',\n  },\n  1007: {\n    code: 1007,\n    name: 'Invalid frame payload data',\n    description:\n      'The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message).',\n  },\n  1008: {\n    code: 1008,\n    name: 'Policy Violation',\n    description:\n      'The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable.',\n  },\n  1009: {\n    code: 1009,\n    name: 'Message too big',\n    description:\n      'The endpoint is terminating the connection because a data frame was received that is too large.',\n  },\n  1010: {\n    code: 1010,\n    name: 'Missing Extension',\n    description:\n      'The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn\\'t.',\n  },\n  1011: {\n    code: 1011,\n    name: 'Internal Error',\n    description:\n      'The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request.',\n  },\n  1012: {\n    code: 1012,\n    name: 'Service Restart',\n    description:\n      'The server is terminating the connection because it is restarting.',\n  },\n  1013: {\n    code: 1013,\n    name: 'Try Again Later',\n    description:\n      'The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients.',\n  },\n  1014: {\n    code: 1014,\n    name: 'Bad Gateway',\n    description:\n      'The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code.',\n  },\n  1015: {\n    code: 1015,\n    name: 'TLS Handshake',\n    description:\n      'Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can\\'t be verified).',\n  },\n  // custom\n  3000: {\n    code: 3000,\n    name: 'Reconnect WebSocket',\n    description:\n      'The client is terminating the connection because it wants to reconnect',\n  },\n  3001: {\n    code: 3001,\n    name: 'No Realtime Listeners',\n    description:\n      'The client is terminating the connection because no more realtime listeners exist',\n  },\n  3002: {\n    code: 3002,\n    name: 'Heartbeat Ping Error',\n    description:\n      'The client is terminating the connection due to its failure in sending heartbeat messages',\n  },\n  3003: {\n    code: 3003,\n    name: 'Heartbeat Pong Timeout Error',\n    description:\n      'The client is terminating the connection because no heartbeat response is received from the server',\n  },\n  3050: {\n    code: 3050,\n    name: 'Server Close',\n    description:\n      'The client is terminating the connection because no heartbeat response is received from the server',\n  },\n}\n\nexport enum CloseEventCode {\n  // spec\n  NormalClosure = 1000,\n  GoingAway = 1001,\n  ProtocolError = 1002,\n  UnsupportedData = 1003,\n  NoStatusReceived = 1005,\n  AbnormalClosure = 1006,\n  InvalidFramePayloadData = 1007,\n  PolicyViolation = 1008,\n  MessageTooBig = 1009,\n  MissingExtension = 1010,\n  InternalError = 1011,\n  ServiceRestart = 1012,\n  TryAgainLater = 1013,\n  BadGateway = 1014,\n  TLSHandshake = 1015,\n  // custom - client close itself\n  ReconnectWebSocket = 3000,\n  NoRealtimeListeners = 3001,\n  HeartbeatPingError = 3002,\n  HeartbeatPongTimeoutError = 3003,\n  // custom - server close\n  NoAuthentication = 3050\n}\n\nexport const getWSCloseError = (code: CloseEventCode, reason?: string) => {\n  const info = CLOSE_EVENT_CODE_INFO[code]\n  const errMsg = !info\n    ? `code ${code}`\n    : `${info.name}, code ${code}, reason ${reason || info.description}`\n  return new CloudSDKError({\n    errCode: ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED as string,\n    errMsg,\n  })\n}\n", "let wsClass = null\nlet runtime = 'web'\n\nexport function getWsClass() {\n  return wsClass\n}\nexport function setWsClass(val: any) {\n  wsClass = val\n}\n\nexport function getRuntime() {\n  return runtime\n}\nexport function setRuntime(val: string) {\n  runtime = val\n}\n", "import { VirtualWebSocketClient } from './virtual-websocket-client'\nimport { genRequestId } from './message'\nimport {\n  IDatabaseServiceContext,\n} from '@cloudbase/types/database'\nimport {\n  IWatchOptions,\n  DBRealtimeListener,\n  IRequestMessage,\n  IResponseMessage,\n  IRequestMessagePingMsg,\n  IRequestMessageLoginMsg,\n  IResponseMessageLoginResMsg,\n  IRequestMessageLoginData,\n} from '@cloudbase/types/realtime'\nimport {\n  CloseEventCode,\n  CLOSE_EVENT_CODE_INFO,\n  getWSCloseError,\n} from './ws-event'\n\nimport { ERR_CODE, TimeoutError, RealtimeErrorMessageError, CloudSDKError } from './error'\nimport { getWsClass, getRuntime } from './common'\nimport { sleep } from './utils'\n\nexport interface IRealtimeWebSocketClientConstructorOptions {\n  maxReconnect?: number\n  reconnectInterval?: number\n  context: IDatabaseServiceContext\n}\n\nexport interface ISignature {\n  envId: string\n  secretVersion: number\n  signStr: string\n  wsUrl: string\n  expireTS: number\n}\n\nexport interface ILoginInfo {\n  loggedIn: boolean\n  loggingInPromise?: Promise<ILoginResult>\n  loginStartTS?: number\n  loginResult?: ILoginResult\n}\n\nexport interface ILoginResult {\n  envId: string\n}\n\nexport interface IWSSendOptions {\n  msg: IRequestMessage\n  waitResponse?: boolean\n  // when waitResponse is set to true, if skipOnMessage is true, general onMessage handler will be skipped\n  skipOnMessage?: boolean\n  timeout?: number\n}\n\nexport interface IWSWatchOptions extends IWatchOptions {\n  envId?: string\n  collectionName: string\n  query: string\n  limit?: number\n  orderBy?: Record<string, string>\n}\n\ninterface IResolveReject {\n  resolve: (value?: any | PromiseLike<any> | undefined) => void\n  reject: (reason?: any) => void\n}\n\ninterface IResponseWaitSpec extends IResolveReject {\n  skipOnMessage?: boolean\n}\n\ninterface IWsSign {\n  signStr: string,\n  wsUrl: string,\n  secretVersion: string\n  envId: string\n  expiredTs: number\n}\n\nconst WS_READY_STATE = {\n  CONNECTING: 0,\n  OPEN: 1,\n  CLOSING: 2,\n  CLOSED: 3,\n}\n\nconst MAX_RTT_OBSERVED = 3\nconst DEFAULT_EXPECTED_EVENT_WAIT_TIME = 5000\nconst DEFAULT_UNTRUSTED_RTT_THRESHOLD = 10000\nconst DEFAULT_MAX_RECONNECT = 5\nconst DEFAULT_WS_RECONNECT_INTERVAL = 10000\n// const DEFAULT_WS_RECONNECT_MAX_VALID_INTERVAL = 3 * 60 * 1000\nconst DEFAULT_PING_FAIL_TOLERANCE = 2\nconst DEFAULT_PONG_MISS_TOLERANCE = 2\nconst DEFAULT_LOGIN_TIMEOUT = 5000\n\nexport class RealtimeWebSocketClient {\n  private virtualWSClient: Set<VirtualWebSocketClient> = new Set()\n  // after listener initWatch, the listener has the queryID and can store it here\n  private queryIdClientMap: Map<string, VirtualWebSocketClient> = new Map()\n  private watchIdClientMap: Map<string, VirtualWebSocketClient> = new Map()\n  private maxReconnect: number\n  private reconnectInterval: number\n  private context: IDatabaseServiceContext\n  private ws?: any\n  private lastPingSendTS?: number\n  private pingFailed = 0\n  private pongMissed = 0\n  private pingTimeoutId?: number\n  private pongTimeoutId?: number\n  private logins: Map<string /* envId */, ILoginInfo> = new Map()\n  private wsInitPromise?: Promise<void>\n  private wsReadySubsribers: IResolveReject[] = []\n  private wsResponseWait: Map<\n  string /* requestId */,\n  IResponseWaitSpec\n  > = new Map()\n  private rttObserved: number[] = []\n  private reconnectState: boolean\n  // obtained from the first getSignature with no envId provided\n  private wsSign: IWsSign\n\n  constructor(options: IRealtimeWebSocketClientConstructorOptions) {\n    this.maxReconnect = options.maxReconnect || DEFAULT_MAX_RECONNECT\n    this.reconnectInterval = options.reconnectInterval || DEFAULT_WS_RECONNECT_INTERVAL\n    this.context = options.context\n  }\n\n  clearHeartbeat() {\n    this.pingTimeoutId && clearTimeout(this.pingTimeoutId)\n    this.pongTimeoutId && clearTimeout(this.pongTimeoutId)\n  }\n\n  send = async <T = any>(opts: IWSSendOptions): Promise<T> => new Promise<T>((_resolve, _reject) => {\n    void (async () => {\n      let timeoutId: number\n      let hasResolved = false\n      let hasRejected = false\n\n      const resolve: typeof _resolve = (value?: T | PromiseLike<T> | undefined) => {\n        hasResolved = true\n        timeoutId && clearTimeout(timeoutId)\n        _resolve(value)\n      }\n\n      const reject: typeof _reject = (error: any) => {\n        hasRejected = true\n        timeoutId && clearTimeout(timeoutId)\n        _reject(error)\n      }\n\n      if (opts.timeout) {\n        // @ts-ignore\n        timeoutId = setTimeout(() => {\n          (async () => {\n            if (!hasResolved || !hasRejected) {\n              // wait another immediate timeout to allow the success/fail callback to be invoked if ws has already got the result,\n              // this is because the timer is registered before ws.send\n              await sleep(0)\n              if (!hasResolved || !hasRejected) {\n                reject(new TimeoutError('wsclient.send timedout'))\n              }\n            }\n          })()\n        }, opts.timeout)\n      }\n\n      try {\n        if (this.wsInitPromise !== undefined || this.wsInitPromise !== null) {\n          await this.wsInitPromise\n        }\n\n        if (!this.ws) {\n          reject(new Error('invalid state: ws connection not exists, can not send message'))\n          return\n        }\n\n        if (this.ws.readyState !== WS_READY_STATE.OPEN) {\n          reject(new Error(`ws readyState invalid: ${this.ws.readyState}, can not send message`))\n          return\n        }\n\n        if (opts.waitResponse) {\n          const respWaitSpec: IResponseWaitSpec = {\n            resolve,\n            reject,\n            skipOnMessage: opts.skipOnMessage,\n          }\n          this.wsResponseWait.set(opts.msg.requestId, respWaitSpec)\n        }\n\n        // console.log('send msg:', opts.msg)\n        try {\n          await this.ws.send(JSON.stringify(opts.msg))\n          if (!opts.waitResponse) {\n            resolve(void 0)\n          }\n        } catch (err) {\n          if (err) {\n            reject(err)\n            if (opts.waitResponse) {\n              this.wsResponseWait.delete(opts.msg.requestId)\n            }\n          }\n        }\n      } catch (e) {\n        reject(e)\n      }\n    })()\n  })\n\n  close(code: CloseEventCode) {\n    this.clearHeartbeat()\n\n    if (this.ws) {\n      this.ws.close(code, CLOSE_EVENT_CODE_INFO[code].name)\n      this.ws = undefined\n    }\n  }\n\n  closeAllClients = (error: any) => {\n    this.virtualWSClient.forEach((client) => {\n      client.closeWithError(error)\n    })\n  }\n\n  pauseClients = (clients?: Set<VirtualWebSocketClient>) => {\n    (clients || this.virtualWSClient).forEach((client) => {\n      client.pause()\n    })\n  }\n\n  resumeClients = (clients?: Set<VirtualWebSocketClient>) => {\n    (clients || this.virtualWSClient).forEach((client) => {\n      client.resume()\n    })\n  }\n\n  watch(options: IWSWatchOptions): DBRealtimeListener {\n    if (!this.ws && (this.wsInitPromise === undefined || this.wsInitPromise === null)) {\n      this.initWebSocketConnection(false)\n    }\n\n    const virtualClient = new VirtualWebSocketClient({\n      ...options,\n      send: this.send,\n      login: this.webLogin,\n      isWSConnected: this.isWSConnected,\n      onceWSConnected: this.onceWSConnected,\n      getWaitExpectedTimeoutLength: this.getWaitExpectedTimeoutLength,\n      onWatchStart: this.onWatchStart,\n      onWatchClose: this.onWatchClose,\n      debug: true,\n    })\n    this.virtualWSClient.add(virtualClient)\n    this.watchIdClientMap.set(virtualClient.watchId, virtualClient)\n    return virtualClient.listener\n  }\n\n  private initWebSocketConnection = async (\n    reconnect: boolean,\n    availableRetries: number = this.maxReconnect\n  ): Promise<void> => {\n    // 当前处于正在重连中的状态\n    if (reconnect && this.reconnectState) {\n      return // 忽略\n    }\n\n    if (reconnect) {\n      this.reconnectState = true // 重连状态开始\n    }\n\n    if (this.wsInitPromise !== undefined && this.wsInitPromise !== null) {\n      // there already exists a websocket initiation, just wait for it\n      return this.wsInitPromise\n    }\n\n    if (reconnect) {\n      this.pauseClients()\n    }\n\n    this.close(CloseEventCode.ReconnectWebSocket)\n\n    this.wsInitPromise = new Promise<void>((resolve, reject) => {\n      (async () => {\n        try {\n          const wsSign = await this.getWsSign()\n\n          await new Promise((success) => {\n            const url = wsSign.wsUrl || 'wss://tcb-ws.tencentcloudapi.com'\n            const wsClass = getWsClass()\n            /* eslint-disable-next-line */\n            this.ws = wsClass ? new wsClass(url) : new WebSocket(url)\n            success(void 0)\n          })\n\n          if (this.ws.connect) {\n            await this.ws.connect()\n          }\n\n          await this.initWebSocketEvent()\n          resolve()\n\n          if (reconnect) {\n            this.resumeClients()\n            this.reconnectState = false // 重连状态结束\n          }\n        } catch (e) {\n          console.error('[realtime] initWebSocketConnection connect fail', e)\n\n          if (availableRetries > 0) {\n            // this is an optimization, in case of network offline, we don't need to stubbornly sleep for sometime,\n            // we only need to wait for the network to be back online, this ensures minimum downtime\n            // const { isConnected } = await getNetworkStatus()\n            const isConnected = true\n\n            this.wsInitPromise = undefined\n\n            if (isConnected) {\n              await sleep(this.reconnectInterval)\n              if (reconnect) {\n                this.reconnectState = false // 重连异常也算重连状态结束\n              }\n            }\n\n            resolve(this.initWebSocketConnection(reconnect, availableRetries - 1))\n          } else {\n            reject(e)\n\n            if (reconnect) {\n              this.closeAllClients(new CloudSDKError({\n                errCode: ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WATCH_FAIL as string,\n                errMsg: e,\n              }))\n            }\n          }\n        }\n      })()\n    })\n\n    try {\n      await this.wsInitPromise\n      this.wsReadySubsribers.forEach(({ resolve }) => resolve())\n    } catch (e) {\n      this.wsReadySubsribers.forEach(({ reject }) => reject())\n    } finally {\n      this.wsInitPromise = undefined\n      this.wsReadySubsribers = []\n    }\n  }\n\n  private initWebSocketEvent = () => new Promise<void>((resolve, reject) => {\n    if (!this.ws) {\n      throw new Error('can not initWebSocketEvent, ws not exists')\n    }\n\n    let wsOpened = false\n\n    this.ws.onopen = (event) => {\n      console.warn('[realtime] ws event: open', event)\n      wsOpened = true\n      resolve()\n    }\n\n    this.ws.onerror = (event) => {\n      // all logins are invalid after disconnection\n      this.logins = new Map()\n\n      // error写进file\n\n      if (!wsOpened) {\n        console.error('[realtime] ws open failed with ws event: error', event)\n        reject(event)\n      } else {\n        console.error('[realtime] ws event: error', event)\n\n        this.clearHeartbeat()\n        this.virtualWSClient.forEach(client => client.closeWithError(new CloudSDKError({\n          errCode: ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR as string,\n          errMsg: event,\n        })))\n      }\n    }\n\n    // TODO: reconnect\n    this.ws.onclose = (closeEvent) => {\n      console.warn('[realtime] ws event: close', closeEvent)\n      // all logins are invalid after disconnection\n      this.logins = new Map()\n\n      this.clearHeartbeat()\n      switch (closeEvent.code) {\n        case CloseEventCode.ReconnectWebSocket: {\n          // just ignore\n          break\n        }\n        case CloseEventCode.NoRealtimeListeners: {\n          // quit\n          break\n        }\n        case CloseEventCode.HeartbeatPingError:\n        case CloseEventCode.HeartbeatPongTimeoutError:\n        case CloseEventCode.NormalClosure:\n        case CloseEventCode.AbnormalClosure: {\n          // Normal Closure and Abnormal Closure:\n          //   expected closure, most likely dispatched by wechat client,\n          //   since this is the status code dispatched in case of network failure,\n          //   we should retry\n\n          if (this.maxReconnect > 0) {\n            this.initWebSocketConnection(true, this.maxReconnect)\n          } else {\n            this.closeAllClients(getWSCloseError(closeEvent.code))\n          }\n          break\n        }\n        case CloseEventCode.NoAuthentication: {\n          this.closeAllClients(getWSCloseError(closeEvent.code, closeEvent.reason))\n          break\n        }\n        default: {\n          // we should retry by default\n          if (this.maxReconnect > 0) {\n            this.initWebSocketConnection(true, this.maxReconnect)\n          } else {\n            this.closeAllClients(getWSCloseError(closeEvent.code))\n          }\n        }\n      }\n    }\n\n    this.ws.onmessage = (res) => {\n      // 支付宝小程序会返回res.data.data或res.message\n      // 微信小程序返回res.data\n      const rawMsg = res.data?.data || res.data\n\n      // reset & restart heartbeat\n      this.heartbeat()\n\n      let msg: IResponseMessage\n\n      try {\n        msg = typeof rawMsg === 'string' ? JSON.parse(rawMsg as string) : rawMsg\n      } catch (e) {\n        throw new Error(`[realtime] onMessage parse res.data error: ${e}`)\n      }\n\n      if (msg.msgType === 'ERROR') {\n        // 找到当前监听，并将error返回\n        let virtualWatch = null\n        this.virtualWSClient.forEach((item) => {\n          if (item.watchId === msg.watchId) {\n            virtualWatch = item\n          }\n        })\n\n        if (virtualWatch) {\n          virtualWatch.listener.onError(msg)\n        }\n      }\n\n      const responseWaitSpec = this.wsResponseWait.get(msg.requestId)\n      if (responseWaitSpec) {\n        try {\n          if (msg.msgType === 'ERROR') {\n            responseWaitSpec.reject(new RealtimeErrorMessageError(msg))\n          } else {\n            responseWaitSpec.resolve(msg)\n          }\n        } catch (e) {\n          console.error(\n            'ws onMessage responseWaitSpec.resolve(msg) errored:',\n            e\n          )\n        } finally {\n          this.wsResponseWait.delete(msg.requestId)\n        }\n        if (responseWaitSpec.skipOnMessage) {\n          return\n        }\n      }\n\n      if (msg.msgType === 'PONG') {\n        if (this.lastPingSendTS) {\n          const rtt = Date.now() - this.lastPingSendTS\n          if (rtt > DEFAULT_UNTRUSTED_RTT_THRESHOLD) {\n            console.warn(`[realtime] untrusted rtt observed: ${rtt}`)\n            return\n          }\n          if (this.rttObserved.length >= MAX_RTT_OBSERVED) {\n            this.rttObserved.splice(\n              0,\n              this.rttObserved.length - MAX_RTT_OBSERVED + 1\n            )\n          }\n          this.rttObserved.push(rtt)\n        }\n        return\n      }\n\n      let client = msg.watchId && this.watchIdClientMap.get(msg.watchId)\n      if (client) {\n        client.onMessage(msg)\n      } else {\n        console.error(\n          `[realtime] no realtime listener found responsible for watchId ${msg.watchId}: `,\n          msg\n        )\n        switch (msg.msgType) {\n          case 'INIT_EVENT':\n          case 'NEXT_EVENT':\n          case 'CHECK_EVENT': {\n            client = this.queryIdClientMap.get(msg.msgData.queryID)\n            if (client) {\n              client.onMessage(msg)\n            }\n            break\n          }\n          default: {\n            for (const [, client] of Array.from(this.watchIdClientMap.entries())) {\n              client.onMessage(msg)\n              break\n            }\n          }\n        }\n      }\n    }\n\n    this.heartbeat()\n  })\n\n  private isWSConnected = (): boolean => Boolean(this.ws && this.ws.readyState === WS_READY_STATE.OPEN)\n\n  private onceWSConnected = async (): Promise<void> => {\n    if (this.isWSConnected()) {\n      return\n    }\n\n    if (this.wsInitPromise !== null && this.wsInitPromise !== undefined) {\n      return this.wsInitPromise\n    }\n\n    return new Promise<void>((resolve, reject) => {\n      this.wsReadySubsribers.push({\n        resolve,\n        reject,\n      })\n    })\n  }\n\n  private webLogin = async (\n    envId?: string,\n    refresh?: boolean\n  ): Promise<any> => {\n    if (!refresh) {\n      if (envId) {\n        const loginInfo = this.logins.get(envId)\n        if (loginInfo) {\n          if (loginInfo.loggedIn && loginInfo.loginResult) {\n            return loginInfo.loginResult\n          } if (loginInfo.loggingInPromise !== null && loginInfo.loggingInPromise !== undefined) {\n            return loginInfo.loggingInPromise\n          }\n        }\n      } else {\n        const emptyEnvLoginInfo = this.logins.get('')\n        if (emptyEnvLoginInfo?.loggingInPromise !== null && emptyEnvLoginInfo?.loggingInPromise !== undefined) {\n          return emptyEnvLoginInfo.loggingInPromise\n        }\n      }\n    }\n\n    const promise = new Promise<ILoginResult>((resolve, reject) => {\n      (async () => {\n        try {\n          const wsSign = await this.getWsSign()\n\n          const msgData: IRequestMessageLoginData = {\n            envId: wsSign.envId || '',\n            accessToken: '', // 已废弃字段\n            referrer: 'web',\n            sdkVersion: '',\n            dataVersion: '',\n          }\n          const loginMsg: IRequestMessageLoginMsg = {\n            watchId: undefined,\n            requestId: genRequestId(),\n            msgType: 'LOGIN',\n            msgData,\n            exMsgData: {\n              runtime: getRuntime(),\n              signStr: wsSign.signStr,\n              secretVersion: wsSign.secretVersion,\n            },\n          }\n          const loginResMsg = await this.send<IResponseMessageLoginResMsg>({\n            msg: loginMsg,\n            waitResponse: true,\n            skipOnMessage: true,\n            timeout: DEFAULT_LOGIN_TIMEOUT,\n          })\n\n          if (!loginResMsg.msgData.code) {\n            // login success\n            resolve({\n              envId: wsSign.envId,\n            })\n          } else {\n            // login failed\n            reject(new Error(`${loginResMsg.msgData.code} ${loginResMsg.msgData.message}`))\n          }\n        } catch (e) {\n          reject(e)\n        }\n      })()\n    })\n\n    let loginInfo = envId && this.logins.get(envId)\n\n    const loginStartTS = Date.now()\n\n    if (loginInfo) {\n      loginInfo.loggedIn = false\n      loginInfo.loggingInPromise = promise\n      loginInfo.loginStartTS = loginStartTS\n    } else {\n      loginInfo = {\n        loggedIn: false,\n        loggingInPromise: promise,\n        loginStartTS,\n      }\n      this.logins.set(envId || '', loginInfo)\n    }\n\n    try {\n      const loginResult = await promise\n      const curLoginInfo = envId && this.logins.get(envId)\n      if (\n        curLoginInfo\n        && curLoginInfo === loginInfo\n        && curLoginInfo.loginStartTS === loginStartTS\n      ) {\n        loginInfo.loggedIn = true\n        loginInfo.loggingInPromise = undefined\n        loginInfo.loginStartTS = undefined\n        loginInfo.loginResult = loginResult\n        return loginResult\n      } if (curLoginInfo) {\n        if (curLoginInfo.loggedIn && curLoginInfo.loginResult) {\n          return curLoginInfo.loginResult\n        } if (curLoginInfo.loggingInPromise !== null && curLoginInfo.loggingInPromise !== undefined) {\n          return curLoginInfo.loggingInPromise\n        }\n        throw new Error('ws unexpected login info')\n      } else {\n        throw new Error('ws login info reset')\n      }\n    } catch (e) {\n      loginInfo.loggedIn = false\n      loginInfo.loggingInPromise = undefined\n      loginInfo.loginStartTS = undefined\n      loginInfo.loginResult = undefined\n      throw e\n    }\n  }\n\n  private getWsSign = async (): Promise<IWsSign> => {\n    if (this.wsSign && this.wsSign.expiredTs > Date.now()) {\n      return this.wsSign\n    }\n    const expiredTs = Date.now() + 60000\n    const res = await this.context.appConfig.request.send('auth.wsWebSign', { runtime: getRuntime() })\n\n    if (res.code) {\n      throw new Error(`[tcb-js-sdk] 获取实时数据推送登录票据失败: ${res.code}`)\n    }\n\n    if (res.data) {\n      const { signStr, wsUrl, secretVersion, envId } = res.data\n      return {\n        signStr,\n        wsUrl,\n        secretVersion,\n        envId,\n        expiredTs,\n      }\n    }\n    throw new Error('[tcb-js-sdk] 获取实时数据推送登录票据失败')\n  }\n\n  private getWaitExpectedTimeoutLength = () => {\n    if (!this.rttObserved.length) {\n      return DEFAULT_EXPECTED_EVENT_WAIT_TIME\n    }\n\n    // 1.5 * RTT\n    return (\n      (this.rttObserved.reduce((acc, cur) => acc + cur)\n        / this.rttObserved.length)\n      * 1.5\n    )\n  }\n\n  private heartbeat(immediate?: boolean) {\n    this.clearHeartbeat()\n    // @ts-ignore\n    this.pingTimeoutId = setTimeout(\n      () => {\n        (\n          async () => {\n            try {\n              if (!this.ws || this.ws.readyState !== WS_READY_STATE.OPEN) {\n                // no need to ping\n                return\n              }\n\n              this.lastPingSendTS = Date.now()\n              await this.ping()\n              this.pingFailed = 0\n\n              // @ts-ignore\n              this.pongTimeoutId = setTimeout(() => {\n                console.error('pong timed out')\n                if (this.pongMissed < DEFAULT_PONG_MISS_TOLERANCE) {\n                  this.pongMissed += 1\n                  this.heartbeat(true)\n                } else {\n                  // logical perceived connection lost, even though websocket did not receive error or close event\n                  this.initWebSocketConnection(true)\n                }\n              }, this.context.appConfig.realtimePongWaitTimeout)\n            } catch (e) {\n              if (this.pingFailed < DEFAULT_PING_FAIL_TOLERANCE) {\n                this.pingFailed += 1\n                this.heartbeat()\n              } else {\n                this.close(CloseEventCode.HeartbeatPingError)\n              }\n            }\n          }\n        )()\n      },\n      immediate ? 0 : this.context.appConfig.realtimePingInterval\n    )\n  }\n\n  private ping = async () => {\n    const msg: IRequestMessagePingMsg = {\n      watchId: undefined,\n      requestId: genRequestId(),\n      msgType: 'PING',\n      msgData: null,\n    }\n    await this.send({\n      msg,\n    })\n  }\n\n  private onWatchStart = (client: VirtualWebSocketClient, queryID: string) => {\n    this.queryIdClientMap.set(queryID, client)\n  }\n\n  private onWatchClose = (client: VirtualWebSocketClient, queryID: string) => {\n    if (queryID) {\n      this.queryIdClientMap.delete(queryID)\n    }\n    this.watchIdClientMap.delete(client.watchId)\n    this.virtualWSClient.delete(client)\n\n    if (!this.virtualWSClient.size) {\n      // no more existing watch, we should release the websocket connection\n      this.close(CloseEventCode.NoRealtimeListeners)\n    }\n  }\n}\n", "import { ICloudbase } from '@cloudbase/types'\nimport { RealtimeWebSocketClient } from './websocket-client'\nimport { setWsClass, setRuntime } from './common'\nimport { ICloudbaseComponent, ICloudbaseHook } from '@cloudbase/types/component'\n\ndeclare const cloudbase: ICloudbase\n\nconst hook: ICloudbaseHook = {\n  target: 'database',\n  entity() {\n    const { adapter, runtime } = this.platform\n    setWsClass(adapter.wsClass)\n    setRuntime(runtime)\n  },\n}\n\nconst component: ICloudbaseComponent = {\n  name: 'realtime',\n  IIFE: true,\n  entity() {\n    this.prototype.wsClientClass = RealtimeWebSocketClient\n  },\n}\n\ntry {\n  cloudbase.registerComponent(component)\n  cloudbase.registerHook(hook)\n} catch (e) {}\n\nexport function registerRealtime(app: Pick<ICloudbase, 'registerComponent'|'registerHook'>) {\n  try {\n    app.registerComponent(component)\n    app.registerHook(hook)\n  } catch (e) {\n    console.warn(e)\n  }\n}\n", "import { ICloudbase } from '@cloudbase/types'\nimport { ICloudbaseComponent } from '@cloudbase/types/component'\nimport { IReportData, IAnalyticsDataItem } from '@cloudbase/types/analytics'\nimport { constants, helpers } from '@cloudbase/utilities'\n\ndeclare const cloudbase: ICloudbase\n\nconst { ERRORS, COMMUNITY_SITE_URL } = constants\nconst { catchErrorsDecorator } = helpers\n\nconst COMPONENT_NAME = 'analytics'\n\nconst reportTypes = ['mall']\n\nfunction validateAnalyticsData(data: IReportData): boolean {\n  if (Object.prototype.toString.call(data).slice(8, -1) !== 'Object') {\n    return false\n  }\n\n  const { report_data: reportData, report_type: reportType } = data\n\n  if (reportTypes.includes(reportType) === false) {\n    return false\n  }\n\n  if (Object.prototype.toString.call(reportData).slice(8, -1) !== 'Object') {\n    return false\n  }\n\n  if (reportData.action_time !== undefined && !Number.isInteger(reportData.action_time)) {\n    return false\n  }\n\n  if (typeof reportData.action_type !== 'string') {\n    return false\n  }\n  return true\n}\n\nclass CloudbaseAnalytics {\n  @catchErrorsDecorator({\n    customInfo: {\n      className: 'Cloudbase',\n      methodName: 'analytics',\n    },\n    title: '上报调用失败',\n    messages: [\n      '请确认以下各项：',\n      '  1 - 调用 analytics() 的语法或参数是否正确',\n      `如果问题依然存在，建议到官方问答社区提问或寻找帮助：${COMMUNITY_SITE_URL}`,\n    ],\n  })\n  public async analytics(requestData: IReportData) {\n    if (!validateAnalyticsData(requestData)) {\n      throw new Error(JSON.stringify({\n        code: ERRORS.INVALID_PARAMS,\n        msg: `[${COMPONENT_NAME}.analytics] invalid report data`,\n      }))\n    }\n\n    const action = 'analytics.report'\n\n    const actionTime = requestData.report_data.action_time === undefined\n      ? Math.floor(Date.now() / 1000)\n      : requestData.report_data.action_time\n    const transformData: IAnalyticsDataItem = {\n      analytics_scene: requestData.report_type,\n      analytics_data: Object.assign({}, requestData.report_data, {\n        action_time: actionTime,\n      }),\n    }\n\n    const params = {\n      requestData: transformData,\n    }\n    // @ts-ignore\n    const { request } = this\n\n    request.send(action, params)\n  }\n}\n\nconst cloudbaseAnalytics = new CloudbaseAnalytics()\n\nconst component: ICloudbaseComponent = {\n  name: COMPONENT_NAME,\n  entity: {\n    analytics: cloudbaseAnalytics.analytics,\n  },\n}\ntry {\n  cloudbase.registerComponent(component)\n} catch (e) { }\n\nexport function registerAnalytics(app: Pick<ICloudbase, 'registerComponent'>) {\n  try {\n    app.registerComponent(component)\n  } catch (e) {\n    console.warn(e)\n  }\n}\n", "/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\n\nvar WxCloudSDKError = /** @class */ (function (_super) {\n    __extends(WxCloudSDKError, _super);\n    function WxCloudSDKError(message, extra) {\n        var _this = _super.call(this, message) || this;\n        _this.name = 'WxCloudSDKError';\n        _this.code = extra === null || extra === void 0 ? void 0 : extra.code;\n        _this.requestId = extra === null || extra === void 0 ? void 0 : extra.requestId;\n        _this.originError = extra === null || extra === void 0 ? void 0 : extra.originError;\n        return _this;\n    }\n    return WxCloudSDKError;\n}(Error));\n\n/**\n * 获取全局对象 window\n *  小程序中可用, 但小程序中对象信息残缺, 无法访问 navigator 对象, ua 信息也无意义\n */\nfunction getGlobalObj() {\n    // @ts-ignore\n    return (typeof window !== 'undefined' && window) || (typeof globalThis !== 'undefined' && globalThis);\n}\n/** 获取referrer 信息, 担心小程序中报错, 故catch */\nfunction getReferrer() {\n    try {\n        var globalObj = getGlobalObj();\n        if (!globalObj)\n            return;\n        // 浏览器中\n        // @ts-ignore\n        if (typeof wx === 'undefined') {\n            // @ts-ignore\n            return getGlobalObj().location.href;\n        }\n        // 当前页面路由\n        // @ts-ignore\n        return globalObj.__wxRoute;\n    }\n    catch (_a) { }\n}\n/** 获取用户UA, 小程序中使用 getSystemInfo 替代 */\nfunction getUserAgent() {\n    var globalObj = getGlobalObj();\n    // @ts-ignore\n    if (globalObj === null || globalObj === void 0 ? void 0 : globalObj.navigator)\n        return globalObj.navigator.userAgent;\n    // 微信小程序\n    // @ts-ignore\n    if (typeof wx !== 'undefined' && wx.getSystemInfo) {\n        var ua_1;\n        // 同步接口\n        // @ts-ignore\n        wx.getSystemInfo({\n            success: function (res) {\n                if (!res)\n                    return;\n                ua_1 = ['brand', 'model', 'version', 'system', 'platform', 'SDKVersion', 'language']\n                    .map(function (k) { return \"\".concat(k, \": \").concat(res[k]); })\n                    .join(', ');\n            }\n        });\n        return ua_1;\n    }\n}\nvar VERSION = \"1.7.2\";\n\nvar callDataSource = function (_a) {\n    var dataSourceName = _a.dataSourceName, methodName = _a.methodName, params = _a.params, realMethodName = _a.realMethodName, callFunction = _a.callFunction, _b = _a.envType, envType = _b === void 0 ? 'prod' : _b, mode = _a.mode;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var result, response, requestId, error_1;\n        var _c, _d;\n        return __generator(this, function (_e) {\n            switch (_e.label) {\n                case 0:\n                    result = {\n                        data: {},\n                        requestId: ''\n                    };\n                    _e.label = 1;\n                case 1:\n                    _e.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, callFunction({\n                            name: 'lowcode-datasource',\n                            data: {\n                                dataSourceName: dataSourceName,\n                                methodName: methodName,\n                                params: params,\n                                userAgent: getUserAgent(),\n                                referrer: getReferrer(),\n                                'x-sdk-version': VERSION,\n                                /**\n                                 * todo 移除此字段\n                                 */\n                                envType: envType,\n                                mode: mode\n                            }\n                        })];\n                case 2:\n                    response = _e.sent();\n                    requestId = ((_c = response === null || response === void 0 ? void 0 : response.result) === null || _c === void 0 ? void 0 : _c.requestId) || (response === null || response === void 0 ? void 0 : response.requestId) || (response === null || response === void 0 ? void 0 : response.requestID);\n                    if (response === null || response === void 0 ? void 0 : response.result.code) {\n                        throw new WxCloudSDKError(\"\\u3010\\u9519\\u8BEF\\u3011\".concat(response === null || response === void 0 ? void 0 : response.result.message, \"\\n\\u3010\\u64CD\\u4F5C\\u3011\\u8C03\\u7528 models.\").concat(dataSourceName ? \"\".concat(dataSourceName, \".\") : \"\").concat(realMethodName, \"\\n\\u3010\\u9519\\u8BEF\\u7801\\u3011\").concat(response === null || response === void 0 ? void 0 : response.result.code, \"\\n\\u3010\\u8BF7\\u6C42ID\\u3011\").concat(requestId || 'N/A'), {\n                            code: response === null || response === void 0 ? void 0 : response.result.code,\n                            requestId: requestId\n                        });\n                    }\n                    else {\n                        result.data = ((_d = response === null || response === void 0 ? void 0 : response.result) === null || _d === void 0 ? void 0 : _d.data) || {};\n                        result.requestId = requestId;\n                    }\n                    return [3 /*break*/, 4];\n                case 3:\n                    error_1 = _e.sent();\n                    if (error_1.name === 'WxCloudSDKError') {\n                        throw error_1;\n                    }\n                    else {\n                        console.log(error_1);\n                        throw new WxCloudSDKError(\"\\u3010\\u9519\\u8BEF\\u3011\".concat(error_1.message, \"\\n      \\u3010\\u64CD\\u4F5C\\u3011\\u8C03\\u7528 models.\").concat(dataSourceName ? \"\".concat(dataSourceName, \".\") : \"\").concat(realMethodName, \"\\n      \\u3010\\u8BF7\\u6C42ID\\u3011N/A\"), {\n                            code: 'UnknownError',\n                            originError: error_1\n                        });\n                    }\n                case 4: return [2 /*return*/, result];\n            }\n        });\n    });\n};\nvar runMysqlCommand = function (_a) {\n    var sql = _a.sql, params = _a.params, config = _a.config, callFunction = _a.callFunction, _b = _a.unsafe, unsafe = _b === void 0 ? false : _b;\n    return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_c) {\n            return [2 /*return*/, callDataSource({\n                    realMethodName: '$runSQL',\n                    methodName: 'callWedaApi',\n                    params: {\n                        action: 'RunMysqlCommand',\n                        data: {\n                            sqlTemplate: sql,\n                            config: config,\n                            parameter: unsafe\n                                ? ''\n                                : Object.entries(params || {}).reduce(function (list, _a) {\n                                    var key = _a[0], value = _a[1];\n                                    if (value !== undefined) {\n                                        var type = \"OBJECT\" /* EQUERY_PARAM_TYPE.OBJECT */;\n                                        var typeofValue = typeof value;\n                                        switch (typeofValue) {\n                                            case 'boolean': {\n                                                type = \"BOOLEAN\" /* EQUERY_PARAM_TYPE.BOOLEAN */;\n                                                break;\n                                            }\n                                            case 'number': {\n                                                type = \"NUMBER\" /* EQUERY_PARAM_TYPE.NUMBER */;\n                                                break;\n                                            }\n                                            case 'string': {\n                                                type = \"STRING\" /* EQUERY_PARAM_TYPE.STRING */;\n                                                break;\n                                            }\n                                            default: {\n                                                if (Array.isArray(value)) {\n                                                    type = \"ARRAY\" /* EQUERY_PARAM_TYPE.ARRAY */;\n                                                }\n                                                else {\n                                                    type = \"OBJECT\" /* EQUERY_PARAM_TYPE.OBJECT */;\n                                                }\n                                            }\n                                        }\n                                        list.push({\n                                            key: key,\n                                            type: type,\n                                            value: type === \"STRING\" /* EQUERY_PARAM_TYPE.STRING */ ? value : JSON.stringify(value)\n                                        });\n                                    }\n                                    return list;\n                                }, []) || []\n                        }\n                    },\n                    callFunction: callFunction,\n                    mode: 'sdk'\n                })];\n        });\n    });\n};\n\nvar createRawQueryClient = function (callFunction) { return ({\n    $runSQL: function (sql, params, config) {\n        return __awaiter(this, void 0, void 0, function () {\n            var res;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, runMysqlCommand({\n                            sql: sql,\n                            params: params,\n                            config: __assign(__assign({}, config), { preparedStatements: true }),\n                            callFunction: callFunction\n                        })];\n                    case 1:\n                        res = _a.sent();\n                        return [2 /*return*/, res];\n                }\n            });\n        });\n    },\n    $runSQLRaw: function (sql, config) {\n        return __awaiter(this, void 0, void 0, function () {\n            var res;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, runMysqlCommand({\n                            sql: sql,\n                            params: [],\n                            config: __assign(__assign({}, config), { preparedStatements: false }),\n                            callFunction: callFunction\n                        })];\n                    case 1:\n                        res = _a.sent();\n                        return [2 /*return*/, res];\n                }\n            });\n        });\n    }\n}); };\n\nvar READ_DEFAULT_PARAMS = {\n    filter: {\n        where: {}\n    },\n    select: {\n        $master: true\n    }\n};\nfunction createDefaultMethod(methodName) {\n    return {\n        getUrl: function (modelName) { return \"\".concat(modelName, \"/\").concat(methodName); },\n        method: 'post'\n    };\n}\nvar HTTP_DATA_MODEL_METHODS = {\n    get: __assign(__assign({}, createDefaultMethod('get')), { defaultParams: __assign({}, READ_DEFAULT_PARAMS) }),\n    list: __assign(__assign({}, createDefaultMethod('list')), { defaultParams: __assign({}, READ_DEFAULT_PARAMS) }),\n    create: createDefaultMethod('create'),\n    createMany: createDefaultMethod('createMany'),\n    update: __assign(__assign({}, createDefaultMethod('update')), { method: 'put' }),\n    updateMany: __assign(__assign({}, createDefaultMethod('updateMany')), { method: 'put' }),\n    upsert: createDefaultMethod('upsert'),\n    \"delete\": createDefaultMethod('delete'),\n    deleteMany: createDefaultMethod('deleteMany')\n};\nvar UNKNOWN_ERROR_MESSAGE = 'Unknown error occurred';\nvar NOT_SUPPORTED_CODE = 'NotSupported';\nvar generateHTTPClient = function (callFunction, fetch, baseUrl, options) {\n    var rawQueryClient = createRawQueryClient(callFunction);\n    return new Proxy({}, {\n        get: function (_, modelName) {\n            if (typeof modelName !== 'string')\n                return undefined;\n            if (Object.prototype.hasOwnProperty.call(rawQueryClient, modelName)) {\n                return rawQueryClient[modelName];\n            }\n            return generateHTTPClientByDataSourceName(baseUrl, modelName, fetch, options);\n        }\n    });\n};\nvar createWxCloudSDKError = function (message, modelName, methodName, code, requestId) {\n    return new WxCloudSDKError(\"\\u3010\\u9519\\u8BEF\\u3011\".concat(message, \"\\n\\u3010\\u64CD\\u4F5C\\u3011\\u8C03\\u7528 models.\").concat(modelName, \".\").concat(methodName, \"\\n\\u3010\\u9519\\u8BEF\\u7801\\u3011\").concat(code, \"\\n\\u3010\\u8BF7\\u6C42ID\\u3011\").concat(requestId), {\n        code: code,\n        requestId: requestId\n    });\n};\nvar generateHTTPClientByDataSourceName = function (baseUrl, modelName, fetch, options) {\n    var client = new Proxy({}, {\n        get: function (_, methodName) {\n            if (methodName !== 'runSQLTemplate') {\n                var httpDataModelMethod_1 = HTTP_DATA_MODEL_METHODS[methodName];\n                if (!httpDataModelMethod_1) {\n                    var error = new Error(\"\\u4E0D\\u652F\\u6301\\u7684\\u64CD\\u4F5C: \".concat(methodName));\n                    throw new WxCloudSDKError(error.message || UNKNOWN_ERROR_MESSAGE, {\n                        originError: error,\n                        code: NOT_SUPPORTED_CODE,\n                        requestId: 'N/A'\n                    });\n                }\n                return function (params) {\n                    if (params === void 0) { params = {}; }\n                    return __awaiter(void 0, void 0, void 0, function () {\n                        var getUrl, method, _a, defaultParams, effectiveParams, envType, url, result, error_1;\n                        var _b;\n                        return __generator(this, function (_c) {\n                            switch (_c.label) {\n                                case 0:\n                                    getUrl = httpDataModelMethod_1.getUrl, method = httpDataModelMethod_1.method, _a = httpDataModelMethod_1.defaultParams, defaultParams = _a === void 0 ? {} : _a;\n                                    effectiveParams = Object.assign({}, defaultParams, params);\n                                    envType = effectiveParams.envType === 'pre' ? 'pre' : 'prod';\n                                    url = [baseUrl, envType, getUrl(modelName)].join('/');\n                                    _c.label = 1;\n                                case 1:\n                                    _c.trys.push([1, 3, , 4]);\n                                    return [4 /*yield*/, fetch({\n                                            url: url,\n                                            body: JSON.stringify(effectiveParams),\n                                            method: method\n                                        })];\n                                case 2:\n                                    result = _c.sent();\n                                    if (result.code) {\n                                        // 抛出错误\n                                        throw createWxCloudSDKError(result === null || result === void 0 ? void 0 : result.message, modelName, methodName, result === null || result === void 0 ? void 0 : result.code, result === null || result === void 0 ? void 0 : result.requestId);\n                                    }\n                                    if (methodName === 'get') {\n                                        // 和 callFunction 实现保持一致\n                                        Object.assign(result, { data: (_b = result.data.record) !== null && _b !== void 0 ? _b : result.data });\n                                    }\n                                    return [2 /*return*/, result];\n                                case 3:\n                                    error_1 = _c.sent();\n                                    throw new WxCloudSDKError((error_1 === null || error_1 === void 0 ? void 0 : error_1.message) || UNKNOWN_ERROR_MESSAGE, {\n                                        originError: error_1\n                                    });\n                                case 4: return [2 /*return*/];\n                            }\n                        });\n                    });\n                };\n            }\n            else {\n                if (!(options === null || options === void 0 ? void 0 : options.sqlBaseUrl)) {\n                    var error = new Error(\"\\u4E0D\\u652F\\u6301\\u7684\\u64CD\\u4F5C: \".concat(methodName));\n                    throw new WxCloudSDKError(error.message || UNKNOWN_ERROR_MESSAGE, {\n                        originError: error,\n                        code: NOT_SUPPORTED_CODE,\n                        requestId: 'N/A'\n                    });\n                }\n                return function (props) { return __awaiter(void 0, void 0, void 0, function () {\n                    var params, templateName, _envType, envType, url, parameter, result, error_2;\n                    var _a, _b, _c, _d, _e, _f, _g, _h;\n                    return __generator(this, function (_j) {\n                        switch (_j.label) {\n                            case 0:\n                                params = props.params, templateName = props.templateName, _envType = props.envType;\n                                envType = _envType === 'pre' ? 'pre' : 'prod';\n                                url = [options.sqlBaseUrl, envType, templateName, 'run'].join('/');\n                                parameter = Object.entries(params || {}).reduce(function (list, _a) {\n                                    var key = _a[0], value = _a[1];\n                                    if (value !== undefined) {\n                                        var type = \"OBJECT\" /* EQUERY_PARAM_TYPE.OBJECT */;\n                                        var typeofValue = typeof value;\n                                        switch (typeofValue) {\n                                            case 'boolean': {\n                                                type = \"BOOLEAN\" /* EQUERY_PARAM_TYPE.BOOLEAN */;\n                                                break;\n                                            }\n                                            case 'number': {\n                                                type = \"NUMBER\" /* EQUERY_PARAM_TYPE.NUMBER */;\n                                                break;\n                                            }\n                                            case 'string': {\n                                                type = \"STRING\" /* EQUERY_PARAM_TYPE.STRING */;\n                                                break;\n                                            }\n                                            default: {\n                                                if (Array.isArray(value)) {\n                                                    type = \"ARRAY\" /* EQUERY_PARAM_TYPE.ARRAY */;\n                                                }\n                                                else {\n                                                    type = \"OBJECT\" /* EQUERY_PARAM_TYPE.OBJECT */;\n                                                }\n                                            }\n                                        }\n                                        list.push({\n                                            key: key,\n                                            type: type,\n                                            value: type === \"STRING\" /* EQUERY_PARAM_TYPE.STRING */ ? value : JSON.stringify(value)\n                                        });\n                                    }\n                                    return list;\n                                }, []);\n                                _j.label = 1;\n                            case 1:\n                                _j.trys.push([1, 3, , 4]);\n                                return [4 /*yield*/, fetch({\n                                        url: url,\n                                        body: JSON.stringify({ parameter: parameter }),\n                                        method: 'POST'\n                                    })];\n                            case 2:\n                                result = _j.sent();\n                                if ((_a = result === null || result === void 0 ? void 0 : result.Response) === null || _a === void 0 ? void 0 : _a.Error) {\n                                    // 抛出错误\n                                    throw createWxCloudSDKError((_c = (_b = result === null || result === void 0 ? void 0 : result.Response) === null || _b === void 0 ? void 0 : _b.Error) === null || _c === void 0 ? void 0 : _c.Message, modelName, methodName, (_e = (_d = result === null || result === void 0 ? void 0 : result.Response) === null || _d === void 0 ? void 0 : _d.Error) === null || _e === void 0 ? void 0 : _e.Code, (_f = result === null || result === void 0 ? void 0 : result.Response) === null || _f === void 0 ? void 0 : _f.RequestId);\n                                }\n                                return [2 /*return*/, __assign(__assign({}, ((_g = result === null || result === void 0 ? void 0 : result.Response) !== null && _g !== void 0 ? _g : {})), { data: (_h = result === null || result === void 0 ? void 0 : result.Response) === null || _h === void 0 ? void 0 : _h.Data })];\n                            case 3:\n                                error_2 = _j.sent();\n                                throw new WxCloudSDKError((error_2 === null || error_2 === void 0 ? void 0 : error_2.message) || UNKNOWN_ERROR_MESSAGE, {\n                                    originError: error_2\n                                });\n                            case 4: return [2 /*return*/];\n                        }\n                    });\n                }); };\n            }\n        }\n    });\n    return client;\n};\n\nvar CRUD_METHODS = {\n    create: {\n        methodName: 'wedaCreateV2'\n    },\n    createMany: {\n        methodName: 'wedaBatchCreateV2'\n    },\n    update: {\n        methodName: 'wedaUpdateV2'\n    },\n    upsert: {\n        methodName: 'wedaUpsertV2'\n    },\n    updateMany: {\n        methodName: 'wedaBatchUpdateV2'\n    },\n    \"delete\": {\n        methodName: 'wedaDeleteV2'\n    },\n    deleteMany: {\n        methodName: 'wedaBatchDeleteV2'\n    },\n    get: {\n        methodName: 'wedaGetItemV2',\n        defaultParams: {\n            filter: {\n                where: {}\n            },\n            select: {\n                $master: true\n            }\n        }\n    },\n    list: {\n        methodName: 'wedaGetRecordsV2',\n        defaultParams: {\n            filter: {\n                where: {}\n            },\n            select: {\n                $master: true\n            }\n        }\n    }\n};\nvar generateClientByDataSourceName = function (dataSourceName, callFunction) {\n    var client = new Proxy({}, {\n        get: function (target, methodName) {\n            var operation = CRUD_METHODS[methodName];\n            if (!operation) {\n                var error = new Error(\"\\u4E0D\\u652F\\u6301\\u7684\\u64CD\\u4F5C: \".concat(methodName));\n                throw new WxCloudSDKError(error.message || 'Unknown error occurred', {\n                    originError: error,\n                    code: 'NotSupported',\n                    requestId: 'N/A'\n                });\n            }\n            return function (params) { return __awaiter(void 0, void 0, void 0, function () {\n                var effectiveParams, rawData, result, dataKey;\n                var _a;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            effectiveParams = __assign(__assign({}, (operation.defaultParams || {})), (params || {}));\n                            return [4 /*yield*/, callDataSource({\n                                    callFunction: callFunction,\n                                    dataSourceName: dataSourceName,\n                                    methodName: operation.methodName,\n                                    realMethodName: methodName,\n                                    params: effectiveParams,\n                                    envType: params === null || params === void 0 ? void 0 : params.envType\n                                })];\n                        case 1:\n                            rawData = _b.sent();\n                            result = { data: {} };\n                            dataKey = operation.responseKey;\n                            result.data = dataKey ? (_a = rawData === null || rawData === void 0 ? void 0 : rawData.data) === null || _a === void 0 ? void 0 : _a[dataKey] : rawData === null || rawData === void 0 ? void 0 : rawData.data;\n                            return [2 /*return*/, result];\n                    }\n                });\n            }); };\n        }\n    });\n    return client;\n};\n// 使用 TypeScript 的 Proxy 来定义一个动态的客户端\nvar generateClient = function (callFunction) {\n    var rawQueryClient = createRawQueryClient(callFunction);\n    return new Proxy({}, {\n        get: function (target, prop) {\n            if (typeof prop === 'string') {\n                if (Object.prototype.hasOwnProperty.call(rawQueryClient, prop)) {\n                    return rawQueryClient[prop];\n                }\n                // 返回一个函数，这个函数接受任意参数并返回一个 Promise\n                return generateClientByDataSourceName(prop, callFunction);\n            }\n        }\n    });\n};\n\n/**\n * Headers polyfill for environments without native Headers support\n * 兼容的Headers类实现\n */\n// @ts-ignore\nvar _Headers = /** @class */ (function () {\n    function _Headers(init) {\n        var _this = this;\n        this.map = new Map();\n        if (!init)\n            return;\n        if (init instanceof Headers) {\n            // 从另一个Headers实例初始化\n            init.forEach(function (value, key) {\n                _this.append(key, value);\n            });\n        }\n        else if (Array.isArray(init)) {\n            // 从二维数组初始化，如[['Content-Type', 'text/plain'], ...]\n            init.forEach(function (_a) {\n                var key = _a[0], value = _a[1];\n                _this.append(key, value);\n            });\n        }\n        else if (typeof init === 'object') {\n            // 从普通对象初始化\n            Object.keys(init).forEach(function (key) {\n                _this.append(key, init[key]);\n            });\n        }\n    }\n    /**\n     * 添加头部信息，如果已存在则追加\n     * @param name 头部名称\n     * @param value 头部值\n     */\n    _Headers.prototype.append = function (name, value) {\n        var key = name.toLowerCase();\n        var current = this.map.get(key);\n        if (current) {\n            // 如果已存在，用逗号分隔追加\n            this.map.set(key, \"\".concat(current, \", \").concat(value));\n        }\n        else {\n            this.map.set(key, String(value));\n        }\n    };\n    /**\n     * 删除指定头部\n     * @param name 头部名称\n     */\n    _Headers.prototype[\"delete\"] = function (name) {\n        this.map[\"delete\"](name.toLowerCase());\n    };\n    /**\n     * 迭代所有头部\n     * @param callback 回调函数\n     * @param thisArg 回调函数的this指向\n     */\n    _Headers.prototype.forEach = function (callback, thisArg) {\n        var _this = this;\n        this.map.forEach(function (value, key) {\n            callback.call(thisArg, value, key, _this);\n        });\n    };\n    /**\n     * 获取指定头部的值\n     * @param name 头部名称\n     * @returns 头部值，不存在则返回null\n     */\n    _Headers.prototype.get = function (name) {\n        return this.map.get(name.toLowerCase()) || null;\n    };\n    /**\n     * 检查指定头部是否存在\n     * @param name 头部名称\n     * @returns 是否存在\n     */\n    _Headers.prototype.has = function (name) {\n        return this.map.has(name.toLowerCase());\n    };\n    /**\n     * 设置头部信息，如果已存在则覆盖\n     * @param name 头部名称\n     * @param value 头部值\n     */\n    _Headers.prototype.set = function (name, value) {\n        this.map.set(name.toLowerCase(), String(value));\n    };\n    /**\n     * 生成迭代器，用于for...of循环\n     * @returns 迭代器\n     */\n    _Headers.prototype.entries = function () {\n        return this.map.entries();\n    };\n    /**\n     * 生成键名迭代器\n     * @returns 键名迭代器\n     */\n    _Headers.prototype.keys = function () {\n        return this.map.keys();\n    };\n    /**\n     * 生成值迭代器\n     * @returns 值迭代器\n     */\n    _Headers.prototype.values = function () {\n        return this.map.values();\n    };\n    /**\n     * 获取所有Set-Cookie头部值\n     * @returns Set-Cookie值的数组\n     */\n    _Headers.prototype.getSetCookie = function () {\n        var values = [];\n        this.map.forEach(function (value, key) {\n            if (key === 'set-cookie') {\n                values.push(value);\n            }\n        });\n        return values;\n    };\n    /**\n     * 转换为普通对象\n     * @returns 包含所有头部的对象\n     */\n    _Headers.prototype.toJSON = function () {\n        var obj = {};\n        this.map.forEach(function (value, key) {\n            obj[key] = value;\n        });\n        return obj;\n    };\n    /**\n     * 迭代器接口，用于for...of循环\n     */\n    _Headers.prototype[Symbol.iterator] = function () {\n        return this.entries();\n    };\n    return _Headers;\n}());\n// 自动polyfill，兼容不同环境\nif (typeof globalThis === 'object' && !globalThis.Headers) {\n    globalThis.Headers = _Headers;\n}\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction getDefaultExportFromCjs (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nvar fails$d = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n\nvar fails$c = fails$d;\n\nvar functionBindNative = !fails$c(function () {\n  // eslint-disable-next-line es/no-function-prototype-bind -- safe\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n\nvar NATIVE_BIND$3 = functionBindNative;\n\nvar FunctionPrototype$2 = Function.prototype;\nvar call$b = FunctionPrototype$2.call;\n// eslint-disable-next-line es/no-function-prototype-bind -- safe\nvar uncurryThisWithBind = NATIVE_BIND$3 && FunctionPrototype$2.bind.bind(call$b, call$b);\n\nvar functionUncurryThis = NATIVE_BIND$3 ? uncurryThisWithBind : function (fn) {\n  return function () {\n    return call$b.apply(fn, arguments);\n  };\n};\n\nvar uncurryThis$h = functionUncurryThis;\n\nvar toString$7 = uncurryThis$h({}.toString);\nvar stringSlice$3 = uncurryThis$h(''.slice);\n\nvar classofRaw$2 = function (it) {\n  return stringSlice$3(toString$7(it), 8, -1);\n};\n\nvar uncurryThis$g = functionUncurryThis;\nvar fails$b = fails$d;\nvar classof$6 = classofRaw$2;\n\nvar $Object$4 = Object;\nvar split$3 = uncurryThis$g(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar indexedObject = fails$b(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !$Object$4('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof$6(it) === 'String' ? split$3(it, '') : $Object$4(it);\n} : $Object$4;\n\n// we can't use just `it == null` since of `document.all` special case\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec\nvar isNullOrUndefined$3 = function (it) {\n  return it === null || it === undefined;\n};\n\nvar isNullOrUndefined$2 = isNullOrUndefined$3;\n\nvar $TypeError$8 = TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nvar requireObjectCoercible$3 = function (it) {\n  if (isNullOrUndefined$2(it)) throw new $TypeError$8(\"Can't call method on \" + it);\n  return it;\n};\n\n// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject$1 = indexedObject;\nvar requireObjectCoercible$2 = requireObjectCoercible$3;\n\nvar toIndexedObject$5 = function (it) {\n  return IndexedObject$1(requireObjectCoercible$2(it));\n};\n\nvar iterators = {};\n\nvar check = function (it) {\n  return it && it.Math === Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar globalThis_1 =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof commonjsGlobal == 'object' && commonjsGlobal) ||\n  check(typeof commonjsGlobal == 'object' && commonjsGlobal) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot\nvar documentAll = typeof document == 'object' && document.all;\n\n// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\n// eslint-disable-next-line unicorn/no-typeof-undefined -- required for testing\nvar isCallable$e = typeof documentAll == 'undefined' && documentAll !== undefined ? function (argument) {\n  return typeof argument == 'function' || argument === documentAll;\n} : function (argument) {\n  return typeof argument == 'function';\n};\n\nvar globalThis$e = globalThis_1;\nvar isCallable$d = isCallable$e;\n\nvar WeakMap$1 = globalThis$e.WeakMap;\n\nvar weakMapBasicDetection = isCallable$d(WeakMap$1) && /native code/.test(String(WeakMap$1));\n\nvar isCallable$c = isCallable$e;\n\nvar isObject$7 = function (it) {\n  return typeof it == 'object' ? it !== null : isCallable$c(it);\n};\n\nvar fails$a = fails$d;\n\n// Detect IE8's incomplete defineProperty implementation\nvar descriptors = !fails$a(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] !== 7;\n});\n\nvar objectDefineProperty = {};\n\nvar globalThis$d = globalThis_1;\nvar isObject$6 = isObject$7;\n\nvar document$1 = globalThis$d.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS$1 = isObject$6(document$1) && isObject$6(document$1.createElement);\n\nvar documentCreateElement$1 = function (it) {\n  return EXISTS$1 ? document$1.createElement(it) : {};\n};\n\nvar DESCRIPTORS$c = descriptors;\nvar fails$9 = fails$d;\nvar createElement = documentCreateElement$1;\n\n// Thanks to IE8 for its funny defineProperty\nvar ie8DomDefine = !DESCRIPTORS$c && !fails$9(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a !== 7;\n});\n\nvar DESCRIPTORS$b = descriptors;\nvar fails$8 = fails$d;\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nvar v8PrototypeDefineBug = DESCRIPTORS$b && fails$8(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype !== 42;\n});\n\nvar isObject$5 = isObject$7;\n\nvar $String$3 = String;\nvar $TypeError$7 = TypeError;\n\n// `Assert: Type(argument) is Object`\nvar anObject$7 = function (argument) {\n  if (isObject$5(argument)) return argument;\n  throw new $TypeError$7($String$3(argument) + ' is not an object');\n};\n\nvar NATIVE_BIND$2 = functionBindNative;\n\nvar call$a = Function.prototype.call;\n// eslint-disable-next-line es/no-function-prototype-bind -- safe\nvar functionCall = NATIVE_BIND$2 ? call$a.bind(call$a) : function () {\n  return call$a.apply(call$a, arguments);\n};\n\nvar path$3 = {};\n\nvar path$2 = path$3;\nvar globalThis$c = globalThis_1;\nvar isCallable$b = isCallable$e;\n\nvar aFunction = function (variable) {\n  return isCallable$b(variable) ? variable : undefined;\n};\n\nvar getBuiltIn$6 = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(path$2[namespace]) || aFunction(globalThis$c[namespace])\n    : path$2[namespace] && path$2[namespace][method] || globalThis$c[namespace] && globalThis$c[namespace][method];\n};\n\nvar uncurryThis$f = functionUncurryThis;\n\nvar objectIsPrototypeOf = uncurryThis$f({}.isPrototypeOf);\n\nvar globalThis$b = globalThis_1;\n\nvar navigator = globalThis$b.navigator;\nvar userAgent$1 = navigator && navigator.userAgent;\n\nvar environmentUserAgent = userAgent$1 ? String(userAgent$1) : '';\n\nvar globalThis$a = globalThis_1;\nvar userAgent = environmentUserAgent;\n\nvar process = globalThis$a.process;\nvar Deno = globalThis$a.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nvar environmentV8Version = version;\n\n/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = environmentV8Version;\nvar fails$7 = fails$d;\nvar globalThis$9 = globalThis_1;\n\nvar $String$2 = globalThis$9.String;\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nvar symbolConstructorDetection = !!Object.getOwnPropertySymbols && !fails$7(function () {\n  var symbol = Symbol('symbol detection');\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  // nb: Do not call `String` directly to avoid this being optimized out to `symbol+''` which will,\n  // of course, fail.\n  return !$String$2(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n\n/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL$1 = symbolConstructorDetection;\n\nvar useSymbolAsUid = NATIVE_SYMBOL$1 &&\n  !Symbol.sham &&\n  typeof Symbol.iterator == 'symbol';\n\nvar getBuiltIn$5 = getBuiltIn$6;\nvar isCallable$a = isCallable$e;\nvar isPrototypeOf$1 = objectIsPrototypeOf;\nvar USE_SYMBOL_AS_UID$1 = useSymbolAsUid;\n\nvar $Object$3 = Object;\n\nvar isSymbol$2 = USE_SYMBOL_AS_UID$1 ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn$5('Symbol');\n  return isCallable$a($Symbol) && isPrototypeOf$1($Symbol.prototype, $Object$3(it));\n};\n\nvar $String$1 = String;\n\nvar tryToString$2 = function (argument) {\n  try {\n    return $String$1(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n\nvar isCallable$9 = isCallable$e;\nvar tryToString$1 = tryToString$2;\n\nvar $TypeError$6 = TypeError;\n\n// `Assert: IsCallable(argument) is true`\nvar aCallable$3 = function (argument) {\n  if (isCallable$9(argument)) return argument;\n  throw new $TypeError$6(tryToString$1(argument) + ' is not a function');\n};\n\nvar aCallable$2 = aCallable$3;\nvar isNullOrUndefined$1 = isNullOrUndefined$3;\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nvar getMethod$3 = function (V, P) {\n  var func = V[P];\n  return isNullOrUndefined$1(func) ? undefined : aCallable$2(func);\n};\n\nvar call$9 = functionCall;\nvar isCallable$8 = isCallable$e;\nvar isObject$4 = isObject$7;\n\nvar $TypeError$5 = TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nvar ordinaryToPrimitive$1 = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable$8(fn = input.toString) && !isObject$4(val = call$9(fn, input))) return val;\n  if (isCallable$8(fn = input.valueOf) && !isObject$4(val = call$9(fn, input))) return val;\n  if (pref !== 'string' && isCallable$8(fn = input.toString) && !isObject$4(val = call$9(fn, input))) return val;\n  throw new $TypeError$5(\"Can't convert object to primitive value\");\n};\n\nvar sharedStore = {exports: {}};\n\nvar isPure = true;\n\nvar globalThis$8 = globalThis_1;\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty$3 = Object.defineProperty;\n\nvar defineGlobalProperty$1 = function (key, value) {\n  try {\n    defineProperty$3(globalThis$8, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    globalThis$8[key] = value;\n  } return value;\n};\n\nvar globalThis$7 = globalThis_1;\nvar defineGlobalProperty = defineGlobalProperty$1;\n\nvar SHARED = '__core-js_shared__';\nvar store$3 = sharedStore.exports = globalThis$7[SHARED] || defineGlobalProperty(SHARED, {});\n\n(store$3.versions || (store$3.versions = [])).push({\n  version: '3.45.0',\n  mode: 'pure' ,\n  copyright: '© 2014-2025 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.45.0/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n\nvar sharedStoreExports = sharedStore.exports;\n\nvar store$2 = sharedStoreExports;\n\nvar shared$3 = function (key, value) {\n  return store$2[key] || (store$2[key] = value || {});\n};\n\nvar requireObjectCoercible$1 = requireObjectCoercible$3;\n\nvar $Object$2 = Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nvar toObject$4 = function (argument) {\n  return $Object$2(requireObjectCoercible$1(argument));\n};\n\nvar uncurryThis$e = functionUncurryThis;\nvar toObject$3 = toObject$4;\n\nvar hasOwnProperty = uncurryThis$e({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\n// eslint-disable-next-line es/no-object-hasown -- safe\nvar hasOwnProperty_1 = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject$3(it), key);\n};\n\nvar uncurryThis$d = functionUncurryThis;\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString$6 = uncurryThis$d(1.1.toString);\n\nvar uid$2 = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString$6(++id + postfix, 36);\n};\n\nvar globalThis$6 = globalThis_1;\nvar shared$2 = shared$3;\nvar hasOwn$9 = hasOwnProperty_1;\nvar uid$1 = uid$2;\nvar NATIVE_SYMBOL = symbolConstructorDetection;\nvar USE_SYMBOL_AS_UID = useSymbolAsUid;\n\nvar Symbol$1 = globalThis$6.Symbol;\nvar WellKnownSymbolsStore = shared$2('wks');\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol$1['for'] || Symbol$1 : Symbol$1 && Symbol$1.withoutSetter || uid$1;\n\nvar wellKnownSymbol$a = function (name) {\n  if (!hasOwn$9(WellKnownSymbolsStore, name)) {\n    WellKnownSymbolsStore[name] = NATIVE_SYMBOL && hasOwn$9(Symbol$1, name)\n      ? Symbol$1[name]\n      : createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n\nvar call$8 = functionCall;\nvar isObject$3 = isObject$7;\nvar isSymbol$1 = isSymbol$2;\nvar getMethod$2 = getMethod$3;\nvar ordinaryToPrimitive = ordinaryToPrimitive$1;\nvar wellKnownSymbol$9 = wellKnownSymbol$a;\n\nvar $TypeError$4 = TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol$9('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nvar toPrimitive$1 = function (input, pref) {\n  if (!isObject$3(input) || isSymbol$1(input)) return input;\n  var exoticToPrim = getMethod$2(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call$8(exoticToPrim, input, pref);\n    if (!isObject$3(result) || isSymbol$1(result)) return result;\n    throw new $TypeError$4(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n\nvar toPrimitive = toPrimitive$1;\nvar isSymbol = isSymbol$2;\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nvar toPropertyKey$2 = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n\nvar DESCRIPTORS$a = descriptors;\nvar IE8_DOM_DEFINE$1 = ie8DomDefine;\nvar V8_PROTOTYPE_DEFINE_BUG$1 = v8PrototypeDefineBug;\nvar anObject$6 = anObject$7;\nvar toPropertyKey$1 = toPropertyKey$2;\n\nvar $TypeError$3 = TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor$1 = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE$1 = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nobjectDefineProperty.f = DESCRIPTORS$a ? V8_PROTOTYPE_DEFINE_BUG$1 ? function defineProperty(O, P, Attributes) {\n  anObject$6(O);\n  P = toPropertyKey$1(P);\n  anObject$6(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor$1(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE$1 in Attributes ? Attributes[CONFIGURABLE$1] : current[CONFIGURABLE$1],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject$6(O);\n  P = toPropertyKey$1(P);\n  anObject$6(Attributes);\n  if (IE8_DOM_DEFINE$1) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw new $TypeError$3('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\nvar createPropertyDescriptor$5 = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\nvar DESCRIPTORS$9 = descriptors;\nvar definePropertyModule$2 = objectDefineProperty;\nvar createPropertyDescriptor$4 = createPropertyDescriptor$5;\n\nvar createNonEnumerableProperty$4 = DESCRIPTORS$9 ? function (object, key, value) {\n  return definePropertyModule$2.f(object, key, createPropertyDescriptor$4(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\nvar shared$1 = shared$3;\nvar uid = uid$2;\n\nvar keys = shared$1('keys');\n\nvar sharedKey$3 = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n\nvar hiddenKeys$3 = {};\n\nvar NATIVE_WEAK_MAP = weakMapBasicDetection;\nvar globalThis$5 = globalThis_1;\nvar isObject$2 = isObject$7;\nvar createNonEnumerableProperty$3 = createNonEnumerableProperty$4;\nvar hasOwn$8 = hasOwnProperty_1;\nvar shared = sharedStoreExports;\nvar sharedKey$2 = sharedKey$3;\nvar hiddenKeys$2 = hiddenKeys$3;\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError$3 = globalThis$5.TypeError;\nvar WeakMap = globalThis$5.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject$2(it) || (state = get(it)).type !== TYPE) {\n      throw new TypeError$3('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store$1 = shared.state || (shared.state = new WeakMap());\n  /* eslint-disable no-self-assign -- prototype methods protection */\n  store$1.get = store$1.get;\n  store$1.has = store$1.has;\n  store$1.set = store$1.set;\n  /* eslint-enable no-self-assign -- prototype methods protection */\n  set = function (it, metadata) {\n    if (store$1.has(it)) throw new TypeError$3(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    store$1.set(it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return store$1.get(it) || {};\n  };\n  has = function (it) {\n    return store$1.has(it);\n  };\n} else {\n  var STATE = sharedKey$2('state');\n  hiddenKeys$2[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn$8(it, STATE)) throw new TypeError$3(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty$3(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn$8(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn$8(it, STATE);\n  };\n}\n\nvar internalState = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n\nvar NATIVE_BIND$1 = functionBindNative;\n\nvar FunctionPrototype$1 = Function.prototype;\nvar apply$1 = FunctionPrototype$1.apply;\nvar call$7 = FunctionPrototype$1.call;\n\n// eslint-disable-next-line es/no-function-prototype-bind, es/no-reflect -- safe\nvar functionApply = typeof Reflect == 'object' && Reflect.apply || (NATIVE_BIND$1 ? call$7.bind(apply$1) : function () {\n  return call$7.apply(apply$1, arguments);\n});\n\nvar classofRaw$1 = classofRaw$2;\nvar uncurryThis$c = functionUncurryThis;\n\nvar functionUncurryThisClause = function (fn) {\n  // Nashorn bug:\n  //   https://github.com/zloirock/core-js/issues/1128\n  //   https://github.com/zloirock/core-js/issues/1130\n  if (classofRaw$1(fn) === 'Function') return uncurryThis$c(fn);\n};\n\nvar objectGetOwnPropertyDescriptor = {};\n\nvar objectPropertyIsEnumerable = {};\n\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor$2 = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor$2 && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nobjectPropertyIsEnumerable.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor$2(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n\nvar DESCRIPTORS$8 = descriptors;\nvar call$6 = functionCall;\nvar propertyIsEnumerableModule$1 = objectPropertyIsEnumerable;\nvar createPropertyDescriptor$3 = createPropertyDescriptor$5;\nvar toIndexedObject$4 = toIndexedObject$5;\nvar toPropertyKey = toPropertyKey$2;\nvar hasOwn$7 = hasOwnProperty_1;\nvar IE8_DOM_DEFINE = ie8DomDefine;\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nobjectGetOwnPropertyDescriptor.f = DESCRIPTORS$8 ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject$4(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn$7(O, P)) return createPropertyDescriptor$3(!call$6(propertyIsEnumerableModule$1.f, O, P), O[P]);\n};\n\nvar fails$6 = fails$d;\nvar isCallable$7 = isCallable$e;\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced$1 = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value === POLYFILL ? true\n    : value === NATIVE ? false\n    : isCallable$7(detection) ? fails$6(detection)\n    : !!detection;\n};\n\nvar normalize = isForced$1.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced$1.data = {};\nvar NATIVE = isForced$1.NATIVE = 'N';\nvar POLYFILL = isForced$1.POLYFILL = 'P';\n\nvar isForced_1 = isForced$1;\n\nvar uncurryThis$b = functionUncurryThisClause;\nvar aCallable$1 = aCallable$3;\nvar NATIVE_BIND = functionBindNative;\n\nvar bind$4 = uncurryThis$b(uncurryThis$b.bind);\n\n// optional / simple context binding\nvar functionBindContext = function (fn, that) {\n  aCallable$1(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind$4(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\nvar globalThis$4 = globalThis_1;\nvar apply = functionApply;\nvar uncurryThis$a = functionUncurryThisClause;\nvar isCallable$6 = isCallable$e;\nvar getOwnPropertyDescriptor$1 = objectGetOwnPropertyDescriptor.f;\nvar isForced = isForced_1;\nvar path$1 = path$3;\nvar bind$3 = functionBindContext;\nvar createNonEnumerableProperty$2 = createNonEnumerableProperty$4;\nvar hasOwn$6 = hasOwnProperty_1;\n// add debugging info\n\n\nvar wrapConstructor = function (NativeConstructor) {\n  var Wrapper = function (a, b, c) {\n    if (this instanceof Wrapper) {\n      switch (arguments.length) {\n        case 0: return new NativeConstructor();\n        case 1: return new NativeConstructor(a);\n        case 2: return new NativeConstructor(a, b);\n      } return new NativeConstructor(a, b, c);\n    } return apply(NativeConstructor, this, arguments);\n  };\n  Wrapper.prototype = NativeConstructor.prototype;\n  return Wrapper;\n};\n\n/*\n  options.target         - name of the target object\n  options.global         - target is the global object\n  options.stat           - export as static methods of target\n  options.proto          - export as prototype methods of target\n  options.real           - real prototype method for the `pure` version\n  options.forced         - export even if the native feature is available\n  options.bind           - bind methods to the target, required for the `pure` version\n  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe         - use the simple assignment of property instead of delete + defineProperty\n  options.sham           - add a flag to not completely full polyfills\n  options.enumerable     - export as enumerable property\n  options.dontCallGetSet - prevent calling a getter on target\n  options.name           - the .name of the function if it does not match the key\n*/\nvar _export = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var PROTO = options.proto;\n\n  var nativeSource = GLOBAL ? globalThis$4 : STATIC ? globalThis$4[TARGET] : globalThis$4[TARGET] && globalThis$4[TARGET].prototype;\n\n  var target = GLOBAL ? path$1 : path$1[TARGET] || createNonEnumerableProperty$2(path$1, TARGET, {})[TARGET];\n  var targetPrototype = target.prototype;\n\n  var FORCED, USE_NATIVE, VIRTUAL_PROTOTYPE;\n  var key, sourceProperty, targetProperty, nativeProperty, resultProperty, descriptor;\n\n  for (key in source) {\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contains in native\n    USE_NATIVE = !FORCED && nativeSource && hasOwn$6(nativeSource, key);\n\n    targetProperty = target[key];\n\n    if (USE_NATIVE) if (options.dontCallGetSet) {\n      descriptor = getOwnPropertyDescriptor$1(nativeSource, key);\n      nativeProperty = descriptor && descriptor.value;\n    } else nativeProperty = nativeSource[key];\n\n    // export native or implementation\n    sourceProperty = (USE_NATIVE && nativeProperty) ? nativeProperty : source[key];\n\n    if (!FORCED && !PROTO && typeof targetProperty == typeof sourceProperty) continue;\n\n    // bind methods to global for calling from export context\n    if (options.bind && USE_NATIVE) resultProperty = bind$3(sourceProperty, globalThis$4);\n    // wrap global constructors for prevent changes in this version\n    else if (options.wrap && USE_NATIVE) resultProperty = wrapConstructor(sourceProperty);\n    // make static versions for prototype methods\n    else if (PROTO && isCallable$6(sourceProperty)) resultProperty = uncurryThis$a(sourceProperty);\n    // default case\n    else resultProperty = sourceProperty;\n\n    // add a flag to not completely full polyfills\n    if (options.sham || (sourceProperty && sourceProperty.sham) || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty$2(resultProperty, 'sham', true);\n    }\n\n    createNonEnumerableProperty$2(target, key, resultProperty);\n\n    if (PROTO) {\n      VIRTUAL_PROTOTYPE = TARGET + 'Prototype';\n      if (!hasOwn$6(path$1, VIRTUAL_PROTOTYPE)) {\n        createNonEnumerableProperty$2(path$1, VIRTUAL_PROTOTYPE, {});\n      }\n      // export virtual prototype methods\n      createNonEnumerableProperty$2(path$1[VIRTUAL_PROTOTYPE], key, sourceProperty);\n      // export real prototype methods\n      if (options.real && targetPrototype && (FORCED || !targetPrototype[key])) {\n        createNonEnumerableProperty$2(targetPrototype, key, sourceProperty);\n      }\n    }\n  }\n};\n\nvar DESCRIPTORS$7 = descriptors;\nvar hasOwn$5 = hasOwnProperty_1;\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS$7 && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn$5(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS$7 || (DESCRIPTORS$7 && getDescriptor(FunctionPrototype, 'name').configurable));\n\nvar functionName = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n\nvar objectDefineProperties = {};\n\nvar ceil = Math.ceil;\nvar floor$3 = Math.floor;\n\n// `Math.trunc` method\n// https://tc39.es/ecma262/#sec-math.trunc\n// eslint-disable-next-line es/no-math-trunc -- safe\nvar mathTrunc = Math.trunc || function trunc(x) {\n  var n = +x;\n  return (n > 0 ? floor$3 : ceil)(n);\n};\n\nvar trunc = mathTrunc;\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nvar toIntegerOrInfinity$3 = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return number !== number || number === 0 ? 0 : trunc(number);\n};\n\nvar toIntegerOrInfinity$2 = toIntegerOrInfinity$3;\n\nvar max = Math.max;\nvar min$1 = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nvar toAbsoluteIndex$2 = function (index, length) {\n  var integer = toIntegerOrInfinity$2(index);\n  return integer < 0 ? max(integer + length, 0) : min$1(integer, length);\n};\n\nvar toIntegerOrInfinity$1 = toIntegerOrInfinity$3;\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nvar toLength$1 = function (argument) {\n  var len = toIntegerOrInfinity$1(argument);\n  return len > 0 ? min(len, 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n\nvar toLength = toLength$1;\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nvar lengthOfArrayLike$2 = function (obj) {\n  return toLength(obj.length);\n};\n\nvar toIndexedObject$3 = toIndexedObject$5;\nvar toAbsoluteIndex$1 = toAbsoluteIndex$2;\nvar lengthOfArrayLike$1 = lengthOfArrayLike$2;\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod$1 = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject$3($this);\n    var length = lengthOfArrayLike$1(O);\n    if (length === 0) return !IS_INCLUDES && -1;\n    var index = toAbsoluteIndex$1(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el !== el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value !== value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nvar arrayIncludes = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod$1(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod$1(false)\n};\n\nvar uncurryThis$9 = functionUncurryThis;\nvar hasOwn$4 = hasOwnProperty_1;\nvar toIndexedObject$2 = toIndexedObject$5;\nvar indexOf = arrayIncludes.indexOf;\nvar hiddenKeys$1 = hiddenKeys$3;\n\nvar push$3 = uncurryThis$9([].push);\n\nvar objectKeysInternal = function (object, names) {\n  var O = toIndexedObject$2(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn$4(hiddenKeys$1, key) && hasOwn$4(O, key) && push$3(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn$4(O, key = names[i++])) {\n    ~indexOf(result, key) || push$3(result, key);\n  }\n  return result;\n};\n\n// IE8- don't enum bug keys\nvar enumBugKeys$2 = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n\nvar internalObjectKeys = objectKeysInternal;\nvar enumBugKeys$1 = enumBugKeys$2;\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es/no-object-keys -- safe\nvar objectKeys$2 = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys$1);\n};\n\nvar DESCRIPTORS$6 = descriptors;\nvar V8_PROTOTYPE_DEFINE_BUG = v8PrototypeDefineBug;\nvar definePropertyModule$1 = objectDefineProperty;\nvar anObject$5 = anObject$7;\nvar toIndexedObject$1 = toIndexedObject$5;\nvar objectKeys$1 = objectKeys$2;\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es/no-object-defineproperties -- safe\nobjectDefineProperties.f = DESCRIPTORS$6 && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject$5(O);\n  var props = toIndexedObject$1(Properties);\n  var keys = objectKeys$1(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule$1.f(O, key = keys[index++], props[key]);\n  return O;\n};\n\nvar getBuiltIn$4 = getBuiltIn$6;\n\nvar html$1 = getBuiltIn$4('document', 'documentElement');\n\n/* global ActiveXObject -- old IE, WSH */\nvar anObject$4 = anObject$7;\nvar definePropertiesModule = objectDefineProperties;\nvar enumBugKeys = enumBugKeys$2;\nvar hiddenKeys = hiddenKeys$3;\nvar html = html$1;\nvar documentCreateElement = documentCreateElement$1;\nvar sharedKey$1 = sharedKey$3;\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO$1 = sharedKey$1('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  // eslint-disable-next-line no-useless-assignment -- avoid memory leak\n  activeXDocument = null;\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    activeXDocument = new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = typeof document != 'undefined'\n    ? document.domain && activeXDocument\n      ? NullProtoObjectViaActiveX(activeXDocument) // old IE\n      : NullProtoObjectViaIFrame()\n    : NullProtoObjectViaActiveX(activeXDocument); // WSH\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO$1] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\n// eslint-disable-next-line es/no-object-create -- safe\nvar objectCreate = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject$4(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO$1] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);\n};\n\nvar fails$5 = fails$d;\n\nvar correctPrototypeGetter = !fails$5(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  // eslint-disable-next-line es/no-object-getprototypeof -- required for testing\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n\nvar hasOwn$3 = hasOwnProperty_1;\nvar isCallable$5 = isCallable$e;\nvar toObject$2 = toObject$4;\nvar sharedKey = sharedKey$3;\nvar CORRECT_PROTOTYPE_GETTER = correctPrototypeGetter;\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar $Object$1 = Object;\nvar ObjectPrototype = $Object$1.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n// eslint-disable-next-line es/no-object-getprototypeof -- safe\nvar objectGetPrototypeOf = CORRECT_PROTOTYPE_GETTER ? $Object$1.getPrototypeOf : function (O) {\n  var object = toObject$2(O);\n  if (hasOwn$3(object, IE_PROTO)) return object[IE_PROTO];\n  var constructor = object.constructor;\n  if (isCallable$5(constructor) && object instanceof constructor) {\n    return constructor.prototype;\n  } return object instanceof $Object$1 ? ObjectPrototype : null;\n};\n\nvar createNonEnumerableProperty$1 = createNonEnumerableProperty$4;\n\nvar defineBuiltIn$5 = function (target, key, value, options) {\n  if (options && options.enumerable) target[key] = value;\n  else createNonEnumerableProperty$1(target, key, value);\n  return target;\n};\n\nvar fails$4 = fails$d;\nvar isCallable$4 = isCallable$e;\nvar isObject$1 = isObject$7;\nvar create$2 = objectCreate;\nvar getPrototypeOf$1 = objectGetPrototypeOf;\nvar defineBuiltIn$4 = defineBuiltIn$5;\nvar wellKnownSymbol$8 = wellKnownSymbol$a;\n\nvar ITERATOR$5 = wellKnownSymbol$8('iterator');\nvar BUGGY_SAFARI_ITERATORS$1 = false;\n\n// `%IteratorPrototype%` object\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-object\nvar IteratorPrototype$1, PrototypeOfArrayIteratorPrototype, arrayIterator;\n\n/* eslint-disable es/no-array-prototype-keys -- safe */\nif ([].keys) {\n  arrayIterator = [].keys();\n  // Safari 8 has buggy iterators w/o `next`\n  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS$1 = true;\n  else {\n    PrototypeOfArrayIteratorPrototype = getPrototypeOf$1(getPrototypeOf$1(arrayIterator));\n    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype$1 = PrototypeOfArrayIteratorPrototype;\n  }\n}\n\nvar NEW_ITERATOR_PROTOTYPE = !isObject$1(IteratorPrototype$1) || fails$4(function () {\n  var test = {};\n  // FF44- legacy iterators case\n  return IteratorPrototype$1[ITERATOR$5].call(test) !== test;\n});\n\nif (NEW_ITERATOR_PROTOTYPE) IteratorPrototype$1 = {};\nelse IteratorPrototype$1 = create$2(IteratorPrototype$1);\n\n// `%IteratorPrototype%[@@iterator]()` method\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-@@iterator\nif (!isCallable$4(IteratorPrototype$1[ITERATOR$5])) {\n  defineBuiltIn$4(IteratorPrototype$1, ITERATOR$5, function () {\n    return this;\n  });\n}\n\nvar iteratorsCore = {\n  IteratorPrototype: IteratorPrototype$1,\n  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS$1\n};\n\nvar wellKnownSymbol$7 = wellKnownSymbol$a;\n\nvar TO_STRING_TAG$2 = wellKnownSymbol$7('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG$2] = 'z';\n\nvar toStringTagSupport = String(test) === '[object z]';\n\nvar TO_STRING_TAG_SUPPORT$2 = toStringTagSupport;\nvar isCallable$3 = isCallable$e;\nvar classofRaw = classofRaw$2;\nvar wellKnownSymbol$6 = wellKnownSymbol$a;\n\nvar TO_STRING_TAG$1 = wellKnownSymbol$6('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) === 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nvar classof$5 = TO_STRING_TAG_SUPPORT$2 ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG$1)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) === 'Object' && isCallable$3(O.callee) ? 'Arguments' : result;\n};\n\nvar TO_STRING_TAG_SUPPORT$1 = toStringTagSupport;\nvar classof$4 = classof$5;\n\n// `Object.prototype.toString` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.tostring\nvar objectToString = TO_STRING_TAG_SUPPORT$1 ? {}.toString : function toString() {\n  return '[object ' + classof$4(this) + ']';\n};\n\nvar TO_STRING_TAG_SUPPORT = toStringTagSupport;\nvar defineProperty$2 = objectDefineProperty.f;\nvar createNonEnumerableProperty = createNonEnumerableProperty$4;\nvar hasOwn$2 = hasOwnProperty_1;\nvar toString$5 = objectToString;\nvar wellKnownSymbol$5 = wellKnownSymbol$a;\n\nvar TO_STRING_TAG = wellKnownSymbol$5('toStringTag');\n\nvar setToStringTag$4 = function (it, TAG, STATIC, SET_METHOD) {\n  var target = STATIC ? it : it && it.prototype;\n  if (target) {\n    if (!hasOwn$2(target, TO_STRING_TAG)) {\n      defineProperty$2(target, TO_STRING_TAG, { configurable: true, value: TAG });\n    }\n    if (SET_METHOD && !TO_STRING_TAG_SUPPORT) {\n      createNonEnumerableProperty(target, 'toString', toString$5);\n    }\n  }\n};\n\nvar IteratorPrototype = iteratorsCore.IteratorPrototype;\nvar create$1 = objectCreate;\nvar createPropertyDescriptor$2 = createPropertyDescriptor$5;\nvar setToStringTag$3 = setToStringTag$4;\nvar Iterators$4 = iterators;\n\nvar returnThis$1 = function () { return this; };\n\nvar iteratorCreateConstructor = function (IteratorConstructor, NAME, next, ENUMERABLE_NEXT) {\n  var TO_STRING_TAG = NAME + ' Iterator';\n  IteratorConstructor.prototype = create$1(IteratorPrototype, { next: createPropertyDescriptor$2(+!ENUMERABLE_NEXT, next) });\n  setToStringTag$3(IteratorConstructor, TO_STRING_TAG, false, true);\n  Iterators$4[TO_STRING_TAG] = returnThis$1;\n  return IteratorConstructor;\n};\n\nvar $$5 = _export;\nvar call$5 = functionCall;\nvar FunctionName = functionName;\nvar createIteratorConstructor$1 = iteratorCreateConstructor;\nvar getPrototypeOf = objectGetPrototypeOf;\nvar setToStringTag$2 = setToStringTag$4;\nvar defineBuiltIn$3 = defineBuiltIn$5;\nvar wellKnownSymbol$4 = wellKnownSymbol$a;\nvar Iterators$3 = iterators;\nvar IteratorsCore = iteratorsCore;\n\nvar PROPER_FUNCTION_NAME = FunctionName.PROPER;\nFunctionName.CONFIGURABLE;\nIteratorsCore.IteratorPrototype;\nvar BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;\nvar ITERATOR$4 = wellKnownSymbol$4('iterator');\nvar KEYS = 'keys';\nvar VALUES = 'values';\nvar ENTRIES = 'entries';\n\nvar returnThis = function () { return this; };\n\nvar iteratorDefine = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {\n  createIteratorConstructor$1(IteratorConstructor, NAME, next);\n\n  var getIterationMethod = function (KIND) {\n    if (KIND === DEFAULT && defaultIterator) return defaultIterator;\n    if (!BUGGY_SAFARI_ITERATORS && KIND && KIND in IterablePrototype) return IterablePrototype[KIND];\n\n    switch (KIND) {\n      case KEYS: return function keys() { return new IteratorConstructor(this, KIND); };\n      case VALUES: return function values() { return new IteratorConstructor(this, KIND); };\n      case ENTRIES: return function entries() { return new IteratorConstructor(this, KIND); };\n    }\n\n    return function () { return new IteratorConstructor(this); };\n  };\n\n  var TO_STRING_TAG = NAME + ' Iterator';\n  var INCORRECT_VALUES_NAME = false;\n  var IterablePrototype = Iterable.prototype;\n  var nativeIterator = IterablePrototype[ITERATOR$4]\n    || IterablePrototype['@@iterator']\n    || DEFAULT && IterablePrototype[DEFAULT];\n  var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);\n  var anyNativeIterator = NAME === 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;\n  var CurrentIteratorPrototype, methods, KEY;\n\n  // fix native\n  if (anyNativeIterator) {\n    CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));\n    if (CurrentIteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag$2(CurrentIteratorPrototype, TO_STRING_TAG, true, true);\n      Iterators$3[TO_STRING_TAG] = returnThis;\n    }\n  }\n\n  // fix Array.prototype.{ values, @@iterator }.name in V8 / FF\n  if (PROPER_FUNCTION_NAME && DEFAULT === VALUES && nativeIterator && nativeIterator.name !== VALUES) {\n    {\n      INCORRECT_VALUES_NAME = true;\n      defaultIterator = function values() { return call$5(nativeIterator, this); };\n    }\n  }\n\n  // export additional methods\n  if (DEFAULT) {\n    methods = {\n      values: getIterationMethod(VALUES),\n      keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),\n      entries: getIterationMethod(ENTRIES)\n    };\n    if (FORCED) for (KEY in methods) {\n      if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {\n        defineBuiltIn$3(IterablePrototype, KEY, methods[KEY]);\n      }\n    } else $$5({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);\n  }\n\n  // define iterator\n  if ((FORCED) && IterablePrototype[ITERATOR$4] !== defaultIterator) {\n    defineBuiltIn$3(IterablePrototype, ITERATOR$4, defaultIterator, { name: DEFAULT });\n  }\n  Iterators$3[NAME] = defaultIterator;\n\n  return methods;\n};\n\n// `CreateIterResultObject` abstract operation\n// https://tc39.es/ecma262/#sec-createiterresultobject\nvar createIterResultObject$3 = function (value, done) {\n  return { value: value, done: done };\n};\n\nvar toIndexedObject = toIndexedObject$5;\nvar Iterators$2 = iterators;\nvar InternalStateModule$3 = internalState;\nobjectDefineProperty.f;\nvar defineIterator$1 = iteratorDefine;\nvar createIterResultObject$2 = createIterResultObject$3;\n\nvar ARRAY_ITERATOR = 'Array Iterator';\nvar setInternalState$3 = InternalStateModule$3.set;\nvar getInternalState$1 = InternalStateModule$3.getterFor(ARRAY_ITERATOR);\n\n// `Array.prototype.entries` method\n// https://tc39.es/ecma262/#sec-array.prototype.entries\n// `Array.prototype.keys` method\n// https://tc39.es/ecma262/#sec-array.prototype.keys\n// `Array.prototype.values` method\n// https://tc39.es/ecma262/#sec-array.prototype.values\n// `Array.prototype[@@iterator]` method\n// https://tc39.es/ecma262/#sec-array.prototype-@@iterator\n// `CreateArrayIterator` internal method\n// https://tc39.es/ecma262/#sec-createarrayiterator\ndefineIterator$1(Array, 'Array', function (iterated, kind) {\n  setInternalState$3(this, {\n    type: ARRAY_ITERATOR,\n    target: toIndexedObject(iterated), // target\n    index: 0,                          // next index\n    kind: kind                         // kind\n  });\n// `%ArrayIteratorPrototype%.next` method\n// https://tc39.es/ecma262/#sec-%arrayiteratorprototype%.next\n}, function () {\n  var state = getInternalState$1(this);\n  var target = state.target;\n  var index = state.index++;\n  if (!target || index >= target.length) {\n    state.target = null;\n    return createIterResultObject$2(undefined, true);\n  }\n  switch (state.kind) {\n    case 'keys': return createIterResultObject$2(index, false);\n    case 'values': return createIterResultObject$2(target[index], false);\n  } return createIterResultObject$2([index, target[index]], false);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values%\n// https://tc39.es/ecma262/#sec-createunmappedargumentsobject\n// https://tc39.es/ecma262/#sec-createmappedargumentsobject\nIterators$2.Arguments = Iterators$2.Array;\n\nvar $$4 = _export;\nvar uncurryThis$8 = functionUncurryThis;\nvar toAbsoluteIndex = toAbsoluteIndex$2;\n\nvar $RangeError$1 = RangeError;\nvar fromCharCode$2 = String.fromCharCode;\n// eslint-disable-next-line es/no-string-fromcodepoint -- required for testing\nvar $fromCodePoint = String.fromCodePoint;\nvar join$3 = uncurryThis$8([].join);\n\n// length should be 1, old FF problem\nvar INCORRECT_LENGTH = !!$fromCodePoint && $fromCodePoint.length !== 1;\n\n// `String.fromCodePoint` method\n// https://tc39.es/ecma262/#sec-string.fromcodepoint\n$$4({ target: 'String', stat: true, arity: 1, forced: INCORRECT_LENGTH }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  fromCodePoint: function fromCodePoint(x) {\n    var elements = [];\n    var length = arguments.length;\n    var i = 0;\n    var code;\n    while (length > i) {\n      code = +arguments[i++];\n      if (toAbsoluteIndex(code, 0x10FFFF) !== code) throw new $RangeError$1(code + ' is not a valid code point');\n      elements[i] = code < 0x10000\n        ? fromCharCode$2(code)\n        : fromCharCode$2(((code -= 0x10000) >> 10) + 0xD800, code % 0x400 + 0xDC00);\n    } return join$3(elements, '');\n  }\n});\n\nvar globalThis$3 = globalThis_1;\nvar DESCRIPTORS$5 = descriptors;\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Avoid NodeJS experimental warning\nvar safeGetBuiltIn$1 = function (name) {\n  if (!DESCRIPTORS$5) return globalThis$3[name];\n  var descriptor = getOwnPropertyDescriptor(globalThis$3, name);\n  return descriptor && descriptor.value;\n};\n\nvar fails$3 = fails$d;\nvar wellKnownSymbol$3 = wellKnownSymbol$a;\nvar DESCRIPTORS$4 = descriptors;\nvar IS_PURE = isPure;\n\nvar ITERATOR$3 = wellKnownSymbol$3('iterator');\n\nvar urlConstructorDetection = !fails$3(function () {\n  // eslint-disable-next-line unicorn/relative-url-style -- required for testing\n  var url = new URL('b?a=1&b=2&c=3', 'https://a');\n  var params = url.searchParams;\n  var params2 = new URLSearchParams('a=1&a=2&b=3');\n  var result = '';\n  url.pathname = 'c%20d';\n  params.forEach(function (value, key) {\n    params['delete']('b');\n    result += key + value;\n  });\n  params2['delete']('a', 2);\n  // `undefined` case is a Chromium 117 bug\n  // https://bugs.chromium.org/p/v8/issues/detail?id=14222\n  params2['delete']('b', undefined);\n  return (IS_PURE && (!url.toJSON || !params2.has('a', 1) || params2.has('a', 2) || !params2.has('a', undefined) || params2.has('b')))\n    || (!params.size && (IS_PURE || !DESCRIPTORS$4))\n    || !params.sort\n    || url.href !== 'https://a/c%20d?a=1&c=3'\n    || params.get('c') !== '3'\n    || String(new URLSearchParams('?a=1')) !== 'a=1'\n    || !params[ITERATOR$3]\n    // throws in Edge\n    || new URL('https://a@b').username !== 'a'\n    || new URLSearchParams(new URLSearchParams('a=b')).get('a') !== 'b'\n    // not punycoded in Edge\n    || new URL('https://тест').host !== 'xn--e1aybc'\n    // not escaped in Chrome 62-\n    || new URL('https://a#б').hash !== '#%D0%B1'\n    // fails in Chrome 66-\n    || result !== 'a1c3'\n    // throws in Safari\n    || new URL('https://x', undefined).host !== 'x';\n});\n\nvar defineProperty$1 = objectDefineProperty;\n\nvar defineBuiltInAccessor$2 = function (target, name, descriptor) {\n  return defineProperty$1.f(target, name, descriptor);\n};\n\nvar defineBuiltIn$2 = defineBuiltIn$5;\n\nvar defineBuiltIns$1 = function (target, src, options) {\n  for (var key in src) {\n    if (options && options.unsafe && target[key]) target[key] = src[key];\n    else defineBuiltIn$2(target, key, src[key], options);\n  } return target;\n};\n\nvar isPrototypeOf = objectIsPrototypeOf;\n\nvar $TypeError$2 = TypeError;\n\nvar anInstance$2 = function (it, Prototype) {\n  if (isPrototypeOf(Prototype, it)) return it;\n  throw new $TypeError$2('Incorrect invocation');\n};\n\nvar classof$3 = classof$5;\n\nvar $String = String;\n\nvar toString$4 = function (argument) {\n  if (classof$3(argument) === 'Symbol') throw new TypeError('Cannot convert a Symbol value to a string');\n  return $String(argument);\n};\n\nvar classof$2 = classof$5;\nvar getMethod$1 = getMethod$3;\nvar isNullOrUndefined = isNullOrUndefined$3;\nvar Iterators$1 = iterators;\nvar wellKnownSymbol$2 = wellKnownSymbol$a;\n\nvar ITERATOR$2 = wellKnownSymbol$2('iterator');\n\nvar getIteratorMethod$3 = function (it) {\n  if (!isNullOrUndefined(it)) return getMethod$1(it, ITERATOR$2)\n    || getMethod$1(it, '@@iterator')\n    || Iterators$1[classof$2(it)];\n};\n\nvar call$4 = functionCall;\nvar aCallable = aCallable$3;\nvar anObject$3 = anObject$7;\nvar tryToString = tryToString$2;\nvar getIteratorMethod$2 = getIteratorMethod$3;\n\nvar $TypeError$1 = TypeError;\n\nvar getIterator$2 = function (argument, usingIterator) {\n  var iteratorMethod = arguments.length < 2 ? getIteratorMethod$2(argument) : usingIterator;\n  if (aCallable(iteratorMethod)) return anObject$3(call$4(iteratorMethod, argument));\n  throw new $TypeError$1(tryToString(argument) + ' is not iterable');\n};\n\nvar $TypeError = TypeError;\n\nvar validateArgumentsLength$4 = function (passed, required) {\n  if (passed < required) throw new $TypeError('Not enough arguments');\n  return passed;\n};\n\nvar uncurryThis$7 = functionUncurryThis;\n\nvar arraySlice$2 = uncurryThis$7([].slice);\n\nvar arraySlice$1 = arraySlice$2;\n\nvar floor$2 = Math.floor;\n\nvar sort = function (array, comparefn) {\n  var length = array.length;\n\n  if (length < 8) {\n    // insertion sort\n    var i = 1;\n    var element, j;\n\n    while (i < length) {\n      j = i;\n      element = array[i];\n      while (j && comparefn(array[j - 1], element) > 0) {\n        array[j] = array[--j];\n      }\n      if (j !== i++) array[j] = element;\n    }\n  } else {\n    // merge sort\n    var middle = floor$2(length / 2);\n    var left = sort(arraySlice$1(array, 0, middle), comparefn);\n    var right = sort(arraySlice$1(array, middle), comparefn);\n    var llength = left.length;\n    var rlength = right.length;\n    var lindex = 0;\n    var rindex = 0;\n\n    while (lindex < llength || rindex < rlength) {\n      array[lindex + rindex] = (lindex < llength && rindex < rlength)\n        ? comparefn(left[lindex], right[rindex]) <= 0 ? left[lindex++] : right[rindex++]\n        : lindex < llength ? left[lindex++] : right[rindex++];\n    }\n  }\n\n  return array;\n};\n\nvar arraySort$1 = sort;\n\n// TODO: in core-js@4, move /modules/ dependencies to public entries for better optimization by tools like `preset-env`\n\n\nvar $$3 = _export;\nvar globalThis$2 = globalThis_1;\nvar safeGetBuiltIn = safeGetBuiltIn$1;\nvar getBuiltIn$3 = getBuiltIn$6;\nvar call$3 = functionCall;\nvar uncurryThis$6 = functionUncurryThis;\nvar DESCRIPTORS$3 = descriptors;\nvar USE_NATIVE_URL$3 = urlConstructorDetection;\nvar defineBuiltIn$1 = defineBuiltIn$5;\nvar defineBuiltInAccessor$1 = defineBuiltInAccessor$2;\nvar defineBuiltIns = defineBuiltIns$1;\nvar setToStringTag$1 = setToStringTag$4;\nvar createIteratorConstructor = iteratorCreateConstructor;\nvar InternalStateModule$2 = internalState;\nvar anInstance$1 = anInstance$2;\nvar isCallable$2 = isCallable$e;\nvar hasOwn$1 = hasOwnProperty_1;\nvar bind$2 = functionBindContext;\nvar classof$1 = classof$5;\nvar anObject$2 = anObject$7;\nvar isObject = isObject$7;\nvar $toString$1 = toString$4;\nvar create = objectCreate;\nvar createPropertyDescriptor$1 = createPropertyDescriptor$5;\nvar getIterator$1 = getIterator$2;\nvar getIteratorMethod$1 = getIteratorMethod$3;\nvar createIterResultObject$1 = createIterResultObject$3;\nvar validateArgumentsLength$3 = validateArgumentsLength$4;\nvar wellKnownSymbol$1 = wellKnownSymbol$a;\nvar arraySort = arraySort$1;\n\nvar ITERATOR$1 = wellKnownSymbol$1('iterator');\nvar URL_SEARCH_PARAMS = 'URLSearchParams';\nvar URL_SEARCH_PARAMS_ITERATOR = URL_SEARCH_PARAMS + 'Iterator';\nvar setInternalState$2 = InternalStateModule$2.set;\nvar getInternalParamsState = InternalStateModule$2.getterFor(URL_SEARCH_PARAMS);\nvar getInternalIteratorState = InternalStateModule$2.getterFor(URL_SEARCH_PARAMS_ITERATOR);\n\nvar nativeFetch = safeGetBuiltIn('fetch');\nvar NativeRequest = safeGetBuiltIn('Request');\nvar Headers$1 = safeGetBuiltIn('Headers');\nvar RequestPrototype = NativeRequest && NativeRequest.prototype;\nvar HeadersPrototype = Headers$1 && Headers$1.prototype;\nvar TypeError$2 = globalThis$2.TypeError;\nvar encodeURIComponent$1 = globalThis$2.encodeURIComponent;\nvar fromCharCode$1 = String.fromCharCode;\nvar fromCodePoint = getBuiltIn$3('String', 'fromCodePoint');\nvar $parseInt = parseInt;\nvar charAt$3 = uncurryThis$6(''.charAt);\nvar join$2 = uncurryThis$6([].join);\nvar push$2 = uncurryThis$6([].push);\nvar replace$2 = uncurryThis$6(''.replace);\nvar shift$1 = uncurryThis$6([].shift);\nvar splice = uncurryThis$6([].splice);\nvar split$2 = uncurryThis$6(''.split);\nvar stringSlice$2 = uncurryThis$6(''.slice);\nvar exec$3 = uncurryThis$6(/./.exec);\n\nvar plus = /\\+/g;\nvar FALLBACK_REPLACER = '\\uFFFD';\nvar VALID_HEX = /^[0-9a-f]+$/i;\n\nvar parseHexOctet = function (string, start) {\n  var substr = stringSlice$2(string, start, start + 2);\n  if (!exec$3(VALID_HEX, substr)) return NaN;\n\n  return $parseInt(substr, 16);\n};\n\nvar getLeadingOnes = function (octet) {\n  var count = 0;\n  for (var mask = 0x80; mask > 0 && (octet & mask) !== 0; mask >>= 1) {\n    count++;\n  }\n  return count;\n};\n\nvar utf8Decode = function (octets) {\n  var codePoint = null;\n\n  switch (octets.length) {\n    case 1:\n      codePoint = octets[0];\n      break;\n    case 2:\n      codePoint = (octets[0] & 0x1F) << 6 | (octets[1] & 0x3F);\n      break;\n    case 3:\n      codePoint = (octets[0] & 0x0F) << 12 | (octets[1] & 0x3F) << 6 | (octets[2] & 0x3F);\n      break;\n    case 4:\n      codePoint = (octets[0] & 0x07) << 18 | (octets[1] & 0x3F) << 12 | (octets[2] & 0x3F) << 6 | (octets[3] & 0x3F);\n      break;\n  }\n\n  return codePoint > 0x10FFFF ? null : codePoint;\n};\n\nvar decode = function (input) {\n  input = replace$2(input, plus, ' ');\n  var length = input.length;\n  var result = '';\n  var i = 0;\n\n  while (i < length) {\n    var decodedChar = charAt$3(input, i);\n\n    if (decodedChar === '%') {\n      if (charAt$3(input, i + 1) === '%' || i + 3 > length) {\n        result += '%';\n        i++;\n        continue;\n      }\n\n      var octet = parseHexOctet(input, i + 1);\n\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (octet !== octet) {\n        result += decodedChar;\n        i++;\n        continue;\n      }\n\n      i += 2;\n      var byteSequenceLength = getLeadingOnes(octet);\n\n      if (byteSequenceLength === 0) {\n        decodedChar = fromCharCode$1(octet);\n      } else {\n        if (byteSequenceLength === 1 || byteSequenceLength > 4) {\n          result += FALLBACK_REPLACER;\n          i++;\n          continue;\n        }\n\n        var octets = [octet];\n        var sequenceIndex = 1;\n\n        while (sequenceIndex < byteSequenceLength) {\n          i++;\n          if (i + 3 > length || charAt$3(input, i) !== '%') break;\n\n          var nextByte = parseHexOctet(input, i + 1);\n\n          // eslint-disable-next-line no-self-compare -- NaN check\n          if (nextByte !== nextByte) {\n            i += 3;\n            break;\n          }\n          if (nextByte > 191 || nextByte < 128) break;\n\n          push$2(octets, nextByte);\n          i += 2;\n          sequenceIndex++;\n        }\n\n        if (octets.length !== byteSequenceLength) {\n          result += FALLBACK_REPLACER;\n          continue;\n        }\n\n        var codePoint = utf8Decode(octets);\n        if (codePoint === null) {\n          result += FALLBACK_REPLACER;\n        } else {\n          decodedChar = fromCodePoint(codePoint);\n        }\n      }\n    }\n\n    result += decodedChar;\n    i++;\n  }\n\n  return result;\n};\n\nvar find = /[!'()~]|%20/g;\n\nvar replacements = {\n  '!': '%21',\n  \"'\": '%27',\n  '(': '%28',\n  ')': '%29',\n  '~': '%7E',\n  '%20': '+'\n};\n\nvar replacer = function (match) {\n  return replacements[match];\n};\n\nvar serialize = function (it) {\n  return replace$2(encodeURIComponent$1(it), find, replacer);\n};\n\nvar URLSearchParamsIterator = createIteratorConstructor(function Iterator(params, kind) {\n  setInternalState$2(this, {\n    type: URL_SEARCH_PARAMS_ITERATOR,\n    target: getInternalParamsState(params).entries,\n    index: 0,\n    kind: kind\n  });\n}, URL_SEARCH_PARAMS, function next() {\n  var state = getInternalIteratorState(this);\n  var target = state.target;\n  var index = state.index++;\n  if (!target || index >= target.length) {\n    state.target = null;\n    return createIterResultObject$1(undefined, true);\n  }\n  var entry = target[index];\n  switch (state.kind) {\n    case 'keys': return createIterResultObject$1(entry.key, false);\n    case 'values': return createIterResultObject$1(entry.value, false);\n  } return createIterResultObject$1([entry.key, entry.value], false);\n}, true);\n\nvar URLSearchParamsState = function (init) {\n  this.entries = [];\n  this.url = null;\n\n  if (init !== undefined) {\n    if (isObject(init)) this.parseObject(init);\n    else this.parseQuery(typeof init == 'string' ? charAt$3(init, 0) === '?' ? stringSlice$2(init, 1) : init : $toString$1(init));\n  }\n};\n\nURLSearchParamsState.prototype = {\n  type: URL_SEARCH_PARAMS,\n  bindURL: function (url) {\n    this.url = url;\n    this.update();\n  },\n  parseObject: function (object) {\n    var entries = this.entries;\n    var iteratorMethod = getIteratorMethod$1(object);\n    var iterator, next, step, entryIterator, entryNext, first, second;\n\n    if (iteratorMethod) {\n      iterator = getIterator$1(object, iteratorMethod);\n      next = iterator.next;\n      while (!(step = call$3(next, iterator)).done) {\n        entryIterator = getIterator$1(anObject$2(step.value));\n        entryNext = entryIterator.next;\n        if (\n          (first = call$3(entryNext, entryIterator)).done ||\n          (second = call$3(entryNext, entryIterator)).done ||\n          !call$3(entryNext, entryIterator).done\n        ) throw new TypeError$2('Expected sequence with length 2');\n        push$2(entries, { key: $toString$1(first.value), value: $toString$1(second.value) });\n      }\n    } else for (var key in object) if (hasOwn$1(object, key)) {\n      push$2(entries, { key: key, value: $toString$1(object[key]) });\n    }\n  },\n  parseQuery: function (query) {\n    if (query) {\n      var entries = this.entries;\n      var attributes = split$2(query, '&');\n      var index = 0;\n      var attribute, entry;\n      while (index < attributes.length) {\n        attribute = attributes[index++];\n        if (attribute.length) {\n          entry = split$2(attribute, '=');\n          push$2(entries, {\n            key: decode(shift$1(entry)),\n            value: decode(join$2(entry, '='))\n          });\n        }\n      }\n    }\n  },\n  serialize: function () {\n    var entries = this.entries;\n    var result = [];\n    var index = 0;\n    var entry;\n    while (index < entries.length) {\n      entry = entries[index++];\n      push$2(result, serialize(entry.key) + '=' + serialize(entry.value));\n    } return join$2(result, '&');\n  },\n  update: function () {\n    this.entries.length = 0;\n    this.parseQuery(this.url.query);\n  },\n  updateURL: function () {\n    if (this.url) this.url.update();\n  }\n};\n\n// `URLSearchParams` constructor\n// https://url.spec.whatwg.org/#interface-urlsearchparams\nvar URLSearchParamsConstructor = function URLSearchParams(/* init */) {\n  anInstance$1(this, URLSearchParamsPrototype);\n  var init = arguments.length > 0 ? arguments[0] : undefined;\n  var state = setInternalState$2(this, new URLSearchParamsState(init));\n  if (!DESCRIPTORS$3) this.size = state.entries.length;\n};\n\nvar URLSearchParamsPrototype = URLSearchParamsConstructor.prototype;\n\ndefineBuiltIns(URLSearchParamsPrototype, {\n  // `URLSearchParams.prototype.append` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-append\n  append: function append(name, value) {\n    var state = getInternalParamsState(this);\n    validateArgumentsLength$3(arguments.length, 2);\n    push$2(state.entries, { key: $toString$1(name), value: $toString$1(value) });\n    if (!DESCRIPTORS$3) this.length++;\n    state.updateURL();\n  },\n  // `URLSearchParams.prototype.delete` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-delete\n  'delete': function (name /* , value */) {\n    var state = getInternalParamsState(this);\n    var length = validateArgumentsLength$3(arguments.length, 1);\n    var entries = state.entries;\n    var key = $toString$1(name);\n    var $value = length < 2 ? undefined : arguments[1];\n    var value = $value === undefined ? $value : $toString$1($value);\n    var index = 0;\n    while (index < entries.length) {\n      var entry = entries[index];\n      if (entry.key === key && (value === undefined || entry.value === value)) {\n        splice(entries, index, 1);\n        if (value !== undefined) break;\n      } else index++;\n    }\n    if (!DESCRIPTORS$3) this.size = entries.length;\n    state.updateURL();\n  },\n  // `URLSearchParams.prototype.get` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-get\n  get: function get(name) {\n    var entries = getInternalParamsState(this).entries;\n    validateArgumentsLength$3(arguments.length, 1);\n    var key = $toString$1(name);\n    var index = 0;\n    for (; index < entries.length; index++) {\n      if (entries[index].key === key) return entries[index].value;\n    }\n    return null;\n  },\n  // `URLSearchParams.prototype.getAll` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-getall\n  getAll: function getAll(name) {\n    var entries = getInternalParamsState(this).entries;\n    validateArgumentsLength$3(arguments.length, 1);\n    var key = $toString$1(name);\n    var result = [];\n    var index = 0;\n    for (; index < entries.length; index++) {\n      if (entries[index].key === key) push$2(result, entries[index].value);\n    }\n    return result;\n  },\n  // `URLSearchParams.prototype.has` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-has\n  has: function has(name /* , value */) {\n    var entries = getInternalParamsState(this).entries;\n    var length = validateArgumentsLength$3(arguments.length, 1);\n    var key = $toString$1(name);\n    var $value = length < 2 ? undefined : arguments[1];\n    var value = $value === undefined ? $value : $toString$1($value);\n    var index = 0;\n    while (index < entries.length) {\n      var entry = entries[index++];\n      if (entry.key === key && (value === undefined || entry.value === value)) return true;\n    }\n    return false;\n  },\n  // `URLSearchParams.prototype.set` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-set\n  set: function set(name, value) {\n    var state = getInternalParamsState(this);\n    validateArgumentsLength$3(arguments.length, 1);\n    var entries = state.entries;\n    var found = false;\n    var key = $toString$1(name);\n    var val = $toString$1(value);\n    var index = 0;\n    var entry;\n    for (; index < entries.length; index++) {\n      entry = entries[index];\n      if (entry.key === key) {\n        if (found) splice(entries, index--, 1);\n        else {\n          found = true;\n          entry.value = val;\n        }\n      }\n    }\n    if (!found) push$2(entries, { key: key, value: val });\n    if (!DESCRIPTORS$3) this.size = entries.length;\n    state.updateURL();\n  },\n  // `URLSearchParams.prototype.sort` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-sort\n  sort: function sort() {\n    var state = getInternalParamsState(this);\n    arraySort(state.entries, function (a, b) {\n      return a.key > b.key ? 1 : -1;\n    });\n    state.updateURL();\n  },\n  // `URLSearchParams.prototype.forEach` method\n  forEach: function forEach(callback /* , thisArg */) {\n    var entries = getInternalParamsState(this).entries;\n    var boundFunction = bind$2(callback, arguments.length > 1 ? arguments[1] : undefined);\n    var index = 0;\n    var entry;\n    while (index < entries.length) {\n      entry = entries[index++];\n      boundFunction(entry.value, entry.key, this);\n    }\n  },\n  // `URLSearchParams.prototype.keys` method\n  keys: function keys() {\n    return new URLSearchParamsIterator(this, 'keys');\n  },\n  // `URLSearchParams.prototype.values` method\n  values: function values() {\n    return new URLSearchParamsIterator(this, 'values');\n  },\n  // `URLSearchParams.prototype.entries` method\n  entries: function entries() {\n    return new URLSearchParamsIterator(this, 'entries');\n  }\n}, { enumerable: true });\n\n// `URLSearchParams.prototype[@@iterator]` method\ndefineBuiltIn$1(URLSearchParamsPrototype, ITERATOR$1, URLSearchParamsPrototype.entries, { name: 'entries' });\n\n// `URLSearchParams.prototype.toString` method\n// https://url.spec.whatwg.org/#urlsearchparams-stringification-behavior\ndefineBuiltIn$1(URLSearchParamsPrototype, 'toString', function toString() {\n  return getInternalParamsState(this).serialize();\n}, { enumerable: true });\n\n// `URLSearchParams.prototype.size` getter\n// https://github.com/whatwg/url/pull/734\nif (DESCRIPTORS$3) defineBuiltInAccessor$1(URLSearchParamsPrototype, 'size', {\n  get: function size() {\n    return getInternalParamsState(this).entries.length;\n  },\n  configurable: true,\n  enumerable: true\n});\n\nsetToStringTag$1(URLSearchParamsConstructor, URL_SEARCH_PARAMS);\n\n$$3({ global: true, constructor: true, forced: !USE_NATIVE_URL$3 }, {\n  URLSearchParams: URLSearchParamsConstructor\n});\n\n// Wrap `fetch` and `Request` for correct work with polyfilled `URLSearchParams`\nif (!USE_NATIVE_URL$3 && isCallable$2(Headers$1)) {\n  var headersHas = uncurryThis$6(HeadersPrototype.has);\n  var headersSet = uncurryThis$6(HeadersPrototype.set);\n\n  var wrapRequestOptions = function (init) {\n    if (isObject(init)) {\n      var body = init.body;\n      var headers;\n      if (classof$1(body) === URL_SEARCH_PARAMS) {\n        headers = init.headers ? new Headers$1(init.headers) : new Headers$1();\n        if (!headersHas(headers, 'content-type')) {\n          headersSet(headers, 'content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n        return create(init, {\n          body: createPropertyDescriptor$1(0, $toString$1(body)),\n          headers: createPropertyDescriptor$1(0, headers)\n        });\n      }\n    } return init;\n  };\n\n  if (isCallable$2(nativeFetch)) {\n    $$3({ global: true, enumerable: true, dontCallGetSet: true, forced: true }, {\n      fetch: function fetch(input /* , init */) {\n        return nativeFetch(input, arguments.length > 1 ? wrapRequestOptions(arguments[1]) : {});\n      }\n    });\n  }\n\n  if (isCallable$2(NativeRequest)) {\n    var RequestConstructor = function Request(input /* , init */) {\n      anInstance$1(this, RequestPrototype);\n      return new NativeRequest(input, arguments.length > 1 ? wrapRequestOptions(arguments[1]) : {});\n    };\n\n    RequestPrototype.constructor = RequestConstructor;\n    RequestConstructor.prototype = RequestPrototype;\n\n    $$3({ global: true, constructor: true, dontCallGetSet: true, forced: true }, {\n      Request: RequestConstructor\n    });\n  }\n}\n\nvar web_urlSearchParams_constructor = {\n  URLSearchParams: URLSearchParamsConstructor,\n  getState: getInternalParamsState\n};\n\nvar uncurryThis$5 = functionUncurryThis;\nvar toIntegerOrInfinity = toIntegerOrInfinity$3;\nvar toString$3 = toString$4;\nvar requireObjectCoercible = requireObjectCoercible$3;\n\nvar charAt$2 = uncurryThis$5(''.charAt);\nvar charCodeAt$1 = uncurryThis$5(''.charCodeAt);\nvar stringSlice$1 = uncurryThis$5(''.slice);\n\nvar createMethod = function (CONVERT_TO_STRING) {\n  return function ($this, pos) {\n    var S = toString$3(requireObjectCoercible($this));\n    var position = toIntegerOrInfinity(pos);\n    var size = S.length;\n    var first, second;\n    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;\n    first = charCodeAt$1(S, position);\n    return first < 0xD800 || first > 0xDBFF || position + 1 === size\n      || (second = charCodeAt$1(S, position + 1)) < 0xDC00 || second > 0xDFFF\n        ? CONVERT_TO_STRING\n          ? charAt$2(S, position)\n          : first\n        : CONVERT_TO_STRING\n          ? stringSlice$1(S, position, position + 2)\n          : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;\n  };\n};\n\nvar stringMultibyte = {\n  // `String.prototype.codePointAt` method\n  // https://tc39.es/ecma262/#sec-string.prototype.codepointat\n  codeAt: createMethod(false),\n  // `String.prototype.at` method\n  // https://github.com/mathiasbynens/String.prototype.at\n  charAt: createMethod(true)\n};\n\nvar charAt$1 = stringMultibyte.charAt;\nvar toString$2 = toString$4;\nvar InternalStateModule$1 = internalState;\nvar defineIterator = iteratorDefine;\nvar createIterResultObject = createIterResultObject$3;\n\nvar STRING_ITERATOR = 'String Iterator';\nvar setInternalState$1 = InternalStateModule$1.set;\nvar getInternalState = InternalStateModule$1.getterFor(STRING_ITERATOR);\n\n// `String.prototype[@@iterator]` method\n// https://tc39.es/ecma262/#sec-string.prototype-@@iterator\ndefineIterator(String, 'String', function (iterated) {\n  setInternalState$1(this, {\n    type: STRING_ITERATOR,\n    string: toString$2(iterated),\n    index: 0\n  });\n// `%StringIteratorPrototype%.next` method\n// https://tc39.es/ecma262/#sec-%stringiteratorprototype%.next\n}, function next() {\n  var state = getInternalState(this);\n  var string = state.string;\n  var index = state.index;\n  var point;\n  if (index >= string.length) return createIterResultObject(undefined, true);\n  point = charAt$1(string, index);\n  state.index += point.length;\n  return createIterResultObject(point, false);\n});\n\nvar objectGetOwnPropertySymbols = {};\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nobjectGetOwnPropertySymbols.f = Object.getOwnPropertySymbols;\n\nvar DESCRIPTORS$2 = descriptors;\nvar uncurryThis$4 = functionUncurryThis;\nvar call$2 = functionCall;\nvar fails$2 = fails$d;\nvar objectKeys = objectKeys$2;\nvar getOwnPropertySymbolsModule = objectGetOwnPropertySymbols;\nvar propertyIsEnumerableModule = objectPropertyIsEnumerable;\nvar toObject$1 = toObject$4;\nvar IndexedObject = indexedObject;\n\n// eslint-disable-next-line es/no-object-assign -- safe\nvar $assign = Object.assign;\n// eslint-disable-next-line es/no-object-defineproperty -- required for testing\nvar defineProperty = Object.defineProperty;\nvar concat = uncurryThis$4([].concat);\n\n// `Object.assign` method\n// https://tc39.es/ecma262/#sec-object.assign\nvar objectAssign = !$assign || fails$2(function () {\n  // should have correct order of operations (Edge bug)\n  if (DESCRIPTORS$2 && $assign({ b: 1 }, $assign(defineProperty({}, 'a', {\n    enumerable: true,\n    get: function () {\n      defineProperty(this, 'b', {\n        value: 3,\n        enumerable: false\n      });\n    }\n  }), { b: 2 })).b !== 1) return true;\n  // should work with symbols and should have deterministic property order (V8 bug)\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line es/no-symbol -- safe\n  var symbol = Symbol('assign detection');\n  var alphabet = 'abcdefghijklmnopqrst';\n  A[symbol] = 7;\n  // eslint-disable-next-line es/no-array-prototype-foreach -- safe\n  alphabet.split('').forEach(function (chr) { B[chr] = chr; });\n  return $assign({}, A)[symbol] !== 7 || objectKeys($assign({}, B)).join('') !== alphabet;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars -- required for `.length`\n  var T = toObject$1(target);\n  var argumentsLength = arguments.length;\n  var index = 1;\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  var propertyIsEnumerable = propertyIsEnumerableModule.f;\n  while (argumentsLength > index) {\n    var S = IndexedObject(arguments[index++]);\n    var keys = getOwnPropertySymbols ? concat(objectKeys(S), getOwnPropertySymbols(S)) : objectKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS$2 || call$2(propertyIsEnumerable, S, key)) T[key] = S[key];\n    }\n  } return T;\n} : $assign;\n\nvar call$1 = functionCall;\nvar anObject$1 = anObject$7;\nvar getMethod = getMethod$3;\n\nvar iteratorClose$1 = function (iterator, kind, value) {\n  var innerResult, innerError;\n  anObject$1(iterator);\n  try {\n    innerResult = getMethod(iterator, 'return');\n    if (!innerResult) {\n      if (kind === 'throw') throw value;\n      return value;\n    }\n    innerResult = call$1(innerResult, iterator);\n  } catch (error) {\n    innerError = true;\n    innerResult = error;\n  }\n  if (kind === 'throw') throw value;\n  if (innerError) throw innerResult;\n  anObject$1(innerResult);\n  return value;\n};\n\nvar anObject = anObject$7;\nvar iteratorClose = iteratorClose$1;\n\n// call something on iterator step with safe closing on error\nvar callWithSafeIterationClosing$1 = function (iterator, fn, value, ENTRIES) {\n  try {\n    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);\n  } catch (error) {\n    iteratorClose(iterator, 'throw', error);\n  }\n};\n\nvar wellKnownSymbol = wellKnownSymbol$a;\nvar Iterators = iterators;\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nvar isArrayIteratorMethod$1 = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n\nvar uncurryThis$3 = functionUncurryThis;\nvar isCallable$1 = isCallable$e;\nvar store = sharedStoreExports;\n\nvar functionToString = uncurryThis$3(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable$1(store.inspectSource)) {\n  store.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nvar inspectSource$1 = store.inspectSource;\n\nvar uncurryThis$2 = functionUncurryThis;\nvar fails$1 = fails$d;\nvar isCallable = isCallable$e;\nvar classof = classof$5;\nvar getBuiltIn$2 = getBuiltIn$6;\nvar inspectSource = inspectSource$1;\n\nvar noop = function () { /* empty */ };\nvar construct = getBuiltIn$2('Reflect', 'construct');\nvar constructorRegExp = /^\\s*(?:class|function)\\b/;\nvar exec$2 = uncurryThis$2(constructorRegExp.exec);\nvar INCORRECT_TO_STRING = !constructorRegExp.test(noop);\n\nvar isConstructorModern = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  try {\n    construct(noop, [], argument);\n    return true;\n  } catch (error) {\n    return false;\n  }\n};\n\nvar isConstructorLegacy = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  switch (classof(argument)) {\n    case 'AsyncFunction':\n    case 'GeneratorFunction':\n    case 'AsyncGeneratorFunction': return false;\n  }\n  try {\n    // we can't check .prototype since constructors produced by .bind haven't it\n    // `Function#toString` throws on some built-it function in some legacy engines\n    // (for example, `DOMQuad` and similar in FF41-)\n    return INCORRECT_TO_STRING || !!exec$2(constructorRegExp, inspectSource(argument));\n  } catch (error) {\n    return true;\n  }\n};\n\nisConstructorLegacy.sham = true;\n\n// `IsConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-isconstructor\nvar isConstructor$1 = !construct || fails$1(function () {\n  var called;\n  return isConstructorModern(isConstructorModern.call)\n    || !isConstructorModern(Object)\n    || !isConstructorModern(function () { called = true; })\n    || called;\n}) ? isConstructorLegacy : isConstructorModern;\n\nvar DESCRIPTORS$1 = descriptors;\nvar definePropertyModule = objectDefineProperty;\nvar createPropertyDescriptor = createPropertyDescriptor$5;\n\nvar createProperty$1 = function (object, key, value) {\n  if (DESCRIPTORS$1) definePropertyModule.f(object, key, createPropertyDescriptor(0, value));\n  else object[key] = value;\n};\n\nvar bind$1 = functionBindContext;\nvar call = functionCall;\nvar toObject = toObject$4;\nvar callWithSafeIterationClosing = callWithSafeIterationClosing$1;\nvar isArrayIteratorMethod = isArrayIteratorMethod$1;\nvar isConstructor = isConstructor$1;\nvar lengthOfArrayLike = lengthOfArrayLike$2;\nvar createProperty = createProperty$1;\nvar getIterator = getIterator$2;\nvar getIteratorMethod = getIteratorMethod$3;\n\nvar $Array = Array;\n\n// `Array.from` method implementation\n// https://tc39.es/ecma262/#sec-array.from\nvar arrayFrom$1 = function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n  var O = toObject(arrayLike);\n  var IS_CONSTRUCTOR = isConstructor(this);\n  var argumentsLength = arguments.length;\n  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;\n  var mapping = mapfn !== undefined;\n  if (mapping) mapfn = bind$1(mapfn, argumentsLength > 2 ? arguments[2] : undefined);\n  var iteratorMethod = getIteratorMethod(O);\n  var index = 0;\n  var length, result, step, iterator, next, value;\n  // if the target is not iterable or it's an array with the default iterator - use a simple case\n  if (iteratorMethod && !(this === $Array && isArrayIteratorMethod(iteratorMethod))) {\n    result = IS_CONSTRUCTOR ? new this() : [];\n    iterator = getIterator(O, iteratorMethod);\n    next = iterator.next;\n    for (;!(step = call(next, iterator)).done; index++) {\n      value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [step.value, index], true) : step.value;\n      createProperty(result, index, value);\n    }\n  } else {\n    length = lengthOfArrayLike(O);\n    result = IS_CONSTRUCTOR ? new this(length) : $Array(length);\n    for (;length > index; index++) {\n      value = mapping ? mapfn(O[index], index) : O[index];\n      createProperty(result, index, value);\n    }\n  }\n  result.length = index;\n  return result;\n};\n\n// based on https://github.com/bestiejs/punycode.js/blob/master/punycode.js\nvar uncurryThis$1 = functionUncurryThis;\n\nvar maxInt = 2147483647; // aka. 0x7FFFFFFF or 2^31-1\nvar base = 36;\nvar tMin = 1;\nvar tMax = 26;\nvar skew = 38;\nvar damp = 700;\nvar initialBias = 72;\nvar initialN = 128; // 0x80\nvar delimiter = '-'; // '\\x2D'\nvar regexNonASCII = /[^\\0-\\u007E]/; // non-ASCII chars\nvar regexSeparators = /[.\\u3002\\uFF0E\\uFF61]/g; // RFC 3490 separators\nvar OVERFLOW_ERROR = 'Overflow: input needs wider integers to process';\nvar baseMinusTMin = base - tMin;\n\nvar $RangeError = RangeError;\nvar exec$1 = uncurryThis$1(regexSeparators.exec);\nvar floor$1 = Math.floor;\nvar fromCharCode = String.fromCharCode;\nvar charCodeAt = uncurryThis$1(''.charCodeAt);\nvar join$1 = uncurryThis$1([].join);\nvar push$1 = uncurryThis$1([].push);\nvar replace$1 = uncurryThis$1(''.replace);\nvar split$1 = uncurryThis$1(''.split);\nvar toLowerCase$1 = uncurryThis$1(''.toLowerCase);\n\n/**\n * Creates an array containing the numeric code points of each Unicode\n * character in the string. While JavaScript uses UCS-2 internally,\n * this function will convert a pair of surrogate halves (each of which\n * UCS-2 exposes as separate characters) into a single code point,\n * matching UTF-16.\n */\nvar ucs2decode = function (string) {\n  var output = [];\n  var counter = 0;\n  var length = string.length;\n  while (counter < length) {\n    var value = charCodeAt(string, counter++);\n    if (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n      // It's a high surrogate, and there is a next character.\n      var extra = charCodeAt(string, counter++);\n      if ((extra & 0xFC00) === 0xDC00) { // Low surrogate.\n        push$1(output, ((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n      } else {\n        // It's an unmatched surrogate; only append this code unit, in case the\n        // next code unit is the high surrogate of a surrogate pair.\n        push$1(output, value);\n        counter--;\n      }\n    } else {\n      push$1(output, value);\n    }\n  }\n  return output;\n};\n\n/**\n * Converts a digit/integer into a basic code point.\n */\nvar digitToBasic = function (digit) {\n  //  0..25 map to ASCII a..z or A..Z\n  // 26..35 map to ASCII 0..9\n  return digit + 22 + 75 * (digit < 26);\n};\n\n/**\n * Bias adaptation function as per section 3.4 of RFC 3492.\n * https://tools.ietf.org/html/rfc3492#section-3.4\n */\nvar adapt = function (delta, numPoints, firstTime) {\n  var k = 0;\n  delta = firstTime ? floor$1(delta / damp) : delta >> 1;\n  delta += floor$1(delta / numPoints);\n  while (delta > baseMinusTMin * tMax >> 1) {\n    delta = floor$1(delta / baseMinusTMin);\n    k += base;\n  }\n  return floor$1(k + (baseMinusTMin + 1) * delta / (delta + skew));\n};\n\n/**\n * Converts a string of Unicode symbols (e.g. a domain name label) to a\n * Punycode string of ASCII-only symbols.\n */\nvar encode = function (input) {\n  var output = [];\n\n  // Convert the input in UCS-2 to an array of Unicode code points.\n  input = ucs2decode(input);\n\n  // Cache the length.\n  var inputLength = input.length;\n\n  // Initialize the state.\n  var n = initialN;\n  var delta = 0;\n  var bias = initialBias;\n  var i, currentValue;\n\n  // Handle the basic code points.\n  for (i = 0; i < input.length; i++) {\n    currentValue = input[i];\n    if (currentValue < 0x80) {\n      push$1(output, fromCharCode(currentValue));\n    }\n  }\n\n  var basicLength = output.length; // number of basic code points.\n  var handledCPCount = basicLength; // number of code points that have been handled;\n\n  // Finish the basic string with a delimiter unless it's empty.\n  if (basicLength) {\n    push$1(output, delimiter);\n  }\n\n  // Main encoding loop:\n  while (handledCPCount < inputLength) {\n    // All non-basic code points < n have been handled already. Find the next larger one:\n    var m = maxInt;\n    for (i = 0; i < input.length; i++) {\n      currentValue = input[i];\n      if (currentValue >= n && currentValue < m) {\n        m = currentValue;\n      }\n    }\n\n    // Increase `delta` enough to advance the decoder's <n,i> state to <m,0>, but guard against overflow.\n    var handledCPCountPlusOne = handledCPCount + 1;\n    if (m - n > floor$1((maxInt - delta) / handledCPCountPlusOne)) {\n      throw new $RangeError(OVERFLOW_ERROR);\n    }\n\n    delta += (m - n) * handledCPCountPlusOne;\n    n = m;\n\n    for (i = 0; i < input.length; i++) {\n      currentValue = input[i];\n      if (currentValue < n && ++delta > maxInt) {\n        throw new $RangeError(OVERFLOW_ERROR);\n      }\n      if (currentValue === n) {\n        // Represent delta as a generalized variable-length integer.\n        var q = delta;\n        var k = base;\n        while (true) {\n          var t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;\n          if (q < t) break;\n          var qMinusT = q - t;\n          var baseMinusT = base - t;\n          push$1(output, fromCharCode(digitToBasic(t + qMinusT % baseMinusT)));\n          q = floor$1(qMinusT / baseMinusT);\n          k += base;\n        }\n\n        push$1(output, fromCharCode(digitToBasic(q)));\n        bias = adapt(delta, handledCPCountPlusOne, handledCPCount === basicLength);\n        delta = 0;\n        handledCPCount++;\n      }\n    }\n\n    delta++;\n    n++;\n  }\n  return join$1(output, '');\n};\n\nvar stringPunycodeToAscii = function (input) {\n  var encoded = [];\n  var labels = split$1(replace$1(toLowerCase$1(input), regexSeparators, '\\u002E'), '.');\n  var i, label;\n  for (i = 0; i < labels.length; i++) {\n    label = labels[i];\n    push$1(encoded, exec$1(regexNonASCII, label) ? 'xn--' + encode(label) : label);\n  }\n  return join$1(encoded, '.');\n};\n\n// TODO: in core-js@4, move /modules/ dependencies to public entries for better optimization by tools like `preset-env`\n\nvar $$2 = _export;\nvar DESCRIPTORS = descriptors;\nvar USE_NATIVE_URL$2 = urlConstructorDetection;\nvar globalThis$1 = globalThis_1;\nvar bind = functionBindContext;\nvar uncurryThis = functionUncurryThis;\nvar defineBuiltIn = defineBuiltIn$5;\nvar defineBuiltInAccessor = defineBuiltInAccessor$2;\nvar anInstance = anInstance$2;\nvar hasOwn = hasOwnProperty_1;\nvar assign = objectAssign;\nvar arrayFrom = arrayFrom$1;\nvar arraySlice = arraySlice$2;\nvar codeAt = stringMultibyte.codeAt;\nvar toASCII = stringPunycodeToAscii;\nvar $toString = toString$4;\nvar setToStringTag = setToStringTag$4;\nvar validateArgumentsLength$2 = validateArgumentsLength$4;\nvar URLSearchParamsModule = web_urlSearchParams_constructor;\nvar InternalStateModule = internalState;\n\nvar setInternalState = InternalStateModule.set;\nvar getInternalURLState = InternalStateModule.getterFor('URL');\nvar URLSearchParams$1 = URLSearchParamsModule.URLSearchParams;\nvar getInternalSearchParamsState = URLSearchParamsModule.getState;\n\nvar NativeURL = globalThis$1.URL;\nvar TypeError$1 = globalThis$1.TypeError;\nvar parseInt$1 = globalThis$1.parseInt;\nvar floor = Math.floor;\nvar pow = Math.pow;\nvar charAt = uncurryThis(''.charAt);\nvar exec = uncurryThis(/./.exec);\nvar join = uncurryThis([].join);\nvar numberToString = uncurryThis(1.1.toString);\nvar pop = uncurryThis([].pop);\nvar push = uncurryThis([].push);\nvar replace = uncurryThis(''.replace);\nvar shift = uncurryThis([].shift);\nvar split = uncurryThis(''.split);\nvar stringSlice = uncurryThis(''.slice);\nvar toLowerCase = uncurryThis(''.toLowerCase);\nvar unshift = uncurryThis([].unshift);\n\nvar INVALID_AUTHORITY = 'Invalid authority';\nvar INVALID_SCHEME = 'Invalid scheme';\nvar INVALID_HOST = 'Invalid host';\nvar INVALID_PORT = 'Invalid port';\n\nvar ALPHA = /[a-z]/i;\n// eslint-disable-next-line regexp/no-obscure-range -- safe\nvar ALPHANUMERIC = /[\\d+-.a-z]/i;\nvar DIGIT = /\\d/;\nvar HEX_START = /^0x/i;\nvar OCT = /^[0-7]+$/;\nvar DEC = /^\\d+$/;\nvar HEX = /^[\\da-f]+$/i;\n/* eslint-disable regexp/no-control-character -- safe */\nvar FORBIDDEN_HOST_CODE_POINT = /[\\0\\t\\n\\r #%/:<>?@[\\\\\\]^|]/;\nvar FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT = /[\\0\\t\\n\\r #/:<>?@[\\\\\\]^|]/;\nvar LEADING_C0_CONTROL_OR_SPACE = /^[\\u0000-\\u0020]+/;\nvar TRAILING_C0_CONTROL_OR_SPACE = /(^|[^\\u0000-\\u0020])[\\u0000-\\u0020]+$/;\nvar TAB_AND_NEW_LINE = /[\\t\\n\\r]/g;\n/* eslint-enable regexp/no-control-character -- safe */\n// eslint-disable-next-line no-unassigned-vars -- expected `undefined` value\nvar EOF;\n\n// https://url.spec.whatwg.org/#ipv4-number-parser\nvar parseIPv4 = function (input) {\n  var parts = split(input, '.');\n  var partsLength, numbers, index, part, radix, number, ipv4;\n  if (parts.length && parts[parts.length - 1] === '') {\n    parts.length--;\n  }\n  partsLength = parts.length;\n  if (partsLength > 4) return input;\n  numbers = [];\n  for (index = 0; index < partsLength; index++) {\n    part = parts[index];\n    if (part === '') return input;\n    radix = 10;\n    if (part.length > 1 && charAt(part, 0) === '0') {\n      radix = exec(HEX_START, part) ? 16 : 8;\n      part = stringSlice(part, radix === 8 ? 1 : 2);\n    }\n    if (part === '') {\n      number = 0;\n    } else {\n      if (!exec(radix === 10 ? DEC : radix === 8 ? OCT : HEX, part)) return input;\n      number = parseInt$1(part, radix);\n    }\n    push(numbers, number);\n  }\n  for (index = 0; index < partsLength; index++) {\n    number = numbers[index];\n    if (index === partsLength - 1) {\n      if (number >= pow(256, 5 - partsLength)) return null;\n    } else if (number > 255) return null;\n  }\n  ipv4 = pop(numbers);\n  for (index = 0; index < numbers.length; index++) {\n    ipv4 += numbers[index] * pow(256, 3 - index);\n  }\n  return ipv4;\n};\n\n// https://url.spec.whatwg.org/#concept-ipv6-parser\n// eslint-disable-next-line max-statements -- TODO\nvar parseIPv6 = function (input) {\n  var address = [0, 0, 0, 0, 0, 0, 0, 0];\n  var pieceIndex = 0;\n  var compress = null;\n  var pointer = 0;\n  var value, length, numbersSeen, ipv4Piece, number, swaps, swap;\n\n  var chr = function () {\n    return charAt(input, pointer);\n  };\n\n  if (chr() === ':') {\n    if (charAt(input, 1) !== ':') return;\n    pointer += 2;\n    pieceIndex++;\n    compress = pieceIndex;\n  }\n  while (chr()) {\n    if (pieceIndex === 8) return;\n    if (chr() === ':') {\n      if (compress !== null) return;\n      pointer++;\n      pieceIndex++;\n      compress = pieceIndex;\n      continue;\n    }\n    value = length = 0;\n    while (length < 4 && exec(HEX, chr())) {\n      value = value * 16 + parseInt$1(chr(), 16);\n      pointer++;\n      length++;\n    }\n    if (chr() === '.') {\n      if (length === 0) return;\n      pointer -= length;\n      if (pieceIndex > 6) return;\n      numbersSeen = 0;\n      while (chr()) {\n        ipv4Piece = null;\n        if (numbersSeen > 0) {\n          if (chr() === '.' && numbersSeen < 4) pointer++;\n          else return;\n        }\n        if (!exec(DIGIT, chr())) return;\n        while (exec(DIGIT, chr())) {\n          number = parseInt$1(chr(), 10);\n          if (ipv4Piece === null) ipv4Piece = number;\n          else if (ipv4Piece === 0) return;\n          else ipv4Piece = ipv4Piece * 10 + number;\n          if (ipv4Piece > 255) return;\n          pointer++;\n        }\n        address[pieceIndex] = address[pieceIndex] * 256 + ipv4Piece;\n        numbersSeen++;\n        if (numbersSeen === 2 || numbersSeen === 4) pieceIndex++;\n      }\n      if (numbersSeen !== 4) return;\n      break;\n    } else if (chr() === ':') {\n      pointer++;\n      if (!chr()) return;\n    } else if (chr()) return;\n    address[pieceIndex++] = value;\n  }\n  if (compress !== null) {\n    swaps = pieceIndex - compress;\n    pieceIndex = 7;\n    while (pieceIndex !== 0 && swaps > 0) {\n      swap = address[pieceIndex];\n      address[pieceIndex--] = address[compress + swaps - 1];\n      address[compress + --swaps] = swap;\n    }\n  } else if (pieceIndex !== 8) return;\n  return address;\n};\n\nvar findLongestZeroSequence = function (ipv6) {\n  var maxIndex = null;\n  var maxLength = 1;\n  var currStart = null;\n  var currLength = 0;\n  var index = 0;\n  for (; index < 8; index++) {\n    if (ipv6[index] !== 0) {\n      if (currLength > maxLength) {\n        maxIndex = currStart;\n        maxLength = currLength;\n      }\n      currStart = null;\n      currLength = 0;\n    } else {\n      if (currStart === null) currStart = index;\n      ++currLength;\n    }\n  }\n  return currLength > maxLength ? currStart : maxIndex;\n};\n\n// https://url.spec.whatwg.org/#host-serializing\nvar serializeHost = function (host) {\n  var result, index, compress, ignore0;\n\n  // ipv4\n  if (typeof host == 'number') {\n    result = [];\n    for (index = 0; index < 4; index++) {\n      unshift(result, host % 256);\n      host = floor(host / 256);\n    }\n    return join(result, '.');\n  }\n\n  // ipv6\n  if (typeof host == 'object') {\n    result = '';\n    compress = findLongestZeroSequence(host);\n    for (index = 0; index < 8; index++) {\n      if (ignore0 && host[index] === 0) continue;\n      if (ignore0) ignore0 = false;\n      if (compress === index) {\n        result += index ? ':' : '::';\n        ignore0 = true;\n      } else {\n        result += numberToString(host[index], 16);\n        if (index < 7) result += ':';\n      }\n    }\n    return '[' + result + ']';\n  }\n\n  return host;\n};\n\nvar C0ControlPercentEncodeSet = {};\nvar fragmentPercentEncodeSet = assign({}, C0ControlPercentEncodeSet, {\n  ' ': 1, '\"': 1, '<': 1, '>': 1, '`': 1\n});\nvar pathPercentEncodeSet = assign({}, fragmentPercentEncodeSet, {\n  '#': 1, '?': 1, '{': 1, '}': 1\n});\nvar userinfoPercentEncodeSet = assign({}, pathPercentEncodeSet, {\n  '/': 1, ':': 1, ';': 1, '=': 1, '@': 1, '[': 1, '\\\\': 1, ']': 1, '^': 1, '|': 1\n});\n\nvar percentEncode = function (chr, set) {\n  var code = codeAt(chr, 0);\n  return code > 0x20 && code < 0x7F && !hasOwn(set, chr) ? chr : encodeURIComponent(chr);\n};\n\n// https://url.spec.whatwg.org/#special-scheme\nvar specialSchemes = {\n  ftp: 21,\n  file: null,\n  http: 80,\n  https: 443,\n  ws: 80,\n  wss: 443\n};\n\n// https://url.spec.whatwg.org/#windows-drive-letter\nvar isWindowsDriveLetter = function (string, normalized) {\n  var second;\n  return string.length === 2 && exec(ALPHA, charAt(string, 0))\n    && ((second = charAt(string, 1)) === ':' || (!normalized && second === '|'));\n};\n\n// https://url.spec.whatwg.org/#start-with-a-windows-drive-letter\nvar startsWithWindowsDriveLetter = function (string) {\n  var third;\n  return string.length > 1 && isWindowsDriveLetter(stringSlice(string, 0, 2)) && (\n    string.length === 2 ||\n    ((third = charAt(string, 2)) === '/' || third === '\\\\' || third === '?' || third === '#')\n  );\n};\n\n// https://url.spec.whatwg.org/#single-dot-path-segment\nvar isSingleDot = function (segment) {\n  return segment === '.' || toLowerCase(segment) === '%2e';\n};\n\n// https://url.spec.whatwg.org/#double-dot-path-segment\nvar isDoubleDot = function (segment) {\n  segment = toLowerCase(segment);\n  return segment === '..' || segment === '%2e.' || segment === '.%2e' || segment === '%2e%2e';\n};\n\n// States:\nvar SCHEME_START = {};\nvar SCHEME = {};\nvar NO_SCHEME = {};\nvar SPECIAL_RELATIVE_OR_AUTHORITY = {};\nvar PATH_OR_AUTHORITY = {};\nvar RELATIVE = {};\nvar RELATIVE_SLASH = {};\nvar SPECIAL_AUTHORITY_SLASHES = {};\nvar SPECIAL_AUTHORITY_IGNORE_SLASHES = {};\nvar AUTHORITY = {};\nvar HOST = {};\nvar HOSTNAME = {};\nvar PORT = {};\nvar FILE = {};\nvar FILE_SLASH = {};\nvar FILE_HOST = {};\nvar PATH_START = {};\nvar PATH = {};\nvar CANNOT_BE_A_BASE_URL_PATH = {};\nvar QUERY = {};\nvar FRAGMENT = {};\n\nvar URLState = function (url, isBase, base) {\n  var urlString = $toString(url);\n  var baseState, failure, searchParams;\n  if (isBase) {\n    failure = this.parse(urlString);\n    if (failure) throw new TypeError$1(failure);\n    this.searchParams = null;\n  } else {\n    if (base !== undefined) baseState = new URLState(base, true);\n    failure = this.parse(urlString, null, baseState);\n    if (failure) throw new TypeError$1(failure);\n    searchParams = getInternalSearchParamsState(new URLSearchParams$1());\n    searchParams.bindURL(this);\n    this.searchParams = searchParams;\n  }\n};\n\nURLState.prototype = {\n  type: 'URL',\n  // https://url.spec.whatwg.org/#url-parsing\n  // eslint-disable-next-line max-statements -- TODO\n  parse: function (input, stateOverride, base) {\n    var url = this;\n    var state = stateOverride || SCHEME_START;\n    var pointer = 0;\n    var buffer = '';\n    var seenAt = false;\n    var seenBracket = false;\n    var seenPasswordToken = false;\n    var codePoints, chr, bufferCodePoints, failure;\n\n    input = $toString(input);\n\n    if (!stateOverride) {\n      url.scheme = '';\n      url.username = '';\n      url.password = '';\n      url.host = null;\n      url.port = null;\n      url.path = [];\n      url.query = null;\n      url.fragment = null;\n      url.cannotBeABaseURL = false;\n      input = replace(input, LEADING_C0_CONTROL_OR_SPACE, '');\n      input = replace(input, TRAILING_C0_CONTROL_OR_SPACE, '$1');\n    }\n\n    input = replace(input, TAB_AND_NEW_LINE, '');\n\n    codePoints = arrayFrom(input);\n\n    while (pointer <= codePoints.length) {\n      chr = codePoints[pointer];\n      switch (state) {\n        case SCHEME_START:\n          if (chr && exec(ALPHA, chr)) {\n            buffer += toLowerCase(chr);\n            state = SCHEME;\n          } else if (!stateOverride) {\n            state = NO_SCHEME;\n            continue;\n          } else return INVALID_SCHEME;\n          break;\n\n        case SCHEME:\n          if (chr && (exec(ALPHANUMERIC, chr) || chr === '+' || chr === '-' || chr === '.')) {\n            buffer += toLowerCase(chr);\n          } else if (chr === ':') {\n            if (stateOverride && (\n              (url.isSpecial() !== hasOwn(specialSchemes, buffer)) ||\n              (buffer === 'file' && (url.includesCredentials() || url.port !== null)) ||\n              (url.scheme === 'file' && !url.host)\n            )) return;\n            url.scheme = buffer;\n            if (stateOverride) {\n              if (url.isSpecial() && specialSchemes[url.scheme] === url.port) url.port = null;\n              return;\n            }\n            buffer = '';\n            if (url.scheme === 'file') {\n              state = FILE;\n            } else if (url.isSpecial() && base && base.scheme === url.scheme) {\n              state = SPECIAL_RELATIVE_OR_AUTHORITY;\n            } else if (url.isSpecial()) {\n              state = SPECIAL_AUTHORITY_SLASHES;\n            } else if (codePoints[pointer + 1] === '/') {\n              state = PATH_OR_AUTHORITY;\n              pointer++;\n            } else {\n              url.cannotBeABaseURL = true;\n              push(url.path, '');\n              state = CANNOT_BE_A_BASE_URL_PATH;\n            }\n          } else if (!stateOverride) {\n            buffer = '';\n            state = NO_SCHEME;\n            pointer = 0;\n            continue;\n          } else return INVALID_SCHEME;\n          break;\n\n        case NO_SCHEME:\n          if (!base || (base.cannotBeABaseURL && chr !== '#')) return INVALID_SCHEME;\n          if (base.cannotBeABaseURL && chr === '#') {\n            url.scheme = base.scheme;\n            url.path = arraySlice(base.path);\n            url.query = base.query;\n            url.fragment = '';\n            url.cannotBeABaseURL = true;\n            state = FRAGMENT;\n            break;\n          }\n          state = base.scheme === 'file' ? FILE : RELATIVE;\n          continue;\n\n        case SPECIAL_RELATIVE_OR_AUTHORITY:\n          if (chr === '/' && codePoints[pointer + 1] === '/') {\n            state = SPECIAL_AUTHORITY_IGNORE_SLASHES;\n            pointer++;\n          } else {\n            state = RELATIVE;\n            continue;\n          } break;\n\n        case PATH_OR_AUTHORITY:\n          if (chr === '/') {\n            state = AUTHORITY;\n            break;\n          } else {\n            state = PATH;\n            continue;\n          }\n\n        case RELATIVE:\n          url.scheme = base.scheme;\n          if (chr === EOF) {\n            url.username = base.username;\n            url.password = base.password;\n            url.host = base.host;\n            url.port = base.port;\n            url.path = arraySlice(base.path);\n            url.query = base.query;\n          } else if (chr === '/' || (chr === '\\\\' && url.isSpecial())) {\n            state = RELATIVE_SLASH;\n          } else if (chr === '?') {\n            url.username = base.username;\n            url.password = base.password;\n            url.host = base.host;\n            url.port = base.port;\n            url.path = arraySlice(base.path);\n            url.query = '';\n            state = QUERY;\n          } else if (chr === '#') {\n            url.username = base.username;\n            url.password = base.password;\n            url.host = base.host;\n            url.port = base.port;\n            url.path = arraySlice(base.path);\n            url.query = base.query;\n            url.fragment = '';\n            state = FRAGMENT;\n          } else {\n            url.username = base.username;\n            url.password = base.password;\n            url.host = base.host;\n            url.port = base.port;\n            url.path = arraySlice(base.path);\n            url.path.length--;\n            state = PATH;\n            continue;\n          } break;\n\n        case RELATIVE_SLASH:\n          if (url.isSpecial() && (chr === '/' || chr === '\\\\')) {\n            state = SPECIAL_AUTHORITY_IGNORE_SLASHES;\n          } else if (chr === '/') {\n            state = AUTHORITY;\n          } else {\n            url.username = base.username;\n            url.password = base.password;\n            url.host = base.host;\n            url.port = base.port;\n            state = PATH;\n            continue;\n          } break;\n\n        case SPECIAL_AUTHORITY_SLASHES:\n          state = SPECIAL_AUTHORITY_IGNORE_SLASHES;\n          if (chr !== '/' || charAt(buffer, pointer + 1) !== '/') continue;\n          pointer++;\n          break;\n\n        case SPECIAL_AUTHORITY_IGNORE_SLASHES:\n          if (chr !== '/' && chr !== '\\\\') {\n            state = AUTHORITY;\n            continue;\n          } break;\n\n        case AUTHORITY:\n          if (chr === '@') {\n            if (seenAt) buffer = '%40' + buffer;\n            seenAt = true;\n            bufferCodePoints = arrayFrom(buffer);\n            for (var i = 0; i < bufferCodePoints.length; i++) {\n              var codePoint = bufferCodePoints[i];\n              if (codePoint === ':' && !seenPasswordToken) {\n                seenPasswordToken = true;\n                continue;\n              }\n              var encodedCodePoints = percentEncode(codePoint, userinfoPercentEncodeSet);\n              if (seenPasswordToken) url.password += encodedCodePoints;\n              else url.username += encodedCodePoints;\n            }\n            buffer = '';\n          } else if (\n            chr === EOF || chr === '/' || chr === '?' || chr === '#' ||\n            (chr === '\\\\' && url.isSpecial())\n          ) {\n            if (seenAt && buffer === '') return INVALID_AUTHORITY;\n            pointer -= arrayFrom(buffer).length + 1;\n            buffer = '';\n            state = HOST;\n          } else buffer += chr;\n          break;\n\n        case HOST:\n        case HOSTNAME:\n          if (stateOverride && url.scheme === 'file') {\n            state = FILE_HOST;\n            continue;\n          } else if (chr === ':' && !seenBracket) {\n            if (buffer === '') return INVALID_HOST;\n            failure = url.parseHost(buffer);\n            if (failure) return failure;\n            buffer = '';\n            state = PORT;\n            if (stateOverride === HOSTNAME) return;\n          } else if (\n            chr === EOF || chr === '/' || chr === '?' || chr === '#' ||\n            (chr === '\\\\' && url.isSpecial())\n          ) {\n            if (url.isSpecial() && buffer === '') return INVALID_HOST;\n            if (stateOverride && buffer === '' && (url.includesCredentials() || url.port !== null)) return;\n            failure = url.parseHost(buffer);\n            if (failure) return failure;\n            buffer = '';\n            state = PATH_START;\n            if (stateOverride) return;\n            continue;\n          } else {\n            if (chr === '[') seenBracket = true;\n            else if (chr === ']') seenBracket = false;\n            buffer += chr;\n          } break;\n\n        case PORT:\n          if (exec(DIGIT, chr)) {\n            buffer += chr;\n          } else if (\n            chr === EOF || chr === '/' || chr === '?' || chr === '#' ||\n            (chr === '\\\\' && url.isSpecial()) ||\n            stateOverride\n          ) {\n            if (buffer !== '') {\n              var port = parseInt$1(buffer, 10);\n              if (port > 0xFFFF) return INVALID_PORT;\n              url.port = (url.isSpecial() && port === specialSchemes[url.scheme]) ? null : port;\n              buffer = '';\n            }\n            if (stateOverride) return;\n            state = PATH_START;\n            continue;\n          } else return INVALID_PORT;\n          break;\n\n        case FILE:\n          url.scheme = 'file';\n          if (chr === '/' || chr === '\\\\') state = FILE_SLASH;\n          else if (base && base.scheme === 'file') {\n            switch (chr) {\n              case EOF:\n                url.host = base.host;\n                url.path = arraySlice(base.path);\n                url.query = base.query;\n                break;\n              case '?':\n                url.host = base.host;\n                url.path = arraySlice(base.path);\n                url.query = '';\n                state = QUERY;\n                break;\n              case '#':\n                url.host = base.host;\n                url.path = arraySlice(base.path);\n                url.query = base.query;\n                url.fragment = '';\n                state = FRAGMENT;\n                break;\n              default:\n                if (!startsWithWindowsDriveLetter(join(arraySlice(codePoints, pointer), ''))) {\n                  url.host = base.host;\n                  url.path = arraySlice(base.path);\n                  url.shortenPath();\n                }\n                state = PATH;\n                continue;\n            }\n          } else {\n            state = PATH;\n            continue;\n          } break;\n\n        case FILE_SLASH:\n          if (chr === '/' || chr === '\\\\') {\n            state = FILE_HOST;\n            break;\n          }\n          if (base && base.scheme === 'file' && !startsWithWindowsDriveLetter(join(arraySlice(codePoints, pointer), ''))) {\n            if (isWindowsDriveLetter(base.path[0], true)) push(url.path, base.path[0]);\n            else url.host = base.host;\n          }\n          state = PATH;\n          continue;\n\n        case FILE_HOST:\n          if (chr === EOF || chr === '/' || chr === '\\\\' || chr === '?' || chr === '#') {\n            if (!stateOverride && isWindowsDriveLetter(buffer)) {\n              state = PATH;\n            } else if (buffer === '') {\n              url.host = '';\n              if (stateOverride) return;\n              state = PATH_START;\n            } else {\n              failure = url.parseHost(buffer);\n              if (failure) return failure;\n              if (url.host === 'localhost') url.host = '';\n              if (stateOverride) return;\n              buffer = '';\n              state = PATH_START;\n            } continue;\n          } else buffer += chr;\n          break;\n\n        case PATH_START:\n          if (url.isSpecial()) {\n            state = PATH;\n            if (chr !== '/' && chr !== '\\\\') continue;\n          } else if (!stateOverride && chr === '?') {\n            url.query = '';\n            state = QUERY;\n          } else if (!stateOverride && chr === '#') {\n            url.fragment = '';\n            state = FRAGMENT;\n          } else if (chr !== EOF) {\n            state = PATH;\n            if (chr !== '/') continue;\n          } break;\n\n        case PATH:\n          if (\n            chr === EOF || chr === '/' ||\n            (chr === '\\\\' && url.isSpecial()) ||\n            (!stateOverride && (chr === '?' || chr === '#'))\n          ) {\n            if (isDoubleDot(buffer)) {\n              url.shortenPath();\n              if (chr !== '/' && !(chr === '\\\\' && url.isSpecial())) {\n                push(url.path, '');\n              }\n            } else if (isSingleDot(buffer)) {\n              if (chr !== '/' && !(chr === '\\\\' && url.isSpecial())) {\n                push(url.path, '');\n              }\n            } else {\n              if (url.scheme === 'file' && !url.path.length && isWindowsDriveLetter(buffer)) {\n                if (url.host) url.host = '';\n                buffer = charAt(buffer, 0) + ':'; // normalize windows drive letter\n              }\n              push(url.path, buffer);\n            }\n            buffer = '';\n            if (url.scheme === 'file' && (chr === EOF || chr === '?' || chr === '#')) {\n              while (url.path.length > 1 && url.path[0] === '') {\n                shift(url.path);\n              }\n            }\n            if (chr === '?') {\n              url.query = '';\n              state = QUERY;\n            } else if (chr === '#') {\n              url.fragment = '';\n              state = FRAGMENT;\n            }\n          } else {\n            buffer += percentEncode(chr, pathPercentEncodeSet);\n          } break;\n\n        case CANNOT_BE_A_BASE_URL_PATH:\n          if (chr === '?') {\n            url.query = '';\n            state = QUERY;\n          } else if (chr === '#') {\n            url.fragment = '';\n            state = FRAGMENT;\n          } else if (chr !== EOF) {\n            url.path[0] += percentEncode(chr, C0ControlPercentEncodeSet);\n          } break;\n\n        case QUERY:\n          if (!stateOverride && chr === '#') {\n            url.fragment = '';\n            state = FRAGMENT;\n          } else if (chr !== EOF) {\n            if (chr === \"'\" && url.isSpecial()) url.query += '%27';\n            else if (chr === '#') url.query += '%23';\n            else url.query += percentEncode(chr, C0ControlPercentEncodeSet);\n          } break;\n\n        case FRAGMENT:\n          if (chr !== EOF) url.fragment += percentEncode(chr, fragmentPercentEncodeSet);\n          break;\n      }\n\n      pointer++;\n    }\n  },\n  // https://url.spec.whatwg.org/#host-parsing\n  parseHost: function (input) {\n    var result, codePoints, index;\n    if (charAt(input, 0) === '[') {\n      if (charAt(input, input.length - 1) !== ']') return INVALID_HOST;\n      result = parseIPv6(stringSlice(input, 1, -1));\n      if (!result) return INVALID_HOST;\n      this.host = result;\n    // opaque host\n    } else if (!this.isSpecial()) {\n      if (exec(FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT, input)) return INVALID_HOST;\n      result = '';\n      codePoints = arrayFrom(input);\n      for (index = 0; index < codePoints.length; index++) {\n        result += percentEncode(codePoints[index], C0ControlPercentEncodeSet);\n      }\n      this.host = result;\n    } else {\n      input = toASCII(input);\n      if (exec(FORBIDDEN_HOST_CODE_POINT, input)) return INVALID_HOST;\n      result = parseIPv4(input);\n      if (result === null) return INVALID_HOST;\n      this.host = result;\n    }\n  },\n  // https://url.spec.whatwg.org/#cannot-have-a-username-password-port\n  cannotHaveUsernamePasswordPort: function () {\n    return !this.host || this.cannotBeABaseURL || this.scheme === 'file';\n  },\n  // https://url.spec.whatwg.org/#include-credentials\n  includesCredentials: function () {\n    return this.username !== '' || this.password !== '';\n  },\n  // https://url.spec.whatwg.org/#is-special\n  isSpecial: function () {\n    return hasOwn(specialSchemes, this.scheme);\n  },\n  // https://url.spec.whatwg.org/#shorten-a-urls-path\n  shortenPath: function () {\n    var path = this.path;\n    var pathSize = path.length;\n    if (pathSize && (this.scheme !== 'file' || pathSize !== 1 || !isWindowsDriveLetter(path[0], true))) {\n      path.length--;\n    }\n  },\n  // https://url.spec.whatwg.org/#concept-url-serializer\n  serialize: function () {\n    var url = this;\n    var scheme = url.scheme;\n    var username = url.username;\n    var password = url.password;\n    var host = url.host;\n    var port = url.port;\n    var path = url.path;\n    var query = url.query;\n    var fragment = url.fragment;\n    var output = scheme + ':';\n    if (host !== null) {\n      output += '//';\n      if (url.includesCredentials()) {\n        output += username + (password ? ':' + password : '') + '@';\n      }\n      output += serializeHost(host);\n      if (port !== null) output += ':' + port;\n    } else if (scheme === 'file') output += '//';\n    output += url.cannotBeABaseURL ? path[0] : path.length ? '/' + join(path, '/') : '';\n    if (query !== null) output += '?' + query;\n    if (fragment !== null) output += '#' + fragment;\n    return output;\n  },\n  // https://url.spec.whatwg.org/#dom-url-href\n  setHref: function (href) {\n    var failure = this.parse(href);\n    if (failure) throw new TypeError$1(failure);\n    this.searchParams.update();\n  },\n  // https://url.spec.whatwg.org/#dom-url-origin\n  getOrigin: function () {\n    var scheme = this.scheme;\n    var port = this.port;\n    if (scheme === 'blob') try {\n      return new URLConstructor(scheme.path[0]).origin;\n    } catch (error) {\n      return 'null';\n    }\n    if (scheme === 'file' || !this.isSpecial()) return 'null';\n    return scheme + '://' + serializeHost(this.host) + (port !== null ? ':' + port : '');\n  },\n  // https://url.spec.whatwg.org/#dom-url-protocol\n  getProtocol: function () {\n    return this.scheme + ':';\n  },\n  setProtocol: function (protocol) {\n    this.parse($toString(protocol) + ':', SCHEME_START);\n  },\n  // https://url.spec.whatwg.org/#dom-url-username\n  getUsername: function () {\n    return this.username;\n  },\n  setUsername: function (username) {\n    var codePoints = arrayFrom($toString(username));\n    if (this.cannotHaveUsernamePasswordPort()) return;\n    this.username = '';\n    for (var i = 0; i < codePoints.length; i++) {\n      this.username += percentEncode(codePoints[i], userinfoPercentEncodeSet);\n    }\n  },\n  // https://url.spec.whatwg.org/#dom-url-password\n  getPassword: function () {\n    return this.password;\n  },\n  setPassword: function (password) {\n    var codePoints = arrayFrom($toString(password));\n    if (this.cannotHaveUsernamePasswordPort()) return;\n    this.password = '';\n    for (var i = 0; i < codePoints.length; i++) {\n      this.password += percentEncode(codePoints[i], userinfoPercentEncodeSet);\n    }\n  },\n  // https://url.spec.whatwg.org/#dom-url-host\n  getHost: function () {\n    var host = this.host;\n    var port = this.port;\n    return host === null ? ''\n      : port === null ? serializeHost(host)\n      : serializeHost(host) + ':' + port;\n  },\n  setHost: function (host) {\n    if (this.cannotBeABaseURL) return;\n    this.parse(host, HOST);\n  },\n  // https://url.spec.whatwg.org/#dom-url-hostname\n  getHostname: function () {\n    var host = this.host;\n    return host === null ? '' : serializeHost(host);\n  },\n  setHostname: function (hostname) {\n    if (this.cannotBeABaseURL) return;\n    this.parse(hostname, HOSTNAME);\n  },\n  // https://url.spec.whatwg.org/#dom-url-port\n  getPort: function () {\n    var port = this.port;\n    return port === null ? '' : $toString(port);\n  },\n  setPort: function (port) {\n    if (this.cannotHaveUsernamePasswordPort()) return;\n    port = $toString(port);\n    if (port === '') this.port = null;\n    else this.parse(port, PORT);\n  },\n  // https://url.spec.whatwg.org/#dom-url-pathname\n  getPathname: function () {\n    var path = this.path;\n    return this.cannotBeABaseURL ? path[0] : path.length ? '/' + join(path, '/') : '';\n  },\n  setPathname: function (pathname) {\n    if (this.cannotBeABaseURL) return;\n    this.path = [];\n    this.parse(pathname, PATH_START);\n  },\n  // https://url.spec.whatwg.org/#dom-url-search\n  getSearch: function () {\n    var query = this.query;\n    return query ? '?' + query : '';\n  },\n  setSearch: function (search) {\n    search = $toString(search);\n    if (search === '') {\n      this.query = null;\n    } else {\n      if (charAt(search, 0) === '?') search = stringSlice(search, 1);\n      this.query = '';\n      this.parse(search, QUERY);\n    }\n    this.searchParams.update();\n  },\n  // https://url.spec.whatwg.org/#dom-url-searchparams\n  getSearchParams: function () {\n    return this.searchParams.facade;\n  },\n  // https://url.spec.whatwg.org/#dom-url-hash\n  getHash: function () {\n    var fragment = this.fragment;\n    return fragment ? '#' + fragment : '';\n  },\n  setHash: function (hash) {\n    hash = $toString(hash);\n    if (hash === '') {\n      this.fragment = null;\n      return;\n    }\n    if (charAt(hash, 0) === '#') hash = stringSlice(hash, 1);\n    this.fragment = '';\n    this.parse(hash, FRAGMENT);\n  },\n  update: function () {\n    this.query = this.searchParams.serialize() || null;\n  }\n};\n\n// `URL` constructor\n// https://url.spec.whatwg.org/#url-class\nvar URLConstructor = function URL(url /* , base */) {\n  var that = anInstance(this, URLPrototype);\n  var base = validateArgumentsLength$2(arguments.length, 1) > 1 ? arguments[1] : undefined;\n  var state = setInternalState(that, new URLState(url, false, base));\n  if (!DESCRIPTORS) {\n    that.href = state.serialize();\n    that.origin = state.getOrigin();\n    that.protocol = state.getProtocol();\n    that.username = state.getUsername();\n    that.password = state.getPassword();\n    that.host = state.getHost();\n    that.hostname = state.getHostname();\n    that.port = state.getPort();\n    that.pathname = state.getPathname();\n    that.search = state.getSearch();\n    that.searchParams = state.getSearchParams();\n    that.hash = state.getHash();\n  }\n};\n\nvar URLPrototype = URLConstructor.prototype;\n\nvar accessorDescriptor = function (getter, setter) {\n  return {\n    get: function () {\n      return getInternalURLState(this)[getter]();\n    },\n    set: setter && function (value) {\n      return getInternalURLState(this)[setter](value);\n    },\n    configurable: true,\n    enumerable: true\n  };\n};\n\nif (DESCRIPTORS) {\n  // `URL.prototype.href` accessors pair\n  // https://url.spec.whatwg.org/#dom-url-href\n  defineBuiltInAccessor(URLPrototype, 'href', accessorDescriptor('serialize', 'setHref'));\n  // `URL.prototype.origin` getter\n  // https://url.spec.whatwg.org/#dom-url-origin\n  defineBuiltInAccessor(URLPrototype, 'origin', accessorDescriptor('getOrigin'));\n  // `URL.prototype.protocol` accessors pair\n  // https://url.spec.whatwg.org/#dom-url-protocol\n  defineBuiltInAccessor(URLPrototype, 'protocol', accessorDescriptor('getProtocol', 'setProtocol'));\n  // `URL.prototype.username` accessors pair\n  // https://url.spec.whatwg.org/#dom-url-username\n  defineBuiltInAccessor(URLPrototype, 'username', accessorDescriptor('getUsername', 'setUsername'));\n  // `URL.prototype.password` accessors pair\n  // https://url.spec.whatwg.org/#dom-url-password\n  defineBuiltInAccessor(URLPrototype, 'password', accessorDescriptor('getPassword', 'setPassword'));\n  // `URL.prototype.host` accessors pair\n  // https://url.spec.whatwg.org/#dom-url-host\n  defineBuiltInAccessor(URLPrototype, 'host', accessorDescriptor('getHost', 'setHost'));\n  // `URL.prototype.hostname` accessors pair\n  // https://url.spec.whatwg.org/#dom-url-hostname\n  defineBuiltInAccessor(URLPrototype, 'hostname', accessorDescriptor('getHostname', 'setHostname'));\n  // `URL.prototype.port` accessors pair\n  // https://url.spec.whatwg.org/#dom-url-port\n  defineBuiltInAccessor(URLPrototype, 'port', accessorDescriptor('getPort', 'setPort'));\n  // `URL.prototype.pathname` accessors pair\n  // https://url.spec.whatwg.org/#dom-url-pathname\n  defineBuiltInAccessor(URLPrototype, 'pathname', accessorDescriptor('getPathname', 'setPathname'));\n  // `URL.prototype.search` accessors pair\n  // https://url.spec.whatwg.org/#dom-url-search\n  defineBuiltInAccessor(URLPrototype, 'search', accessorDescriptor('getSearch', 'setSearch'));\n  // `URL.prototype.searchParams` getter\n  // https://url.spec.whatwg.org/#dom-url-searchparams\n  defineBuiltInAccessor(URLPrototype, 'searchParams', accessorDescriptor('getSearchParams'));\n  // `URL.prototype.hash` accessors pair\n  // https://url.spec.whatwg.org/#dom-url-hash\n  defineBuiltInAccessor(URLPrototype, 'hash', accessorDescriptor('getHash', 'setHash'));\n}\n\n// `URL.prototype.toJSON` method\n// https://url.spec.whatwg.org/#dom-url-tojson\ndefineBuiltIn(URLPrototype, 'toJSON', function toJSON() {\n  return getInternalURLState(this).serialize();\n}, { enumerable: true });\n\n// `URL.prototype.toString` method\n// https://url.spec.whatwg.org/#URL-stringification-behavior\ndefineBuiltIn(URLPrototype, 'toString', function toString() {\n  return getInternalURLState(this).serialize();\n}, { enumerable: true });\n\nif (NativeURL) {\n  var nativeCreateObjectURL = NativeURL.createObjectURL;\n  var nativeRevokeObjectURL = NativeURL.revokeObjectURL;\n  // `URL.createObjectURL` method\n  // https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL\n  if (nativeCreateObjectURL) defineBuiltIn(URLConstructor, 'createObjectURL', bind(nativeCreateObjectURL, NativeURL));\n  // `URL.revokeObjectURL` method\n  // https://developer.mozilla.org/en-US/docs/Web/API/URL/revokeObjectURL\n  if (nativeRevokeObjectURL) defineBuiltIn(URLConstructor, 'revokeObjectURL', bind(nativeRevokeObjectURL, NativeURL));\n}\n\nsetToStringTag(URLConstructor, 'URL');\n\n$$2({ global: true, constructor: true, forced: !USE_NATIVE_URL$2, sham: !DESCRIPTORS }, {\n  URL: URLConstructor\n});\n\nvar $$1 = _export;\nvar getBuiltIn$1 = getBuiltIn$6;\nvar fails = fails$d;\nvar validateArgumentsLength$1 = validateArgumentsLength$4;\nvar toString$1 = toString$4;\nvar USE_NATIVE_URL$1 = urlConstructorDetection;\n\nvar URL$3 = getBuiltIn$1('URL');\n\n// https://github.com/nodejs/node/issues/47505\n// https://github.com/denoland/deno/issues/18893\nvar THROWS_WITHOUT_ARGUMENTS = USE_NATIVE_URL$1 && fails(function () {\n  URL$3.canParse();\n});\n\n// Bun ~ 1.0.30 bug\n// https://github.com/oven-sh/bun/issues/9250\nvar WRONG_ARITY = fails(function () {\n  return URL$3.canParse.length !== 1;\n});\n\n// `URL.canParse` method\n// https://url.spec.whatwg.org/#dom-url-canparse\n$$1({ target: 'URL', stat: true, forced: !THROWS_WITHOUT_ARGUMENTS || WRONG_ARITY }, {\n  canParse: function canParse(url) {\n    var length = validateArgumentsLength$1(arguments.length, 1);\n    var urlString = toString$1(url);\n    var base = length < 2 || arguments[1] === undefined ? undefined : toString$1(arguments[1]);\n    try {\n      return !!new URL$3(urlString, base);\n    } catch (error) {\n      return false;\n    }\n  }\n});\n\nvar $ = _export;\nvar getBuiltIn = getBuiltIn$6;\nvar validateArgumentsLength = validateArgumentsLength$4;\nvar toString = toString$4;\nvar USE_NATIVE_URL = urlConstructorDetection;\n\nvar URL$2 = getBuiltIn('URL');\n\n// `URL.parse` method\n// https://url.spec.whatwg.org/#dom-url-canparse\n$({ target: 'URL', stat: true, forced: !USE_NATIVE_URL }, {\n  parse: function parse(url) {\n    var length = validateArgumentsLength(arguments.length, 1);\n    var urlString = toString(url);\n    var base = length < 2 || arguments[1] === undefined ? undefined : toString(arguments[1]);\n    try {\n      return new URL$2(urlString, base);\n    } catch (error) {\n      return null;\n    }\n  }\n});\n\nvar path = path$3;\n\nvar url$3 = path.URL;\n\nvar parent$2 = url$3;\n\nvar url$2 = parent$2;\n\nvar parent$1 = url$2;\n\nvar url$1 = parent$1;\n\nvar parent = url$1;\n\nvar url = parent;\n\nvar URL$1 = /*@__PURE__*/getDefaultExportFromCjs(url);\n\n/**\n * Error format\n *\n * {@link https://postgrest.org/en/stable/api.html?highlight=options#errors-and-http-status-codes}\n */\nvar PostgrestError = /** @class */ (function (_super) {\n    __extends(PostgrestError, _super);\n    function PostgrestError(context) {\n        var _this = _super.call(this, context.message) || this;\n        _this.name = \"PostgrestError\";\n        _this.details = context.details;\n        _this.hint = context.hint;\n        _this.code = context.code;\n        return _this;\n    }\n    return PostgrestError;\n}(Error));\n\nvar PostgrestBuilder = /** @class */ (function () {\n    function PostgrestBuilder(builder) {\n        var _a, _b;\n        this.shouldThrowOnError = false;\n        this.method = builder.method;\n        this.url = builder.url;\n        this.headers = new Headers(builder.headers);\n        this.schema = builder.schema;\n        this.body = builder.body;\n        this.shouldThrowOnError = (_a = builder.shouldThrowOnError) !== null && _a !== void 0 ? _a : false;\n        this.signal = builder.signal;\n        this.isMaybeSingle = (_b = builder.isMaybeSingle) !== null && _b !== void 0 ? _b : false;\n        if (builder.fetch) {\n            this.fetch = builder.fetch;\n        }\n        else {\n            this.fetch = fetch;\n        }\n    }\n    /**\n     * If there's an error with the query, throwOnError will reject the promise by\n     * throwing the error instead of returning it as part of a successful response.\n     *\n     * {@link https://github.com/supabase/supabase-js/issues/92}\n     */\n    PostgrestBuilder.prototype.throwOnError = function () {\n        this.shouldThrowOnError = true;\n        return this;\n    };\n    /**\n     * Set an HTTP header for the request.\n     */\n    PostgrestBuilder.prototype.setHeader = function (name, value) {\n        this.headers = new Headers(this.headers);\n        this.headers.set(name, value);\n        return this;\n    };\n    PostgrestBuilder.prototype.then = function (onfulfilled, onrejected) {\n        var _this = this;\n        // https://postgrest.org/en/stable/api.html#switching-schemas\n        if (this.schema === undefined) ;\n        else if ([\"GET\", \"HEAD\"].includes(this.method)) {\n            this.headers.set(\"Accept-Profile\", this.schema);\n        }\n        else {\n            this.headers.set(\"Content-Profile\", this.schema);\n        }\n        if (this.method !== \"GET\" && this.method !== \"HEAD\") {\n            this.headers.set(\"Content-Type\", \"application/json\");\n        }\n        // NOTE: Invoke w/o `this` to avoid illegal invocation error.\n        // https://github.com/supabase/postgrest-js/pull/247\n        var _fetch = this.fetch;\n        var res = _fetch(this.url.toString(), {\n            method: this.method,\n            headers: this.headers,\n            body: JSON.stringify(this.body),\n            signal: this.signal\n        }).then(function (res) { return __awaiter(_this, void 0, void 0, function () {\n            var error, data, count, status, statusText, body, countHeader, contentRange, body, postgrestResponse;\n            var _a, _b, _c, _d;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        error = null;\n                        data = null;\n                        count = null;\n                        status = res.status;\n                        statusText = res.statusText;\n                        if (!res.ok) return [3 /*break*/, 3];\n                        if (!(this.method !== \"HEAD\")) return [3 /*break*/, 2];\n                        return [4 /*yield*/, res.text()];\n                    case 1:\n                        body = _e.sent();\n                        if (body === \"\") ;\n                        else if (this.headers.get(\"Accept\") === \"text/csv\") {\n                            data = body;\n                        }\n                        else if (this.headers.get(\"Accept\") &&\n                            ((_a = this.headers\n                                .get(\"Accept\")) === null || _a === void 0 ? void 0 : _a.includes(\"application/vnd.pgrst.plan+text\"))) {\n                            data = body;\n                        }\n                        else {\n                            data = JSON.parse(body);\n                        }\n                        _e.label = 2;\n                    case 2:\n                        countHeader = (_b = this.headers\n                            .get(\"Prefer\")) === null || _b === void 0 ? void 0 : _b.match(/count=(exact|planned|estimated)/);\n                        contentRange = (_c = res.headers.get(\"content-range\")) === null || _c === void 0 ? void 0 : _c.split(\"/\");\n                        if (countHeader && contentRange && contentRange.length > 1) {\n                            count = parseInt(contentRange[1]);\n                        }\n                        // Temporary partial fix for https://github.com/supabase/postgrest-js/issues/361\n                        // Issue persists e.g. for `.insert([...]).select().maybeSingle()`\n                        if (this.isMaybeSingle &&\n                            this.method === \"GET\" &&\n                            Array.isArray(data)) {\n                            if (data.length > 1) {\n                                error = {\n                                    // https://github.com/PostgREST/postgrest/blob/a867d79c42419af16c18c3fb019eba8df992626f/src/PostgREST/Error.hs#L553\n                                    code: \"PGRST116\",\n                                    details: \"Results contain \".concat(data.length, \" rows, application/vnd.pgrst.object+json requires 1 row\"),\n                                    hint: null,\n                                    message: \"JSON object requested, multiple (or no) rows returned\"\n                                };\n                                data = null;\n                                count = null;\n                                status = 406;\n                                statusText = \"Not Acceptable\";\n                            }\n                            else if (data.length === 1) {\n                                data = data[0];\n                            }\n                            else {\n                                data = null;\n                            }\n                        }\n                        return [3 /*break*/, 5];\n                    case 3: return [4 /*yield*/, res.text()];\n                    case 4:\n                        body = _e.sent();\n                        try {\n                            error = JSON.parse(body);\n                            // Workaround for https://github.com/supabase/postgrest-js/issues/295\n                            if (Array.isArray(error) && res.status === 404) {\n                                data = [];\n                                error = null;\n                                status = 200;\n                                statusText = \"OK\";\n                            }\n                        }\n                        catch (_f) {\n                            // Workaround for https://github.com/supabase/postgrest-js/issues/295\n                            if (res.status === 404 && body === \"\") {\n                                status = 204;\n                                statusText = \"No Content\";\n                            }\n                            else {\n                                error = {\n                                    message: body\n                                };\n                            }\n                        }\n                        if (error && this.isMaybeSingle && ((_d = error === null || error === void 0 ? void 0 : error.details) === null || _d === void 0 ? void 0 : _d.includes(\"0 rows\"))) {\n                            error = null;\n                            status = 200;\n                            statusText = \"OK\";\n                        }\n                        if (error && this.shouldThrowOnError) {\n                            throw new PostgrestError(error);\n                        }\n                        _e.label = 5;\n                    case 5:\n                        postgrestResponse = {\n                            error: error,\n                            data: data,\n                            count: count,\n                            status: status,\n                            statusText: statusText\n                        };\n                        return [2 /*return*/, postgrestResponse];\n                }\n            });\n        }); });\n        if (!this.shouldThrowOnError) {\n            res = res[\"catch\"](function (fetchError) {\n                var _a, _b, _c;\n                return ({\n                    error: {\n                        message: \"\".concat((_a = fetchError === null || fetchError === void 0 ? void 0 : fetchError.name) !== null && _a !== void 0 ? _a : \"FetchError\", \": \").concat(fetchError === null || fetchError === void 0 ? void 0 : fetchError.message),\n                        details: \"\".concat((_b = fetchError === null || fetchError === void 0 ? void 0 : fetchError.stack) !== null && _b !== void 0 ? _b : \"\"),\n                        hint: \"\",\n                        code: \"\".concat((_c = fetchError === null || fetchError === void 0 ? void 0 : fetchError.code) !== null && _c !== void 0 ? _c : \"\")\n                    },\n                    data: null,\n                    count: null,\n                    status: 0,\n                    statusText: \"\"\n                });\n            });\n        }\n        return res.then(onfulfilled, onrejected);\n    };\n    /**\n     * Override the type of the returned `data`.\n     *\n     * @typeParam NewResult - The new result type to override with\n     * @deprecated Use overrideTypes<yourType, { merge: false }>() method at the end of your call chain instead\n     */\n    PostgrestBuilder.prototype.returns = function () {\n        /* istanbul ignore next */\n        return this;\n    };\n    /**\n     * Override the type of the returned `data` field in the response.\n     *\n     * @typeParam NewResult - The new type to cast the response data to\n     * @typeParam Options - Optional type configuration (defaults to { merge: true })\n     * @typeParam Options.merge - When true, merges the new type with existing return type. When false, replaces the existing types entirely (defaults to true)\n     * @example\n     * ```typescript\n     * // Merge with existing types (default behavior)\n     * const query = supabase\n     *   .from('users')\n     *   .select()\n     *   .overrideTypes<{ custom_field: string }>()\n     *\n     * // Replace existing types completely\n     * const replaceQuery = supabase\n     *   .from('users')\n     *   .select()\n     *   .overrideTypes<{ id: number; name: string }, { merge: false }>()\n     * ```\n     * @returns A PostgrestBuilder instance with the new type\n     */\n    PostgrestBuilder.prototype.overrideTypes = function () {\n        return this;\n    };\n    return PostgrestBuilder;\n}());\n\nvar PostgrestTransformBuilder = /** @class */ (function (_super) {\n    __extends(PostgrestTransformBuilder, _super);\n    function PostgrestTransformBuilder() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Perform a SELECT on the query result.\n     *\n     * By default, `.insert()`, `.update()`, `.upsert()`, and `.delete()` do not\n     * return modified rows. By calling this method, modified rows are returned in\n     * `data`.\n     *\n     * @param columns - The columns to retrieve, separated by commas\n     */\n    PostgrestTransformBuilder.prototype.select = function (columns) {\n        // Remove whitespaces except when quoted\n        var quoted = false;\n        var cleanedColumns = (columns !== null && columns !== void 0 ? columns : \"*\")\n            .split(\"\")\n            .map(function (c) {\n            if (/\\s/.test(c) && !quoted) {\n                return \"\";\n            }\n            if (c === '\"') {\n                quoted = !quoted;\n            }\n            return c;\n        })\n            .join(\"\");\n        this.url.searchParams.set(\"select\", cleanedColumns);\n        this.headers.append(\"Prefer\", \"return=representation\");\n        return this;\n    };\n    /**\n     * Order the query result by `column`.\n     *\n     * You can call this method multiple times to order by multiple columns.\n     *\n     * You can order referenced tables, but it only affects the ordering of the\n     * parent table if you use `!inner` in the query.\n     *\n     * @param column - The column to order by\n     * @param options - Named parameters\n     * @param options.ascending - If `true`, the result will be in ascending order\n     * @param options.nullsFirst - If `true`, `null`s appear first. If `false`,\n     * `null`s appear last.\n     * @param options.referencedTable - Set this to order a referenced table by\n     * its columns\n     * @param options.foreignTable - Deprecated, use `options.referencedTable`\n     * instead\n     */\n    PostgrestTransformBuilder.prototype.order = function (column, _a) {\n        var _b = _a === void 0 ? {} : _a, _c = _b.ascending, ascending = _c === void 0 ? true : _c, nullsFirst = _b.nullsFirst, foreignTable = _b.foreignTable, _d = _b.referencedTable, referencedTable = _d === void 0 ? foreignTable : _d;\n        var key = referencedTable ? \"\".concat(referencedTable, \".order\") : \"order\";\n        var existingOrder = this.url.searchParams.get(key);\n        this.url.searchParams.set(key, \"\".concat(existingOrder ? \"\".concat(existingOrder, \",\") : \"\").concat(column, \".\").concat(ascending ? \"asc\" : \"desc\").concat(nullsFirst === undefined\n            ? \"\"\n            : nullsFirst\n                ? \".nullsfirst\"\n                : \".nullslast\"));\n        return this;\n    };\n    /**\n     * Limit the query result by `count`.\n     *\n     * @param count - The maximum number of rows to return\n     * @param options - Named parameters\n     * @param options.referencedTable - Set this to limit rows of referenced\n     * tables instead of the parent table\n     * @param options.foreignTable - Deprecated, use `options.referencedTable`\n     * instead\n     */\n    PostgrestTransformBuilder.prototype.limit = function (count, _a) {\n        var _b = _a === void 0 ? {} : _a, foreignTable = _b.foreignTable, _c = _b.referencedTable, referencedTable = _c === void 0 ? foreignTable : _c;\n        var key = typeof referencedTable === \"undefined\"\n            ? \"limit\"\n            : \"\".concat(referencedTable, \".limit\");\n        this.url.searchParams.set(key, \"\".concat(count));\n        return this;\n    };\n    /**\n     * Limit the query result by starting at an offset `from` and ending at the offset `to`.\n     * Only records within this range are returned.\n     * This respects the query order and if there is no order clause the range could behave unexpectedly.\n     * The `from` and `to` values are 0-based and inclusive: `range(1, 3)` will include the second, third\n     * and fourth rows of the query.\n     *\n     * @param from - The starting index from which to limit the result\n     * @param to - The last index to which to limit the result\n     * @param options - Named parameters\n     * @param options.referencedTable - Set this to limit rows of referenced\n     * tables instead of the parent table\n     * @param options.foreignTable - Deprecated, use `options.referencedTable`\n     * instead\n     */\n    PostgrestTransformBuilder.prototype.range = function (from, to, _a) {\n        var _b = _a === void 0 ? {} : _a, foreignTable = _b.foreignTable, _c = _b.referencedTable, referencedTable = _c === void 0 ? foreignTable : _c;\n        var keyOffset = typeof referencedTable === \"undefined\"\n            ? \"offset\"\n            : \"\".concat(referencedTable, \".offset\");\n        var keyLimit = typeof referencedTable === \"undefined\"\n            ? \"limit\"\n            : \"\".concat(referencedTable, \".limit\");\n        this.url.searchParams.set(keyOffset, \"\".concat(from));\n        // Range is inclusive, so add 1\n        this.url.searchParams.set(keyLimit, \"\".concat(to - from + 1));\n        return this;\n    };\n    /**\n     * Set the AbortSignal for the fetch request.\n     *\n     * @param signal - The AbortSignal to use for the fetch request\n     */\n    PostgrestTransformBuilder.prototype.abortSignal = function (signal) {\n        this.signal = signal;\n        return this;\n    };\n    /**\n     * Return `data` as a single object instead of an array of objects.\n     *\n     * Query result must be one row (e.g. using `.limit(1)`), otherwise this\n     * returns an error.\n     */\n    PostgrestTransformBuilder.prototype.single = function () {\n        this.headers.set(\"Accept\", \"application/vnd.pgrst.object+json\");\n        return this;\n    };\n    /**\n     * Return `data` as a single object instead of an array of objects.\n     *\n     * Query result must be zero or one row (e.g. using `.limit(1)`), otherwise\n     * this returns an error.\n     */\n    PostgrestTransformBuilder.prototype.maybeSingle = function () {\n        // Temporary partial fix for https://github.com/supabase/postgrest-js/issues/361\n        // Issue persists e.g. for `.insert([...]).select().maybeSingle()`\n        if (this.method === \"GET\") {\n            this.headers.set(\"Accept\", \"application/json\");\n        }\n        else {\n            this.headers.set(\"Accept\", \"application/vnd.pgrst.object+json\");\n        }\n        this.isMaybeSingle = true;\n        return this;\n    };\n    /**\n     * Return `data` as a string in CSV format.\n     */\n    PostgrestTransformBuilder.prototype.csv = function () {\n        this.headers.set(\"Accept\", \"text/csv\");\n        return this;\n    };\n    /**\n     * Return `data` as an object in [GeoJSON](https://geojson.org) format.\n     */\n    PostgrestTransformBuilder.prototype.geojson = function () {\n        this.headers.set(\"Accept\", \"application/geo+json\");\n        return this;\n    };\n    /**\n     * Return `data` as the EXPLAIN plan for the query.\n     *\n     * You need to enable the\n     * [db_plan_enabled](https://supabase.com/docs/guides/database/debugging-performance#enabling-explain)\n     * setting before using this method.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.analyze - If `true`, the query will be executed and the\n     * actual run time will be returned\n     *\n     * @param options.verbose - If `true`, the query identifier will be returned\n     * and `data` will include the output columns of the query\n     *\n     * @param options.settings - If `true`, include information on configuration\n     * parameters that affect query planning\n     *\n     * @param options.buffers - If `true`, include information on buffer usage\n     *\n     * @param options.wal - If `true`, include information on WAL record generation\n     *\n     * @param options.format - The format of the output, can be `\"text\"` (default)\n     * or `\"json\"`\n     */\n    PostgrestTransformBuilder.prototype.explain = function (_a) {\n        var _b;\n        var _c = _a === void 0 ? {} : _a, _d = _c.analyze, analyze = _d === void 0 ? false : _d, _e = _c.verbose, verbose = _e === void 0 ? false : _e, _f = _c.settings, settings = _f === void 0 ? false : _f, _g = _c.buffers, buffers = _g === void 0 ? false : _g, _h = _c.wal, wal = _h === void 0 ? false : _h, _j = _c.format, format = _j === void 0 ? \"text\" : _j;\n        var options = [\n            analyze ? \"analyze\" : null,\n            verbose ? \"verbose\" : null,\n            settings ? \"settings\" : null,\n            buffers ? \"buffers\" : null,\n            wal ? \"wal\" : null,\n        ]\n            .filter(Boolean)\n            .join(\"|\");\n        // An Accept header can carry multiple media types but postgrest-js always sends one\n        var forMediatype = (_b = this.headers.get(\"Accept\")) !== null && _b !== void 0 ? _b : \"application/json\";\n        this.headers.set(\"Accept\", \"application/vnd.pgrst.plan+\".concat(format, \"; for=\\\"\").concat(forMediatype, \"\\\"; options=\").concat(options, \";\"));\n        if (format === \"json\") {\n            return this;\n        }\n        else {\n            return this;\n        }\n    };\n    /**\n     * Rollback the query.\n     *\n     * `data` will still be returned, but the query is not committed.\n     */\n    PostgrestTransformBuilder.prototype.rollback = function () {\n        this.headers.append(\"Prefer\", \"tx=rollback\");\n        return this;\n    };\n    /**\n     * Override the type of the returned `data`.\n     *\n     * @typeParam NewResult - The new result type to override with\n     * @deprecated Use overrideTypes<yourType, { merge: false }>() method at the end of your call chain instead\n     */\n    PostgrestTransformBuilder.prototype.returns = function () {\n        return this;\n    };\n    /**\n     * Set the maximum number of rows that can be affected by the query.\n     * Only available in PostgREST v13+ and only works with PATCH and DELETE methods.\n     *\n     * @param value - The maximum number of rows that can be affected\n     */\n    PostgrestTransformBuilder.prototype.maxAffected = function (value) {\n        this.headers.append(\"Prefer\", \"handling=strict\");\n        this.headers.append(\"Prefer\", \"max-affected=\".concat(value));\n        return this;\n    };\n    return PostgrestTransformBuilder;\n}(PostgrestBuilder));\n\nvar PostgrestFilterBuilder = /** @class */ (function (_super) {\n    __extends(PostgrestFilterBuilder, _super);\n    function PostgrestFilterBuilder() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Match only rows where `column` is equal to `value`.\n     *\n     * To check if the value of `column` is NULL, you should use `.is()` instead.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    PostgrestFilterBuilder.prototype.eq = function (column, value) {\n        this.url.searchParams.append(column, \"eq.\".concat(value));\n        return this;\n    };\n    /**\n     * Match only rows where `column` is not equal to `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    PostgrestFilterBuilder.prototype.neq = function (column, value) {\n        this.url.searchParams.append(column, \"neq.\".concat(value));\n        return this;\n    };\n    /**\n     * Match only rows where `column` is greater than `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    PostgrestFilterBuilder.prototype.gt = function (column, value) {\n        this.url.searchParams.append(column, \"gt.\".concat(value));\n        return this;\n    };\n    /**\n     * Match only rows where `column` is greater than or equal to `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    PostgrestFilterBuilder.prototype.gte = function (column, value) {\n        this.url.searchParams.append(column, \"gte.\".concat(value));\n        return this;\n    };\n    /**\n     * Match only rows where `column` is less than `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    PostgrestFilterBuilder.prototype.lt = function (column, value) {\n        this.url.searchParams.append(column, \"lt.\".concat(value));\n        return this;\n    };\n    /**\n     * Match only rows where `column` is less than or equal to `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    PostgrestFilterBuilder.prototype.lte = function (column, value) {\n        this.url.searchParams.append(column, \"lte.\".concat(value));\n        return this;\n    };\n    /**\n     * Match only rows where `column` matches `pattern` case-sensitively.\n     *\n     * @param column - The column to filter on\n     * @param pattern - The pattern to match with\n     */\n    PostgrestFilterBuilder.prototype.like = function (column, pattern) {\n        this.url.searchParams.append(column, \"like.\".concat(pattern));\n        return this;\n    };\n    /**\n     * Match only rows where `column` matches all of `patterns` case-sensitively.\n     *\n     * @param column - The column to filter on\n     * @param patterns - The patterns to match with\n     */\n    PostgrestFilterBuilder.prototype.likeAllOf = function (column, patterns) {\n        this.url.searchParams.append(column, \"like(all).{\".concat(patterns.join(\",\"), \"}\"));\n        return this;\n    };\n    /**\n     * Match only rows where `column` matches any of `patterns` case-sensitively.\n     *\n     * @param column - The column to filter on\n     * @param patterns - The patterns to match with\n     */\n    PostgrestFilterBuilder.prototype.likeAnyOf = function (column, patterns) {\n        this.url.searchParams.append(column, \"like(any).{\".concat(patterns.join(\",\"), \"}\"));\n        return this;\n    };\n    /**\n     * Match only rows where `column` matches `pattern` case-insensitively.\n     *\n     * @param column - The column to filter on\n     * @param pattern - The pattern to match with\n     */\n    PostgrestFilterBuilder.prototype.ilike = function (column, pattern) {\n        this.url.searchParams.append(column, \"ilike.\".concat(pattern));\n        return this;\n    };\n    /**\n     * Match only rows where `column` matches all of `patterns` case-insensitively.\n     *\n     * @param column - The column to filter on\n     * @param patterns - The patterns to match with\n     */\n    PostgrestFilterBuilder.prototype.ilikeAllOf = function (column, patterns) {\n        this.url.searchParams.append(column, \"ilike(all).{\".concat(patterns.join(\",\"), \"}\"));\n        return this;\n    };\n    /**\n     * Match only rows where `column` matches any of `patterns` case-insensitively.\n     *\n     * @param column - The column to filter on\n     * @param patterns - The patterns to match with\n     */\n    PostgrestFilterBuilder.prototype.ilikeAnyOf = function (column, patterns) {\n        this.url.searchParams.append(column, \"ilike(any).{\".concat(patterns.join(\",\"), \"}\"));\n        return this;\n    };\n    /**\n     * Match only rows where `column` IS `value`.\n     *\n     * For non-boolean columns, this is only relevant for checking if the value of\n     * `column` is NULL by setting `value` to `null`.\n     *\n     * For boolean columns, you can also set `value` to `true` or `false` and it\n     * will behave the same way as `.eq()`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    PostgrestFilterBuilder.prototype.is = function (column, value) {\n        this.url.searchParams.append(column, \"is.\".concat(value));\n        return this;\n    };\n    /**\n     * Match only rows where `column` is included in the `values` array.\n     *\n     * @param column - The column to filter on\n     * @param values - The values array to filter with\n     */\n    PostgrestFilterBuilder.prototype[\"in\"] = function (column, values) {\n        var cleanedValues = Array.from(new Set(values))\n            .map(function (s) {\n            // handle postgrest reserved characters\n            // https://postgrest.org/en/v7.0.0/api.html#reserved-characters\n            if (typeof s === \"string\" && new RegExp(\"[,()]\").test(s))\n                return \"\\\"\".concat(s, \"\\\"\");\n            else\n                return \"\".concat(s);\n        })\n            .join(\",\");\n        this.url.searchParams.append(column, \"in.(\".concat(cleanedValues, \")\"));\n        return this;\n    };\n    /**\n     * Only relevant for jsonb, array, and range columns. Match only rows where\n     * `column` contains every element appearing in `value`.\n     *\n     * @param column - The jsonb, array, or range column to filter on\n     * @param value - The jsonb, array, or range value to filter with\n     */\n    PostgrestFilterBuilder.prototype.contains = function (column, value) {\n        if (typeof value === \"string\") {\n            // range types can be inclusive '[', ']' or exclusive '(', ')' so just\n            // keep it simple and accept a string\n            this.url.searchParams.append(column, \"cs.\".concat(value));\n        }\n        else if (Array.isArray(value)) {\n            // array\n            this.url.searchParams.append(column, \"cs.{\".concat(value.join(\",\"), \"}\"));\n        }\n        else {\n            // json\n            this.url.searchParams.append(column, \"cs.\".concat(JSON.stringify(value)));\n        }\n        return this;\n    };\n    /**\n     * Only relevant for jsonb, array, and range columns. Match only rows where\n     * every element appearing in `column` is contained by `value`.\n     *\n     * @param column - The jsonb, array, or range column to filter on\n     * @param value - The jsonb, array, or range value to filter with\n     */\n    PostgrestFilterBuilder.prototype.containedBy = function (column, value) {\n        if (typeof value === \"string\") {\n            // range\n            this.url.searchParams.append(column, \"cd.\".concat(value));\n        }\n        else if (Array.isArray(value)) {\n            // array\n            this.url.searchParams.append(column, \"cd.{\".concat(value.join(\",\"), \"}\"));\n        }\n        else {\n            // json\n            this.url.searchParams.append(column, \"cd.\".concat(JSON.stringify(value)));\n        }\n        return this;\n    };\n    /**\n     * Only relevant for range columns. Match only rows where every element in\n     * `column` is greater than any element in `range`.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    PostgrestFilterBuilder.prototype.rangeGt = function (column, range) {\n        this.url.searchParams.append(column, \"sr.\".concat(range));\n        return this;\n    };\n    /**\n     * Only relevant for range columns. Match only rows where every element in\n     * `column` is either contained in `range` or greater than any element in\n     * `range`.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    PostgrestFilterBuilder.prototype.rangeGte = function (column, range) {\n        this.url.searchParams.append(column, \"nxl.\".concat(range));\n        return this;\n    };\n    /**\n     * Only relevant for range columns. Match only rows where every element in\n     * `column` is less than any element in `range`.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    PostgrestFilterBuilder.prototype.rangeLt = function (column, range) {\n        this.url.searchParams.append(column, \"sl.\".concat(range));\n        return this;\n    };\n    /**\n     * Only relevant for range columns. Match only rows where every element in\n     * `column` is either contained in `range` or less than any element in\n     * `range`.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    PostgrestFilterBuilder.prototype.rangeLte = function (column, range) {\n        this.url.searchParams.append(column, \"nxr.\".concat(range));\n        return this;\n    };\n    /**\n     * Only relevant for range columns. Match only rows where `column` is\n     * mutually exclusive to `range` and there can be no element between the two\n     * ranges.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    PostgrestFilterBuilder.prototype.rangeAdjacent = function (column, range) {\n        this.url.searchParams.append(column, \"adj.\".concat(range));\n        return this;\n    };\n    /**\n     * Only relevant for array and range columns. Match only rows where\n     * `column` and `value` have an element in common.\n     *\n     * @param column - The array or range column to filter on\n     * @param value - The array or range value to filter with\n     */\n    PostgrestFilterBuilder.prototype.overlaps = function (column, value) {\n        if (typeof value === \"string\") {\n            // range\n            this.url.searchParams.append(column, \"ov.\".concat(value));\n        }\n        else {\n            // array\n            this.url.searchParams.append(column, \"ov.{\".concat(value.join(\",\"), \"}\"));\n        }\n        return this;\n    };\n    /**\n     * Only relevant for text and tsvector columns. Match only rows where\n     * `column` matches the query string in `query`.\n     *\n     * @param column - The text or tsvector column to filter on\n     * @param query - The query text to match with\n     * @param options - Named parameters\n     * @param options.config - The text search configuration to use\n     * @param options.type - Change how the `query` text is interpreted\n     */\n    PostgrestFilterBuilder.prototype.textSearch = function (column, query, _a) {\n        var _b = _a === void 0 ? {} : _a, config = _b.config, type = _b.type;\n        var typePart = \"\";\n        if (type === \"plain\") {\n            typePart = \"pl\";\n        }\n        else if (type === \"phrase\") {\n            typePart = \"ph\";\n        }\n        else if (type === \"websearch\") {\n            typePart = \"w\";\n        }\n        var configPart = config === undefined ? \"\" : \"(\".concat(config, \")\");\n        this.url.searchParams.append(column, \"\".concat(typePart, \"fts\").concat(configPart, \".\").concat(query));\n        return this;\n    };\n    /**\n     * Match only rows where each column in `query` keys is equal to its\n     * associated value. Shorthand for multiple `.eq()`s.\n     *\n     * @param query - The object to filter with, with column names as keys mapped\n     * to their filter values\n     */\n    PostgrestFilterBuilder.prototype.match = function (query) {\n        var _this = this;\n        Object.entries(query).forEach(function (_a) {\n            var column = _a[0], value = _a[1];\n            _this.url.searchParams.append(column, \"eq.\".concat(value));\n        });\n        return this;\n    };\n    /**\n     * Match only rows which doesn't satisfy the filter.\n     *\n     * Unlike most filters, `opearator` and `value` are used as-is and need to\n     * follow [PostgREST\n     * syntax](https://postgrest.org/en/stable/api.html#operators). You also need\n     * to make sure they are properly sanitized.\n     *\n     * @param column - The column to filter on\n     * @param operator - The operator to be negated to filter with, following\n     * PostgREST syntax\n     * @param value - The value to filter with, following PostgREST syntax\n     */\n    PostgrestFilterBuilder.prototype.not = function (column, operator, value) {\n        this.url.searchParams.append(column, \"not.\".concat(operator, \".\").concat(value));\n        return this;\n    };\n    /**\n     * Match only rows which satisfy at least one of the filters.\n     *\n     * Unlike most filters, `filters` is used as-is and needs to follow [PostgREST\n     * syntax](https://postgrest.org/en/stable/api.html#operators). You also need\n     * to make sure it's properly sanitized.\n     *\n     * It's currently not possible to do an `.or()` filter across multiple tables.\n     *\n     * @param filters - The filters to use, following PostgREST syntax\n     * @param options - Named parameters\n     * @param options.referencedTable - Set this to filter on referenced tables\n     * instead of the parent table\n     * @param options.foreignTable - Deprecated, use `referencedTable` instead\n     */\n    PostgrestFilterBuilder.prototype.or = function (filters, _a) {\n        var _b = _a === void 0 ? {} : _a, foreignTable = _b.foreignTable, _c = _b.referencedTable, referencedTable = _c === void 0 ? foreignTable : _c;\n        var key = referencedTable ? \"\".concat(referencedTable, \".or\") : \"or\";\n        this.url.searchParams.append(key, \"(\".concat(filters, \")\"));\n        return this;\n    };\n    /**\n     * Match only rows which satisfy the filter. This is an escape hatch - you\n     * should use the specific filter methods wherever possible.\n     *\n     * Unlike most filters, `opearator` and `value` are used as-is and need to\n     * follow [PostgREST\n     * syntax](https://postgrest.org/en/stable/api.html#operators). You also need\n     * to make sure they are properly sanitized.\n     *\n     * @param column - The column to filter on\n     * @param operator - The operator to filter with, following PostgREST syntax\n     * @param value - The value to filter with, following PostgREST syntax\n     */\n    PostgrestFilterBuilder.prototype.filter = function (column, operator, value) {\n        this.url.searchParams.append(column, \"\".concat(operator, \".\").concat(value));\n        return this;\n    };\n    return PostgrestFilterBuilder;\n}(PostgrestTransformBuilder));\n\nvar PostgrestQueryBuilder = /** @class */ (function () {\n    function PostgrestQueryBuilder(url, _a) {\n        var _b = _a.headers, headers = _b === void 0 ? {} : _b, schema = _a.schema, fetch = _a.fetch;\n        this.url = url;\n        this.headers = new Headers(headers);\n        this.schema = schema;\n        this.fetch = fetch;\n    }\n    /**\n     * Perform a SELECT query on the table or view.\n     *\n     * @param columns - The columns to retrieve, separated by commas. Columns can be renamed when returned with `customName:columnName`\n     *\n     * @param options - Named parameters\n     *\n     * @param options.head - When set to `true`, `data` will not be returned.\n     * Useful if you only need the count.\n     *\n     * @param options.count - Count algorithm to use to count rows in the table or view.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    PostgrestQueryBuilder.prototype.select = function (columns, _a) {\n        var _b = _a === void 0 ? {} : _a, _c = _b.head, head = _c === void 0 ? false : _c, count = _b.count;\n        var method = head ? \"HEAD\" : \"GET\";\n        // Remove whitespaces except when quoted\n        var quoted = false;\n        var cleanedColumns = (columns !== null && columns !== void 0 ? columns : \"*\")\n            .split(\"\")\n            .map(function (c) {\n            if (/\\s/.test(c) && !quoted) {\n                return \"\";\n            }\n            if (c === '\"') {\n                quoted = !quoted;\n            }\n            return c;\n        })\n            .join(\"\");\n        this.url.searchParams.set(\"select\", cleanedColumns);\n        if (count) {\n            this.headers.append(\"Prefer\", \"count=\".concat(count));\n        }\n        return new PostgrestFilterBuilder({\n            method: method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            fetch: this.fetch\n        });\n    };\n    /**\n     * Perform an INSERT into the table or view.\n     *\n     * By default, inserted rows are not returned. To return it, chain the call\n     * with `.select()`.\n     *\n     * @param values - The values to insert. Pass an object to insert a single row\n     * or an array to insert multiple rows.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.count - Count algorithm to use to count inserted rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     *\n     * @param options.defaultToNull - Make missing fields default to `null`.\n     * Otherwise, use the default value for the column. Only applies for bulk\n     * inserts.\n     */\n    PostgrestQueryBuilder.prototype.insert = function (values, _a) {\n        var _b;\n        var _c = _a === void 0 ? {} : _a, count = _c.count, _d = _c.defaultToNull, defaultToNull = _d === void 0 ? true : _d;\n        var method = \"POST\";\n        if (count) {\n            this.headers.append(\"Prefer\", \"count=\".concat(count));\n        }\n        if (!defaultToNull) {\n            this.headers.append(\"Prefer\", \"missing=default\");\n        }\n        if (Array.isArray(values)) {\n            var columns = values.reduce(function (acc, x) { return acc.concat(Object.keys(x)); }, []);\n            if (columns.length > 0) {\n                var uniqueColumns = Array.from(new Set(columns)).map(function (column) { return \"\\\"\".concat(column, \"\\\"\"); });\n                this.url.searchParams.set(\"columns\", uniqueColumns.join(\",\"));\n            }\n        }\n        return new PostgrestFilterBuilder({\n            method: method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            body: values,\n            fetch: (_b = this.fetch) !== null && _b !== void 0 ? _b : fetch\n        });\n    };\n    /**\n     * Perform an UPSERT on the table or view. Depending on the column(s) passed\n     * to `onConflict`, `.upsert()` allows you to perform the equivalent of\n     * `.insert()` if a row with the corresponding `onConflict` columns doesn't\n     * exist, or if it does exist, perform an alternative action depending on\n     * `ignoreDuplicates`.\n     *\n     * By default, upserted rows are not returned. To return it, chain the call\n     * with `.select()`.\n     *\n     * @param values - The values to upsert with. Pass an object to upsert a\n     * single row or an array to upsert multiple rows.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.onConflict - Comma-separated UNIQUE column(s) to specify how\n     * duplicate rows are determined. Two rows are duplicates if all the\n     * `onConflict` columns are equal.\n     *\n     * @param options.ignoreDuplicates - If `true`, duplicate rows are ignored. If\n     * `false`, duplicate rows are merged with existing rows.\n     *\n     * @param options.count - Count algorithm to use to count upserted rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     *\n     * @param options.defaultToNull - Make missing fields default to `null`.\n     * Otherwise, use the default value for the column. This only applies when\n     * inserting new rows, not when merging with existing rows under\n     * `ignoreDuplicates: false`. This also only applies when doing bulk upserts.\n     */\n    PostgrestQueryBuilder.prototype.upsert = function (values, _a) {\n        var _b;\n        var _c = _a === void 0 ? {} : _a, onConflict = _c.onConflict, _d = _c.ignoreDuplicates, ignoreDuplicates = _d === void 0 ? false : _d, count = _c.count, _e = _c.defaultToNull, defaultToNull = _e === void 0 ? true : _e;\n        var method = \"POST\";\n        this.headers.append(\"Prefer\", \"resolution=\".concat(ignoreDuplicates ? \"ignore\" : \"merge\", \"-duplicates\"));\n        if (onConflict !== undefined)\n            this.url.searchParams.set(\"on_conflict\", onConflict);\n        if (count) {\n            this.headers.append(\"Prefer\", \"count=\".concat(count));\n        }\n        if (!defaultToNull) {\n            this.headers.append(\"Prefer\", \"missing=default\");\n        }\n        if (Array.isArray(values)) {\n            var columns = values.reduce(function (acc, x) { return acc.concat(Object.keys(x)); }, []);\n            if (columns.length > 0) {\n                var uniqueColumns = Array.from(new Set(columns)).map(function (column) { return \"\\\"\".concat(column, \"\\\"\"); });\n                this.url.searchParams.set(\"columns\", uniqueColumns.join(\",\"));\n            }\n        }\n        return new PostgrestFilterBuilder({\n            method: method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            body: values,\n            fetch: (_b = this.fetch) !== null && _b !== void 0 ? _b : fetch\n        });\n    };\n    /**\n     * Perform an UPDATE on the table or view.\n     *\n     * By default, updated rows are not returned. To return it, chain the call\n     * with `.select()` after filters.\n     *\n     * @param values - The values to update with\n     *\n     * @param options - Named parameters\n     *\n     * @param options.count - Count algorithm to use to count updated rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    PostgrestQueryBuilder.prototype.update = function (values, _a) {\n        var _b;\n        var _c = _a === void 0 ? {} : _a, count = _c.count;\n        var method = \"PATCH\";\n        if (count) {\n            this.headers.append(\"Prefer\", \"count=\".concat(count));\n        }\n        return new PostgrestFilterBuilder({\n            method: method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            body: values,\n            fetch: (_b = this.fetch) !== null && _b !== void 0 ? _b : fetch\n        });\n    };\n    /**\n     * Perform a DELETE on the table or view.\n     *\n     * By default, deleted rows are not returned. To return it, chain the call\n     * with `.select()` after filters.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.count - Count algorithm to use to count deleted rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    PostgrestQueryBuilder.prototype[\"delete\"] = function (_a) {\n        var _b;\n        var _c = _a === void 0 ? {} : _a, count = _c.count;\n        var method = \"DELETE\";\n        if (count) {\n            this.headers.append(\"Prefer\", \"count=\".concat(count));\n        }\n        return new PostgrestFilterBuilder({\n            method: method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            fetch: (_b = this.fetch) !== null && _b !== void 0 ? _b : fetch\n        });\n    };\n    return PostgrestQueryBuilder;\n}());\n\nvar MySqlQueryBuilder = /** @class */ (function (_super) {\n    __extends(MySqlQueryBuilder, _super);\n    function MySqlQueryBuilder(url, _a) {\n        var _b = _a.headers, headers = _b === void 0 ? {} : _b, fetch = _a.fetch;\n        // Call parent constructor with undefined schema\n        return _super.call(this, url, {\n            headers: headers,\n            schema: undefined,\n            fetch: fetch\n        }) || this;\n    }\n    return MySqlQueryBuilder;\n}(PostgrestQueryBuilder));\n\n/**\n * MySQL client.\n */\nvar MySqlClient = /** @class */ (function () {\n    // TODO: Add back shouldThrowOnError once we figure out the typings\n    /**\n     * Creates a MySQL client.\n     *\n     * @param url - URL of the MySQL endpoint\n     * @param options - Named parameters\n     * @param options.headers - Custom headers\n     * @param options.fetch - Custom fetch\n     */\n    function MySqlClient(url, _a) {\n        var _b = _a === void 0 ? {} : _a, _c = _b.headers, headers = _c === void 0 ? {} : _c, fetch = _b.fetch;\n        this.url = url;\n        this.headers = new Headers(headers);\n        this.fetch = fetch;\n    }\n    /**\n     * Perform a query on a table or a view.\n     *\n     * @param relation - The table or view name to query\n     */\n    MySqlClient.prototype.from = function (relation) {\n        var url = new URL$1(\"\".concat(this.url, \"/\").concat(relation));\n        return new MySqlQueryBuilder(url, {\n            headers: this.headers,\n            fetch: this.fetch\n        });\n    };\n    return MySqlClient;\n}());\n\nfunction initHTTPOverCallFunction(cloud, options) {\n    var _this = this;\n    if (!cloud) {\n        throw new Error('cloud is required');\n    }\n    if (!cloud.callFunction) {\n        throw new Error('cloud.callFunction is required');\n    }\n    var callFunction = cloud.callFunction.bind(cloud);\n    var ormClient;\n    try {\n        var HTTPOverCallFunctionFetch = function (_a) {\n            var url = _a.url, body = _a.body, method = _a.method, headers = _a.headers;\n            return __awaiter(_this, void 0, void 0, function () {\n                var res, result;\n                var _b;\n                return __generator(this, function (_c) {\n                    switch (_c.label) {\n                        case 0: return [4 /*yield*/, callFunction({\n                                name: 'httpOverCallFunction',\n                                data: {\n                                    url: url,\n                                    method: method === null || method === void 0 ? void 0 : method.toUpperCase(),\n                                    headers: __assign(__assign({}, (headers || {})), { 'Content-Type': 'application/json' }),\n                                    body: body\n                                }\n                            })];\n                        case 1:\n                            res = _c.sent();\n                            result = (_b = res === null || res === void 0 ? void 0 : res.result) === null || _b === void 0 ? void 0 : _b.body;\n                            return [2 /*return*/, result];\n                    }\n                });\n            });\n        };\n        var baseUrl = (options === null || options === void 0 ? void 0 : options.baseUrl) || getDefaultGatewayBaseUrl(cloud, options === null || options === void 0 ? void 0 : options.envId).model;\n        var sqlBaseUrl = (options === null || options === void 0 ? void 0 : options.sqlBaseUrl) || getDefaultGatewayBaseUrl(cloud, options === null || options === void 0 ? void 0 : options.envId).sql;\n        ormClient = generateHTTPClient(callFunction, HTTPOverCallFunctionFetch, baseUrl, {\n            sqlBaseUrl: sqlBaseUrl\n        });\n    }\n    catch (e) {\n        console.error('init http orm client failed, try call function orm', e);\n        ormClient = generateClient(callFunction);\n    }\n    cloud.models = ormClient;\n    cloud.mysql = generateMySQLClient(cloud, {\n        envId: options === null || options === void 0 ? void 0 : options.envId,\n        mysqlBaseUrl: options === null || options === void 0 ? void 0 : options.mysqlBaseUrl\n    });\n    return cloud;\n}\nfunction init(cloud, options) {\n    if (!cloud) {\n        throw new Error('cloud is required');\n    }\n    if (!cloud.callFunction) {\n        throw new Error('cloud.callFunction is required');\n    }\n    var callFunction = cloud.callFunction.bind(cloud);\n    cloud.models = generateClient(callFunction);\n    cloud.mysql = generateMySQLClient(cloud, {\n        envId: options === null || options === void 0 ? void 0 : options.envId\n    });\n    cloud.rdb = generateMySQLClient(cloud, {\n        envId: options === null || options === void 0 ? void 0 : options.envId\n    });\n    return cloud;\n}\nfunction generateMySQLClient(cloud, options) {\n    var envId = options === null || options === void 0 ? void 0 : options.envId;\n    var mysqlBaseUrl = (options === null || options === void 0 ? void 0 : options.mysqlBaseUrl) || getDefaultGatewayBaseUrl(cloud, options === null || options === void 0 ? void 0 : options.envId).mysql;\n    var customFetch = options === null || options === void 0 ? void 0 : options.fetch;\n    return function (options) {\n        var _this = this;\n        return new MySqlClient(mysqlBaseUrl, {\n            fetch: customFetch ||\n                (function (input, init) { return __awaiter(_this, void 0, void 0, function () {\n                    var instance, database, headers;\n                    return __generator(this, function (_a) {\n                        instance = (options === null || options === void 0 ? void 0 : options.instance) || 'default';\n                        database = (options === null || options === void 0 ? void 0 : options.database) || envId;\n                        headers = {};\n                        if ((init === null || init === void 0 ? void 0 : init.headers) instanceof Headers) {\n                            init.headers.forEach(function (value, key) {\n                                headers[key] = value;\n                            });\n                        }\n                        else {\n                            headers = (init === null || init === void 0 ? void 0 : init.headers) || {};\n                        }\n                        return [2 /*return*/, cloud\n                                .callFunction({\n                                name: 'httpOverCallFunction',\n                                data: {\n                                    url: input.toString(),\n                                    method: (init === null || init === void 0 ? void 0 : init.method) || 'GET',\n                                    headers: __assign(__assign({}, (headers || {})), { 'Content-Type': 'application/json', 'X-Db-Instance': instance, 'Accept-Profile': database, 'Content-Profile': database }),\n                                    body: init === null || init === void 0 ? void 0 : init.body\n                                }\n                            })\n                                .then(function (res) {\n                                var result = res === null || res === void 0 ? void 0 : res.result;\n                                var response = {\n                                    ok: (result === null || result === void 0 ? void 0 : result.statusCode) >= 200 && (result === null || result === void 0 ? void 0 : result.statusCode) < 300,\n                                    status: (result === null || result === void 0 ? void 0 : result.statusCode) || 200,\n                                    statusText: (result === null || result === void 0 ? void 0 : result.statusMessage) || 'OK',\n                                    json: function () { return Promise.resolve((result === null || result === void 0 ? void 0 : result.body) || {}); },\n                                    text: function () {\n                                        return Promise.resolve(typeof (result === null || result === void 0 ? void 0 : result.body) === 'string' ? result.body : JSON.stringify((result === null || result === void 0 ? void 0 : result.body) || {}));\n                                    },\n                                    headers: new Headers((result === null || result === void 0 ? void 0 : result.headers) || {})\n                                };\n                                return response;\n                            })];\n                    });\n                }); })\n        });\n    };\n}\nfunction getDefaultGatewayBaseUrl(cloud, envId) {\n    var _a, _b, _c, _d;\n    var env = envId || ((_b = (_a = cloud === null || cloud === void 0 ? void 0 : cloud.extend) === null || _a === void 0 ? void 0 : _a.AI) === null || _b === void 0 ? void 0 : _b.env);\n    if (typeof env !== 'string' || !env.trim())\n        env = (_c = cloud === null || cloud === void 0 ? void 0 : cloud.config) === null || _c === void 0 ? void 0 : _c.env;\n    if (typeof env !== 'string' || !env.trim())\n        env = (_d = cloud === null || cloud === void 0 ? void 0 : cloud.config) === null || _d === void 0 ? void 0 : _d.envName;\n    if (typeof env !== 'string' || !env.trim()) {\n        throw new Error('Generating default gateway base url failed: env not found');\n    }\n    env = env.trim();\n    return {\n        model: \"https://\".concat(env, \".api.tcloudbasegateway.com/v1/model\"),\n        sql: \"https://\".concat(env, \".api.tcloudbasegateway.com/v1/sql\"),\n        mysql: \"https://\".concat(env, \".api.tcloudbasegateway.com/v1/rdb/rest\")\n    };\n}\nvar index = {\n    init: init,\n    generateHTTPClient: generateHTTPClient,\n    generateMySQLClient: generateMySQLClient\n};\n\nexport { index as default, generateHTTPClient, generateMySQLClient, init, initHTTPOverCallFunction };\n", "import { ICloudbase } from '@cloudbase/types'\nimport { ICloudbaseComponent } from '@cloudbase/types/component'\nimport { generateHTTPClient } from '@cloudbase/wx-cloud-client-sdk'\nimport { events } from '@cloudbase/utilities'\n\nconst { CloudbaseEventEmitter } = events\n\ndeclare const cloudbase: ICloudbase\n\ntype IFetchOptions = Parameters<ICloudbase['request']['fetch']>[0]\n\nconst COMPONENT_NAME = 'models'\n\nfunction getEntity(cloudbase: any) {\n  const callFunction = cloudbase.callFunction.bind(cloudbase)\n  const cloudbaseFetch = cloudbase.request.fetch.bind(cloudbase.request)\n  const fetch = async (fetchOptions: IFetchOptions) => {\n    const res = await cloudbaseFetch({\n      ...fetchOptions,\n      headers: {\n        'Content-Type': 'application/json',\n        ...fetchOptions.headers,\n      },\n    })\n\n    return await res.data\n  }\n\n  const { BASE_URL, PROTOCOL } = cloudbase.getEndPointWithKey('GATEWAY') as {\n    BASE_URL: string\n    PROTOCOL: string\n  }\n  const baseUrl = `${PROTOCOL}${BASE_URL}/model`\n  const sqlBaseUrl = `${PROTOCOL}${BASE_URL}/sql`\n\n  const entity = generateHTTPClient(callFunction, fetch, baseUrl, { sqlBaseUrl })\n\n  return entity\n}\n\nconst cloudbaseModelMap = new WeakMap()\n\n/**\n * 创建 models entity 时，需要 baseUrl、fetch，而这两个参数都需要在 cloudbase.init 之后才能获取。\n * 因此需要在 cloudbase.init 之后执行。\n * 此函数将创建 entity 的步骤延后到第一次读取 models 上的属性时执行。\n */\nexport function lazyGetEntity(cloudbase: ICloudbase): ReturnType<typeof getEntity> {\n  return new Proxy(\n    {},\n    {\n      get: (_, prop: string) => {\n        const { BASE_URL, PROTOCOL } = cloudbase.getEndPointWithKey('GATEWAY')\n        const key = { ...cloudbase,  BASE_URL, PROTOCOL }\n        let entity = cloudbaseModelMap.get(key)\n        if (!entity) {\n          entity = getEntity(cloudbase)\n          cloudbaseModelMap.set(key, entity)\n        }\n        return entity[prop]\n      },\n    },\n  )\n}\n\nconst CLOUDBASE_INIT_EVENT = 'cloudbase_init'\n\nconst bus = new CloudbaseEventEmitter()\n\nbus.on(CLOUDBASE_INIT_EVENT, ({ data: cloudbase }: { data: ICloudbase }) => {\n  Object.assign(cloudbase, { models: lazyGetEntity(cloudbase) })\n})\n\nconst component: ICloudbaseComponent = {\n  name: COMPONENT_NAME,\n  namespace: COMPONENT_NAME,\n  entity: new Proxy(\n    {},\n    {\n      get: (_, prop: string) => {\n        console.warn(`【deprecated】Accessing Cloudbase.prototype.models.${prop}.`)\n      },\n    },\n  ),\n  injectEvents: {\n    bus,\n    events: [CLOUDBASE_INIT_EVENT],\n  },\n}\n\ntry {\n  cloudbase.registerComponent(component)\n} catch (e) {}\n\nexport function registerModel(app: ICloudbase) {\n  try {\n    app.registerComponent(component)\n  } catch (e) {\n    console.warn(e)\n  }\n}\n\ntry {\n  (window as any).registerModel = registerModel\n} catch (e) {}\n\nexport * from '@cloudbase/wx-cloud-client-sdk'\n", "/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n", "export default function assert(test: boolean): void | never {\n  if (!test) {\n    throw new TypeError('Assertion failed');\n  }\n}\n", "export function noop() {\n  return;\n}\n\nexport function typeIsObject(x: any): x is object | Function {\n  return (typeof x === 'object' && x !== null) || typeof x === 'function';\n}\n", "import { typeIsObject } from './utils';\nimport {\n  ReadableByteStreamLike,\n  ReadableByteStreamLikeConstructor,\n  ReadableStreamLike,\n  ReadableStreamLikeConstructor,\n  TransformStreamLike,\n  TransformStreamLikeConstructor,\n  WritableStreamLike,\n  WritableStreamLikeConstructor\n} from './stream-like';\n\ntype Constructor<T> = new(...args: any[]) => T;\n\nfunction isStreamConstructor(ctor: any): ctor is Constructor<any> {\n  if (typeof ctor !== 'function') {\n    return false;\n  }\n  let startCalled = false;\n  try {\n    new ctor({\n      start() {\n        startCalled = true;\n      }\n    });\n  } catch (e) {\n    // ignore\n  }\n  return startCalled;\n}\n\nexport function isReadableStream(readable: any): readable is ReadableStreamLike {\n  if (!typeIsObject(readable)) {\n    return false;\n  }\n  if (typeof (readable as ReadableStreamLike).getReader !== 'function') {\n    return false;\n  }\n  return true;\n}\n\nexport function isReadableStreamConstructor(ctor: any): ctor is ReadableStreamLikeConstructor {\n  if (!isStreamConstructor(ctor)) {\n    return false;\n  }\n  if (!isReadableStream(new ctor())) {\n    return false;\n  }\n  return true;\n}\n\nexport function isWritableStream(writable: any): writable is WritableStreamLike {\n  if (!typeIsObject(writable)) {\n    return false;\n  }\n  if (typeof (writable as WritableStreamLike).getWriter !== 'function') {\n    return false;\n  }\n  return true;\n}\n\nexport function isWritableStreamConstructor(ctor: any): ctor is WritableStreamLikeConstructor {\n  if (!isStreamConstructor(ctor)) {\n    return false;\n  }\n  if (!isWritableStream(new ctor())) {\n    return false;\n  }\n  return true;\n}\n\nexport function isTransformStream(transform: any): transform is TransformStreamLike {\n  if (!typeIsObject(transform)) {\n    return false;\n  }\n  if (!isReadableStream((transform as TransformStreamLike).readable)) {\n    return false;\n  }\n  if (!isWritableStream((transform as TransformStreamLike).writable)) {\n    return false;\n  }\n  return true;\n}\n\nexport function isTransformStreamConstructor(ctor: any): ctor is TransformStreamLikeConstructor {\n  if (!isStreamConstructor(ctor)) {\n    return false;\n  }\n  if (!isTransformStream(new ctor())) {\n    return false;\n  }\n  return true;\n}\n\nexport function supportsByobReader<R>(readable: ReadableStreamLike<R>): boolean {\n  try {\n    const reader = (readable as unknown as ReadableByteStreamLike).getReader({ mode: 'byob' });\n    reader.releaseLock();\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nexport function supportsByteSource<R>(ctor: ReadableStreamLikeConstructor): ctor is ReadableByteStreamLikeConstructor {\n  try {\n    new (ctor as ReadableByteStreamLikeConstructor)({ type: 'bytes' });\n    return true;\n  } catch {\n    return false;\n  }\n}\n", "import assert from './assert';\nimport { isReadableStream, isReadableStreamConstructor, supportsByobReader, supportsByteSource } from './checks';\nimport { noop } from './utils';\nimport {\n  ReadableByteStreamController,\n  ReadableByteStreamLike,\n  ReadableByteStreamLikeConstructor,\n  ReadableStreamBYOBReader,\n  ReadableStreamBYOBRequest,\n  ReadableStreamLike,\n  ReadableStreamLikeConstructor,\n  UnderlyingByteSource\n} from './stream-like';\nimport { ReadableByteStreamWrapper, ReadableStreamWrapper } from './wrappers';\n\nexport function createReadableStreamWrapper(ctor: ReadableByteStreamLikeConstructor): ReadableByteStreamWrapper;\nexport function createReadableStreamWrapper(ctor: ReadableStreamLikeConstructor): ReadableStreamWrapper;\nexport function createReadableStreamWrapper(\n  ctor: ReadableStreamLikeConstructor | ReadableByteStreamLikeConstructor\n): ReadableStreamWrapper {\n  assert(isReadableStreamConstructor(ctor));\n\n  const byteSourceSupported = supportsByteSource(ctor);\n\n  return <R>(readable: ReadableStreamLike<R>, { type }: { type?: 'bytes' } = {}) => {\n    type = parseReadableType(type);\n    if (type === 'bytes' && !byteSourceSupported) {\n      type = undefined;\n    }\n    if (readable.constructor === ctor) {\n      if (type !== 'bytes' || supportsByobReader(readable)) {\n        return readable;\n      }\n    }\n    if (type === 'bytes') {\n      const source = createWrappingReadableSource(readable as unknown as ReadableByteStreamLike, { type });\n      return new (ctor as ReadableByteStreamLikeConstructor)(source) as unknown as ReadableStreamLike<R>;\n    } else {\n      const source = createWrappingReadableSource<R>(readable);\n      return new ctor<R>(source);\n    }\n  };\n}\n\nexport function createWrappingReadableSource(\n  readable: ReadableByteStreamLike,\n  options: { type: 'bytes' }\n): UnderlyingByteSource;\nexport function createWrappingReadableSource<R = any>(\n  readable: ReadableStreamLike<R>,\n  options?: { type?: undefined }\n): UnderlyingSource<R>;\nexport function createWrappingReadableSource<R = any>(\n  readable: ReadableStreamLike<R>,\n  { type }: { type?: 'bytes' } = {}\n): UnderlyingSource<R> | UnderlyingByteSource {\n  assert(isReadableStream(readable));\n  assert(readable.locked === false);\n\n  type = parseReadableType(type);\n  let source: UnderlyingSource<R> | UnderlyingByteSource;\n  if (type === 'bytes') {\n    source = new WrappingReadableByteStreamSource(readable as unknown as ReadableByteStreamLike);\n  } else {\n    source = new WrappingReadableStreamDefaultSource<R>(readable);\n  }\n\n  return source;\n}\n\nfunction parseReadableType(type: string | undefined): 'bytes' | undefined {\n  const typeString = String(type);\n  if (typeString === 'bytes') {\n    return typeString;\n  } else if (type === undefined) {\n    return type;\n  } else {\n    throw new RangeError('Invalid type is specified');\n  }\n}\n\nconst enum ReadableStreamReaderMode {\n  DEFAULT = 'default',\n  BYOB = 'byob'\n}\n\n// common interface of ReadableStreamDefaultController<R> and ReadableByteStreamController\ninterface ReadableStreamControllerBase<R> {\n  readonly desiredSize: number | null;\n\n  close(): void;\n\n  enqueue(chunk: R): void;\n\n  error(e: any): void;\n}\n\n// common interface of ReadableStreamSource<R> and ReadableByteStreamSource\ninterface ReadableStreamSourceBase<R> {\n  start?(controller: ReadableStreamControllerBase<R>): void | Promise<any>;\n\n  pull?(controller: ReadableStreamControllerBase<R>): void | Promise<any>;\n\n  cancel?(reason: any): void | Promise<any>;\n}\n\ntype ReadableStreamReaderBase<R> = ReadableStreamDefaultReader<R> | ReadableStreamBYOBReader;\n\nclass AbstractWrappingReadableStreamSource<R> implements ReadableStreamSourceBase<R> {\n\n  protected readonly _underlyingStream: ReadableStreamLike<R>;\n  protected _underlyingReader: ReadableStreamReaderBase<R> | undefined = undefined;\n  protected _readerMode: ReadableStreamReaderMode | undefined = undefined;\n  protected _readableStreamController: ReadableStreamControllerBase<R> = undefined!;\n  private _pendingRead: Promise<void> | undefined = undefined;\n\n  constructor(underlyingStream: ReadableStreamLike<R>) {\n    this._underlyingStream = underlyingStream;\n\n    // always keep a reader attached to detect close/error\n    this._attachDefaultReader();\n  }\n\n  start(controller: ReadableStreamControllerBase<R>): void {\n    this._readableStreamController = controller;\n  }\n\n  cancel(reason: any): Promise<void> {\n    assert(this._underlyingReader !== undefined);\n\n    return this._underlyingReader!.cancel(reason);\n  }\n\n  protected _attachDefaultReader(): void {\n    if (this._readerMode === ReadableStreamReaderMode.DEFAULT) {\n      return;\n    }\n\n    this._detachReader();\n\n    const reader = this._underlyingStream.getReader();\n    this._readerMode = ReadableStreamReaderMode.DEFAULT;\n    this._attachReader(reader);\n  }\n\n  protected _attachReader(reader: ReadableStreamReaderBase<R>): void {\n    assert(this._underlyingReader === undefined);\n\n    this._underlyingReader = reader;\n\n    const closed = this._underlyingReader.closed;\n    if (!closed) {\n      return;\n    }\n    closed\n      .then(() => this._finishPendingRead())\n      .then(() => {\n        if (reader === this._underlyingReader) {\n          this._readableStreamController.close();\n        }\n      }, reason => {\n        if (reader === this._underlyingReader) {\n          this._readableStreamController.error(reason);\n        }\n      })\n      .catch(noop);\n  }\n\n  protected _detachReader(): void {\n    if (this._underlyingReader === undefined) {\n      return;\n    }\n\n    this._underlyingReader.releaseLock();\n    this._underlyingReader = undefined;\n    this._readerMode = undefined;\n  }\n\n  protected _pullWithDefaultReader(): Promise<void> {\n    this._attachDefaultReader();\n\n    // TODO Backpressure?\n    const read = (this._underlyingReader! as ReadableStreamDefaultReader<R>).read()\n      .then(result => {\n        const controller = this._readableStreamController;\n        if (result.done) {\n          this._tryClose();\n        } else {\n          controller.enqueue(result.value);\n        }\n      });\n\n    this._setPendingRead(read);\n    return read;\n  }\n\n  protected _tryClose(): void {\n    try {\n      this._readableStreamController.close();\n    } catch {\n      // already errored or closed\n    }\n  }\n\n  protected _setPendingRead(readPromise: Promise<void>) {\n    let pendingRead: Promise<void>;\n    const finishRead = () => {\n      if (this._pendingRead === pendingRead) {\n        this._pendingRead = undefined;\n      }\n    };\n    this._pendingRead = pendingRead = readPromise.then(finishRead, finishRead);\n  }\n\n  private _finishPendingRead(): Promise<void> | undefined {\n    if (!this._pendingRead) {\n      return undefined;\n    }\n    const afterRead = () => this._finishPendingRead();\n    return this._pendingRead.then(afterRead, afterRead);\n  }\n\n}\n\nclass WrappingReadableStreamDefaultSource<R> extends AbstractWrappingReadableStreamSource<R>\n  implements UnderlyingSource<R> {\n\n  protected _readableStreamController!: ReadableStreamDefaultController<R>;\n\n  pull(): Promise<void> {\n    return this._pullWithDefaultReader();\n  }\n\n}\n\nfunction toUint8Array(view: ArrayBufferView): Uint8Array {\n  return new Uint8Array(view.buffer, view.byteOffset, view.byteLength);\n}\n\nfunction copyArrayBufferView(from: ArrayBufferView, to: ArrayBufferView) {\n  const fromArray = toUint8Array(from);\n  const toArray = toUint8Array(to);\n  toArray.set(fromArray, 0);\n}\n\nclass WrappingReadableByteStreamSource extends AbstractWrappingReadableStreamSource<ArrayBufferView>\n  implements UnderlyingByteSource {\n\n  declare protected readonly _underlyingStream: ReadableByteStreamLike;\n  protected _readableStreamController!: ReadableByteStreamController;\n  protected readonly _supportsByob: boolean;\n\n  constructor(underlyingStream: ReadableByteStreamLike) {\n    const supportsByob = supportsByobReader(underlyingStream);\n    super(underlyingStream);\n    this._supportsByob = supportsByob;\n  }\n\n  get type(): 'bytes' {\n    return 'bytes';\n  }\n\n  _attachByobReader() {\n    if (this._readerMode === ReadableStreamReaderMode.BYOB) {\n      return;\n    }\n\n    assert(this._supportsByob);\n    this._detachReader();\n\n    const reader = this._underlyingStream.getReader({ mode: 'byob' });\n    this._readerMode = ReadableStreamReaderMode.BYOB;\n    this._attachReader(reader);\n  }\n\n  pull(): Promise<void> {\n    if (this._supportsByob) {\n      const byobRequest = this._readableStreamController.byobRequest;\n      if (byobRequest) {\n        return this._pullWithByobRequest(byobRequest);\n      }\n    }\n\n    return this._pullWithDefaultReader();\n  }\n\n  _pullWithByobRequest(byobRequest: ReadableStreamBYOBRequest): Promise<void> {\n    this._attachByobReader();\n\n    // reader.read(view) detaches the input view, therefore we cannot pass byobRequest.view directly\n    // create a separate buffer to read into, then copy that to byobRequest.view\n    const buffer = new Uint8Array(byobRequest.view!.byteLength);\n\n    // TODO Backpressure?\n    const read = (this._underlyingReader! as ReadableStreamBYOBReader).read(buffer)\n      .then(result => {\n        const controller = this._readableStreamController;\n        if (result.done) {\n          this._tryClose();\n          byobRequest.respond(0);\n        } else {\n          copyArrayBufferView(result.value, byobRequest.view!);\n          byobRequest.respond(result.value.byteLength);\n        }\n      });\n\n    this._setPendingRead(read);\n    return read;\n  }\n\n}\n", "import assert from './assert';\nimport { isWritableStream, isWritableStreamConstructor } from './checks';\nimport { WritableStreamLike, WritableStreamLikeConstructor } from './stream-like';\nimport { WritableStreamWrapper } from './wrappers';\nimport { noop } from './utils';\n\nexport function createWritableStreamWrapper(ctor: WritableStreamLikeConstructor): WritableStreamWrapper {\n  assert(isWritableStreamConstructor(ctor));\n\n  return <W>(writable: WritableStreamLike<W>) => {\n    if (writable.constructor === ctor) {\n      return writable;\n    }\n    const sink = createWrappingWritableSink(writable);\n    return new ctor(sink);\n  };\n}\n\nexport function createWrappingWritableSink<W = any>(writable: WritableStreamLike<W>): UnderlyingSink<W> {\n  assert(isWritableStream(writable));\n  assert(writable.locked === false);\n\n  const writer = writable.getWriter();\n  return new WrappingWritableStreamSink(writer);\n}\n\nconst enum WritableStreamState {\n  WRITABLE = 'writable',\n  ERRORING = 'erroring',\n  ERRORED = 'errored',\n  CLOSED = 'closed'\n}\n\nclass WrappingWritableStreamSink<W> implements UnderlyingSink<W> {\n\n  protected readonly _underlyingWriter: WritableStreamDefaultWriter<W>;\n  private _writableStreamController: WritableStreamDefaultController = undefined!;\n  private _pendingWrite: Promise<void> | undefined = undefined;\n  private _state: WritableStreamState = WritableStreamState.WRITABLE;\n  private _storedError: any = undefined;\n  private _errorPromise: Promise<void>;\n  private _errorPromiseReject!: (reason: any) => void;\n\n  constructor(underlyingWriter: WritableStreamDefaultWriter<W>) {\n    this._underlyingWriter = underlyingWriter;\n    this._errorPromise = new Promise<void>((resolve, reject) => {\n      this._errorPromiseReject = reject;\n    });\n    this._errorPromise.catch(noop);\n  }\n\n  start(controller: WritableStreamDefaultController): void {\n    this._writableStreamController = controller;\n\n    this._underlyingWriter.closed\n      .then(() => {\n        this._state = WritableStreamState.CLOSED;\n      })\n      .catch(reason => this._finishErroring(reason));\n  }\n\n  write(chunk: W): Promise<void> {\n    const writer = this._underlyingWriter;\n\n    // Detect past errors\n    if (writer.desiredSize === null) {\n      return writer.ready;\n    }\n\n    const writeRequest = writer.write(chunk);\n\n    // Detect future errors\n    writeRequest.catch(reason => this._finishErroring(reason));\n    writer.ready.catch(reason => this._startErroring(reason));\n\n    // Reject write when errored\n    const write = Promise.race([writeRequest, this._errorPromise]);\n\n    this._setPendingWrite(write);\n    return write;\n  }\n\n  close(): Promise<void> {\n    if (this._pendingWrite === undefined) {\n      return this._underlyingWriter.close();\n    }\n    return this._finishPendingWrite().then(() => this.close());\n  }\n\n  abort(reason: any): void | Promise<void> {\n    if (this._state === WritableStreamState.ERRORED) {\n      return undefined;\n    }\n\n    const writer = this._underlyingWriter;\n    return writer.abort(reason);\n  }\n\n  private _setPendingWrite(writePromise: Promise<void>) {\n    let pendingWrite: Promise<void>;\n    const finishWrite = () => {\n      if (this._pendingWrite === pendingWrite) {\n        this._pendingWrite = undefined;\n      }\n    };\n    this._pendingWrite = pendingWrite = writePromise.then(finishWrite, finishWrite);\n  }\n\n  private _finishPendingWrite(): Promise<void> {\n    if (this._pendingWrite === undefined) {\n      return Promise.resolve();\n    }\n    const afterWrite = () => this._finishPendingWrite();\n    return this._pendingWrite.then(afterWrite, afterWrite);\n  }\n\n  private _startErroring(reason: any): void {\n    if (this._state === WritableStreamState.WRITABLE) {\n      this._state = WritableStreamState.ERRORING;\n      this._storedError = reason;\n\n      const afterWrite = () => this._finishErroring(reason);\n      if (this._pendingWrite === undefined) {\n        afterWrite();\n      } else {\n        this._finishPendingWrite().then(afterWrite, afterWrite);\n      }\n\n      this._writableStreamController.error(reason);\n    }\n  }\n\n  private _finishErroring(reason: any): void {\n    if (this._state === WritableStreamState.WRITABLE) {\n      this._startErroring(reason);\n    }\n    if (this._state === WritableStreamState.ERRORING) {\n      this._state = WritableStreamState.ERRORED;\n      this._errorPromiseReject(this._storedError);\n    }\n  }\n\n}\n", "import assert from './assert';\nimport { isTransformStream, isTransformStreamConstructor } from './checks';\nimport { TransformStreamLike, TransformStreamLikeConstructor } from './stream-like';\nimport { TransformStreamWrapper } from './wrappers';\nimport { noop } from './utils';\n\nexport function createTransformStreamWrapper(ctor: TransformStreamLikeConstructor): TransformStreamWrapper {\n  assert(isTransformStreamConstructor(ctor));\n\n  return <I, O>(transform: TransformStreamLike<I, O>) => {\n    if (transform.constructor === ctor) {\n      return transform;\n    }\n    const transformer = createWrappingTransformer(transform);\n    return new ctor(transformer);\n  };\n}\n\nexport function createWrappingTransformer<I = any, O = any>(\n  transform: TransformStreamLike<I, O>): Transformer<I, O> {\n  assert(isTransformStream(transform));\n\n  const { readable, writable } = transform;\n  assert(readable.locked === false);\n  assert(writable.locked === false);\n\n  let reader: ReadableStreamDefaultReader<O> = readable.getReader();\n  let writer: WritableStreamDefaultWriter<I>;\n  try {\n    writer = writable.getWriter();\n  } catch (e) {\n    reader.releaseLock(); // do not leak reader\n    throw e;\n  }\n\n  return new WrappingTransformStreamTransformer<I, O>(reader, writer);\n}\n\nclass WrappingTransformStreamTransformer<I, O> implements Transformer<I, O> {\n\n  private readonly _reader: ReadableStreamDefaultReader<O>;\n  private readonly _writer: WritableStreamDefaultWriter<I>;\n  private readonly _flushPromise: Promise<void>;\n  private _flushResolve!: () => void;\n  private _flushReject!: (reason: any) => void;\n  private _transformStreamController: TransformStreamDefaultController<O> = undefined!;\n\n  constructor(reader: ReadableStreamDefaultReader<O>, writer: WritableStreamDefaultWriter<I>) {\n    this._reader = reader;\n    this._writer = writer;\n    this._flushPromise = new Promise<void>((resolve, reject) => {\n      this._flushResolve = resolve;\n      this._flushReject = reject;\n    });\n  }\n\n  start(controller: TransformStreamDefaultController<O>) {\n    this._transformStreamController = controller;\n\n    this._reader.read()\n      .then(this._onRead)\n      .then(this._onTerminate, this._onError);\n\n    const readerClosed = this._reader.closed;\n    if (readerClosed) {\n      readerClosed\n        .then(this._onTerminate, this._onError);\n    }\n  }\n\n  transform(chunk: I) {\n    return this._writer.write(chunk);\n  }\n\n  flush() {\n    return this._writer.close()\n      .then(() => this._flushPromise);\n  }\n\n  private _onRead = (result: ReadableStreamDefaultReadResult<O>): void | Promise<void> => {\n    if (result.done) {\n      return;\n    }\n    this._transformStreamController.enqueue(result.value);\n    return this._reader.read().then(this._onRead);\n  };\n\n  private _onError = (reason: any) => {\n    this._flushReject(reason);\n    this._transformStreamController.error(reason);\n\n    this._reader.cancel(reason).catch(noop);\n    this._writer.abort(reason).catch(noop);\n  };\n\n  private _onTerminate = () => {\n    this._flushResolve();\n    this._transformStreamController.terminate();\n\n    const error = new TypeError('TransformStream terminated');\n    this._writer.abort(error).catch(noop);\n  };\n\n}\n", "/**\n * EventSource/Server-Sent Events parser\n * @see https://html.spec.whatwg.org/multipage/server-sent-events.html\n *\n * Based on code from the {@link https://github.com/EventSource/eventsource | EventSource module},\n * which is licensed under the MIT license. And copyrighted the EventSource GitHub organisation.\n */\nimport type { EventSourceParseCallback, EventSourceParser } from './types'\n\n/**\n * Creates a new EventSource parser.\n *\n * @param onParse - Callback to invoke when a new event is parsed, or a new reconnection interval\n *                  has been sent from the server\n *\n * @returns A new EventSource parser, with `parse` and `reset` methods.\n * @public\n */\nexport function createParser(onParse: EventSourceParseCallback): EventSourceParser {\n  // Processing state\n  let isFirstChunk: boolean\n  let buffer: string\n  let startingPosition: number\n  let startingFieldLength: number\n\n  // Event state\n  let eventId: string | undefined\n  let eventName: string | undefined\n  let data: string\n\n  reset()\n  return { feed, reset }\n\n  function reset(): void {\n    isFirstChunk = true\n    buffer = ''\n    startingPosition = 0\n    startingFieldLength = -1\n\n    eventId = undefined\n    eventName = undefined\n    data = ''\n  }\n\n  function feed(chunk: string): void {\n    buffer = buffer ? buffer + chunk : chunk\n\n    // Strip any UTF8 byte order mark (BOM) at the start of the stream.\n    // Note that we do not strip any non - UTF8 BOM, as eventsource streams are\n    // always decoded as UTF8 as per the specification.\n    if (isFirstChunk && hasBom(buffer)) {\n      buffer = buffer.slice(BOM.length)\n    }\n\n    isFirstChunk = false\n\n    // Set up chunk-specific processing state\n    const { length } = buffer\n    let position = 0\n    let discardTrailingNewline = false\n\n    // Read the current buffer byte by byte\n    while (position < length) {\n      // EventSource allows for carriage return + line feed, which means we\n      // need to ignore a linefeed character if the previous character was a\n      // carriage return\n      // @todo refactor to reduce nesting, consider checking previous byte?\n      // @todo but consider multiple chunks etc\n      if (discardTrailingNewline) {\n        if (buffer[position] === '\\n') {\n          position += 1\n        }\n        discardTrailingNewline = false\n      }\n\n      let lineLength = -1\n      let fieldLength = startingFieldLength\n      let character: string\n\n      for (let index = startingPosition; lineLength < 0 && index < length; index++) {\n        character = buffer[index]\n        if (character === ':' && fieldLength < 0) {\n          fieldLength = index - position\n        } else if (character === '\\r') {\n          discardTrailingNewline = true\n          lineLength = index - position\n        } else if (character === '\\n') {\n          lineLength = index - position\n        }\n      }\n\n      if (lineLength < 0) {\n        startingPosition = length - position\n        startingFieldLength = fieldLength\n        break\n      } else {\n        startingPosition = 0\n        startingFieldLength = -1\n      }\n\n      parseEventStreamLine(buffer, position, fieldLength, lineLength)\n\n      position += lineLength + 1\n    }\n\n    if (position === length) {\n      // If we consumed the entire buffer to read the event, reset the buffer\n      buffer = ''\n    } else if (position > 0) {\n      // If there are bytes left to process, set the buffer to the unprocessed\n      // portion of the buffer only\n      buffer = buffer.slice(position)\n    }\n  }\n\n  function parseEventStreamLine(lineBuffer: string, index: number, fieldLength: number, lineLength: number) {\n    if (lineLength === 0) {\n      // We reached the last line of this event\n      if (data.length > 0) {\n        onParse({\n          type: 'event',\n          id: eventId,\n          event: eventName || undefined,\n          data: data.slice(0, -1), // remove trailing newline\n        })\n\n        data = ''\n        eventId = undefined\n      }\n      eventName = undefined\n      return\n    }\n\n    const noValue = fieldLength < 0\n    const field = lineBuffer.slice(index, index + (noValue ? lineLength : fieldLength))\n    let step = 0\n\n    if (noValue) {\n      step = lineLength\n    } else if (lineBuffer[index + fieldLength + 1] === ' ') {\n      step = fieldLength + 2\n    } else {\n      step = fieldLength + 1\n    }\n\n    const position = index + step\n    const valueLength = lineLength - step\n    const value = lineBuffer.slice(position, position + valueLength).toString()\n\n    if (field === 'data') {\n      data += value ? `${value}\\n` : '\\n'\n    } else if (field === 'event') {\n      eventName = value\n    } else if (field === 'id' && !value.includes('\\u0000')) {\n      eventId = value\n    } else if (field === 'retry') {\n      const retry = parseInt(value, 10)\n      if (!Number.isNaN(retry)) {\n        onParse({ type: 'reconnect-interval', value: retry })\n      }\n    }\n  }\n}\n\nconst BOM = [239, 187, 191]\n\nfunction hasBom(buffer: string) {\n  return BOM.every((charCode: number, index: number) => buffer.charCodeAt(index) === charCode)\n}\n", "import { TransformStream as _TransformStream, ReadableStream as _ReadableStream } from 'web-streams-polyfill'\nimport { createReadableStreamWrapper } from '@mattiasbuelens/web-streams-adapter'\nimport { createParser, type EventSourceParser, type ParsedEvent } from './eventsource_parser'\nimport type {\n  AsyncIterableReadableStream,\n  ChatModelMessage,\n  ToolCallAssistantMessage,\n  ModelTool,\n  FunctionTool,\n} from './type'\nimport { TextDecoder } from 'text-encoding-shim'\n\nexport const ReadableStream = _ReadableStream as {\n  prototype: ReadableStream\n\n  new (\n    underlyingSource: UnderlyingByteSource,\n    strategy?: {\n      highWaterMark?: number\n    },\n  ): ReadableStream<Uint8Array>\n  new <R = any>(underlyingSource: UnderlyingDefaultSource<R>, strategy?: QueuingStrategy<R>): ReadableStream<R>\n  new <R = any>(underlyingSource?: UnderlyingSource<R>, strategy?: QueuingStrategy<R>): ReadableStream<R>\n}\n\nexport const TransformStream = _TransformStream as {\n  prototype: TransformStream\n\n  new <I = any, O = any>(\n    transformer?: Transformer<I, O>,\n    writableStrategy?: QueuingStrategy<I>,\n    readableStrategy?: QueuingStrategy<O>,\n  ): TransformStream<I, O>\n}\n\nexport const createEventSourceParserTransformStream = () => {\n  let parser!: EventSourceParser\n\n  return new TransformStream<string, ParsedEvent>({\n    start(controller) {\n      parser = createParser((event) => {\n        if (event.type === 'event') {\n          controller.enqueue(event)\n        }\n      })\n    },\n    transform(chunk) {\n      parser.feed(chunk)\n    },\n  })\n}\n\nexport const toPolyfillReadable = createReadableStreamWrapper(ReadableStream)\n\nexport class TextDecoderStream {\n  private handle: TextDecoder\n\n  private transform = new TransformStream({\n    transform: (chunk, controller) => {\n      const value = this.handle.decode(new Uint8Array(chunk), { stream: true })\n\n      if (value) {\n        controller.enqueue(value)\n      }\n    },\n    flush: (controller) => {\n      const value = this.handle.decode()\n      if (value) {\n        controller.enqueue(value)\n      }\n\n      controller.terminate()\n    },\n  })\n\n  constructor(encoding = 'utf-8', options: TextDecoderOptions = {}) {\n    this.handle = new TextDecoder(encoding, options)\n  }\n\n  get encoding() {\n    return this.handle.encoding\n  }\n\n  get fatal() {\n    return this.handle.fatal\n  }\n\n  get ignoreBOM() {\n    return this.handle.ignoreBOM\n  }\n\n  get readable() {\n    return this.transform.readable\n  }\n\n  get writable() {\n    return this.transform.writable\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'TextDecoderStream'\n  }\n}\n\nexport function createAsyncIterable<T>(stream: ReadableStream<T>) {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  const _stream = stream as AsyncIterableReadableStream<T>\n  (_stream as any)[Symbol.asyncIterator] = () => {\n    const reader = stream.getReader()\n    return {\n      async next(): Promise<IteratorResult<T>> {\n        const { done, value } = await reader.read()\n        return done ? { done: true, value: undefined } : { done: false, value }\n      },\n    }\n  }\n  return _stream\n}\n\n/**\n * 将 SSE 二进制流转换为 T 类型的流\n */\nexport function intoStandardStream<T>(stream: ReadableStream<Uint8Array>): ReadableStream<T> {\n  return createAsyncIterable(stream\n    .pipeThrough(new TextDecoderStream())\n    .pipeThrough(createEventSourceParserTransformStream())\n    .pipeThrough(new TransformStream<ParsedEvent, T>({\n      transform(chunk, controller) {\n        try {\n          const data = JSON.parse(chunk.data) as T\n          controller.enqueue(data)\n        } catch (e) {\n          if (chunk.data !== '[DONE]') {\n            console.warn('Error when transforming event source data to json', e, chunk)\n          } else {\n            controller.terminate()\n          }\n        }\n      },\n    }),),)\n}\n\n/**\n * 将 SSE 二进制流转换为字符串流\n */\nexport function intoTextStream(stream: ReadableStream<Uint8Array>): AsyncIterableReadableStream<string> {\n  return createAsyncIterable((toPolyfillReadable(stream) as typeof stream).pipeThrough(new TextDecoderStream()))\n}\n\nexport async function readableStream2JsonObject(stream: ReadableStream) {\n  const s = intoTextStream(stream)\n  let total = ''\n  for await (const chunk of s) {\n    total += chunk\n  }\n  return JSON.parse(total)\n}\n\nexport function createPromise<T = unknown>() {\n  let res: (value: T | PromiseLike<T>) => void\n  let rej: (reason?: any) => void\n  const promise = new Promise<T>((resolve, reject) => {\n    res = resolve\n    rej = reject\n  })\n  return { promise, res, rej }\n}\n\nexport function isToolCallAssistantMessage(message: ChatModelMessage): message is ToolCallAssistantMessage {\n  // eslint-disable-next-line eqeqeq\n  return message.role === 'assistant' && 'tool_calls' in message && message.tool_calls?.[0] != null\n}\n\nexport function functionToolToModelTool(tool: FunctionTool): ModelTool {\n  return {\n    type: 'function',\n    function: {\n      description: tool.description,\n      name: tool.name,\n      parameters: tool.parameters,\n    },\n  }\n}\n", "import { type ParsedEvent } from '../eventsource_parser'\nimport { BotReq, ReqOptions } from '../type'\nimport {\n  IBotCreateConversation,\n  IBotDeleteConversation,\n  IBotGetConversation,\n  IBotGetTextToSpeechResult,\n  IBotPreview,\n  IBotSendMessage,\n  IBotSpeechToText,\n  IBotTextToSpeech,\n  IBotUploadFiles,\n  ICreateBot,\n  IDeleteBot,\n  IGenerateBot,\n  IGenerateImage,\n  IGetBot,\n  IGetBotChatRecords,\n  IGetBotFeedback,\n  IGetBotList,\n  IGetBotRecommendQuestions,\n  ISendBotFeedback,\n  IUpdateBot,\n} from './types'\nimport {\n  createAsyncIterable,\n  toPolyfillReadable,\n  createEventSourceParserTransformStream,\n  TextDecoderStream,\n  TransformStream,\n} from '../utils'\n\nexport class Bot {\n  req: BotReq\n\n  constructor(req: BotReq, public baseUrl: string) {\n    // eslint-disable-next-line prefer-rest-params\n    const token = arguments[2]\n    if (typeof token === 'string') {\n      this.req = ({ headers = {}, ...rest }) => req({ ...rest, headers: { ...headers, Authorization: `Bearer ${token}` } })\n    } else {\n      this.req = req\n    }\n  }\n\n  list(props: IGetBotList, options?: ReqOptions) {\n    return this.req({\n      method: 'get',\n      url: this.join('bots'),\n      data: props,\n      timeout: options?.timeout,\n    })\n  }\n\n  create({ botInfo }: ICreateBot, options?: ReqOptions) {\n    return this.req({\n      method: 'post',\n      url: this.join('bots'),\n      data: botInfo,\n      timeout: options?.timeout,\n    })\n  }\n\n  get({ botId }: IGetBot, options?: ReqOptions) {\n    return this.req({\n      method: 'get',\n      url: this.join(`bots/${botId}`),\n      timeout: options?.timeout,\n    })\n  }\n\n  update({ botId, botInfo }: IUpdateBot, options?: ReqOptions) {\n    return this.req({\n      method: 'PATCH',\n      url: this.join(`bots/${botId}`),\n      data: botInfo,\n      timeout: options?.timeout,\n    })\n  }\n\n  delete({ botId }: IDeleteBot, options?: ReqOptions) {\n    return this.req({ method: 'delete', url: this.join(`bots/${botId}`), timeout: options?.timeout })\n  }\n\n  getChatRecords(props: IGetBotChatRecords, options?: ReqOptions) {\n    return this.req({\n      method: 'get',\n      url: this.join(`bots/${props.botId}/records`),\n      data: props,\n      timeout: options?.timeout,\n    })\n  }\n\n  sendFeedback({ userFeedback }: ISendBotFeedback, options?: ReqOptions) {\n    return this.req({\n      method: 'post',\n      url: this.join(`bots/${userFeedback.botId}/feedback`),\n      data: userFeedback,\n      timeout: options?.timeout,\n    })\n  }\n\n  getFeedback(props: IGetBotFeedback, options?: ReqOptions) {\n    return this.req({\n      method: 'get',\n      url: this.join(`bots/${props.botId}/feedback`),\n      data: props,\n      timeout: options?.timeout,\n    })\n  }\n\n  async uploadFiles(props: IBotUploadFiles, options?: ReqOptions) {\n    return this.req({\n      method: 'post',\n      url: this.join(`bots/${props.botId}/files`),\n      data: props,\n      timeout: options?.timeout,\n    })\n  }\n\n  async createConversation({ botId, ...rest }: IBotCreateConversation, options?: ReqOptions) {\n    return this.req({\n      method: 'post',\n      url: this.join(`bots/${botId}/conversation`),\n      data: rest,\n      timeout: options?.timeout,\n    })\n  }\n\n  async getConversation({ pageSize = 10, pageNumber = 1, botId, ...rest }: IBotGetConversation, options?: ReqOptions) {\n    if (pageNumber < 1) throw new Error('pageNumber must be greater than 0')\n    const offset = pageSize * (pageNumber - 1)\n    const limit = pageSize\n    return this.req({\n      method: 'get',\n      url: this.join(`bots/${botId}/conversation`),\n      data: { ...rest, offset, limit },\n      timeout: options?.timeout,\n    })\n  }\n\n  async deleteConversation({ botId, conversationId, ...rest }: IBotDeleteConversation, options?: ReqOptions) {\n    return this.req({\n      method: 'delete',\n      url: this.join(`bots/${botId}/conversation/${conversationId}`),\n      data: rest,\n      timeout: options?.timeout,\n    })\n  }\n\n  async speechToText(props: IBotSpeechToText, options?: ReqOptions) {\n    return this.req({\n      method: 'post',\n      url: this.join(`bots/${props.botId}/speech-to-text`),\n      data: props,\n      timeout: options?.timeout,\n    })\n  }\n\n  async textToSpeech(props: IBotTextToSpeech, options?: ReqOptions) {\n    return this.req({\n      method: 'post',\n      url: this.join(`bots/${props.botId}/text-to-speech`),\n      data: props,\n      timeout: options?.timeout,\n    })\n  }\n\n  async getTextToSpeechResult(props: IBotGetTextToSpeechResult, options?: ReqOptions) {\n    return this.req({\n      method: 'get',\n      url: this.join(`bots/${props.botId}/text-to-speech`),\n      data: props,\n      timeout: options?.timeout,\n    })\n  }\n\n  async getRecommendQuestions(props: IGetBotRecommendQuestions, options?: ReqOptions) {\n    const res = await this.req({\n      method: 'post',\n      url: this.join(`bots/${props.botId}/recommend-questions`),\n      data: props,\n      stream: true,\n      timeout: options?.timeout,\n    })\n    return new StreamResult(res)\n  }\n\n  async generateBot(props: IGenerateBot, options?: ReqOptions) {\n    const res = await this.req({\n      method: 'post',\n      url: this.join('generate-bot'),\n      data: props,\n      stream: true,\n      timeout: options?.timeout,\n    })\n    return new StreamResult(res)\n  }\n\n  async getPreview(props: IBotPreview, options?: ReqOptions) {\n    const res = await this.req({\n      method: 'post',\n      url: this.join('preview'),\n      data: props,\n      stream: true,\n      timeout: options?.timeout,\n    })\n    return new StreamResult(res)\n  }\n\n  generateImage(props: IGenerateImage, options?: ReqOptions) {\n    return this.req({ method: 'post', url: this.join('generate-image'), data: props, timeout: options?.timeout })\n  }\n\n  async sendMessage(props: IBotSendMessage, options?: ReqOptions) {\n    const res = await this.req({\n      method: 'post',\n      url: this.join(`bots/${props.botId}/send-message`),\n      data: props,\n      stream: true,\n      timeout: options?.timeout,\n    })\n    return new StreamResult(res)\n  }\n\n  private join(url: string) {\n    return `${this.baseUrl}/${url}`\n  }\n}\n\ntype BotEventStreamData = { content: string }\n\nclass StreamResult {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  private _eventSourceStream: ReadableStream<ParsedEvent>\n\n  constructor(_stream: ReadableStream<Uint8Array>) {\n    const stream = toPolyfillReadable(_stream) as typeof _stream\n    this._eventSourceStream = stream\n      .pipeThrough(new TextDecoderStream())\n      .pipeThrough(createEventSourceParserTransformStream())\n  }\n\n  private get teeedStream() {\n    const [s1, s2] = this._eventSourceStream.tee()\n    this._eventSourceStream = s2\n    return s1\n  }\n\n  get eventSourceStream() {\n    return createAsyncIterable(this.teeedStream)\n  }\n\n  get dataStream() {\n    return createAsyncIterable(this.eventSourceStream.pipeThrough(new TransformStream<ParsedEvent, BotEventStreamData>({\n      transform(chunk, controller) {\n        try {\n          const data = JSON.parse(chunk.data)\n          controller.enqueue(data)\n        } catch (e) {\n          if (chunk.data !== '[DONE]') {\n            console.warn('Error when transforming event source data to json', e, chunk)\n          } else {\n            controller.terminate()\n          }\n        }\n      },\n    }),),)\n  }\n\n  get textStream() {\n    return createAsyncIterable(this.dataStream.pipeThrough(new TransformStream<BotEventStreamData, string>({\n      transform(chunk, controller) {\n        controller.enqueue(chunk?.content ?? '')\n      },\n    }),),)\n  }\n}\n", "import { ZhiPuSimpleModel } from './ZhiPu/index'\nimport { HunYuanBetaSimpleModel } from './HunYuanBeta/index'\nimport { HunYuanSimpleModel } from './HunYuan/index'\nimport { ArkSimpleModel } from './Ark/index'\nimport { DSSimpleModel } from './DashScope/index'\nimport { YiSimpleModel } from './Yi/index'\nimport { MoonshotSimpleModel } from './Moonshot/index'\nimport { HunYuanExpSimpleModel } from './HunYuanExp/index'\nimport { HunYuanOpenSimpleModel } from './HunYuanOpen/index'\nimport { DeepSeekSimpleModel } from './DeepSeek'\nimport { DefaultSimpleModel } from './Default'\nimport { DefaultImageModel } from './image-model'\n\nexport const MODELS = {\n  hunyuan: HunYuanSimpleModel,\n  'hunyuan-beta': HunYuanBetaSimpleModel,\n  ark: ArkSimpleModel,\n  dashscope: DSSimpleModel,\n  '01-ai': YiSimpleModel,\n  moonshot: MoonshotSimpleModel,\n  zhipu: ZhiPuSimpleModel,\n  'hunyuan-exp': HunYuanExpSimpleModel,\n  'hunyuan-open': HunYuanOpenSimpleModel,\n  deepseek: DeepSeekSimpleModel,\n}\n\nexport {\n  ZhiPuSimpleModel,\n  HunYuanBetaSimpleModel,\n  HunYuanSimpleModel,\n  ArkSimpleModel,\n  DSSimpleModel,\n  YiSimpleModel,\n  MoonshotSimpleModel,\n  HunYuanExpSimpleModel,\n  HunYuanOpenSimpleModel,\n  DefaultSimpleModel,\n  DefaultImageModel,\n}\n\nexport { ReactModel, toolMap } from './model'\n", "/* eslint-disable eqeqeq */\n/* eslint-disable @typescript-eslint/naming-convention */\nimport {\n  createAsyncIterable,\n  TransformStream,\n  toPolyfillReadable,\n  intoStandardStream,\n  isToolCallAssistantMessage,\n} from '../../utils'\nimport type { ZhiPuGenerateTextOutput, ZhiPuInputData, ZhiPuStreamTextOutput } from './type'\nimport type {\n  ModelReq,\n  BaseChatModelInput,\n  SimpleChatModel,\n  DoStreamOutput,\n  BaseDoStreamOutputChunk,\n  DoGenerateOutput,\n  ReqOptions,\n} from '../../type'\n\nfunction processInput(input: BaseChatModelInput): ZhiPuInputData {\n  const { messages, model, temperature, tool_choice, tools, top_p } = input\n\n  const processToolChoice = () => {\n    if (tool_choice && tool_choice !== 'auto') {\n      console.warn('`tool_choice` is not \\'auto\\'')\n    }\n    return tool_choice as any\n  }\n\n  return {\n    ...input,\n    messages,\n    model,\n    temperature,\n    tool_choice: processToolChoice(),\n    tools,\n    top_p,\n  }\n}\n\nexport class ZhiPuSimpleModel implements SimpleChatModel {\n  public subUrl = 'zhipu/api/paas/v4/chat/completions'\n  constructor(private req: ModelReq, public baseUrl: string, subUrl?: string) {\n    if (subUrl != null) {\n      this.subUrl = subUrl\n    }\n  }\n\n  private get url() {\n    return `${this.baseUrl}/${this.subUrl}`\n  }\n\n  public async doGenerate(_data: BaseChatModelInput, options?: ReqOptions): Promise<DoGenerateOutput> {\n    const data = processInput(_data)\n    const res = (await this.req({\n      url: this.url,\n      data: {\n        ...data,\n        stream: false,\n      },\n      stream: false,\n      timeout: options?.timeout,\n    })) as ZhiPuGenerateTextOutput\n    return { ...res, rawResponse: res }\n  }\n\n  public async doStream(_data: BaseChatModelInput, options?: ReqOptions): Promise<DoStreamOutput> {\n    const data = processInput(_data)\n    let isToolCall: null | boolean = null\n    const _stream = await this.req({\n      url: this.url,\n      data: {\n        ...data,\n        stream: true,\n      },\n      stream: true,\n      timeout: options?.timeout,\n    })\n    const stream = toPolyfillReadable(_stream) as typeof _stream\n\n    const zhipuStream = intoStandardStream<ZhiPuStreamTextOutput>(stream)\n    const streamWithRaw = zhipuStream.pipeThrough(new TransformStream<ZhiPuStreamTextOutput, BaseDoStreamOutputChunk & { rawResponse?: any }>({\n      transform(chunk, controller) {\n        const newChoices = chunk.choices.map((choice) => {\n          const message = choice.delta\n          if (isToolCall == null) isToolCall = isToolCallAssistantMessage(message)\n          if (isToolCall) {\n            return {\n              ...choice,\n              finish_reason: 'tool_calls' as const,\n              delta: message,\n            }\n          }\n          return choice\n        })\n        const newChunk = { ...chunk, choices: newChoices }\n        controller.enqueue({ ...newChunk, rawResponse: chunk })\n      },\n    }),)\n\n    return createAsyncIterable(streamWithRaw)\n  }\n}\n", "/* eslint-disable eqeqeq */\n/* eslint-disable @typescript-eslint/naming-convention */\nimport { HunYuanInputData } from './type'\nimport { BaseChatModelInput } from '../../type'\n\n/**\n * 这里的 process 只是对不符合的 input 做 warning。\n * 实际上还是会如实传递。\n * 防止未来模型参数更新，SDK 没跟上而导致用户输入无法生效。\n */\nexport function processInput(input: BaseChatModelInput): HunYuanInputData {\n  const { messages, model, temperature, tool_choice, tools, top_p } = input\n\n  const handleTools = () => {\n    if (!tools) return undefined\n    tools.forEach((tool) => {\n      if (tool.type !== 'function') console.warn('`type` in tool is not \\'function\\'', tool)\n    })\n    return tools as HunYuanInputData['tools']\n  }\n\n  const handleMessages = () => {\n    messages.forEach((message) => {\n      if ('tool_calls' in message) {\n        message.tool_calls\n          .filter(tool_call => tool_call.type !== 'function')\n          .forEach(tool_call => console.warn('`type` in tool_call is not \\'function\\'', tool_call, message))\n      }\n    })\n    return messages as HunYuanInputData['messages']\n  }\n\n  return {\n    ...input,\n    messages: handleMessages(),\n    model,\n    tools: handleTools(),\n    top_p,\n    tool_choice,\n    temperature,\n  }\n}\n\nexport function titleCaseToSnakeCase(obj: unknown) {\n  if (typeof obj !== 'object' || obj == null) return obj // 如果不是对象或者是null，则直接返回\n\n  if (Array.isArray(obj)) return obj.map(item => titleCaseToSnakeCase(item)) // 如果是数组，递归处理每个元素\n\n  return Object.entries(obj).reduce((acc, [key, value]) => {\n    const snakeCaseKey = toSnakeCase(key)\n\n    acc[snakeCaseKey] = typeof value === 'object' ? titleCaseToSnakeCase(value) : value\n    return acc\n  }, {})\n\n  function toSnakeCase(s: string) {\n    const ret = s.replace(/[A-Z]/g, match => `_${match.toLowerCase()}`)\n    return ret.charAt(0) === '_' ? ret.slice(1) : ret\n  }\n}\n", "/* eslint-disable @typescript-eslint/naming-convention */\n/* eslint-disable eqeqeq */\nimport {\n  createAsyncIterable,\n  TransformStream,\n  toPolyfillReadable,\n  intoStandardStream,\n  isToolCallAssistantMessage,\n} from '../../utils'\nimport type {\n  ModelReq,\n  BaseChatModelInput,\n  SimpleChatModel,\n  DoStreamOutput,\n  BaseDoStreamOutputChunk,\n  DoGenerateOutput,\n  ReqOptions,\n} from '../../type'\nimport { processInput } from '../HunYuan/util'\nimport { HunYuanGenerateTextOutput, HunYuanStreamTextOutput } from '../HunYuan/type'\n\nexport class HunYuanBetaSimpleModel implements SimpleChatModel {\n  public subUrl = 'hunyuan-beta/openapi/v1/chat/completions'\n  constructor(private req: ModelReq, public baseUrl: string, subUrl?: string) {\n    if (subUrl != null) {\n      this.subUrl = subUrl\n    }\n  }\n\n  private get url() {\n    return `${this.baseUrl}/${this.subUrl}`\n  }\n\n  public async doGenerate(data: BaseChatModelInput, options?: ReqOptions): Promise<DoGenerateOutput> {\n    const res = (await this.req({\n      url: this.url,\n      data: {\n        ...processInput(data),\n        stream: false,\n      },\n      stream: false,\n      timeout: options?.timeout,\n    })) as HunYuanGenerateTextOutput\n    return { ...res, rawResponse: res }\n  }\n\n  public async doStream(data: BaseChatModelInput, options?: ReqOptions): Promise<DoStreamOutput> {\n    let isToolCall: null | boolean = null\n\n    const _stream = await this.req({\n      url: this.url,\n      data: {\n        ...processInput(data),\n        stream: true,\n      },\n      stream: true,\n      timeout: options?.timeout,\n    })\n    const stream = toPolyfillReadable(_stream) as typeof _stream\n\n    const hunyuanBetaStream = intoStandardStream<HunYuanStreamTextOutput>(stream)\n    const streamWithRaw = hunyuanBetaStream.pipeThrough(new TransformStream<HunYuanStreamTextOutput, BaseDoStreamOutputChunk & { rawResponse?: any }>({\n      transform(chunk, controller) {\n        const newChoices = chunk.choices.map((choice) => {\n          const message = choice.delta\n          if (isToolCall == null) isToolCall = isToolCallAssistantMessage(message)\n          if (isToolCall) {\n            return {\n              ...choice,\n              finish_reason: 'tool_calls',\n              delta: message,\n            }\n          }\n          return choice\n        })\n        const newChunk = { ...chunk, choices: newChoices }\n        controller.enqueue({ ...newChunk, rawResponse: chunk })\n      },\n    }),)\n\n    return createAsyncIterable(streamWithRaw)\n  }\n}\n", "/* eslint-disable eqeqeq */\nimport {\n  createAsyncIterable,\n  TransformStream,\n  toPolyfillReadable,\n  intoStandardStream,\n  isToolCallAssistantMessage,\n} from '../../utils'\nimport type {\n  ModelReq,\n  BaseChatModelInput,\n  BaseDoStreamOutputChunk,\n  DoStreamOutput,\n  SimpleChatModel,\n  DoGenerateOutput,\n  ReqOptions,\n} from '../../type'\nimport { processInput, titleCaseToSnakeCase } from './util'\nimport { HunYuanGenerateTextOutput, HunYuanStreamTextOutput } from './type'\n\nexport class HunYuanSimpleModel implements SimpleChatModel {\n  public subUrl = 'hunyuan'\n  constructor(private req: ModelReq, public baseUrl: string, subUrl?: string) {\n    if (subUrl != null) {\n      this.subUrl = subUrl\n    }\n  }\n\n  private get url() {\n    return `${this.baseUrl}/${this.subUrl}`\n  }\n\n  public async doGenerate(data: BaseChatModelInput, options?: ReqOptions): Promise<DoGenerateOutput> {\n    const res = (await this.req({\n      url: this.url,\n      headers: {\n        'X-Tc-Action': 'ChatCompletions',\n      },\n      data: {\n        ...processInput(data),\n        stream: false,\n      },\n      stream: false,\n      timeout: options?.timeout,\n    })) as { Response: any }\n    const output = titleCaseToSnakeCase(res.Response) as HunYuanGenerateTextOutput\n    return {\n      ...output,\n      rawResponse: res,\n    }\n  }\n\n  public async doStream(data: BaseChatModelInput, options?: ReqOptions): Promise<DoStreamOutput> {\n    let isToolCall: null | boolean = null\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    const _stream = await this.req({\n      url: this.url,\n      headers: {\n        'X-Tc-Action': 'ChatCompletions',\n      },\n      data: {\n        ...data,\n        stream: true,\n      },\n      stream: true,\n      timeout: options?.timeout,\n    })\n    const stream = toPolyfillReadable(_stream) as typeof _stream\n\n    const hunyuanStream = intoStandardStream(stream)\n    const streamWithRaw = hunyuanStream.pipeThrough(new TransformStream<unknown, BaseDoStreamOutputChunk & { rawResponse?: any }>({\n      transform(_chunk, controller) {\n        const chunk = titleCaseToSnakeCase(_chunk) as HunYuanStreamTextOutput\n        const newChoices = chunk.choices.map((choice) => {\n          const message = choice.delta\n          if (isToolCall == null) isToolCall = isToolCallAssistantMessage(message)\n          if (isToolCall) {\n            return {\n              ...choice,\n              finish_reason: 'tool_calls',\n              delta: message,\n            }\n          }\n          return choice\n        })\n        const newChunk = { ...chunk, choices: newChoices }\n        controller.enqueue({ ...newChunk, rawResponse: _chunk })\n      },\n    }),)\n\n    return createAsyncIterable(streamWithRaw)\n  }\n}\n", "/* eslint-disable eqeqeq */\n/* eslint-disable @typescript-eslint/naming-convention */\nimport {\n  createAsyncIterable,\n  TransformStream,\n  toPolyfillReadable,\n  intoStandardStream,\n  isToolCallAssistantMessage,\n} from '../../utils'\nimport type { ArkGenerateTextOutput, ArkInputData, ArkStreamTextOutput } from './type'\nimport type {\n  ModelReq,\n  BaseChatModelInput,\n  SimpleChatModel,\n  DoGenerateOutput,\n  DoStreamOutput,\n  BaseDoStreamOutputChunk,\n  ReqOptions,\n} from '../../type'\n\nfunction processInput(input: BaseChatModelInput): ArkInputData {\n  const { messages, model, temperature, tools, top_p } = input\n\n  return {\n    ...input,\n    messages,\n    model,\n    tools,\n    top_p,\n    temperature,\n  }\n}\n\nexport class ArkSimpleModel implements SimpleChatModel {\n  public subUrl = 'ark/api/v3/chat/completions'\n  constructor(private req: ModelReq, public baseUrl: string, subUrl?: string) {\n    if (subUrl != null) {\n      this.subUrl = subUrl\n    }\n  }\n\n  private get url() {\n    return `${this.baseUrl}/${this.subUrl}`\n  }\n\n  public async doGenerate(data: BaseChatModelInput, options?: ReqOptions): Promise<DoGenerateOutput> {\n    const res = (await this.req({\n      url: this.url,\n      data: {\n        ...processInput(data),\n        stream: false,\n      },\n      stream: false,\n      timeout: options?.timeout,\n    })) as ArkGenerateTextOutput\n    return { ...res, rawResponse: res }\n  }\n\n  public async doStream(data: BaseChatModelInput, options?: ReqOptions): Promise<DoStreamOutput> {\n    let isToolCall: null | boolean = null\n    const _stream = await this.req({\n      url: this.url,\n      data: {\n        ...processInput(data),\n        stream: true,\n      },\n      stream: true,\n      timeout: options?.timeout,\n    })\n    const stream = toPolyfillReadable(_stream) as typeof _stream\n\n    const arkStream = intoStandardStream<ArkStreamTextOutput>(stream)\n    const streamWithRaw = arkStream.pipeThrough(new TransformStream<ArkStreamTextOutput, BaseDoStreamOutputChunk & { rawResponse?: any }>({\n      transform(chunk, controller) {\n        const newChoices = chunk.choices.map((choice) => {\n          const message = choice.delta\n          if (isToolCall == null) isToolCall = isToolCallAssistantMessage(message)\n          if (isToolCall) {\n            return {\n              ...choice,\n              finish_reason: 'tool_calls' as const,\n              delta: message,\n            }\n          }\n          return choice\n        })\n        const newChunk = { ...chunk, choices: newChoices }\n        controller.enqueue({ ...newChunk, rawResponse: chunk })\n      },\n    }),)\n\n    return createAsyncIterable(streamWithRaw)\n  }\n}\n", "/* eslint-disable eqeqeq */\n/* eslint-disable @typescript-eslint/naming-convention */\nimport {\n  createAsyncIterable,\n  TransformStream,\n  intoStandardStream,\n  isToolCallAssistantMessage,\n  toPolyfillReadable,\n} from '../../utils'\nimport type { DSInput, DSGenerateOutput, DSStreamOutput } from './type'\nimport type {\n  ModelReq,\n  BaseChatModelInput,\n  DoGenerateOutput,\n  DoStreamOutput,\n  BaseDoStreamOutputChunk,\n  SimpleChatModel,\n  ReqOptions,\n} from '../../type'\n\nfunction processInput(input: BaseChatModelInput): DSInput {\n  const { messages, model, temperature, tools, top_p } = input\n\n  return {\n    ...input,\n    messages,\n    model,\n    tools,\n    top_p,\n    temperature,\n  }\n}\n\nexport class DSSimpleModel implements SimpleChatModel {\n  public subUrl = 'dashscope/compatible-mode/v1/chat/completions'\n\n  constructor(private req: ModelReq, public baseUrl: string, subUrl?: string) {\n    if (subUrl != null) {\n      this.subUrl = subUrl\n    }\n  }\n\n  private get url() {\n    return `${this.baseUrl}/${this.subUrl}`\n  }\n\n  public async doGenerate(data: BaseChatModelInput, options?: ReqOptions): Promise<DoGenerateOutput> {\n    const res = (await this.req({\n      url: this.url,\n      data: {\n        ...processInput(data),\n        stream: false,\n      },\n      stream: false,\n      timeout: options?.timeout,\n    })) as DSGenerateOutput\n    return { ...res, rawResponse: res }\n  }\n\n  public async doStream(data: BaseChatModelInput, options?: ReqOptions): Promise<DoStreamOutput> {\n    let isToolCall: null | boolean = null\n    const _stream = await this.req({\n      url: this.url,\n      data: {\n        ...processInput(data),\n        stream: true,\n      },\n      stream: true,\n      timeout: options?.timeout,\n    })\n    const stream = toPolyfillReadable(_stream) as typeof _stream\n\n    const arkStream = intoStandardStream<DSStreamOutput>(stream)\n    const streamWithRaw = arkStream.pipeThrough(new TransformStream<DSStreamOutput, BaseDoStreamOutputChunk & { rawResponse?: any }>({\n      transform(chunk, controller) {\n        const newChoices = chunk.choices.map((choice) => {\n          const message = Object.assign(choice.delta, { role: 'assistant' }) as typeof choice.delta & {\n            role: 'assistant'\n          }\n          if (isToolCall == null) isToolCall = isToolCallAssistantMessage(message)\n          if (isToolCall) {\n            return {\n              ...choice,\n              finish_reason: 'tool_calls' as const,\n              delta: message,\n            }\n          }\n          return { ...choice, delta: message }\n        })\n        const newChunk = { ...chunk, choices: newChoices }\n        controller.enqueue({ ...newChunk, rawResponse: chunk })\n      },\n    }),)\n\n    return createAsyncIterable(streamWithRaw)\n  }\n}\n", "/* eslint-disable @typescript-eslint/naming-convention */\n/* eslint-disable eqeqeq */\nimport {\n  createAsyncIterable,\n  TransformStream,\n  toPolyfillReadable,\n  intoStandardStream,\n  isToolCallAssistantMessage,\n} from '../../utils'\nimport type { YiInput, YiGenerateOutput, YiStreamOutput } from './type'\nimport type {\n  ModelReq,\n  BaseChatModelInput,\n  DoGenerateOutput,\n  DoStreamOutput,\n  BaseDoStreamOutputChunk,\n  SimpleChatModel,\n  ReqOptions,\n} from '../../type'\n\nfunction processInput(input: BaseChatModelInput): YiInput {\n  const { messages, model, temperature, tools, top_p } = input\n\n  return {\n    ...input,\n    messages,\n    model,\n    tools,\n    top_p,\n    temperature,\n  }\n}\n\nexport class YiSimpleModel implements SimpleChatModel {\n  public subUrl = '01-ai/v1/chat/completions'\n\n  constructor(private req: ModelReq, public baseUrl: string, subUrl?: string) {\n    if (subUrl != null) {\n      this.subUrl = subUrl\n    }\n  }\n\n  private get url() {\n    return `${this.baseUrl}/${this.subUrl}`\n  }\n\n  public async doGenerate(data: BaseChatModelInput, options?: ReqOptions): Promise<DoGenerateOutput> {\n    const res = (await this.req({\n      url: this.url,\n      data: {\n        ...processInput(data),\n        stream: false,\n      },\n      stream: false,\n      timeout: options?.timeout,\n    })) as YiGenerateOutput\n    return { ...res, rawResponse: res }\n  }\n\n  public async doStream(data: BaseChatModelInput, options?: ReqOptions): Promise<DoStreamOutput> {\n    let isToolCall: null | boolean = null\n    const _stream = await this.req({\n      url: this.url,\n      data: {\n        ...processInput(data),\n        stream: true,\n      },\n      stream: true,\n      timeout: options?.timeout,\n    })\n    const stream = toPolyfillReadable(_stream) as typeof _stream\n\n    const arkStream = intoStandardStream<YiStreamOutput>(stream)\n    const streamWithRaw = arkStream.pipeThrough(new TransformStream<YiStreamOutput, BaseDoStreamOutputChunk & { rawResponse?: any }>({\n      transform(chunk, controller) {\n        // 非常奇葩\n        if (!(chunk?.choices?.[0]?.delta?.content || chunk?.choices?.[0]?.delta?.tool_calls)) return\n\n        const newChoices = chunk.choices.map((choice) => {\n          const message = Object.assign(choice.delta, { role: 'assistant' }) as typeof choice.delta & {\n            role: 'assistant'\n          }\n          if (isToolCall == null) isToolCall = isToolCallAssistantMessage(message)\n          if (isToolCall) {\n            return {\n              ...choice,\n              finish_reason: 'tool_calls' as const,\n              delta: message,\n            }\n          }\n          return { ...choice, delta: message }\n        })\n        const newChunk = { ...chunk, choices: newChoices }\n        controller.enqueue({ ...newChunk, rawResponse: chunk })\n      },\n    }),)\n\n    return createAsyncIterable(streamWithRaw)\n  }\n}\n", "/* eslint-disable eqeqeq */\nimport {\n  createAsyncIterable,\n  TransformStream,\n  toPolyfillReadable,\n  intoStandardStream,\n  isToolCallAssistantMessage,\n} from '../../utils'\nimport type { MoonshotGenerateTextOutput, MoonshotStreamTextOutput, MoonshotInputData } from './type'\nimport type {\n  ModelReq,\n  BaseDoStreamOutputChunk,\n  DoGenerateOutput,\n  DoStreamOutput,\n  SimpleChatModel,\n  BaseChatModelInput,\n  ReqOptions,\n} from '../../type'\n\nfunction processInput(input: BaseChatModelInput): MoonshotInputData {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  const { messages, model, temperature, tools, top_p } = input\n\n  return {\n    ...input,\n    messages,\n    model,\n    tools,\n    top_p,\n    temperature,\n  }\n}\n\nexport class MoonshotSimpleModel implements SimpleChatModel {\n  public subUrl = 'moonshot/v1/chat/completions'\n  constructor(private req: ModelReq, public baseUrl: string, subUrl?: string) {\n    if (subUrl != null) {\n      this.subUrl = subUrl\n    }\n  }\n\n  private get url() {\n    return `${this.baseUrl}/${this.subUrl}`\n  }\n\n  public async doGenerate(data: BaseChatModelInput, options?: ReqOptions): Promise<DoGenerateOutput> {\n    const res = (await this.req({\n      url: this.url,\n      data: {\n        ...processInput(data),\n        stream: false,\n      },\n      stream: false,\n      timeout: options?.timeout,\n    })) as MoonshotGenerateTextOutput\n    return { ...res, rawResponse: res }\n  }\n\n  public async doStream(data: BaseChatModelInput, options?: ReqOptions): Promise<DoStreamOutput> {\n    let isToolCall: null | boolean = null\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    const _stream = await this.req({\n      url: this.url,\n      data: {\n        ...processInput(data),\n        stream: true,\n      },\n      stream: true,\n      timeout: options?.timeout,\n    })\n    const stream = toPolyfillReadable(_stream) as typeof _stream\n\n    const arkStream = intoStandardStream<MoonshotStreamTextOutput>(stream)\n    const streamWithRaw = arkStream.pipeThrough(new TransformStream<MoonshotStreamTextOutput, BaseDoStreamOutputChunk & { rawResponse?: any }>({\n      transform(chunk, controller) {\n        const newChoices = chunk.choices.map((choice) => {\n          const message = choice.delta\n          if (isToolCall == null) isToolCall = isToolCallAssistantMessage(message)\n          if (isToolCall) {\n            return {\n              ...choice,\n              finish_reason: 'tool_calls' as const,\n              delta: message,\n            }\n          }\n          return choice\n        })\n        const newChunk = { ...chunk, choices: newChoices }\n        controller.enqueue({ ...newChunk, rawResponse: chunk })\n      },\n    }),)\n\n    return createAsyncIterable(streamWithRaw)\n  }\n}\n", "/* eslint-disable @typescript-eslint/naming-convention */\n/* eslint-disable eqeqeq */\nimport {\n  createAsyncIterable,\n  TransformStream,\n  toPolyfillReadable,\n  intoStandardStream,\n  isToolCallAssistantMessage,\n} from '../../utils'\nimport type {\n  ModelReq,\n  BaseChatModelInput,\n  SimpleChatModel,\n  DoStreamOutput,\n  BaseDoStreamOutputChunk,\n  DoGenerateOutput,\n} from '../../type'\nimport { processInput } from '../HunYuan/util'\nimport { HunYuanGenerateTextOutput, HunYuanStreamTextOutput } from '../HunYuan/type'\n\nexport class HunYuanExpSimpleModel implements SimpleChatModel {\n  public subUrl = 'hunyuan-exp/chat/completions'\n  constructor(private req: ModelReq, public baseUrl: string, subUrl?: string) {\n    if (subUrl != null) {\n      this.subUrl = subUrl\n    }\n  }\n\n  private get url() {\n    return `${this.baseUrl}/${this.subUrl}`\n  }\n\n  public async doGenerate(data: BaseChatModelInput): Promise<DoGenerateOutput> {\n    const res = (await this.req({\n      url: this.url,\n      data: {\n        ...processInput(data),\n        stream: false,\n      },\n      stream: false,\n    })) as HunYuanGenerateTextOutput\n    return { ...res, rawResponse: res }\n  }\n\n  public async doStream(data: BaseChatModelInput): Promise<DoStreamOutput> {\n    let isToolCall: null | boolean = null\n\n    const _stream = await this.req({\n      url: this.url,\n      data: {\n        ...processInput(data),\n        stream: true,\n      },\n      stream: true,\n    })\n    const stream = toPolyfillReadable(_stream) as typeof _stream\n\n    const hunyuanBetaStream = intoStandardStream<HunYuanStreamTextOutput>(stream)\n    const streamWithRaw = hunyuanBetaStream.pipeThrough(new TransformStream<HunYuanStreamTextOutput, BaseDoStreamOutputChunk & { rawResponse?: any }>({\n      transform(chunk, controller) {\n        const newChoices = chunk.choices.map((choice) => {\n          const message = choice.delta\n          if (isToolCall == null) isToolCall = isToolCallAssistantMessage(message)\n          if (isToolCall) {\n            return {\n              ...choice,\n              finish_reason: 'tool_calls',\n              delta: message,\n            }\n          }\n          return choice\n        })\n        const newChunk = { ...chunk, choices: newChoices }\n        controller.enqueue({ ...newChunk, rawResponse: chunk })\n      },\n    }),)\n\n    return createAsyncIterable(streamWithRaw)\n  }\n}\n", "/* eslint-disable eqeqeq */\nimport {\n  createAsyncIterable,\n  TransformStream,\n  toPolyfillReadable,\n  intoStandardStream,\n  isToolCallAssistantMessage,\n} from '../../utils'\nimport type {\n  ModelReq,\n  BaseChatModelInput,\n  SimpleChatModel,\n  DoStreamOutput,\n  BaseDoStreamOutputChunk,\n  DoGenerateOutput,\n  ReqOptions,\n} from '../../type'\nimport { processInput } from '../HunYuan/util'\nimport { HunYuanGenerateTextOutput, HunYuanStreamTextOutput } from '../HunYuan/type'\n\nexport class HunYuanOpenSimpleModel implements SimpleChatModel {\n  public subUrl = 'hunyuan-open/v1/chat/completions'\n  constructor(private req: ModelReq, public baseUrl: string, subUrl?: string) {\n    if (subUrl != null) {\n      this.subUrl = subUrl\n    }\n  }\n\n  private get url() {\n    return `${this.baseUrl}/${this.subUrl}`\n  }\n\n  public async doGenerate(data: BaseChatModelInput, options?: ReqOptions): Promise<DoGenerateOutput> {\n    const res = (await this.req({\n      url: this.url,\n      data: {\n        ...processInput(data),\n        stream: false,\n      },\n      stream: false,\n      timeout: options?.timeout,\n    })) as HunYuanGenerateTextOutput\n    return { ...res, rawResponse: res }\n  }\n\n  public async doStream(data: BaseChatModelInput, options?: ReqOptions): Promise<DoStreamOutput> {\n    let isToolCall: null | boolean = null\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    const _stream = await this.req({\n      url: this.url,\n      data: {\n        ...processInput(data),\n        stream: true,\n      },\n      stream: true,\n      timeout: options?.timeout,\n    })\n    const stream = toPolyfillReadable(_stream) as typeof _stream\n\n    const hunyuanBetaStream = intoStandardStream<HunYuanStreamTextOutput>(stream)\n    const streamWithRaw = hunyuanBetaStream.pipeThrough(new TransformStream<HunYuanStreamTextOutput, BaseDoStreamOutputChunk & { rawResponse?: any }>({\n      transform(chunk, controller) {\n        const newChoices = chunk.choices.map((choice) => {\n          const message = choice.delta\n          if (isToolCall == null) isToolCall = isToolCallAssistantMessage(message)\n          if (isToolCall) {\n            return {\n              ...choice,\n              finish_reason: 'tool_calls',\n              delta: message,\n            }\n          }\n          return choice\n        })\n        const newChunk = { ...chunk, choices: newChoices }\n        controller.enqueue({ ...newChunk, rawResponse: chunk })\n      },\n    }),)\n\n    return createAsyncIterable(streamWithRaw)\n  }\n}\n", "/* eslint-disable eqeqeq */\nimport {\n  createAsyncIterable,\n  TransformStream,\n  toPolyfillReadable,\n  intoStandardStream,\n  isToolCallAssistantMessage,\n} from '../../utils'\nimport type {\n  ModelReq,\n  BaseChatModelInput,\n  SimpleChatModel,\n  DoStreamOutput,\n  BaseDoStreamOutputChunk,\n  DoGenerateOutput,\n  ReqOptions,\n} from '../../type'\n\nexport class DeepSeekSimpleModel implements SimpleChatModel {\n  public subUrl = 'deepseek/chat/completions'\n  constructor(private req: ModelReq, public baseUrl: string, subUrl?: string) {\n    if (subUrl != null) {\n      this.subUrl = subUrl\n    }\n  }\n\n  private get url() {\n    return `${this.baseUrl}/${this.subUrl}`\n  }\n\n  public async doGenerate(data: BaseChatModelInput, options?: ReqOptions): Promise<DoGenerateOutput> {\n    const res = (await this.req({\n      url: this.url,\n      data: {\n        ...data,\n        stream: false,\n      },\n      stream: false,\n      timeout: options?.timeout,\n    })) as DoGenerateOutput\n    return { ...res, rawResponse: res }\n  }\n\n  public async doStream(data: BaseChatModelInput, options?: ReqOptions): Promise<DoStreamOutput> {\n    let isToolCall: null | boolean = null\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    const _stream = await this.req({\n      url: this.url,\n      data: {\n        ...data,\n        stream: true,\n      },\n      stream: true,\n      timeout: options?.timeout,\n    })\n    const stream = toPolyfillReadable(_stream) as typeof _stream\n\n    const standardStream = intoStandardStream<BaseDoStreamOutputChunk>(stream)\n    const streamWithRaw = standardStream.pipeThrough(new TransformStream<BaseDoStreamOutputChunk, BaseDoStreamOutputChunk & { rawResponse?: any }>({\n      transform(chunk, controller) {\n        const newChoices = chunk.choices.map((choice) => {\n          const message = choice.delta\n          if (isToolCall == null) isToolCall = isToolCallAssistantMessage(message)\n          if (isToolCall) {\n            return {\n              ...choice,\n              finish_reason: 'tool_calls' as const,\n              delta: message,\n            }\n          }\n          return choice\n        })\n        const newChunk = { ...chunk, choices: newChoices }\n        controller.enqueue({ ...newChunk, rawResponse: chunk })\n      },\n    }),)\n\n    return createAsyncIterable(streamWithRaw)\n  }\n}\n", "import {\n  createAsyncIterable,\n  TransformStream,\n  toPolyfillReadable,\n  intoStandardStream,\n  isToolCallAssistantMessage,\n} from '../../utils'\nimport type {\n  ModelReq,\n  BaseChatModelInput,\n  SimpleChatModel,\n  DoStreamOutput,\n  BaseDoStreamOutputChunk,\n  DoGenerateOutput,\n} from '../../type'\n\nexport class DefaultSimpleModel implements SimpleChatModel {\n  constructor(private req: ModelReq, public baseUrl: string, public subUrl: string = '') {}\n\n  private get url() {\n    return `${this.baseUrl}/${this.subUrl}`\n  }\n\n  public async doGenerate(data: BaseChatModelInput): Promise<DoGenerateOutput> {\n    const res = await this.req({\n      url: this.url,\n      data: { ...data, stream: false },\n      stream: false,\n    })\n    return { ...res, rawResponse: res }\n  }\n\n  public async doStream(data: BaseChatModelInput): Promise<DoStreamOutput> {\n    let isToolCall: null | boolean = null\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    const _stream = await this.req({\n      url: this.url,\n      data: {\n        ...data,\n        stream: true,\n      },\n      stream: true,\n    })\n    const stream = toPolyfillReadable(_stream) as typeof _stream\n\n    const standardStream = intoStandardStream<BaseDoStreamOutputChunk>(stream)\n    const streamWithRaw = standardStream.pipeThrough(new TransformStream<BaseDoStreamOutputChunk, BaseDoStreamOutputChunk & { rawResponse?: any }>({\n      transform(chunk, controller) {\n        const newChoices = chunk.choices.map((choice) => {\n          const message = choice.delta\n          // eslint-disable-next-line eqeqeq\n          if (isToolCall == null) isToolCall = isToolCallAssistantMessage(message)\n          if (isToolCall) {\n            return {\n              ...choice,\n              finish_reason: 'tool_calls',\n              delta: message,\n            }\n          }\n          return choice\n        })\n        const newChunk = { ...chunk, choices: newChoices }\n        controller.enqueue({ ...newChunk, rawResponse: chunk })\n      },\n    }),)\n\n    return createAsyncIterable(streamWithRaw)\n  }\n}\n", "import type {\n  ModelReq,\n  // ImageEditInput,\n  HunyuanGenerateImageInput,\n  HunyuanGenerateImageOutput,\n  HunyuanARGenerateImageInput,\n  HunyuanARGenerateImageOutput,\n  // HunyuanEditImageInput,\n  // HunyuanEditImageOutput,\n} from '../type'\n\ninterface HunyuanImageGenerateFn {\n  (input: HunyuanARGenerateImageInput): Promise<HunyuanARGenerateImageOutput>\n  (input: HunyuanGenerateImageInput): Promise<HunyuanGenerateImageOutput>\n}\n\ntype GenerateImageFn<TProvider> = TProvider extends 'hunyuan-image'\n  ? HunyuanImageGenerateFn\n  : (input: unknown) => Promise<unknown>\n\nexport class DefaultImageModel<TProvider extends string> {\n  public defaultGenerateImageSubUrl = 'images/generations'\n\n  public generateImageSubUrlConfig: Record<string, Record<string, string>> = {\n    'hunyuan-image': {\n      'hunyuan-image-v3.0-v1.0.4': 'images/ar/generations',\n      'hunyuan-image-v3.0-v1.0.1': 'images/ar/generations',\n    },\n  }\n\n  /** 生成图片 */\n  public generateImage: GenerateImageFn<TProvider>\n\n  constructor(private req: ModelReq, public baseUrl: string, public provider: TProvider) {\n    this.generateImage = this.generateImageImpl.bind(this) as GenerateImageFn<TProvider>\n  }\n\n  /** generateImage 的实际实现 */\n  private async generateImageImpl(input: HunyuanARGenerateImageInput | HunyuanGenerateImageInput,): Promise<HunyuanARGenerateImageOutput | HunyuanGenerateImageOutput> {\n    let subUrl = this.defaultGenerateImageSubUrl\n\n    if (typeof input === 'object' && input && 'model' in input && typeof input.model === 'string') {\n      const newSubUrl = this.generateImageSubUrlConfig[this.provider]?.[input.model]\n      if (newSubUrl) subUrl = newSubUrl\n    }\n\n    const res = (await this.req({\n      url: this.getGenerateUrl(subUrl),\n      data: input,\n      stream: false,\n    })) as HunyuanARGenerateImageOutput | HunyuanGenerateImageOutput\n\n    return res\n  }\n\n  private getGenerateUrl(subUrl: string) {\n    return `${this.baseUrl}/${this.provider}/${subUrl}`\n  }\n}\n", "/* eslint-disable @typescript-eslint/naming-convention */\n/* eslint-disable eqeqeq */\nimport {\n  createAsyncIterable,\n  TransformStream,\n  createPromise,\n  isToolCallAssistantMessage,\n  functionToolToModelTool,\n} from '../utils'\nimport {\n  BaseChatModelInput,\n  BaseDoStreamOutputChunk,\n  DoStreamOutput,\n  DoGenerateOutput,\n  SimpleChatModel,\n  ToolCall,\n  ChatModelMessage,\n  AsyncIterableReadableStream,\n  Usage,\n  ToolCallAssistantMessage,\n  ModelTool,\n  FunctionTool,\n  ReqOptions,\n} from '../type'\n\ntype ReactModelInput = ReactProps &\nOmit<BaseChatModelInput, 'tools'> & {\n  tools?: Array<ModelTool | FunctionTool>\n  topP?: number\n  toolChoice?: 'none' | 'auto' | 'custom'\n}\n\ninterface IOnStepFinish {\n  messages: Array<ChatModelMessage>\n  text?: string\n  toolCall?: ToolCall\n  toolResult?: unknown\n  finishReason?: string\n  stepUsage?: Usage\n  totalUsage?: Usage\n}\n\ninterface ReactProps {\n  maxSteps?: number\n  onStepFinish?: (prop: IOnStepFinish) => unknown\n  abortSignal?: AbortSignal // TODO: 实现 abortSignal\n}\n\nfunction processInput(obj: ReactModelInput): [ReactProps, BaseChatModelInput] {\n  const { onStepFinish, abortSignal, maxSteps, topP, toolChoice, ...b } = obj\n\n  if (maxSteps != null && maxSteps < 1) {\n    throw new Error('`maxSteps` muse be greater than 0.')\n  }\n\n  return [\n    { onStepFinish, abortSignal, maxSteps },\n    {\n      ...b,\n      tools: b.tools?.map((tool) => {\n        if ('fn' in tool) {\n          return functionToolToModelTool(tool)\n        }\n        return tool\n      }),\n      top_p: topP != null ? topP : b.top_p,\n      tool_choice: toolChoice != null ? toolChoice : b.tool_choice,\n    },\n  ]\n}\n\nexport class ReactModel {\n  constructor(private model: SimpleChatModel) {}\n\n  public async generateText(_input: ReactModelInput, options?: ReqOptions): Promise<{\n    text: string\n    messages: Array<ChatModelMessage>\n    usage: Usage\n    rawResponses: Array<unknown>\n    error?: any\n  }> {\n    const rawResponses = []\n    const totalUsage: Usage = { completion_tokens: 0, prompt_tokens: 0, total_tokens: 0 }\n\n    const [{ onStepFinish, maxSteps = 10 }, input] = processInput(_input)\n\n    const doGenerate = () => this.model.doGenerate(input, options) // 后续代码会直接对 input.messages 原地修改，这里一直用同一个对象就行\n    let currentRes = await doGenerate()\n    let currentStep = 1\n    currentRes.rawResponse && rawResponses.push(currentRes.rawResponse)\n\n    let toolCall: ToolCall | null = null\n\n    // TODO: 一次对话有多个 tool call? 目前没有这种现象，暂时不处理\n    while (currentStep < maxSteps && (toolCall = getToolCallFromGenerate(currentRes)) != null) {\n      const stepUsage = createSolidUsage(currentRes.usage)\n      addToUsage(totalUsage, stepUsage)\n\n      // 当判断需要工具调用时\n      try {\n        const toolCallResult = await callTool(toolCall) // 调用\n\n        const choice = currentRes.choices[0] // getToolCallFromGenerate 保证了 choice 肯定存在\n\n        await onStepFinish?.({\n          finishReason: choice.finish_reason,\n          messages: input.messages.slice(),\n          text: choice.message.content,\n          toolCall,\n          toolResult: toolCallResult,\n          stepUsage,\n          totalUsage: Object.assign({}, totalUsage),\n        })\n\n        pushNewMessages(input.messages, choice.message as ToolCallAssistantMessage, toolCallResult) // 用调用结果修改最新的消息\n\n        currentRes = await doGenerate() // 循环对话\n        currentRes.rawResponse && rawResponses.push(currentRes.rawResponse)\n        currentStep += 1\n      } catch (e) {\n        return {\n          text: '',\n          messages: input.messages,\n          usage: totalUsage,\n          error: e,\n          rawResponses,\n        }\n      }\n    }\n\n    const lastChoice = currentRes?.choices?.[0]\n    const lastMessage = lastChoice?.message\n\n    const text = lastMessage?.content ?? ''\n    const messages = lastMessage ? [...input.messages, lastMessage] : input.messages\n\n    const stepUsage = createSolidUsage(currentRes.usage)\n    addToUsage(totalUsage, stepUsage)\n\n    await onStepFinish?.({\n      finishReason: lastChoice.finish_reason,\n      messages: messages.slice(),\n      text,\n      toolCall: getToolCallFromGenerate(currentRes),\n      toolResult: null,\n      stepUsage,\n      totalUsage: Object.assign({}, totalUsage),\n    })\n\n    return {\n      text,\n      messages,\n      usage: totalUsage,\n      rawResponses,\n    }\n  }\n\n  public async streamText(_input: ReactModelInput, options?: ReqOptions): Promise<{\n    dataStream: DoStreamOutput\n    textStream: AsyncIterableReadableStream<string>\n    messages: Promise<Array<ChatModelMessage>>\n    usage: Promise<Usage>\n    error?: any\n  }> {\n    const totalUsage: Usage = { completion_tokens: 0, prompt_tokens: 0, total_tokens: 0 }\n\n    const [{ onStepFinish, maxSteps = 10 }, input] = processInput(_input)\n    const doStream = () => this.model.doStream(input, options) // 后续代码会直接对 input.messages 原地修改，这里一直用同一个对象就行\n    let currentRes = await doStream()\n    const currentStep = 1\n    let readResult: { message: ToolCallAssistantMessage; usage: Usage } | null = null\n\n    const readCurrentStream = () => {\n      const [oldStream, newStream] = currentRes.tee()\n      currentRes = createAsyncIterable(oldStream)\n      return readFunctionCallStream(newStream)\n    }\n\n    // TODO: 一次对话有多个 tool call? 目前没有这种现象，暂时不处理\n    // 这里和 generateText 不太一样，除了解析出 toolCall 外，还需要从流中构造出其他完整的信息\n    while (currentStep < maxSteps && (readResult = await readCurrentStream()) != null) {\n      const { message: assistantMessage, usage: stepUsage } = readResult\n      addToUsage(totalUsage, stepUsage)\n\n      // 当判断需要工具调用时\n      const toolCall = assistantMessage.tool_calls?.[0] // 这个 toolCall 一定存在\n      try {\n        const toolCallResult = await callTool(toolCall) // 调用\n\n        await onStepFinish?.({\n          finishReason: 'tool_calls',\n          messages: input.messages.slice(),\n          text: assistantMessage.content,\n          toolCall,\n          toolResult: toolCallResult,\n          stepUsage,\n          totalUsage: Object.assign({}, totalUsage),\n        })\n\n        pushNewMessages(input.messages, assistantMessage, toolCallResult) // 用调用结果修改最新的消息\n        currentRes = await doStream() // 循环对话\n      } catch (e) {\n        const [s1, s2] = currentRes.tee()\n        return {\n          messages: Promise.resolve(input.messages),\n          dataStream: createAsyncIterable(s1),\n          textStream: createAsyncIterable(s2.pipeThrough(new TransformStream({\n            transform(chunk, controller) {\n              const str = chunk?.choices?.[0]?.delta?.content\n              if (typeof str === 'string') controller.enqueue(str)\n            },\n          }),),),\n          usage: Promise.resolve(totalUsage),\n          error: e,\n        }\n      }\n    }\n\n    /**\n     * 最后返回时，有几种情况：\n     * 1. 没超 maxStep 无工具调用\n     * 2. 超了 maxStep 有工具调用\n     * 3. 超了 maxStep 无工具调用\n     * never. 没超 maxStep，有工具调用，这时候会进到上面的 while 循环 block 中处理\n     *\n     * 其中 1. 3. 可以合并，没有工具调用就应该直接返回，无论 maxStep\n     *\n     * 所以合并为：\n     * 1. 无工具调用\n     * 2. 有工具调用，但是超过 maxStep\n     *\n     * 这两种情况都没进到 while 循环 block 中处理\n     * 我们需要 a. 塞 message b. 算 Usage c. 调用 onStepFinish\n     */\n\n    readResult = await readCurrentStream()\n\n    if (readResult) {\n      // 情况 2 有工具调用，但是超过 maxStep\n      const { message, usage } = readResult\n      addToUsage(totalUsage, usage)\n\n      const messages = [...input.messages, message]\n\n      onStepFinish({\n        messages: messages.slice(),\n        finishReason: 'tool_call',\n        stepUsage: usage,\n        text: message.content,\n        toolCall: message.tool_calls[0],\n        totalUsage: Object.assign({}, totalUsage),\n      })\n\n      const [s1, s2] = currentRes.tee()\n      return {\n        messages: Promise.resolve([...input.messages, message]),\n        dataStream: createAsyncIterable(s1),\n        textStream: createAsyncIterable(s2.pipeThrough(new TransformStream({\n          transform(chunk, controller) {\n            const str = chunk?.choices?.[0]?.delta?.content\n            if (typeof str === 'string') controller.enqueue(str)\n          },\n        }),),),\n        usage: Promise.resolve(totalUsage),\n      }\n    }\n    // 情况 1 无工具调用\n    const messagePromise = createPromise<Array<ChatModelMessage>>()\n    const usagePromise = createPromise<Usage>()\n\n    const message: ChatModelMessage = {\n      role: 'assistant',\n      content: '',\n    }\n    let finishReason = ''\n    const stepUsage: Usage = { completion_tokens: 0, prompt_tokens: 0, total_tokens: 0 }\n\n    const originStream = currentRes.pipeThrough(new TransformStream({\n      transform(chunk, controller) {\n        // 不改变 chunk 内容，只是拦截下内容拼最后的结果\n        const content = chunk?.choices?.[0]?.delta?.content\n        if (typeof content === 'string') {\n          message.content += content\n        }\n\n        const reason = chunk?.choices?.[0]?.finish_reason\n        if (reason) finishReason = reason\n\n        // TODO: 不同大模型的 stream usage 格式不一样，后续可能要调整.\n        // hunyuan 每个 chunk 都会有 usage，逐步增加，以最后一个的为准;\n        // zhipu 最后 chunk 会有 usage;\n        if (chunk?.usage?.completion_tokens) stepUsage.completion_tokens = chunk.usage.completion_tokens\n        if (chunk?.usage?.prompt_tokens) stepUsage.prompt_tokens = chunk.usage.prompt_tokens\n        if (chunk?.usage?.total_tokens) stepUsage.total_tokens = chunk.usage.total_tokens\n\n        controller.enqueue(chunk)\n      },\n      flush() {\n        messagePromise.res([...input.messages, message])\n        addToUsage(totalUsage, stepUsage)\n        usagePromise.res(Object.assign({}, totalUsage))\n        onStepFinish?.({\n          messages: [...input.messages, message],\n          finishReason,\n          text: message.content,\n          stepUsage,\n          totalUsage: Object.assign({}, totalUsage),\n        })\n      },\n    }),)\n\n    const [s1, s2] = originStream.tee()\n\n    return {\n      messages: messagePromise.promise,\n      dataStream: createAsyncIterable(s1),\n      textStream: createAsyncIterable(s2.pipeThrough(new TransformStream({\n        transform(chunk, controller) {\n          const content = chunk?.choices?.[0]?.delta?.content\n          if (typeof content === 'string') {\n            controller.enqueue(content)\n          }\n        },\n      }),),),\n      usage: usagePromise.promise,\n    }\n  }\n}\n\nfunction getToolCallFromGenerate(output: DoGenerateOutput) {\n  const choice = output?.choices?.[0]\n\n  if (!choice) return null\n\n  const { finish_reason, message } = choice\n\n  if (finish_reason !== 'tool_calls') return null\n  if (!message) return null\n  if (!isToolCallAssistantMessage(message)) return null\n\n  return message.tool_calls[0]\n}\n\nfunction pushNewMessages(\n  messages: Array<ChatModelMessage>,\n  assistantMessage: ToolCallAssistantMessage,\n  toolCallResult: unknown,\n) {\n  messages.push(assistantMessage, {\n    role: 'tool',\n    tool_call_id: assistantMessage.tool_calls[0].id,\n    content: JSON.stringify(toolCallResult),\n  })\n}\n\nasync function readFunctionCallStream(stream: ReadableStream<BaseDoStreamOutputChunk>,): Promise<{ message: ToolCallAssistantMessage; usage: Usage } | null> {\n  const stepUsage: Usage = { completion_tokens: 0, prompt_tokens: 0, total_tokens: 0 }\n  const aStream = createAsyncIterable(stream)\n\n  const retToolCall: ToolCall = {\n    id: '',\n    function: {\n      name: '',\n      arguments: '',\n    },\n    type: '',\n  }\n\n  const retMessage: ToolCallAssistantMessage = {\n    role: 'assistant',\n    content: '',\n    tool_calls: [retToolCall],\n  }\n\n  for await (const chunk of aStream) {\n    const choice = chunk?.choices[0]\n    if (!choice) return null\n\n    const { finish_reason, delta } = choice\n\n    if (finish_reason !== 'tool_calls') return null\n    if (!delta) continue\n\n    if (delta.content) retMessage.content += delta.content\n\n    if (!('tool_calls' in delta)) continue\n    const toolCall = delta?.tool_calls?.[0]\n    if (toolCall?.id) retToolCall.id = toolCall.id\n    if (toolCall?.type) retToolCall.type = toolCall.type\n    if (toolCall?.function?.name) retToolCall.function.name = toolCall.function.name\n    if (toolCall?.function?.arguments) retToolCall.function.arguments += toolCall.function.arguments\n\n    // TODO: 不同大模型的 stream usage 格式不一样，后续可能要调整.\n    // hunyuan 每个 chunk 都会有 usage，逐步增加，以最后一个的为准;\n    // zhipu 最后 chunk 会有 usage;\n    if (chunk?.usage?.completion_tokens) stepUsage.completion_tokens = chunk.usage.completion_tokens\n    if (chunk?.usage?.prompt_tokens) stepUsage.prompt_tokens = chunk.usage.prompt_tokens\n    if (chunk?.usage?.total_tokens) stepUsage.total_tokens = chunk.usage.total_tokens\n  }\n\n  return {\n    message: retMessage,\n    usage: stepUsage,\n  }\n}\n\nexport const toolMap = new Map<string, CallableFunction>()\n\nfunction callTool(toolCall: ToolCall) {\n  return toolMap.get(toolCall.function.name)(JSON.parse(toolCall.function.arguments))\n}\n\nfunction createSolidUsage(usage?: Partial<Usage>): Usage {\n  return {\n    completion_tokens: usage?.completion_tokens ?? 0,\n    prompt_tokens: usage?.prompt_tokens ?? 0,\n    total_tokens: usage?.total_tokens ?? 0,\n  }\n}\n\nfunction addToUsage(targetUsage: Usage, sourceUsage: Usage) {\n  targetUsage.completion_tokens += sourceUsage.completion_tokens\n  targetUsage.prompt_tokens += sourceUsage.prompt_tokens\n  targetUsage.total_tokens += sourceUsage.total_tokens\n}\n", "/* eslint-disable eqeqeq */\n/* eslint-disable @typescript-eslint/naming-convention */\nimport type { SDKRequestInterface } from '@cloudbase/adapter-interface'\nimport { Bot } from './bot'\nimport * as models from './models'\nimport * as types from './type'\nimport { readableStream2JsonObject } from './utils'\nimport { ICloudbaseConfig } from '@cloudbase/types'\nimport { langEvent } from '@cloudbase/utilities'\n\nconst { MODELS } = models\n\nclass AI {\n  public aiBaseUrl: string\n  public aiBotBaseUrl: string\n  public bot: Bot\n  public i18n: ICloudbaseConfig['i18n']\n  defaultHeaders: { [x: string]: any }\n\n  constructor(\n    private req: SDKRequestInterface,\n    public baseUrl: string,\n    i18n: ICloudbaseConfig['i18n'],\n  ) {\n    this.aiBaseUrl = `${baseUrl}/ai`\n    this.aiBotBaseUrl = `${baseUrl}/aibot`\n    this.bot = new Bot(this.botRequest, this.aiBotBaseUrl)\n    this.i18n = i18n\n\n    langEvent.bus.on(langEvent.LANG_CHANGE_EVENT, (params) => {\n      this.i18n = params.data?.i18n || this.i18n\n    })\n  }\n\n  async handleResponseData(responseData: Promise<unknown> | ReadableStream<Uint8Array>, header?: Headers) {\n    const GO_TO_AI_TEXT = `${this.i18n.t('请检查调用方式，或前往云开发 AI+ 首页查看文档')}：https://tcb.cloud.tencent.com/dev#/ai`\n\n    if (typeof responseData === 'object' && responseData && 'then' in responseData) {\n      // 非流式请求，直接返回 json 数据\n      const json = (await responseData) as Record<string, unknown>\n      if (typeof json === 'object' && json && 'code' in json && json.code !== 'NORMAL') {\n        throw new Error(`${this.i18n.t('AI+ 请求出错，错误码')}：${json.code}，${this.i18n.t('错误信息')}：${\n          json.message\n        }\\n${GO_TO_AI_TEXT}\\n${JSON.stringify(json, null, 2)}`,)\n      }\n\n      return responseData\n    }\n    // 流式请求，如果接口出错，会变成传 json 格式的响应，通过 header 判断格式\n    if (header?.get?.('content-type')?.includes('application/json')) {\n      const json = await readableStream2JsonObject(responseData as ReadableStream<Uint8Array>)\n      if (typeof json === 'object' && json && 'code' in json && json.code !== 'NORMAL') {\n        throw new Error(`${this.i18n.t('AI+ 请求出错，错误码')}：${json.code}，${this.i18n.t('错误信息')}：${\n          json.message\n        }\\n${GO_TO_AI_TEXT}\\n${JSON.stringify(json, null, 2)}`,)\n      }\n    }\n    return responseData\n  }\n\n  createModel(\n    model: string,\n    options?: {\n      defaultModelSubUrl?: string\n    },\n  ) {\n    let simpleModel: types.SimpleChatModel\n\n    const SimpleModelConstructor = MODELS[model]\n    if (SimpleModelConstructor) {\n      simpleModel = new SimpleModelConstructor(this.modelRequest, this.aiBaseUrl)\n    } else {\n      const subUrl = typeof options?.defaultModelSubUrl === 'string' ? options.defaultModelSubUrl : '/chat/completions'\n\n      simpleModel = new models.DefaultSimpleModel(this.modelRequest, this.aiBaseUrl, `${model}${subUrl}`)\n    }\n\n    const reactModel = new models.ReactModel(simpleModel)\n    return reactModel\n  }\n\n  registerModel(name: string, model: types.ChatModelConstructor) {\n    if (MODELS[name] != null) {\n      console.warn(`AI model ${name} already exists!`)\n      return\n    }\n    MODELS[name] = model\n  }\n\n  createImageModel<T extends 'hunyuan-image' | (string & {})>(provider: T) {\n    return new models.DefaultImageModel<T>(this.modelRequest, this.aiBaseUrl, provider)\n  }\n\n  modelRequest: types.ModelReq = async ({ url, data, headers, stream, timeout }) => {\n    const fetchHeaders = {\n      'Content-Type': 'application/json',\n    }\n    // 带 Accept: text/event-stream  请求头显式指定是 SSE 绕过 60s 的限制\n    stream && Object.assign(fetchHeaders, { Accept: 'text/event-stream' })\n\n    const { data: responseData, header } = (await this.req.fetch({\n      method: 'post',\n      headers: { [this.i18n?.LANG_HEADER_KEY]: this.i18n?.lang, ...fetchHeaders, ...headers },\n      body: JSON.stringify(data),\n      url,\n      stream,\n      timeout,\n    })) as { data: Promise<unknown> | ReadableStream<Uint8Array>; header?: Headers }\n\n    return this.handleResponseData(responseData, header) as any\n  }\n\n  botRequest: types.BotReq = async ({ method, url, data = {}, headers, stream, timeout }) => {\n    if (method === 'get') {\n      return this.handleResponseData((await this.req.fetch({ url: `${url}?${objectToParam(data)}`, method, headers, stream, timeout })).data,)\n    }\n\n    const fetchHeaders = {\n      'Content-Type': 'application/json',\n    }\n    // 带 Accept: text/event-stream  请求头显式指定是 SSE 绕过 60s 的限制\n    stream && Object.assign(fetchHeaders, { Accept: 'text/event-stream' })\n\n    const { data: responseData, header } = (await this.req.fetch({\n      url,\n      body: JSON.stringify(data),\n      headers: {\n        [this.i18n?.LANG_HEADER_KEY]: this.i18n?.lang,\n        ...fetchHeaders,\n        ...headers,\n      },\n      stream,\n      method,\n      timeout,\n    })) as { data: Promise<unknown> | ReadableStream<Uint8Array>; header?: Headers }\n\n    return this.handleResponseData(responseData, header) as any\n\n    function objectToParam(obj: Object) {\n      return Object.entries(obj)\n        .map(([key, value]) => `${key}=${value}`)\n        .join('&')\n    }\n  }\n\n  registerFunctionTool(functionTool: types.FunctionTool) {\n    if (models.toolMap.has(functionTool.name)) {\n      console.warn(`AI function tool ${functionTool.name} already exists and will be overwritten!`)\n    }\n    models.toolMap.set(functionTool.name, functionTool.fn)\n  }\n}\n\nexport { AI }\n", "/* eslint-disable eqeqeq */\nimport type { IFetchOptions, SDKRequestInterface } from '@cloudbase/adapter-interface'\nimport type { ICloudbase, ICloudbaseConfig } from '@cloudbase/types'\nimport type { ICloudbaseComponent } from '@cloudbase/types/component'\nimport { AI } from './AI'\nimport { Bot } from './bot'\nimport * as models from './models'\nimport * as utils from './utils'\n\nconst COMPONENT_NAME = 'ai'\n\nconst { MODELS, ...restModels } = models\n\ninterface IHandleRequestInstance {\n  req: SDKRequestInterface\n}\n\ntype HandleRequestInstanceFunc = (options: IHandleRequestInstance) => SDKRequestInterface\n\nconst createRequestInstanceWithAccessTokenHeader = ({\n  getAccessToken,\n  req,\n}: IHandleRequestInstance & { getAccessToken: () => Promise<{ accessToken: string }> }) => {\n  const fetch: typeof req.fetch = async (options: IFetchOptions & { token?: string }) => {\n    if (typeof req.fetch !== 'function') {\n      throw new Error('req.fetch is not a function')\n    }\n\n    const { token, headers = {}, ...restOptions } = options\n    let accessToken: string\n    if (token != null) {\n      accessToken = token\n    } else {\n      accessToken = (await getAccessToken()).accessToken\n    }\n\n    return req.fetch({\n      headers: {\n        Authorization: `Bearer ${accessToken}`,\n        ...headers,\n      },\n      ...restOptions,\n    })\n  }\n\n  return {\n    download: req.download,\n    post: req.post,\n    upload: req.upload,\n    fetch,\n  }\n}\n\ninterface AIInitOption {\n  baseUrl?: string\n}\n\ninterface ICreateAI {\n  req: SDKRequestInterface\n  baseUrl?: string\n  env?: string\n  getAccessToken?: () => Promise<{ accessToken: string }>\n  handleReqInstance?: HandleRequestInstanceFunc\n  i18n?: ICloudbaseConfig['i18n']\n}\n\n/**\n * 最简地创建一个接云开发网关服务的 `AI` 实例，请求时会自动带上鉴权请求头。\n * 只需要传入：\n *\n * - `getAccessToken`: 获取 accessToken 的函数\n * - `req`: 请求函数，一般从 adapter 上拿\n * - `env`: 云开发环境 ID\n *\n * 其他参数可按需传入覆盖函数逻辑。\n */\nfunction createAI({ env, baseUrl, req, getAccessToken, handleReqInstance, i18n }: ICreateAI) {\n  const getBaseUrl = () => {\n    if (baseUrl != null) {\n      return baseUrl\n    }\n    if (env == null) {\n      throw new Error('`env` is required when `baseUrl` is not provided!')\n    }\n    return `https://${env}.api.tcloudbasegateway.com/v1`\n  }\n\n  const getReq = () => {\n    if (handleReqInstance == null) {\n      if (getAccessToken == null) {\n        throw new Error('`getAccessToken` is required when `handleReqInstance` is not provided!')\n      }\n      return createRequestInstanceWithAccessTokenHeader({ req, getAccessToken })\n    }\n    return handleReqInstance({ req })\n  }\n\n  return new AI(getReq(), getBaseUrl(), i18n)\n}\n\n// 兼容\n/**\n * @deprecated use `createAI`\n */\nconst createAi = createAI\n\n/**\n * 创建 `AI` 实例。\n * 该函数挂载在 js sdk 的 Cloudbase 实例上。\n * 该函数调用了本模块暴露的 `createAI` 函数，但调用时通过传入参数做了逻辑覆盖：\n *\n * - 传入从 Cloudbase 实例上的中心的 `req`\n * - 传入从 Cloudbase 实例上拿到的 `baseUrl`\n * - 传入一个不处理 `req` 的 `handleReqInstance`，由于 `req` 是从 Cloudbase 实例上拿到的，这个中心的 `req` 已经可用了\n * - 不用传入 `env` 了，因为已经传了 `baseUrl`\n * - 不用传入 `getAccessToken` 了，因为传了 `handleReqInstance`\n */\nfunction ai(\n  this: ICloudbase & { getEndPointWithKey: (key: 'GATEWAY') => { BASE_URL: string; PROTOCOL: string } },\n  options?: AIInitOption,\n) {\n  const req = this.request\n\n  if (req.fetch == null) {\n    throw new Error('cloudbase.request.fetch() unimplemented!')\n  }\n\n  const getUrlFromCloud = () => {\n    const { BASE_URL, PROTOCOL } = this.getEndPointWithKey('GATEWAY')\n    return `${PROTOCOL}${BASE_URL}`\n  }\n\n  const baseUrl = options?.baseUrl ?? getUrlFromCloud()\n\n  return createAI({ req, baseUrl, handleReqInstance: ({ req }) => req, i18n: this.config.i18n })\n}\n\nconst component: ICloudbaseComponent = {\n  name: COMPONENT_NAME,\n  entity: { ai },\n}\n\nfunction registerAi(app: ICloudbase) {\n  try {\n    app.registerComponent(component)\n  } catch (e) {\n    console.warn(e)\n  }\n}\n\nexport { AI, Bot, createAi, createAI, restModels as models, registerAi, utils }\nexport * from './type'\n\ntry {\n  (window as any).registerAi = registerAi\n} catch (e) {}\n", "import { ICloudbase } from '@cloudbase/types'\nimport { ICloudbaseComponent } from '@cloudbase/types/component'\nimport { CloudBaseInstance, generateMySQLClient, IMySqlOptions } from '@cloudbase/wx-cloud-client-sdk'\n\ndeclare const cloudbase: ICloudbase\n\nfunction getEntity(cloudbase: any & CloudBaseInstance, options: IMySqlOptions) {\n  const cloudbaseFetch = cloudbase.request.fetch.bind(cloudbase.request)\n  const { instance = 'default', database = cloudbase.config.env } = options || {}\n  const fetch = async (url: RequestInfo | URL, options: RequestInit) => {\n    let headers = {}\n    if (options.headers instanceof Headers) {\n      options.headers.forEach((value, key) => {\n        headers[key] = value\n      })\n    } else {\n      headers = options.headers || {}\n    }\n\n    const result = await cloudbaseFetch({\n      url: url.toString(),\n      ...options,\n      headers: {\n        'Content-Type': 'application/json',\n        'X-Db-Instance': instance,\n        'Accept-Profile': database,\n        'Content-Profile': database,\n        ...headers,\n      },\n      shouldThrowOnError: false,\n    })\n\n    let data = {}\n    try {\n      data = await result.data\n    } catch (e) {\n      if (!e.message.includes('Unexpected end of JSON input')) {\n        // 服务器会返回空字符串，导致解析失败，这时应当作正常处理\n        throw e\n      }\n    }\n\n    const res = {\n      ok: result?.statusCode >= 200 && result?.statusCode < 300,\n      status: result?.statusCode || 200,\n      statusText: result?.statusMessage || 'OK',\n      json: () => Promise.resolve(data || {}),\n      text: () => Promise.resolve(typeof data === 'string' ? data : JSON.stringify(data || {})),\n      headers: result?.header,\n    }\n\n    return res as Response\n  }\n  const { BASE_URL, PROTOCOL } = cloudbase.getEndPointWithKey('GATEWAY') as {\n    BASE_URL: string\n    PROTOCOL: string\n  }\n  const mysqlBaseUrl = `${PROTOCOL}${BASE_URL}/rdb/rest`\n\n  const entity = generateMySQLClient(cloudbase, {\n    mysqlBaseUrl,\n    fetch,\n  })\n\n  return entity\n}\n\nconst component: ICloudbaseComponent = {\n  name: 'mysql',\n  entity: {\n    mysql(options: IMySqlOptions) {\n      return getEntity(this, options)(options)\n    },\n  },\n}\nconst rdbComponent: ICloudbaseComponent = {\n  name: 'rdb',\n  entity: {\n    rdb(options: IMySqlOptions) {\n      return getEntity(this, options)(options)\n    },\n  },\n}\n\ntry {\n  cloudbase.registerComponent(component)\n  cloudbase.registerComponent(rdbComponent)\n} catch (e) {}\n\nexport function registerMySQL(app: ICloudbase) {\n  try {\n    app.registerComponent(component)\n    app.registerComponent(rdbComponent)\n  } catch (e) {\n    console.warn(e)\n  }\n}\n\ntry {\n  (window as any).registerMySQL = registerMySQL\n} catch (e) {}\n\n\nexport * from '@cloudbase/wx-cloud-client-sdk'\n", "import { ERRORS } from '@cloudbase/utilities/dist/cjs/constants'\nimport { ICallApiOptions, KV } from '@cloudbase/types'\nimport { ResponseObject, SDKRequestInterface } from '@cloudbase/adapter-interface'\n\nexport async function callApi(callApiOptions: ICallApiOptions, opts?: KV<any>): Promise<ResponseObject['data']> {\n  const { name, body, path = '', method = 'POST', headers = {} } = callApiOptions || {}\n  const { token } = callApiOptions || {}\n\n  if (!name) {\n    throw new Error(JSON.stringify({\n      code: ERRORS.INVALID_PARAMS,\n      msg: '[apis] invalid api name',\n    }),)\n  }\n\n  let url = ''\n\n  const { gatewayOrigin, getAccessToken, env } = this\n\n  if (gatewayOrigin) {\n    url = `${gatewayOrigin}/v1`\n  } else if (this.getEndPointWithKey) {\n    const { BASE_URL, PROTOCOL } = this.getEndPointWithKey('GATEWAY')\n    url = `${PROTOCOL}${BASE_URL}`\n  } else {\n    url = `https://${env}.api.tcloudbasegateway.com/v1`\n  }\n  const endpoint = `${url}/apis/${name}`\n  const reqPath = path.startsWith('/') ? path : `/${path}`\n\n  if (getAccessToken) {\n    const { accessToken } = (await getAccessToken())\n    headers.Authorization = `Bearer ${accessToken}`\n  }\n\n  const response = await this.request.fetch({\n    url: `${endpoint}${reqPath}`,\n    method: method || 'POST',\n    headers: {\n      'Content-Type': 'application/json; charset=utf-8',\n      ...headers,\n    },\n    body,\n    token: token?.trim?.() || headers.Authorization?.replace?.(/^Bearer /, '') || null,\n    ...opts,\n  })\n\n  return await response.data\n}\n\nconst SUPPORT_METHODS = ['GET', 'POST', 'PUT', 'DELETE', 'HEAD', 'OPTIONS', 'PATCH', 'REQUEST']\ndeclare type MethodType = 'request' | 'post' | 'get' | 'head' | 'patch' | 'delete' | 'put';\n\nexport function generateCallApis(apiName: string): { [method in MethodType]: typeof callApi } {\n  return new Proxy({} as any, {\n    get: (_, method) => {\n      if (typeof method !== 'string') {\n        throw new Error('[apis] method must be string')\n      }\n\n      const upMethod = method.toLocaleUpperCase()\n\n      if (!SUPPORT_METHODS.includes(upMethod)) {\n        throw new Error(`[apis] invalid method: ${method}`)\n      }\n\n      return async (callApiOptions: ICallApiOptions, opts: KV<any>) => await callApi.call(\n        this,\n        {\n          name: apiName,\n          method: (upMethod === 'REQUEST' ? callApiOptions.method : upMethod) || 'POST',\n          ...callApiOptions,\n        },\n        opts,\n      )\n    },\n  })\n}\n\nexport function generateApis(params?: {\n  env?: string;\n  request?: SDKRequestInterface;\n  gatewayOrigin?: string;\n  getAccessToken?: () => Promise<{ accessToken: string }>;\n}): { [apiName: string]: { [method in MethodType]: typeof callApi } } {\n  Object.keys(params || {}).forEach((key) => {\n    if (params[key] !== undefined) this[key] = params[key]\n  })\n\n  return new Proxy(\n    {},\n    {\n      get: (_, apiName) => {\n        if (typeof apiName === 'string') {\n          return generateCallApis.call(this, apiName)\n        }\n      },\n    },\n  )\n}\n", "import type { ICloudbase } from '@cloudbase/types'\nimport type { ICloudbaseComponent } from '@cloudbase/types/component'\nimport { generateApis } from './callApis'\n\ndeclare const cloudbase: ICloudbase\n\nconst COMPONENT_NAME = 'apis'\n\nconst component: ICloudbaseComponent = {\n  name: COMPONENT_NAME,\n  IIFE: true,\n  entity() {\n    Object.defineProperty(this.prototype, COMPONENT_NAME, {\n      get() {\n        // 这里的 this 是 cloudbase 实例\n        return generateApis.call(this)\n      },\n      configurable: true,\n      enumerable: true,\n    })\n  },\n}\n\nfunction registerApis(app: ICloudbase) {\n  try {\n    app.registerComponent(component)\n  } catch (e) {\n    console.warn(e)\n  }\n}\n\ntry {\n  cloudbase.registerComponent(component)\n} catch (e) {\n}\n\nexport { generateApis, registerApis }\nexport * from './type'\n\ntry {\n  (window as any).registerApis = registerApis\n} catch (e) {}\n", "export * from './point';\nexport * from './lineString';\nexport * from './polygon';\nexport * from './multiPoint';\nexport * from './multiLineString';\nexport * from './multiPolygon';\n", "var _a;\nvar ErrorCode;\n(function (ErrorCode) {\n    ErrorCode[\"DocIDError\"] = \"\\u6587\\u6863ID\\u4E0D\\u5408\\u6CD5\";\n    ErrorCode[\"CollNameError\"] = \"\\u96C6\\u5408\\u540D\\u79F0\\u4E0D\\u5408\\u6CD5\";\n    ErrorCode[\"OpStrError\"] = \"\\u64CD\\u4F5C\\u7B26\\u4E0D\\u5408\\u6CD5\";\n    ErrorCode[\"DirectionError\"] = \"\\u6392\\u5E8F\\u5B57\\u7B26\\u4E0D\\u5408\\u6CD5\";\n    ErrorCode[\"IntergerError\"] = \"must be integer\";\n    ErrorCode[\"QueryParamTypeError\"] = \"\\u67E5\\u8BE2\\u53C2\\u6570\\u5FC5\\u987B\\u4E3A\\u5BF9\\u8C61\";\n    ErrorCode[\"QueryParamValueError\"] = \"\\u67E5\\u8BE2\\u53C2\\u6570\\u5BF9\\u8C61\\u503C\\u4E0D\\u80FD\\u5747\\u4E3Aundefined\";\n})(ErrorCode || (ErrorCode = {}));\nvar FieldType = {\n    String: 'String',\n    Number: 'Number',\n    Object: 'Object',\n    Array: 'Array',\n    Boolean: 'Boolean',\n    Null: 'Null',\n    GeoPoint: 'GeoPoint',\n    GeoLineString: 'GeoLineString',\n    GeoPolygon: 'GeoPolygon',\n    GeoMultiPoint: 'GeoMultiPoint',\n    GeoMultiLineString: 'GeoMultiLineString',\n    GeoMultiPolygon: 'GeoMultiPolygon',\n    Timestamp: 'Date',\n    Command: 'Command',\n    ServerDate: 'ServerDate',\n    BsonDate: 'BsonDate'\n};\nvar OrderDirectionList = ['desc', 'asc'];\nvar WhereFilterOpList = ['<', '<=', '==', '>=', '>'];\nvar Opeartor;\n(function (Opeartor) {\n    Opeartor[\"lt\"] = \"<\";\n    Opeartor[\"gt\"] = \">\";\n    Opeartor[\"lte\"] = \"<=\";\n    Opeartor[\"gte\"] = \">=\";\n    Opeartor[\"eq\"] = \"==\";\n})(Opeartor || (Opeartor = {}));\nvar OperatorMap = (_a = {},\n    _a[Opeartor.eq] = '$eq',\n    _a[Opeartor.lt] = '$lt',\n    _a[Opeartor.lte] = '$lte',\n    _a[Opeartor.gt] = '$gt',\n    _a[Opeartor.gte] = '$gte',\n    _a);\nvar UpdateOperatorList = [\n    '$set',\n    '$inc',\n    '$mul',\n    '$unset',\n    '$push',\n    '$pop',\n    '$unshift',\n    '$shift',\n    '$currentDate',\n    '$each',\n    '$position'\n];\nvar QueryType;\n(function (QueryType) {\n    QueryType[\"WHERE\"] = \"WHERE\";\n    QueryType[\"DOC\"] = \"DOC\";\n})(QueryType || (QueryType = {}));\nexport { ErrorCode, FieldType, WhereFilterOpList, Opeartor, OperatorMap, OrderDirectionList, UpdateOperatorList, QueryType };\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar _symbols = [];\nvar __internalMark__ = {};\nvar HiddenSymbol = (function () {\n    function HiddenSymbol(target) {\n        Object.defineProperties(this, {\n            target: {\n                enumerable: false,\n                writable: false,\n                configurable: false,\n                value: target,\n            },\n        });\n    }\n    return HiddenSymbol;\n}());\nvar InternalSymbol = (function (_super) {\n    __extends(InternalSymbol, _super);\n    function InternalSymbol(target, __mark__) {\n        if (__mark__ !== __internalMark__) {\n            throw new TypeError('InternalSymbol cannot be constructed with new operator');\n        }\n        return _super.call(this, target) || this;\n    }\n    InternalSymbol.for = function (target) {\n        for (var i = 0, len = _symbols.length; i < len; i++) {\n            if (_symbols[i].target === target) {\n                return _symbols[i].instance;\n            }\n        }\n        var symbol = new InternalSymbol(target, __internalMark__);\n        _symbols.push({\n            target: target,\n            instance: symbol,\n        });\n        return symbol;\n    };\n    return InternalSymbol;\n}(HiddenSymbol));\nexport { InternalSymbol };\nexport default InternalSymbol;\n", "import InternalSymbol from '../utils/symbol';\nexport * from '../utils/symbol';\nexport var SYMBOL_UNSET_FIELD_NAME = InternalSymbol.for('UNSET_FIELD_NAME');\nexport var SYMBOL_UPDATE_COMMAND = InternalSymbol.for('UPDATE_COMMAND');\nexport var SYMBOL_QUERY_COMMAND = InternalSymbol.for('QUERY_COMMAND');\nexport var SYMBOL_LOGIC_COMMAND = InternalSymbol.for('LOGIC_COMMAND');\nexport var SYMBOL_GEO_POINT = InternalSymbol.for('GEO_POINT');\nexport var SYMBOL_GEO_LINE_STRING = InternalSymbol.for('SYMBOL_GEO_LINE_STRING');\nexport var SYMBOL_GEO_POLYGON = InternalSymbol.for('SYMBOL_GEO_POLYGON');\nexport var SYMBOL_GEO_MULTI_POINT = InternalSymbol.for('SYMBOL_GEO_MULTI_POINT');\nexport var SYMBOL_GEO_MULTI_LINE_STRING = InternalSymbol.for('SYMBOL_GEO_MULTI_LINE_STRING');\nexport var SYMBOL_GEO_MULTI_POLYGON = InternalSymbol.for('SYMBOL_GEO_MULTI_POLYGON');\nexport var SYMBOL_SERVER_DATE = InternalSymbol.for('SERVER_DATE');\nexport var SYMBOL_REGEXP = InternalSymbol.for('REGEXP');\n", "import { SYMBOL_SERVER_DATE } from '../helper/symbol';\nvar ServerDate = (function () {\n    function ServerDate(_a) {\n        var _b = _a === void 0 ? {} : _a, _c = _b.offset, offset = _c === void 0 ? 0 : _c;\n        this.offset = offset;\n    }\n    Object.defineProperty(ServerDate.prototype, \"_internalType\", {\n        get: function () {\n            return SYMBOL_SERVER_DATE;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ServerDate.prototype.parse = function () {\n        return {\n            $date: {\n                offset: this.offset\n            }\n        };\n    };\n    return ServerDate;\n}());\nexport { ServerDate };\nexport function ServerDateConstructor(opt) {\n    return new ServerDate(opt);\n}\n", "var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { FieldType } from './constant';\nimport { Point, LineString, Polygon, MultiPoint, MultiLineString, MultiPolygon } from './geo/index';\nimport { ServerDate } from './serverDate/index';\nvar Util = (function () {\n    function Util() {\n    }\n    Util.formatResDocumentData = function (documents) {\n        return documents.map(function (document) {\n            return Util.formatField(document);\n        });\n    };\n    Util.formatField = function (document) {\n        var keys = Object.keys(document);\n        var protoField = {};\n        if (Array.isArray(document)) {\n            protoField = [];\n        }\n        keys.forEach(function (key) {\n            var item = document[key];\n            var type = Util.whichType(item);\n            var realValue;\n            switch (type) {\n                case FieldType.GeoPoint:\n                    realValue = new Point(item.coordinates[0], item.coordinates[1]);\n                    break;\n                case FieldType.GeoLineString:\n                    realValue = new LineString(item.coordinates.map(function (point) { return new Point(point[0], point[1]); }));\n                    break;\n                case FieldType.GeoPolygon:\n                    realValue = new Polygon(item.coordinates.map(function (line) { return new LineString(line.map(function (_a) {\n                        var _b = __read(_a, 2), lng = _b[0], lat = _b[1];\n                        return new Point(lng, lat);\n                    })); }));\n                    break;\n                case FieldType.GeoMultiPoint:\n                    realValue = new MultiPoint(item.coordinates.map(function (point) { return new Point(point[0], point[1]); }));\n                    break;\n                case FieldType.GeoMultiLineString:\n                    realValue = new MultiLineString(item.coordinates.map(function (line) { return new LineString(line.map(function (_a) {\n                        var _b = __read(_a, 2), lng = _b[0], lat = _b[1];\n                        return new Point(lng, lat);\n                    })); }));\n                    break;\n                case FieldType.GeoMultiPolygon:\n                    realValue = new MultiPolygon(item.coordinates.map(function (polygon) {\n                        return new Polygon(polygon.map(function (line) { return new LineString(line.map(function (_a) {\n                            var _b = __read(_a, 2), lng = _b[0], lat = _b[1];\n                            return new Point(lng, lat);\n                        })); }));\n                    }));\n                    break;\n                case FieldType.Timestamp:\n                    realValue = new Date(item.$timestamp * 1000);\n                    break;\n                case FieldType.Object:\n                case FieldType.Array:\n                    realValue = Util.formatField(item);\n                    break;\n                case FieldType.ServerDate:\n                    realValue = new Date(item.$date);\n                    break;\n                default:\n                    realValue = item;\n            }\n            if (Array.isArray(protoField)) {\n                protoField.push(realValue);\n            }\n            else {\n                protoField[key] = realValue;\n            }\n        });\n        return protoField;\n    };\n    Util.whichType = function (obj) {\n        var type = Object.prototype.toString.call(obj).slice(8, -1);\n        if (type === FieldType.Timestamp) {\n            return FieldType.BsonDate;\n        }\n        if (type === FieldType.Object) {\n            if (obj instanceof Point) {\n                return FieldType.GeoPoint;\n            }\n            else if (obj instanceof Date) {\n                return FieldType.Timestamp;\n            }\n            else if (obj instanceof ServerDate) {\n                return FieldType.ServerDate;\n            }\n            if (obj.$timestamp) {\n                type = FieldType.Timestamp;\n            }\n            else if (obj.$date) {\n                type = FieldType.ServerDate;\n            }\n            else if (Point.validate(obj)) {\n                type = FieldType.GeoPoint;\n            }\n            else if (LineString.validate(obj)) {\n                type = FieldType.GeoLineString;\n            }\n            else if (Polygon.validate(obj)) {\n                type = FieldType.GeoPolygon;\n            }\n            else if (MultiPoint.validate(obj)) {\n                type = FieldType.GeoMultiPoint;\n            }\n            else if (MultiLineString.validate(obj)) {\n                type = FieldType.GeoMultiLineString;\n            }\n            else if (MultiPolygon.validate(obj)) {\n                type = FieldType.GeoMultiPolygon;\n            }\n        }\n        return type;\n    };\n    Util.generateDocId = function () {\n        var chars = 'ABCDEFabcdef0123456789';\n        var autoId = '';\n        for (var i = 0; i < 24; i++) {\n            autoId += chars.charAt(Math.floor(Math.random() * chars.length));\n        }\n        return autoId;\n    };\n    return Util;\n}());\nexport { Util };\n", "import { ErrorCode, WhereFilterOpList, OrderDirectionList, FieldType } from './constant';\nimport { Util } from './util';\nvar Validate = (function () {\n    function Validate() {\n    }\n    Validate.isGeopoint = function (point, degree) {\n        if (Util.whichType(degree) !== FieldType.Number) {\n            throw new Error('Geo Point must be number type');\n        }\n        var degreeAbs = Math.abs(degree);\n        if (point === 'latitude' && degreeAbs > 90) {\n            throw new Error('latitude should be a number ranges from -90 to 90');\n        }\n        else if (point === 'longitude' && degreeAbs > 180) {\n            throw new Error('longitude should be a number ranges from -180 to 180');\n        }\n        return true;\n    };\n    Validate.isInteger = function (param, num) {\n        if (!Number.isInteger(num)) {\n            throw new Error(param + ErrorCode.IntergerError);\n        }\n        return true;\n    };\n    Validate.isFieldOrder = function (direction) {\n        if (OrderDirectionList.indexOf(direction) === -1) {\n            throw new Error(ErrorCode.DirectionError);\n        }\n        return true;\n    };\n    Validate.isFieldPath = function (path) {\n        if (!/^[a-zA-Z0-9-_\\.]/.test(path)) {\n            throw new Error();\n        }\n        return true;\n    };\n    Validate.isOperator = function (op) {\n        if (WhereFilterOpList.indexOf(op) === -1) {\n            throw new Error(ErrorCode.OpStrError);\n        }\n        return true;\n    };\n    Validate.isCollName = function (name) {\n        if (!/^[a-zA-Z0-9]([a-zA-Z0-9-_]){1,32}$/.test(name)) {\n            throw new Error(ErrorCode.CollNameError);\n        }\n        return true;\n    };\n    Validate.isDocID = function (docId) {\n        if (!/^([a-fA-F0-9]){24}$/.test(docId)) {\n            throw new Error(ErrorCode.DocIDError);\n        }\n        return true;\n    };\n    return Validate;\n}());\nexport { Validate };\n", "import { InternalSymbol } from './symbol';\nexport var getType = function (x) { return Object.prototype.toString.call(x).slice(8, -1).toLowerCase(); };\nexport var isObject = function (x) { return getType(x) === 'object'; };\nexport var isString = function (x) { return getType(x) === 'string'; };\nexport var isNumber = function (x) { return getType(x) === 'number'; };\nexport var isPromise = function (x) { return getType(x) === 'promise'; };\nexport var isFunction = function (x) { return typeof x === 'function'; };\nexport var isArray = function (x) { return Array.isArray(x); };\nexport var isDate = function (x) { return getType(x) === 'date'; };\nexport var isRegExp = function (x) { return getType(x) === 'regexp'; };\nexport var isInternalObject = function (x) { return x && (x._internalType instanceof InternalSymbol); };\nexport var isPlainObject = function (obj) {\n    if (typeof obj !== 'object' || obj === null)\n        return false;\n    var proto = obj;\n    while (Object.getPrototypeOf(proto) !== null) {\n        proto = Object.getPrototypeOf(proto);\n    }\n    return Object.getPrototypeOf(obj) === proto;\n};\n", "import { Validate } from '../validate';\nimport { SYMBOL_GEO_POINT } from '../helper/symbol';\nimport { isArray } from '../utils/type';\nvar Point = (function () {\n    function Point(longitude, latitude) {\n        Validate.isGeopoint('longitude', longitude);\n        Validate.isGeopoint('latitude', latitude);\n        this.longitude = longitude;\n        this.latitude = latitude;\n    }\n    Point.prototype.parse = function (key) {\n        var _a;\n        return _a = {},\n            _a[key] = {\n                type: 'Point',\n                coordinates: [this.longitude, this.latitude]\n            },\n            _a;\n    };\n    Point.prototype.toJSON = function () {\n        return {\n            type: 'Point',\n            coordinates: [\n                this.longitude,\n                this.latitude,\n            ],\n        };\n    };\n    Point.prototype.toReadableString = function () {\n        return \"[\".concat(this.longitude, \",\").concat(this.latitude, \"]\");\n    };\n    Point.validate = function (point) {\n        return point.type === 'Point' &&\n            isArray(point.coordinates) &&\n            Validate.isGeopoint('longitude', point.coordinates[0]) &&\n            Validate.isGeopoint('latitude', point.coordinates[1]);\n    };\n    Object.defineProperty(Point.prototype, \"_internalType\", {\n        get: function () {\n            return SYMBOL_GEO_POINT;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Point;\n}());\nexport { Point };\n", "var __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { SYMBOL_GEO_LINE_STRING } from '../helper/symbol';\nimport { Point } from './point';\nimport { isArray, isNumber } from '../utils/type';\nvar LineString = (function () {\n    function LineString(points) {\n        if (!isArray(points)) {\n            throw new TypeError(\"\\\"points\\\" must be of type Point[]. Received type \".concat(typeof points));\n        }\n        if (points.length < 2) {\n            throw new Error('\"points\" must contain 2 points at least');\n        }\n        points.forEach(function (point) {\n            if (!(point instanceof Point)) {\n                throw new TypeError(\"\\\"points\\\" must be of type Point[]. Received type \".concat(typeof point, \"[]\"));\n            }\n        });\n        this.points = points;\n    }\n    LineString.prototype.parse = function (key) {\n        var _a;\n        return _a = {},\n            _a[key] = {\n                type: 'LineString',\n                coordinates: this.points.map(function (point) { return point.toJSON().coordinates; })\n            },\n            _a;\n    };\n    LineString.prototype.toJSON = function () {\n        return {\n            type: 'LineString',\n            coordinates: this.points.map(function (point) { return point.toJSON().coordinates; })\n        };\n    };\n    LineString.validate = function (lineString) {\n        var e_1, _a;\n        if (lineString.type !== 'LineString' || !isArray(lineString.coordinates)) {\n            return false;\n        }\n        try {\n            for (var _b = __values(lineString.coordinates), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var point = _c.value;\n                if (!isNumber(point[0]) || !isNumber(point[1])) {\n                    return false;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return true;\n    };\n    LineString.isClosed = function (lineString) {\n        var firstPoint = lineString.points[0];\n        var lastPoint = lineString.points[lineString.points.length - 1];\n        if (firstPoint.latitude === lastPoint.latitude && firstPoint.longitude === lastPoint.longitude) {\n            return true;\n        }\n    };\n    Object.defineProperty(LineString.prototype, \"_internalType\", {\n        get: function () {\n            return SYMBOL_GEO_LINE_STRING;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return LineString;\n}());\nexport { LineString };\n", "var __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { SYMBOL_GEO_MULTI_POLYGON } from '../helper/symbol';\nimport { isArray, isNumber } from '../utils/type';\nimport { LineString } from './lineString';\nvar Polygon = (function () {\n    function Polygon(lines) {\n        if (!isArray(lines)) {\n            throw new TypeError(\"\\\"lines\\\" must be of type LineString[]. Received type \".concat(typeof lines));\n        }\n        if (lines.length === 0) {\n            throw new Error('Polygon must contain 1 linestring at least');\n        }\n        lines.forEach(function (line) {\n            if (!(line instanceof LineString)) {\n                throw new TypeError(\"\\\"lines\\\" must be of type LineString[]. Received type \".concat(typeof line, \"[]\"));\n            }\n            if (!LineString.isClosed(line)) {\n                throw new Error(\"LineString \".concat(line.points.map(function (p) { return p.toReadableString(); }), \" is not a closed cycle\"));\n            }\n        });\n        this.lines = lines;\n    }\n    Polygon.prototype.parse = function (key) {\n        var _a;\n        return _a = {},\n            _a[key] = {\n                type: 'Polygon',\n                coordinates: this.lines.map(function (line) {\n                    return line.points.map(function (point) { return [point.longitude, point.latitude]; });\n                })\n            },\n            _a;\n    };\n    Polygon.prototype.toJSON = function () {\n        return {\n            type: 'Polygon',\n            coordinates: this.lines.map(function (line) {\n                return line.points.map(function (point) { return [point.longitude, point.latitude]; });\n            })\n        };\n    };\n    Polygon.validate = function (polygon) {\n        var e_1, _a, e_2, _b;\n        if (polygon.type !== 'Polygon' || !isArray(polygon.coordinates)) {\n            return false;\n        }\n        try {\n            for (var _c = __values(polygon.coordinates), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var line = _d.value;\n                if (!this.isCloseLineString(line)) {\n                    return false;\n                }\n                try {\n                    for (var line_1 = (e_2 = void 0, __values(line)), line_1_1 = line_1.next(); !line_1_1.done; line_1_1 = line_1.next()) {\n                        var point = line_1_1.value;\n                        if (!isNumber(point[0]) || !isNumber(point[1])) {\n                            return false;\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (line_1_1 && !line_1_1.done && (_b = line_1.return)) _b.call(line_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return true;\n    };\n    Polygon.isCloseLineString = function (lineString) {\n        var firstPoint = lineString[0];\n        var lastPoint = lineString[lineString.length - 1];\n        if (firstPoint[0] !== lastPoint[0] || firstPoint[1] !== lastPoint[1]) {\n            return false;\n        }\n        return true;\n    };\n    Object.defineProperty(Polygon.prototype, \"_internalType\", {\n        get: function () {\n            return SYMBOL_GEO_MULTI_POLYGON;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Polygon;\n}());\nexport { Polygon };\n", "var __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { SYMBOL_GEO_MULTI_POINT } from '../helper/symbol';\nimport { Point } from './point';\nimport { isArray, isNumber } from '../utils/type';\nvar MultiPoint = (function () {\n    function MultiPoint(points) {\n        if (!isArray(points)) {\n            throw new TypeError(\"\\\"points\\\" must be of type Point[]. Received type \".concat(typeof points));\n        }\n        if (points.length === 0) {\n            throw new Error('\"points\" must contain 1 point at least');\n        }\n        points.forEach(function (point) {\n            if (!(point instanceof Point)) {\n                throw new TypeError(\"\\\"points\\\" must be of type Point[]. Received type \".concat(typeof point, \"[]\"));\n            }\n        });\n        this.points = points;\n    }\n    MultiPoint.prototype.parse = function (key) {\n        var _a;\n        return _a = {},\n            _a[key] = {\n                type: 'MultiPoint',\n                coordinates: this.points.map(function (point) { return point.toJSON().coordinates; })\n            },\n            _a;\n    };\n    MultiPoint.prototype.toJSON = function () {\n        return {\n            type: 'MultiPoint',\n            coordinates: this.points.map(function (point) { return point.toJSON().coordinates; })\n        };\n    };\n    MultiPoint.validate = function (multiPoint) {\n        var e_1, _a;\n        if (multiPoint.type !== 'MultiPoint' || !isArray(multiPoint.coordinates)) {\n            return false;\n        }\n        try {\n            for (var _b = __values(multiPoint.coordinates), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var point = _c.value;\n                if (!isNumber(point[0]) || !isNumber(point[1])) {\n                    return false;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return true;\n    };\n    Object.defineProperty(MultiPoint.prototype, \"_internalType\", {\n        get: function () {\n            return SYMBOL_GEO_MULTI_POINT;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return MultiPoint;\n}());\nexport { MultiPoint };\n", "var __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { SYMBOL_GEO_MULTI_LINE_STRING } from '../helper/symbol';\nimport { isArray, isNumber } from '../utils/type';\nimport { LineString } from './lineString';\nvar MultiLineString = (function () {\n    function MultiLineString(lines) {\n        if (!isArray(lines)) {\n            throw new TypeError(\"\\\"lines\\\" must be of type LineString[]. Received type \".concat(typeof lines));\n        }\n        if (lines.length === 0) {\n            throw new Error('Polygon must contain 1 linestring at least');\n        }\n        lines.forEach(function (line) {\n            if (!(line instanceof LineString)) {\n                throw new TypeError(\"\\\"lines\\\" must be of type LineString[]. Received type \".concat(typeof line, \"[]\"));\n            }\n        });\n        this.lines = lines;\n    }\n    MultiLineString.prototype.parse = function (key) {\n        var _a;\n        return _a = {},\n            _a[key] = {\n                type: 'MultiLineString',\n                coordinates: this.lines.map(function (line) {\n                    return line.points.map(function (point) { return [point.longitude, point.latitude]; });\n                })\n            },\n            _a;\n    };\n    MultiLineString.prototype.toJSON = function () {\n        return {\n            type: 'MultiLineString',\n            coordinates: this.lines.map(function (line) {\n                return line.points.map(function (point) { return [point.longitude, point.latitude]; });\n            })\n        };\n    };\n    MultiLineString.validate = function (multiLineString) {\n        var e_1, _a, e_2, _b;\n        if (multiLineString.type !== 'MultiLineString' || !isArray(multiLineString.coordinates)) {\n            return false;\n        }\n        try {\n            for (var _c = __values(multiLineString.coordinates), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var line = _d.value;\n                try {\n                    for (var line_1 = (e_2 = void 0, __values(line)), line_1_1 = line_1.next(); !line_1_1.done; line_1_1 = line_1.next()) {\n                        var point = line_1_1.value;\n                        if (!isNumber(point[0]) || !isNumber(point[1])) {\n                            return false;\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (line_1_1 && !line_1_1.done && (_b = line_1.return)) _b.call(line_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return true;\n    };\n    Object.defineProperty(MultiLineString.prototype, \"_internalType\", {\n        get: function () {\n            return SYMBOL_GEO_MULTI_LINE_STRING;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return MultiLineString;\n}());\nexport { MultiLineString };\n", "var __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { SYMBOL_GEO_POLYGON } from '../helper/symbol';\nimport { isArray, isNumber } from '../utils/type';\nimport { Polygon } from './polygon';\nvar MultiPolygon = (function () {\n    function MultiPolygon(polygons) {\n        var e_1, _a;\n        if (!isArray(polygons)) {\n            throw new TypeError(\"\\\"polygons\\\" must be of type Polygon[]. Received type \".concat(typeof polygons));\n        }\n        if (polygons.length === 0) {\n            throw new Error('MultiPolygon must contain 1 polygon at least');\n        }\n        try {\n            for (var polygons_1 = __values(polygons), polygons_1_1 = polygons_1.next(); !polygons_1_1.done; polygons_1_1 = polygons_1.next()) {\n                var polygon = polygons_1_1.value;\n                if (!(polygon instanceof Polygon)) {\n                    throw new TypeError(\"\\\"polygon\\\" must be of type Polygon[]. Received type \".concat(typeof polygon, \"[]\"));\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (polygons_1_1 && !polygons_1_1.done && (_a = polygons_1.return)) _a.call(polygons_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        this.polygons = polygons;\n    }\n    MultiPolygon.prototype.parse = function (key) {\n        var _a;\n        return _a = {},\n            _a[key] = {\n                type: 'MultiPolygon',\n                coordinates: this.polygons.map(function (polygon) {\n                    return polygon.lines.map(function (line) {\n                        return line.points.map(function (point) { return [point.longitude, point.latitude]; });\n                    });\n                })\n            },\n            _a;\n    };\n    MultiPolygon.prototype.toJSON = function () {\n        return {\n            type: 'MultiPolygon',\n            coordinates: this.polygons.map(function (polygon) {\n                return polygon.lines.map(function (line) {\n                    return line.points.map(function (point) { return [point.longitude, point.latitude]; });\n                });\n            })\n        };\n    };\n    MultiPolygon.validate = function (multiPolygon) {\n        var e_2, _a, e_3, _b, e_4, _c;\n        if (multiPolygon.type !== 'MultiPolygon' || !isArray(multiPolygon.coordinates)) {\n            return false;\n        }\n        try {\n            for (var _d = __values(multiPolygon.coordinates), _e = _d.next(); !_e.done; _e = _d.next()) {\n                var polygon = _e.value;\n                try {\n                    for (var polygon_1 = (e_3 = void 0, __values(polygon)), polygon_1_1 = polygon_1.next(); !polygon_1_1.done; polygon_1_1 = polygon_1.next()) {\n                        var line = polygon_1_1.value;\n                        try {\n                            for (var line_1 = (e_4 = void 0, __values(line)), line_1_1 = line_1.next(); !line_1_1.done; line_1_1 = line_1.next()) {\n                                var point = line_1_1.value;\n                                if (!isNumber(point[0]) || !isNumber(point[1])) {\n                                    return false;\n                                }\n                            }\n                        }\n                        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n                        finally {\n                            try {\n                                if (line_1_1 && !line_1_1.done && (_c = line_1.return)) _c.call(line_1);\n                            }\n                            finally { if (e_4) throw e_4.error; }\n                        }\n                    }\n                }\n                catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                finally {\n                    try {\n                        if (polygon_1_1 && !polygon_1_1.done && (_b = polygon_1.return)) _b.call(polygon_1);\n                    }\n                    finally { if (e_3) throw e_3.error; }\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        return true;\n    };\n    Object.defineProperty(MultiPolygon.prototype, \"_internalType\", {\n        get: function () {\n            return SYMBOL_GEO_POLYGON;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return MultiPolygon;\n}());\nexport { MultiPolygon };\n", "export var createPromiseCallback = function () {\n    var cb = function () { };\n    if (!Promise) {\n        cb.promise = {};\n        var throwPromiseNotDefined = function () {\n            throw new Error('Your Node runtime does support ES6 Promises. ' +\n                'Set \"global.Promise\" to your preferred implementation of promises.');\n        };\n        Object.defineProperty(cb.promise, 'then', { get: throwPromiseNotDefined });\n        Object.defineProperty(cb.promise, 'catch', { get: throwPromiseNotDefined });\n        return cb;\n    }\n    var promise = new Promise(function (resolve, reject) {\n        cb = function (err, data) {\n            if (err)\n                return reject(err);\n            return resolve(data);\n        };\n    });\n    cb.promise = promise;\n    return cb;\n};\n", "import { SYMBOL_UNSET_FIELD_NAME, SYMBOL_UPDATE_COMMAND } from '../helper/symbol';\nexport var UPDATE_COMMANDS_LITERAL;\n(function (UPDATE_COMMANDS_LITERAL) {\n    UPDATE_COMMANDS_LITERAL[\"SET\"] = \"set\";\n    UPDATE_COMMANDS_LITERAL[\"REMOVE\"] = \"remove\";\n    UPDATE_COMMANDS_LITERAL[\"INC\"] = \"inc\";\n    UPDATE_COMMANDS_LITERAL[\"MUL\"] = \"mul\";\n    UPDATE_COMMANDS_LITERAL[\"PUSH\"] = \"push\";\n    UPDATE_COMMANDS_LITERAL[\"PULL\"] = \"pull\";\n    UPDATE_COMMANDS_LITERAL[\"PULL_ALL\"] = \"pullAll\";\n    UPDATE_COMMANDS_LITERAL[\"POP\"] = \"pop\";\n    UPDATE_COMMANDS_LITERAL[\"SHIFT\"] = \"shift\";\n    UPDATE_COMMANDS_LITERAL[\"UNSHIFT\"] = \"unshift\";\n    UPDATE_COMMANDS_LITERAL[\"ADD_TO_SET\"] = \"addToSet\";\n    UPDATE_COMMANDS_LITERAL[\"BIT\"] = \"bit\";\n    UPDATE_COMMANDS_LITERAL[\"RENAME\"] = \"rename\";\n    UPDATE_COMMANDS_LITERAL[\"MAX\"] = \"max\";\n    UPDATE_COMMANDS_LITERAL[\"MIN\"] = \"min\";\n})(UPDATE_COMMANDS_LITERAL || (UPDATE_COMMANDS_LITERAL = {}));\nvar UpdateCommand = (function () {\n    function UpdateCommand(operator, operands, fieldName) {\n        this._internalType = SYMBOL_UPDATE_COMMAND;\n        Object.defineProperties(this, {\n            _internalType: {\n                enumerable: false,\n                configurable: false,\n            },\n        });\n        this.operator = operator;\n        this.operands = operands;\n        this.fieldName = fieldName || SYMBOL_UNSET_FIELD_NAME;\n    }\n    UpdateCommand.prototype._setFieldName = function (fieldName) {\n        var command = new UpdateCommand(this.operator, this.operands, fieldName);\n        return command;\n    };\n    return UpdateCommand;\n}());\nexport { UpdateCommand };\nexport function isUpdateCommand(object) {\n    return object && (object instanceof UpdateCommand) && (object._internalType === SYMBOL_UPDATE_COMMAND);\n}\nexport function isKnownUpdateCommand(object) {\n    return isUpdateCommand(object) && (object.operator.toUpperCase() in UPDATE_COMMANDS_LITERAL);\n}\nexport default UpdateCommand;\n", "import { SYMBOL_UNSET_FIELD_NAME, SYMBOL_LOGIC_COMMAND } from '../helper/symbol';\nimport { isQueryCommand } from './query';\nexport var AND = 'and';\nexport var OR = 'or';\nexport var NOT = 'not';\nexport var NOR = 'nor';\nexport var LOGIC_COMMANDS_LITERAL;\n(function (LOGIC_COMMANDS_LITERAL) {\n    LOGIC_COMMANDS_LITERAL[\"AND\"] = \"and\";\n    LOGIC_COMMANDS_LITERAL[\"OR\"] = \"or\";\n    LOGIC_COMMANDS_LITERAL[\"NOT\"] = \"not\";\n    LOGIC_COMMANDS_LITERAL[\"NOR\"] = \"nor\";\n})(LOGIC_COMMANDS_LITERAL || (LOGIC_COMMANDS_LITERAL = {}));\nvar LogicCommand = (function () {\n    function LogicCommand(operator, operands, fieldName) {\n        this._internalType = SYMBOL_LOGIC_COMMAND;\n        Object.defineProperties(this, {\n            _internalType: {\n                enumerable: false,\n                configurable: false,\n            },\n        });\n        this.operator = operator;\n        this.operands = operands;\n        this.fieldName = fieldName || SYMBOL_UNSET_FIELD_NAME;\n        if (this.fieldName !== SYMBOL_UNSET_FIELD_NAME) {\n            if (Array.isArray(operands)) {\n                operands = operands.slice();\n                this.operands = operands;\n                for (var i = 0, len = operands.length; i < len; i++) {\n                    var query = operands[i];\n                    if (isLogicCommand(query) || isQueryCommand(query)) {\n                        operands[i] = query._setFieldName(this.fieldName);\n                    }\n                }\n            }\n            else {\n                var query = operands;\n                if (isLogicCommand(query) || isQueryCommand(query)) {\n                    operands = query._setFieldName(this.fieldName);\n                }\n            }\n        }\n    }\n    LogicCommand.prototype._setFieldName = function (fieldName) {\n        var operands = this.operands.map(function (operand) {\n            if (operand instanceof LogicCommand) {\n                return operand._setFieldName(fieldName);\n            }\n            else {\n                return operand;\n            }\n        });\n        var command = new LogicCommand(this.operator, operands, fieldName);\n        return command;\n    };\n    LogicCommand.prototype.and = function () {\n        var __expressions__ = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            __expressions__[_i] = arguments[_i];\n        }\n        var expressions = Array.isArray(arguments[0]) ? arguments[0] : Array.from(arguments);\n        expressions.unshift(this);\n        return new LogicCommand(LOGIC_COMMANDS_LITERAL.AND, expressions, this.fieldName);\n    };\n    LogicCommand.prototype.or = function () {\n        var __expressions__ = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            __expressions__[_i] = arguments[_i];\n        }\n        var expressions = Array.isArray(arguments[0]) ? arguments[0] : Array.from(arguments);\n        expressions.unshift(this);\n        return new LogicCommand(LOGIC_COMMANDS_LITERAL.OR, expressions, this.fieldName);\n    };\n    return LogicCommand;\n}());\nexport { LogicCommand };\nexport function isLogicCommand(object) {\n    return object && (object instanceof LogicCommand) && (object._internalType === SYMBOL_LOGIC_COMMAND);\n}\nexport function isKnownLogicCommand(object) {\n    return isLogicCommand && (object.operator.toUpperCase() in LOGIC_COMMANDS_LITERAL);\n}\nexport default LogicCommand;\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { LogicCommand } from './logic';\nimport { SYMBOL_QUERY_COMMAND } from '../helper/symbol';\nimport { Point, LineString, Polygon, MultiPoint, MultiLineString, MultiPolygon } from '../geo/index';\nimport { isNumber } from '../utils/type';\nexport var EQ = 'eq';\nexport var NEQ = 'neq';\nexport var GT = 'gt';\nexport var GTE = 'gte';\nexport var LT = 'lt';\nexport var LTE = 'lte';\nexport var IN = 'in';\nexport var NIN = 'nin';\nexport var ALL = 'all';\nexport var ELEM_MATCH = 'elemMatch';\nexport var EXISTS = 'exists';\nexport var SIZE = 'size';\nexport var MOD = 'mod';\nexport var QUERY_COMMANDS_LITERAL;\n(function (QUERY_COMMANDS_LITERAL) {\n    QUERY_COMMANDS_LITERAL[\"EQ\"] = \"eq\";\n    QUERY_COMMANDS_LITERAL[\"NEQ\"] = \"neq\";\n    QUERY_COMMANDS_LITERAL[\"GT\"] = \"gt\";\n    QUERY_COMMANDS_LITERAL[\"GTE\"] = \"gte\";\n    QUERY_COMMANDS_LITERAL[\"LT\"] = \"lt\";\n    QUERY_COMMANDS_LITERAL[\"LTE\"] = \"lte\";\n    QUERY_COMMANDS_LITERAL[\"IN\"] = \"in\";\n    QUERY_COMMANDS_LITERAL[\"NIN\"] = \"nin\";\n    QUERY_COMMANDS_LITERAL[\"ALL\"] = \"all\";\n    QUERY_COMMANDS_LITERAL[\"ELEM_MATCH\"] = \"elemMatch\";\n    QUERY_COMMANDS_LITERAL[\"EXISTS\"] = \"exists\";\n    QUERY_COMMANDS_LITERAL[\"SIZE\"] = \"size\";\n    QUERY_COMMANDS_LITERAL[\"MOD\"] = \"mod\";\n    QUERY_COMMANDS_LITERAL[\"GEO_NEAR\"] = \"geoNear\";\n    QUERY_COMMANDS_LITERAL[\"GEO_WITHIN\"] = \"geoWithin\";\n    QUERY_COMMANDS_LITERAL[\"GEO_INTERSECTS\"] = \"geoIntersects\";\n})(QUERY_COMMANDS_LITERAL || (QUERY_COMMANDS_LITERAL = {}));\nvar QueryCommand = (function (_super) {\n    __extends(QueryCommand, _super);\n    function QueryCommand(operator, operands, fieldName) {\n        var _this = _super.call(this, operator, operands, fieldName) || this;\n        _this.operator = operator;\n        _this._internalType = SYMBOL_QUERY_COMMAND;\n        return _this;\n    }\n    QueryCommand.prototype.toJSON = function () {\n        var _a, _b;\n        switch (this.operator) {\n            case QUERY_COMMANDS_LITERAL.IN:\n            case QUERY_COMMANDS_LITERAL.NIN:\n                return _a = {},\n                    _a['$' + this.operator] = this.operands,\n                    _a;\n            default:\n                return _b = {},\n                    _b['$' + this.operator] = this.operands[0],\n                    _b;\n        }\n    };\n    QueryCommand.prototype._setFieldName = function (fieldName) {\n        var command = new QueryCommand(this.operator, this.operands, fieldName);\n        return command;\n    };\n    QueryCommand.prototype.eq = function (val) {\n        var command = new QueryCommand(QUERY_COMMANDS_LITERAL.EQ, [val], this.fieldName);\n        return this.and(command);\n    };\n    QueryCommand.prototype.neq = function (val) {\n        var command = new QueryCommand(QUERY_COMMANDS_LITERAL.NEQ, [val], this.fieldName);\n        return this.and(command);\n    };\n    QueryCommand.prototype.gt = function (val) {\n        var command = new QueryCommand(QUERY_COMMANDS_LITERAL.GT, [val], this.fieldName);\n        return this.and(command);\n    };\n    QueryCommand.prototype.gte = function (val) {\n        var command = new QueryCommand(QUERY_COMMANDS_LITERAL.GTE, [val], this.fieldName);\n        return this.and(command);\n    };\n    QueryCommand.prototype.lt = function (val) {\n        var command = new QueryCommand(QUERY_COMMANDS_LITERAL.LT, [val], this.fieldName);\n        return this.and(command);\n    };\n    QueryCommand.prototype.lte = function (val) {\n        var command = new QueryCommand(QUERY_COMMANDS_LITERAL.LTE, [val], this.fieldName);\n        return this.and(command);\n    };\n    QueryCommand.prototype.in = function (list) {\n        var command = new QueryCommand(QUERY_COMMANDS_LITERAL.IN, list, this.fieldName);\n        return this.and(command);\n    };\n    QueryCommand.prototype.nin = function (list) {\n        var command = new QueryCommand(QUERY_COMMANDS_LITERAL.NIN, list, this.fieldName);\n        return this.and(command);\n    };\n    QueryCommand.prototype.geoNear = function (val) {\n        if (!(val.geometry instanceof Point)) {\n            throw new TypeError(\"\\\"geometry\\\" must be of type Point. Received type \".concat(typeof val.geometry));\n        }\n        if (val.maxDistance !== undefined && !isNumber(val.maxDistance)) {\n            throw new TypeError(\"\\\"maxDistance\\\" must be of type Number. Received type \".concat(typeof val.maxDistance));\n        }\n        if (val.minDistance !== undefined && !isNumber(val.minDistance)) {\n            throw new TypeError(\"\\\"minDistance\\\" must be of type Number. Received type \".concat(typeof val.minDistance));\n        }\n        var command = new QueryCommand(QUERY_COMMANDS_LITERAL.GEO_NEAR, [val], this.fieldName);\n        return this.and(command);\n    };\n    QueryCommand.prototype.geoWithin = function (val) {\n        if (!(val.geometry instanceof MultiPolygon) && !(val.geometry instanceof Polygon)) {\n            throw new TypeError(\"\\\"geometry\\\" must be of type Polygon or MultiPolygon. Received type \".concat(typeof val.geometry));\n        }\n        var command = new QueryCommand(QUERY_COMMANDS_LITERAL.GEO_WITHIN, [val], this.fieldName);\n        return this.and(command);\n    };\n    QueryCommand.prototype.geoIntersects = function (val) {\n        if (!(val.geometry instanceof Point) &&\n            !(val.geometry instanceof LineString) &&\n            !(val.geometry instanceof Polygon) &&\n            !(val.geometry instanceof MultiPoint) &&\n            !(val.geometry instanceof MultiLineString) &&\n            !(val.geometry instanceof MultiPolygon)) {\n            throw new TypeError(\"\\\"geometry\\\" must be of type Point, LineString, Polygon, MultiPoint, MultiLineString or MultiPolygon. Received type \".concat(typeof val.geometry));\n        }\n        var command = new QueryCommand(QUERY_COMMANDS_LITERAL.GEO_INTERSECTS, [val], this.fieldName);\n        return this.and(command);\n    };\n    return QueryCommand;\n}(LogicCommand));\nexport { QueryCommand };\nexport function isQueryCommand(object) {\n    return object && object instanceof QueryCommand && object._internalType === SYMBOL_QUERY_COMMAND;\n}\nexport function isKnownQueryCommand(object) {\n    return isQueryCommand(object) && object.operator.toUpperCase() in QUERY_COMMANDS_LITERAL;\n}\nexport function isComparisonCommand(object) {\n    return isQueryCommand(object);\n}\nexport default QueryCommand;\n", "import { QUERY_COMMANDS_LITERAL } from './commands/query';\nimport { LOGIC_COMMANDS_LITERAL } from './commands/logic';\nimport { UPDATE_COMMANDS_LITERAL } from './commands/update';\nexport var OperatorMap = {};\nfor (var key in QUERY_COMMANDS_LITERAL) {\n    OperatorMap[key] = '$' + key;\n}\nfor (var key in LOGIC_COMMANDS_LITERAL) {\n    OperatorMap[key] = '$' + key;\n}\nfor (var key in UPDATE_COMMANDS_LITERAL) {\n    OperatorMap[key] = '$' + key;\n}\nOperatorMap[QUERY_COMMANDS_LITERAL.NEQ] = '$ne';\nOperatorMap[UPDATE_COMMANDS_LITERAL.REMOVE] = '$unset';\nOperatorMap[UPDATE_COMMANDS_LITERAL.SHIFT] = '$pop';\nOperatorMap[UPDATE_COMMANDS_LITERAL.UNSHIFT] = '$push';\nexport function operatorToString(operator) {\n    return OperatorMap[operator] || '$' + operator;\n}\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { SYMBOL_GEO_POINT, SYMBOL_SERVER_DATE, SYMBOL_REGEXP } from '../helper/symbol';\nimport { getType, isObject, isArray, isDate, isNumber, isInternalObject, isRegExp } from '../utils/type';\nimport { Point } from '../geo/index';\nimport { ServerDate } from '../serverDate/index';\nexport function serialize(val) {\n    return serializeHelper(val, [val]);\n}\nfunction serializeHelper(val, visited) {\n    if (isInternalObject(val)) {\n        switch (val._internalType) {\n            case SYMBOL_GEO_POINT: {\n                return val.toJSON();\n            }\n            case SYMBOL_SERVER_DATE: {\n                return val.parse();\n            }\n            case SYMBOL_REGEXP: {\n                return val.parse();\n            }\n            default: {\n                return val.toJSON ? val.toJSON() : val;\n            }\n        }\n    }\n    else if (isDate(val)) {\n        return {\n            $date: +val,\n        };\n    }\n    else if (isRegExp(val)) {\n        return {\n            $regex: val.source,\n            $options: val.flags,\n        };\n    }\n    else if (isArray(val)) {\n        return val.map(function (item) {\n            if (visited.indexOf(item) > -1) {\n                throw new Error('Cannot convert circular structure to JSON');\n            }\n            return serializeHelper(item, __spreadArray(__spreadArray([], __read(visited), false), [\n                item,\n            ], false));\n        });\n    }\n    else if (isObject(val)) {\n        var ret = __assign({}, val);\n        for (var key in ret) {\n            if (visited.indexOf(ret[key]) > -1) {\n                throw new Error('Cannot convert circular structure to JSON');\n            }\n            ret[key] = serializeHelper(ret[key], __spreadArray(__spreadArray([], __read(visited), false), [\n                ret[key],\n            ], false));\n        }\n        return ret;\n    }\n    else {\n        return val;\n    }\n}\nexport function deserialize(object) {\n    var ret = __assign({}, object);\n    for (var key in ret) {\n        switch (key) {\n            case '$date': {\n                switch (getType(ret[key])) {\n                    case 'number': {\n                        return new Date(ret[key]);\n                    }\n                    case 'object': {\n                        return new ServerDate(ret[key]);\n                    }\n                }\n                break;\n            }\n            case 'type': {\n                switch (ret.type) {\n                    case 'Point': {\n                        if (isArray(ret.coordinates) && isNumber(ret.coordinates[0]) && isNumber(ret.coordinates[1])) {\n                            return new Point(ret.coordinates[0], ret.coordinates[1]);\n                        }\n                        break;\n                    }\n                }\n                break;\n            }\n        }\n    }\n    return object;\n}\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { getType, isObject, isArray, isDate, isRegExp, isInternalObject } from '../utils/type';\nimport { serialize as serializeInternalDataType, deserialize as deserializeInternalDataType } from './datatype';\nfunction flatten(query, shouldPreserverObject, parents, visited) {\n    var cloned = __assign({}, query);\n    for (var key in query) {\n        if (/^\\$/.test(key))\n            continue;\n        var value = query[key];\n        if (!value)\n            continue;\n        if (isObject(value) && !shouldPreserverObject(value)) {\n            if (visited.indexOf(value) > -1) {\n                throw new Error('Cannot convert circular structure to JSON');\n            }\n            var newParents = __spreadArray(__spreadArray([], __read(parents), false), [\n                key,\n            ], false);\n            var newVisited = __spreadArray(__spreadArray([], __read(visited), false), [\n                value,\n            ], false);\n            var flattenedChild = flatten(value, shouldPreserverObject, newParents, newVisited);\n            cloned[key] = flattenedChild;\n            var hasKeyNotCombined = false;\n            for (var childKey in flattenedChild) {\n                if (!/^\\$/.test(childKey)) {\n                    cloned[\"\".concat(key, \".\").concat(childKey)] = flattenedChild[childKey];\n                    delete cloned[key][childKey];\n                }\n                else {\n                    hasKeyNotCombined = true;\n                }\n            }\n            if (!hasKeyNotCombined) {\n                delete cloned[key];\n            }\n        }\n    }\n    return cloned;\n}\nexport function flattenQueryObject(query) {\n    return flatten(query, isConversionRequired, [], [query]);\n}\nexport function flattenObject(object) {\n    return flatten(object, function (_) { return false; }, [], [object]);\n}\nexport function mergeConditionAfterEncode(query, condition, key) {\n    if (!condition[key]) {\n        delete query[key];\n    }\n    for (var conditionKey in condition) {\n        if (query[conditionKey]) {\n            if (isArray(query[conditionKey])) {\n                query[conditionKey].push(condition[conditionKey]);\n            }\n            else if (isObject(query[conditionKey])) {\n                if (isObject(condition[conditionKey])) {\n                    Object.assign(query[conditionKey], condition[conditionKey]);\n                }\n                else {\n                    console.warn(\"unmergable condition, query is object but condition is \".concat(getType(condition), \", can only overwrite\"), condition, key);\n                    query[conditionKey] = condition[conditionKey];\n                }\n            }\n            else {\n                console.warn(\"to-merge query is of type \".concat(getType(query), \", can only overwrite\"), query, condition, key);\n                query[conditionKey] = condition[conditionKey];\n            }\n        }\n        else {\n            query[conditionKey] = condition[conditionKey];\n        }\n    }\n}\nexport function isConversionRequired(val) {\n    return isInternalObject(val) || isDate(val) || isRegExp(val);\n}\nexport function encodeInternalDataType(val) {\n    return serializeInternalDataType(val);\n}\nexport function decodeInternalDataType(object) {\n    return deserializeInternalDataType(object);\n}\n", "import { UpdateCommand, isUpdateCommand, UPDATE_COMMANDS_LITERAL } from '../commands/update';\nimport { SYMBOL_UNSET_FIELD_NAME } from '../helper/symbol';\nimport { getType, isArray } from '../utils/type';\nimport { operatorToString } from '../operator-map';\nimport { flattenQueryObject, encodeInternalDataType, mergeConditionAfterEncode } from './common';\nvar UpdateSerializer = (function () {\n    function UpdateSerializer() {\n    }\n    UpdateSerializer.encode = function (query) {\n        var stringifier = new UpdateSerializer();\n        return stringifier.encodeUpdate(query);\n    };\n    UpdateSerializer.prototype.encodeUpdate = function (query) {\n        if (isUpdateCommand(query)) {\n            return this.encodeUpdateCommand(query);\n        }\n        else if (getType(query) === 'object') {\n            return this.encodeUpdateObject(query);\n        }\n        else {\n            return query;\n        }\n    };\n    UpdateSerializer.prototype.encodeUpdateCommand = function (query) {\n        if (query.fieldName === SYMBOL_UNSET_FIELD_NAME) {\n            throw new Error('Cannot encode a comparison command with unset field name');\n        }\n        switch (query.operator) {\n            case UPDATE_COMMANDS_LITERAL.PUSH:\n            case UPDATE_COMMANDS_LITERAL.PULL:\n            case UPDATE_COMMANDS_LITERAL.PULL_ALL:\n            case UPDATE_COMMANDS_LITERAL.POP:\n            case UPDATE_COMMANDS_LITERAL.SHIFT:\n            case UPDATE_COMMANDS_LITERAL.UNSHIFT:\n            case UPDATE_COMMANDS_LITERAL.ADD_TO_SET: {\n                return this.encodeArrayUpdateCommand(query);\n            }\n            default: {\n                return this.encodeFieldUpdateCommand(query);\n            }\n        }\n    };\n    UpdateSerializer.prototype.encodeFieldUpdateCommand = function (query) {\n        var _a, _b, _c, _d;\n        var $op = operatorToString(query.operator);\n        switch (query.operator) {\n            case UPDATE_COMMANDS_LITERAL.REMOVE: {\n                return _a = {},\n                    _a[$op] = (_b = {},\n                        _b[query.fieldName] = '',\n                        _b),\n                    _a;\n            }\n            default: {\n                return _c = {},\n                    _c[$op] = (_d = {},\n                        _d[query.fieldName] = query.operands[0],\n                        _d),\n                    _c;\n            }\n        }\n    };\n    UpdateSerializer.prototype.encodeArrayUpdateCommand = function (query) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n        var $op = operatorToString(query.operator);\n        switch (query.operator) {\n            case UPDATE_COMMANDS_LITERAL.PUSH: {\n                var modifiers = void 0;\n                if (isArray(query.operands)) {\n                    modifiers = {\n                        $each: query.operands.map(encodeInternalDataType)\n                    };\n                }\n                else {\n                    modifiers = query.operands;\n                }\n                return _a = {},\n                    _a[$op] = (_b = {},\n                        _b[query.fieldName] = modifiers,\n                        _b),\n                    _a;\n            }\n            case UPDATE_COMMANDS_LITERAL.UNSHIFT: {\n                var modifiers = {\n                    $each: query.operands.map(encodeInternalDataType),\n                    $position: 0\n                };\n                return _c = {},\n                    _c[$op] = (_d = {},\n                        _d[query.fieldName] = modifiers,\n                        _d),\n                    _c;\n            }\n            case UPDATE_COMMANDS_LITERAL.POP: {\n                return _e = {},\n                    _e[$op] = (_f = {},\n                        _f[query.fieldName] = 1,\n                        _f),\n                    _e;\n            }\n            case UPDATE_COMMANDS_LITERAL.SHIFT: {\n                return _g = {},\n                    _g[$op] = (_h = {},\n                        _h[query.fieldName] = -1,\n                        _h),\n                    _g;\n            }\n            default: {\n                return _j = {},\n                    _j[$op] = (_k = {},\n                        _k[query.fieldName] = encodeInternalDataType(query.operands),\n                        _k),\n                    _j;\n            }\n        }\n    };\n    UpdateSerializer.prototype.encodeUpdateObject = function (query) {\n        var flattened = flattenQueryObject(query);\n        for (var key in flattened) {\n            if (/^\\$/.test(key))\n                continue;\n            var val = flattened[key];\n            if (isUpdateCommand(val)) {\n                flattened[key] = val._setFieldName(key);\n                var condition = this.encodeUpdateCommand(flattened[key]);\n                mergeConditionAfterEncode(flattened, condition, key);\n            }\n            else {\n                flattened[key] = val = encodeInternalDataType(val);\n                var $setCommand = new UpdateCommand(UPDATE_COMMANDS_LITERAL.SET, [val], key);\n                var condition = this.encodeUpdateCommand($setCommand);\n                mergeConditionAfterEncode(flattened, condition, key);\n            }\n        }\n        return flattened;\n    };\n    return UpdateSerializer;\n}());\nexport { UpdateSerializer };\n", "import { Db } from '../';\nexport var sleep = function (ms) {\n    if (ms === void 0) { ms = 0; }\n    return new Promise(function (r) { return setTimeout(r, ms); });\n};\nvar counters = {};\nexport var autoCount = function (domain) {\n    if (domain === void 0) { domain = 'any'; }\n    if (!counters[domain]) {\n        counters[domain] = 0;\n    }\n    return counters[domain]++;\n};\nvar wsList = {};\nexport function getWsInstance(db) {\n    if (!Db.wsClientClass) {\n        throw new Error('to use realtime you must import realtime module first');\n    }\n    var env = db.config.env;\n    if (!wsList[env]) {\n        wsList[env] = new Db.wsClientClass({\n            context: {\n                appConfig: {\n                    docSizeLimit: 1000,\n                    realtimePingInterval: 10000,\n                    realtimePongWaitTimeout: 5000,\n                    request: Db.createRequest(db.config)\n                }\n            }\n        });\n    }\n    return wsList[env];\n}\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { createPromiseCallback } from './lib/util';\nimport { Db } from './index';\nimport { Util } from './util';\nimport { UpdateSerializer } from './serializer/update';\nimport { serialize } from './serializer/datatype';\nimport { UpdateCommand } from './commands/update';\nimport { QueryType } from './constant';\nimport { getWsInstance } from './utils/utils';\nvar DocumentReference = (function () {\n    function DocumentReference(db, coll, docID, projection) {\n        if (projection === void 0) { projection = {}; }\n        var _this = this;\n        this.watch = function (options) {\n            var ws = getWsInstance(_this._db);\n            return ws.watch(__assign(__assign({}, options), { envId: _this._db.config.env, collectionName: _this._coll, query: JSON.stringify({\n                    _id: _this.id\n                }) }));\n        };\n        this._db = db;\n        this._coll = coll;\n        this.id = docID;\n        this.request = Db.createRequest(this._db.config);\n        this.projection = projection;\n    }\n    DocumentReference.prototype.create = function (data, callback) {\n        callback = callback || createPromiseCallback();\n        var params = {\n            collectionName: this._coll,\n            data: serialize(data)\n        };\n        if (this.id) {\n            params['_id'] = this.id;\n        }\n        this.request\n            .send('database.addDocument', params)\n            .then(function (res) {\n            if (res.code) {\n                callback(0, res);\n            }\n            else {\n                callback(0, {\n                    id: res.data._id,\n                    requestId: res.requestId\n                });\n            }\n        })\n            .catch(function (err) {\n            callback(err);\n        });\n        return callback.promise;\n    };\n    DocumentReference.prototype.set = function (data, callback) {\n        callback = callback || createPromiseCallback();\n        if (!this.id) {\n            return Promise.resolve({\n                code: 'INVALID_PARAM',\n                message: 'docId不能为空'\n            });\n        }\n        if (!data || typeof data !== 'object') {\n            return Promise.resolve({\n                code: 'INVALID_PARAM',\n                message: '参数必需是非空对象'\n            });\n        }\n        if (data.hasOwnProperty('_id')) {\n            return Promise.resolve({\n                code: 'INVALID_PARAM',\n                message: '不能更新_id的值'\n            });\n        }\n        var hasOperator = false;\n        var checkMixed = function (objs) {\n            if (typeof objs === 'object') {\n                for (var key in objs) {\n                    if (objs[key] instanceof UpdateCommand) {\n                        hasOperator = true;\n                    }\n                    else if (typeof objs[key] === 'object') {\n                        checkMixed(objs[key]);\n                    }\n                }\n            }\n        };\n        checkMixed(data);\n        if (hasOperator) {\n            return Promise.resolve({\n                code: 'DATABASE_REQUEST_FAILED',\n                message: 'update operator complicit'\n            });\n        }\n        var merge = false;\n        var param = {\n            collectionName: this._coll,\n            queryType: QueryType.DOC,\n            data: serialize(data),\n            multi: false,\n            merge: merge,\n            upsert: true\n        };\n        if (this.id) {\n            param['query'] = { _id: this.id };\n        }\n        this.request\n            .send('database.updateDocument', param)\n            .then(function (res) {\n            if (res.code) {\n                callback(0, res);\n            }\n            else {\n                callback(0, {\n                    updated: res.data.updated,\n                    upsertedId: res.data.upserted_id,\n                    requestId: res.requestId\n                });\n            }\n        })\n            .catch(function (err) {\n            callback(err);\n        });\n        return callback.promise;\n    };\n    DocumentReference.prototype.update = function (data, callback) {\n        callback = callback || createPromiseCallback();\n        if (!data || typeof data !== 'object') {\n            return Promise.resolve({\n                code: 'INVALID_PARAM',\n                message: '参数必需是非空对象'\n            });\n        }\n        if (data.hasOwnProperty('_id')) {\n            return Promise.resolve({\n                code: 'INVALID_PARAM',\n                message: '不能更新_id的值'\n            });\n        }\n        var query = { _id: this.id };\n        var merge = true;\n        var param = {\n            collectionName: this._coll,\n            data: UpdateSerializer.encode(data),\n            query: query,\n            queryType: QueryType.DOC,\n            multi: false,\n            merge: merge,\n            upsert: false\n        };\n        this.request\n            .send('database.updateDocument', param)\n            .then(function (res) {\n            if (res.code) {\n                callback(0, res);\n            }\n            else {\n                callback(0, {\n                    updated: res.data.updated,\n                    upsertedId: res.data.upserted_id,\n                    requestId: res.requestId\n                });\n            }\n        })\n            .catch(function (err) {\n            callback(err);\n        });\n        return callback.promise;\n    };\n    DocumentReference.prototype.remove = function (callback) {\n        callback = callback || createPromiseCallback();\n        var query = { _id: this.id };\n        var param = {\n            collectionName: this._coll,\n            query: query,\n            queryType: QueryType.DOC,\n            multi: false\n        };\n        this.request\n            .send('database.deleteDocument', param)\n            .then(function (res) {\n            if (res.code) {\n                callback(0, res);\n            }\n            else {\n                callback(0, {\n                    deleted: res.data.deleted,\n                    requestId: res.requestId\n                });\n            }\n        })\n            .catch(function (err) {\n            callback(err);\n        });\n        return callback.promise;\n    };\n    DocumentReference.prototype.get = function (callback) {\n        callback = callback || createPromiseCallback();\n        var query = { _id: this.id };\n        var param = {\n            collectionName: this._coll,\n            query: query,\n            queryType: QueryType.DOC,\n            multi: false,\n            projection: this.projection\n        };\n        this.request\n            .send('database.queryDocument', param)\n            .then(function (res) {\n            if (res.code) {\n                callback(0, res);\n            }\n            else {\n                var documents = Util.formatResDocumentData(res.data.list);\n                callback(0, {\n                    data: documents,\n                    requestId: res.requestId\n                });\n            }\n        })\n            .catch(function (err) {\n            callback(err);\n        });\n        return callback.promise;\n    };\n    DocumentReference.prototype.field = function (projection) {\n        for (var k in projection) {\n            if (projection[k]) {\n                projection[k] = 1;\n            }\n            else {\n                projection[k] = 0;\n            }\n        }\n        return new DocumentReference(this._db, this._coll, this.id, projection);\n    };\n    return DocumentReference;\n}());\nexport { DocumentReference };\n", "import { isQueryCommand, isComparisonCommand, QUERY_COMMANDS_LITERAL } from '../commands/query';\nimport { isLogicCommand, LOGIC_COMMANDS_LITERAL } from '../commands/logic';\nimport { SYMBOL_UNSET_FIELD_NAME } from '../helper/symbol';\nimport { getType, isObject, isArray, isRegExp } from '../utils/type';\nimport { operatorToString } from '../operator-map';\nimport { flattenQueryObject, isConversionRequired, encodeInternalDataType } from './common';\nvar QuerySerializer = (function () {\n    function QuerySerializer() {\n    }\n    QuerySerializer.encode = function (query) {\n        var encoder = new QueryEncoder();\n        return encoder.encodeQuery(query);\n    };\n    return QuerySerializer;\n}());\nexport { QuerySerializer };\nvar QueryEncoder = (function () {\n    function QueryEncoder() {\n    }\n    QueryEncoder.prototype.encodeQuery = function (query, key) {\n        var _a;\n        if (isConversionRequired(query)) {\n            if (isLogicCommand(query)) {\n                return this.encodeLogicCommand(query);\n            }\n            else if (isQueryCommand(query)) {\n                return this.encodeQueryCommand(query);\n            }\n            else {\n                return _a = {}, _a[key] = this.encodeQueryObject(query), _a;\n            }\n        }\n        else {\n            if (isObject(query)) {\n                return this.encodeQueryObject(query);\n            }\n            else {\n                return query;\n            }\n        }\n    };\n    QueryEncoder.prototype.encodeRegExp = function (query) {\n        return {\n            $regex: query.source,\n            $options: query.flags\n        };\n    };\n    QueryEncoder.prototype.encodeLogicCommand = function (query) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        var _this = this;\n        switch (query.operator) {\n            case LOGIC_COMMANDS_LITERAL.NOR:\n            case LOGIC_COMMANDS_LITERAL.AND:\n            case LOGIC_COMMANDS_LITERAL.OR: {\n                var $op = operatorToString(query.operator);\n                var subqueries = query.operands.map(function (oprand) {\n                    return _this.encodeQuery(oprand, query.fieldName);\n                });\n                return _a = {},\n                    _a[$op] = subqueries,\n                    _a;\n            }\n            case LOGIC_COMMANDS_LITERAL.NOT: {\n                var $op = operatorToString(query.operator);\n                var operatorExpression = query.operands[0];\n                if (isRegExp(operatorExpression)) {\n                    return _b = {},\n                        _b[query.fieldName] = (_c = {},\n                            _c[$op] = this.encodeRegExp(operatorExpression),\n                            _c),\n                        _b;\n                }\n                else {\n                    var subqueries = this.encodeQuery(operatorExpression)[query.fieldName];\n                    return _d = {},\n                        _d[query.fieldName] = (_e = {},\n                            _e[$op] = subqueries,\n                            _e),\n                        _d;\n                }\n            }\n            default: {\n                var $op = operatorToString(query.operator);\n                if (query.operands.length === 1) {\n                    var subquery = this.encodeQuery(query.operands[0]);\n                    return _f = {},\n                        _f[$op] = subquery,\n                        _f;\n                }\n                else {\n                    var subqueries = query.operands.map(this.encodeQuery.bind(this));\n                    return _g = {},\n                        _g[$op] = subqueries,\n                        _g;\n                }\n            }\n        }\n    };\n    QueryEncoder.prototype.encodeQueryCommand = function (query) {\n        if (isComparisonCommand(query)) {\n            return this.encodeComparisonCommand(query);\n        }\n        else {\n            return this.encodeComparisonCommand(query);\n        }\n    };\n    QueryEncoder.prototype.encodeComparisonCommand = function (query) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        if (query.fieldName === SYMBOL_UNSET_FIELD_NAME) {\n            throw new Error('Cannot encode a comparison command with unset field name');\n        }\n        var $op = operatorToString(query.operator);\n        switch (query.operator) {\n            case QUERY_COMMANDS_LITERAL.EQ:\n            case QUERY_COMMANDS_LITERAL.NEQ:\n            case QUERY_COMMANDS_LITERAL.LT:\n            case QUERY_COMMANDS_LITERAL.LTE:\n            case QUERY_COMMANDS_LITERAL.GT:\n            case QUERY_COMMANDS_LITERAL.GTE:\n            case QUERY_COMMANDS_LITERAL.ELEM_MATCH:\n            case QUERY_COMMANDS_LITERAL.EXISTS:\n            case QUERY_COMMANDS_LITERAL.SIZE:\n            case QUERY_COMMANDS_LITERAL.MOD: {\n                return _a = {},\n                    _a[query.fieldName] = (_b = {},\n                        _b[$op] = encodeInternalDataType(query.operands[0]),\n                        _b),\n                    _a;\n            }\n            case QUERY_COMMANDS_LITERAL.IN:\n            case QUERY_COMMANDS_LITERAL.NIN:\n            case QUERY_COMMANDS_LITERAL.ALL: {\n                return _c = {},\n                    _c[query.fieldName] = (_d = {},\n                        _d[$op] = encodeInternalDataType(query.operands),\n                        _d),\n                    _c;\n            }\n            case QUERY_COMMANDS_LITERAL.GEO_NEAR: {\n                var options = query.operands[0];\n                return _e = {},\n                    _e[query.fieldName] = {\n                        $nearSphere: {\n                            $geometry: options.geometry.toJSON(),\n                            $maxDistance: options.maxDistance,\n                            $minDistance: options.minDistance\n                        }\n                    },\n                    _e;\n            }\n            case QUERY_COMMANDS_LITERAL.GEO_WITHIN: {\n                var options = query.operands[0];\n                return _f = {},\n                    _f[query.fieldName] = {\n                        $geoWithin: {\n                            $geometry: options.geometry.toJSON()\n                        }\n                    },\n                    _f;\n            }\n            case QUERY_COMMANDS_LITERAL.GEO_INTERSECTS: {\n                var options = query.operands[0];\n                return _g = {},\n                    _g[query.fieldName] = {\n                        $geoIntersects: {\n                            $geometry: options.geometry.toJSON()\n                        }\n                    },\n                    _g;\n            }\n            default: {\n                return _h = {},\n                    _h[query.fieldName] = (_j = {},\n                        _j[$op] = encodeInternalDataType(query.operands[0]),\n                        _j),\n                    _h;\n            }\n        }\n    };\n    QueryEncoder.prototype.encodeQueryObject = function (query) {\n        var flattened = flattenQueryObject(query);\n        for (var key in flattened) {\n            var val = flattened[key];\n            if (isLogicCommand(val)) {\n                flattened[key] = val._setFieldName(key);\n                var condition = this.encodeLogicCommand(flattened[key]);\n                this.mergeConditionAfterEncode(flattened, condition, key);\n            }\n            else if (isComparisonCommand(val)) {\n                flattened[key] = val._setFieldName(key);\n                var condition = this.encodeComparisonCommand(flattened[key]);\n                this.mergeConditionAfterEncode(flattened, condition, key);\n            }\n            else if (isConversionRequired(val)) {\n                flattened[key] = encodeInternalDataType(val);\n            }\n        }\n        return flattened;\n    };\n    QueryEncoder.prototype.mergeConditionAfterEncode = function (query, condition, key) {\n        if (!condition[key]) {\n            delete query[key];\n        }\n        for (var conditionKey in condition) {\n            if (query[conditionKey]) {\n                if (isArray(query[conditionKey])) {\n                    query[conditionKey] = query[conditionKey].concat(condition[conditionKey]);\n                }\n                else if (isObject(query[conditionKey])) {\n                    if (isObject(condition[conditionKey])) {\n                        Object.assign(query, condition);\n                    }\n                    else {\n                        console.warn(\"unmergable condition, query is object but condition is \".concat(getType(condition), \", can only overwrite\"), condition, key);\n                        query[conditionKey] = condition[conditionKey];\n                    }\n                }\n                else {\n                    console.warn(\"to-merge query is of type \".concat(getType(query), \", can only overwrite\"), query, condition, key);\n                    query[conditionKey] = condition[conditionKey];\n                }\n            }\n            else {\n                query[conditionKey] = condition[conditionKey];\n            }\n        }\n    };\n    return QueryEncoder;\n}());\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { createPromiseCallback } from './lib/util';\nimport { QueryType } from './constant';\nimport { Db } from './index';\nimport { Validate } from './validate';\nimport { Util } from './util';\nimport { QuerySerializer } from './serializer/query';\nimport { UpdateSerializer } from './serializer/update';\nimport { ErrorCode } from './constant';\nimport { getWsInstance } from './utils/utils';\nvar Query = (function () {\n    function Query(db, coll, fieldFilters, fieldOrders, queryOptions) {\n        var _this = this;\n        this.watch = function (options) {\n            var ws = getWsInstance(_this._db);\n            return ws.watch(__assign(__assign({}, options), { envId: _this._db.config.env, collectionName: _this._coll, query: JSON.stringify(_this._fieldFilters || {}), limit: _this._queryOptions.limit, orderBy: _this._fieldOrders\n                    ? _this._fieldOrders.reduce(function (acc, cur) {\n                        acc[cur.field] = cur.direction;\n                        return acc;\n                    }, {})\n                    : undefined }));\n        };\n        this._db = db;\n        this._coll = coll;\n        this._fieldFilters = fieldFilters;\n        this._fieldOrders = fieldOrders || [];\n        this._queryOptions = queryOptions || {};\n        this._request = Db.createRequest(this._db.config);\n    }\n    Query.prototype.get = function (callback) {\n        callback = callback || createPromiseCallback();\n        var newOder = [];\n        if (this._fieldOrders) {\n            this._fieldOrders.forEach(function (order) {\n                newOder.push(order);\n            });\n        }\n        var param = {\n            collectionName: this._coll,\n            queryType: QueryType.WHERE\n        };\n        if (this._fieldFilters) {\n            param.query = this._fieldFilters;\n        }\n        if (newOder.length > 0) {\n            param.order = newOder;\n        }\n        if (this._queryOptions.offset) {\n            param.offset = this._queryOptions.offset;\n        }\n        if (this._queryOptions.limit) {\n            param.limit = this._queryOptions.limit < 1000 ? this._queryOptions.limit : 1000;\n        }\n        else {\n            param.limit = 100;\n        }\n        if (this._queryOptions.projection) {\n            param.projection = this._queryOptions.projection;\n        }\n        this._request\n            .send('database.queryDocument', param)\n            .then(function (res) {\n            if (res.code) {\n                callback(0, res);\n            }\n            else {\n                var documents = Util.formatResDocumentData(res.data.list);\n                var result = {\n                    data: documents,\n                    requestId: res.requestId\n                };\n                if (res.total !== undefined)\n                    result.total = res.total;\n                if (res.limit !== undefined)\n                    result.limit = res.limit;\n                if (res.offset !== undefined)\n                    result.offset = res.offset;\n                callback(0, result);\n            }\n        })\n            .catch(function (err) {\n            callback(err);\n        });\n        return callback.promise;\n    };\n    Query.prototype.count = function (callback) {\n        callback = callback || createPromiseCallback();\n        var param = {\n            collectionName: this._coll,\n            queryType: QueryType.WHERE\n        };\n        if (this._fieldFilters) {\n            param.query = this._fieldFilters;\n        }\n        this._request\n            .send('database.countDocument', param)\n            .then(function (res) {\n            if (res.code) {\n                callback(0, res);\n            }\n            else {\n                callback(0, {\n                    requestId: res.requestId,\n                    total: res.data.total\n                });\n            }\n        })\n            .catch(function (e) {\n            callback(e);\n        });\n        return callback.promise;\n    };\n    Query.prototype.where = function (query) {\n        if (Object.prototype.toString.call(query).slice(8, -1) !== 'Object') {\n            throw Error(ErrorCode.QueryParamTypeError);\n        }\n        var keys = Object.keys(query);\n        var checkFlag = keys.some(function (item) {\n            return query[item] !== undefined;\n        });\n        if (keys.length && !checkFlag) {\n            throw Error(ErrorCode.QueryParamValueError);\n        }\n        return new Query(this._db, this._coll, QuerySerializer.encode(query), this._fieldOrders, this._queryOptions);\n    };\n    Query.prototype.orderBy = function (fieldPath, directionStr) {\n        Validate.isFieldPath(fieldPath);\n        Validate.isFieldOrder(directionStr);\n        var newOrder = {\n            field: fieldPath,\n            direction: directionStr\n        };\n        var combinedOrders = this._fieldOrders.concat(newOrder);\n        return new Query(this._db, this._coll, this._fieldFilters, combinedOrders, this._queryOptions);\n    };\n    Query.prototype.limit = function (limit) {\n        Validate.isInteger('limit', limit);\n        var option = __assign({}, this._queryOptions);\n        option.limit = limit;\n        return new Query(this._db, this._coll, this._fieldFilters, this._fieldOrders, option);\n    };\n    Query.prototype.skip = function (offset) {\n        Validate.isInteger('offset', offset);\n        var option = __assign({}, this._queryOptions);\n        option.offset = offset;\n        return new Query(this._db, this._coll, this._fieldFilters, this._fieldOrders, option);\n    };\n    Query.prototype.update = function (data, callback) {\n        callback = callback || createPromiseCallback();\n        if (!data || typeof data !== 'object') {\n            return Promise.resolve({\n                code: 'INVALID_PARAM',\n                message: '参数必需是非空对象'\n            });\n        }\n        if (data.hasOwnProperty('_id')) {\n            return Promise.resolve({\n                code: 'INVALID_PARAM',\n                message: '不能更新_id的值'\n            });\n        }\n        var param = {\n            collectionName: this._coll,\n            query: this._fieldFilters,\n            queryType: QueryType.WHERE,\n            multi: true,\n            merge: true,\n            upsert: false,\n            data: UpdateSerializer.encode(data)\n        };\n        this._request\n            .send('database.updateDocument', param)\n            .then(function (res) {\n            if (res.code) {\n                callback(0, res);\n            }\n            else {\n                callback(0, {\n                    requestId: res.requestId,\n                    updated: res.data.updated,\n                    upsertId: res.data.upsert_id\n                });\n            }\n        })\n            .catch(function (e) {\n            callback(e);\n        });\n        return callback.promise;\n    };\n    Query.prototype.field = function (projection) {\n        for (var k in projection) {\n            if (projection[k]) {\n                if (typeof projection[k] !== 'object') {\n                    projection[k] = 1;\n                }\n            }\n            else {\n                projection[k] = 0;\n            }\n        }\n        var option = __assign({}, this._queryOptions);\n        option.projection = projection;\n        return new Query(this._db, this._coll, this._fieldFilters, this._fieldOrders, option);\n    };\n    Query.prototype.remove = function (callback) {\n        callback = callback || createPromiseCallback();\n        if (Object.keys(this._queryOptions).length > 0) {\n            console.warn('`offset`, `limit` and `projection` are not supported in remove() operation');\n        }\n        if (this._fieldOrders.length > 0) {\n            console.warn('`orderBy` is not supported in remove() operation');\n        }\n        var param = {\n            collectionName: this._coll,\n            query: QuerySerializer.encode(this._fieldFilters),\n            queryType: QueryType.WHERE,\n            multi: true\n        };\n        this._request\n            .send('database.deleteDocument', param)\n            .then(function (res) {\n            if (res.code) {\n                callback(0, res);\n            }\n            else {\n                callback(0, {\n                    requestId: res.requestId,\n                    deleted: res.data.deleted\n                });\n            }\n        })\n            .catch(function (e) {\n            callback(e);\n        });\n        return callback.promise;\n    };\n    return Query;\n}());\nexport { Query };\n", "'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n", "/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n", "/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nvar K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    var arr = new Uint8Array(1)\n    var proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  var buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  var valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  var b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(\n      value[Symbol.toPrimitive]('string'), encodingOrOffset, length\n    )\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  var length = byteLength(string, encoding) | 0\n  var buf = createBuffer(length)\n\n  var actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  var buf = createBuffer(length)\n  for (var i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    var copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  var buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    var buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        Buffer.from(buf).copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  var len = string.length\n  var mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  var strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (var i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    var len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nvar hexSliceLookupTable = (function () {\n  var alphabet = '0123456789abcdef'\n  var table = new Array(256)\n  for (var i = 0; i < 16; ++i) {\n    var i16 = i * 16\n    for (var j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n", "/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n", "/** @public */\nexport class BSONError extends Error {\n  constructor(message: string) {\n    super(message);\n    Object.setPrototypeOf(this, BSONError.prototype);\n  }\n\n  get name(): string {\n    return 'BSONError';\n  }\n}\n\n/** @public */\nexport class BSONTypeError extends TypeError {\n  constructor(message: string) {\n    super(message);\n    Object.setPrototypeOf(this, BSONTypeError.prototype);\n  }\n\n  get name(): string {\n    return 'BSONTypeError';\n  }\n}\n", "/* eslint-disable @typescript-eslint/no-explicit-any */\n/* We do not want to have to include DOM types just for this check */\ndeclare const window: unknown;\ndeclare const self: unknown;\ndeclare const global: unknown;\n\nfunction checkForMath(potentialGlobal: any) {\n  // eslint-disable-next-line eqeqeq\n  return potentialGlobal && potentialGlobal.Math == Math && potentialGlobal;\n}\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nexport function getGlobal<T = Record<string, unknown>>(): T {\n  return (\n    checkForMath(typeof globalThis === 'object' && globalThis) ||\n    checkForMath(typeof window === 'object' && window) ||\n    checkForMath(typeof self === 'object' && self) ||\n    checkForMath(typeof global === 'object' && global) ||\n    // eslint-disable-next-line @typescript-eslint/no-implied-eval\n    Function('return this')()\n  );\n}\n", "import { Buffer } from 'buffer';\nimport { getGlobal } from '../utils/global';\n\ntype RandomBytesFunction = (size: number) => Uint8Array;\n\n/**\n * Normalizes our expected stringified form of a function across versions of node\n * @param fn - The function to stringify\n */\nexport function normalizedFunctionString(fn: Function): string {\n  return fn.toString().replace('function(', 'function (');\n}\n\nfunction isReactNative() {\n  const g = getGlobal<{ navigator?: { product?: string } }>();\n  return typeof g.navigator === 'object' && g.navigator.product === 'ReactNative';\n}\n\nconst insecureRandomBytes: RandomBytesFunction = function insecureRandomBytes(size: number) {\n  const insecureWarning = isReactNative()\n    ? 'BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.'\n    : 'BSON: No cryptographic implementation for random bytes present, falling back to a less secure implementation.';\n  console.warn(insecureWarning);\n\n  const result = Buffer.alloc(size);\n  for (let i = 0; i < size; ++i) result[i] = Math.floor(Math.random() * 256);\n  return result;\n};\n\n/* We do not want to have to include DOM types just for this check */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ndeclare let window: any;\ndeclare let require: Function;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ndeclare let global: any;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ndeclare let process: any; // Used by @rollup/plugin-replace\n\nconst detectRandomBytes = (): RandomBytesFunction => {\n  if (process.browser) {\n    if (typeof window !== 'undefined') {\n      // browser crypto implementation(s)\n      const target = window.crypto || window.msCrypto; // allow for IE11\n      if (target && target.getRandomValues) {\n        return size => target.getRandomValues(Buffer.alloc(size));\n      }\n    }\n\n    if (typeof global !== 'undefined' && global.crypto && global.crypto.getRandomValues) {\n      // allow for RN packages such as https://www.npmjs.com/package/react-native-get-random-values to populate global\n      return size => global.crypto.getRandomValues(Buffer.alloc(size));\n    }\n\n    return insecureRandomBytes;\n  } else {\n    let requiredRandomBytes: RandomBytesFunction | null | undefined;\n    try {\n      requiredRandomBytes = require('crypto').randomBytes;\n    } catch (e) {\n      // keep the fallback\n    }\n\n    // NOTE: in transpiled cases the above require might return null/undefined\n\n    return requiredRandomBytes || insecureRandomBytes;\n  }\n};\n\nexport const randomBytes = detectRandomBytes();\n\nexport function isAnyArrayBuffer(value: unknown): value is ArrayBuffer {\n  return ['[object ArrayBuffer]', '[object SharedArrayBuffer]'].includes(\n    Object.prototype.toString.call(value)\n  );\n}\n\nexport function isUint8Array(value: unknown): value is Uint8Array {\n  return Object.prototype.toString.call(value) === '[object Uint8Array]';\n}\n\nexport function isBigInt64Array(value: unknown): value is BigInt64Array {\n  return Object.prototype.toString.call(value) === '[object BigInt64Array]';\n}\n\nexport function isBigUInt64Array(value: unknown): value is BigUint64Array {\n  return Object.prototype.toString.call(value) === '[object BigUint64Array]';\n}\n\nexport function isRegExp(d: unknown): d is RegExp {\n  return Object.prototype.toString.call(d) === '[object RegExp]';\n}\n\nexport function isMap(d: unknown): d is Map<unknown, unknown> {\n  return Object.prototype.toString.call(d) === '[object Map]';\n}\n\n/** Call to check if your environment has `Buffer` */\nexport function haveBuffer(): boolean {\n  return typeof global !== 'undefined' && typeof global.Buffer !== 'undefined';\n}\n\n// To ensure that 0.4 of node works correctly\nexport function isDate(d: unknown): d is Date {\n  return isObjectLike(d) && Object.prototype.toString.call(d) === '[object Date]';\n}\n\n/**\n * @internal\n * this is to solve the `'someKey' in x` problem where x is unknown.\n * https://github.com/typescript-eslint/typescript-eslint/issues/1071#issuecomment-541955753\n */\nexport function isObjectLike(candidate: unknown): candidate is Record<string, unknown> {\n  return typeof candidate === 'object' && candidate !== null;\n}\n\ndeclare let console: { warn(...message: unknown[]): void };\nexport function deprecate<T extends Function>(fn: T, message: string): T {\n  let warned = false;\n  function deprecated(this: unknown, ...args: unknown[]) {\n    if (!warned) {\n      console.warn(message);\n      warned = true;\n    }\n    return fn.apply(this, args);\n  }\n  return deprecated as unknown as T;\n}\n", "import { Buffer } from 'buffer';\nimport { BSONTypeError } from './error';\nimport { isAnyArrayBuffer } from './parser/utils';\n\n/**\n * Makes sure that, if a Uint8Array is passed in, it is wrapped in a Buffer.\n *\n * @param potentialBuffer - The potential buffer\n * @returns Buffer the input if potentialBuffer is a buffer, or a buffer that\n * wraps a passed in Uint8Array\n * @throws BSONTypeError If anything other than a Buffer or Uint8Array is passed in\n */\nexport function ensureBuffer(potentialBuffer: Buffer | ArrayBufferView | ArrayBuffer): Buffer {\n  if (ArrayBuffer.isView(potentialBuffer)) {\n    return Buffer.from(\n      potentialBuffer.buffer,\n      potentialBuffer.byteOffset,\n      potentialBuffer.byteLength\n    );\n  }\n\n  if (isAnyArrayBuffer(potentialBuffer)) {\n    return Buffer.from(potentialBuffer);\n  }\n\n  throw new BSONTypeError('Must use either Buffer or TypedArray');\n}\n", "import { Buffer } from 'buffer';\nimport { BSONTypeError } from './error';\n\n// Validation regex for v4 uuid (validates with or without dashes)\nconst VALIDATION_REGEX =\n  /^(?:[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|[0-9a-f]{12}4[0-9a-f]{3}[89ab][0-9a-f]{15})$/i;\n\nexport const uuidValidateString = (str: string): boolean =>\n  typeof str === 'string' && VALIDATION_REGEX.test(str);\n\nexport const uuidHexStringToBuffer = (hexString: string): Buffer => {\n  if (!uuidValidateString(hexString)) {\n    throw new BSONTypeError(\n      'UUID string representations must be a 32 or 36 character hex string (dashes excluded/included). Format: \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\" or \"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\".'\n    );\n  }\n\n  const sanitizedHexString = hexString.replace(/-/g, '');\n  return Buffer.from(sanitizedHexString, 'hex');\n};\n\nexport const bufferToUuidHexString = (buffer: Buffer, includeDashes = true): string =>\n  includeDashes\n    ? buffer.toString('hex', 0, 4) +\n      '-' +\n      buffer.toString('hex', 4, 6) +\n      '-' +\n      buffer.toString('hex', 6, 8) +\n      '-' +\n      buffer.toString('hex', 8, 10) +\n      '-' +\n      buffer.toString('hex', 10, 16)\n    : buffer.toString('hex');\n", "/** @internal */\nexport const BSON_INT32_MAX = 0x7fffffff;\n/** @internal */\nexport const BSON_INT32_MIN = -0x80000000;\n/** @internal */\nexport const BSON_INT64_MAX = Math.pow(2, 63) - 1;\n/** @internal */\nexport const BSON_INT64_MIN = -Math.pow(2, 63);\n\n/**\n * Any integer up to 2^53 can be precisely represented by a double.\n * @internal\n */\nexport const JS_INT_MAX = Math.pow(2, 53);\n\n/**\n * Any integer down to -2^53 can be precisely represented by a double.\n * @internal\n */\nexport const JS_INT_MIN = -Math.pow(2, 53);\n\n/** Number BSON Type @internal */\nexport const BSON_DATA_NUMBER = 1;\n\n/** String BSON Type @internal */\nexport const BSON_DATA_STRING = 2;\n\n/** Object BSON Type @internal */\nexport const BSON_DATA_OBJECT = 3;\n\n/** Array BSON Type @internal */\nexport const BSON_DATA_ARRAY = 4;\n\n/** Binary BSON Type @internal */\nexport const BSON_DATA_BINARY = 5;\n\n/** Binary BSON Type @internal */\nexport const BSON_DATA_UNDEFINED = 6;\n\n/** ObjectId BSON Type @internal */\nexport const BSON_DATA_OID = 7;\n\n/** Boolean BSON Type @internal */\nexport const BSON_DATA_BOOLEAN = 8;\n\n/** Date BSON Type @internal */\nexport const BSON_DATA_DATE = 9;\n\n/** null BSON Type @internal */\nexport const BSON_DATA_NULL = 10;\n\n/** RegExp BSON Type @internal */\nexport const BSON_DATA_REGEXP = 11;\n\n/** Code BSON Type @internal */\nexport const BSON_DATA_DBPOINTER = 12;\n\n/** Code BSON Type @internal */\nexport const BSON_DATA_CODE = 13;\n\n/** Symbol BSON Type @internal */\nexport const BSON_DATA_SYMBOL = 14;\n\n/** Code with Scope BSON Type @internal */\nexport const BSON_DATA_CODE_W_SCOPE = 15;\n\n/** 32 bit Integer BSON Type @internal */\nexport const BSON_DATA_INT = 16;\n\n/** Timestamp BSON Type @internal */\nexport const BSON_DATA_TIMESTAMP = 17;\n\n/** Long BSON Type @internal */\nexport const BSON_DATA_LONG = 18;\n\n/** Decimal128 BSON Type @internal */\nexport const BSON_DATA_DECIMAL128 = 19;\n\n/** MinKey BSON Type @internal */\nexport const BSON_DATA_MIN_KEY = 0xff;\n\n/** MaxKey BSON Type @internal */\nexport const BSON_DATA_MAX_KEY = 0x7f;\n\n/** Binary Default Type @internal */\nexport const BSON_BINARY_SUBTYPE_DEFAULT = 0;\n\n/** Binary Function Type @internal */\nexport const BSON_BINARY_SUBTYPE_FUNCTION = 1;\n\n/** Binary Byte Array Type @internal */\nexport const BSON_BINARY_SUBTYPE_BYTE_ARRAY = 2;\n\n/** Binary Deprecated UUID Type @deprecated Please use BSON_BINARY_SUBTYPE_UUID_NEW @internal */\nexport const BSON_BINARY_SUBTYPE_UUID = 3;\n\n/** Binary UUID Type @internal */\nexport const BSON_BINARY_SUBTYPE_UUID_NEW = 4;\n\n/** Binary MD5 Type @internal */\nexport const BSON_BINARY_SUBTYPE_MD5 = 5;\n\n/** Encrypted BSON type @internal */\nexport const BSON_BINARY_SUBTYPE_ENCRYPTED = 6;\n\n/** Column BSON type @internal */\nexport const BSON_BINARY_SUBTYPE_COLUMN = 7;\n\n/** Binary User Defined Type @internal */\nexport const BSON_BINARY_SUBTYPE_USER_DEFINED = 128;\n", "import { Buffer } from 'buffer';\nimport { ensureBuffer } from './ensure_buffer';\nimport { bufferToUuidHexString, uuidHexStringToBuffer, uuidValidateString } from './uuid_utils';\nimport { isUint8Array, randomBytes } from './parser/utils';\nimport type { EJSONOptions } from './extended_json';\nimport { BSONError, BSONTypeError } from './error';\nimport { BSON_BINARY_SUBTYPE_UUID_NEW } from './constants';\n\n/** @public */\nexport type BinarySequence = Uint8Array | Buffer | number[];\n\n/** @public */\nexport interface BinaryExtendedLegacy {\n  $type: string;\n  $binary: string;\n}\n\n/** @public */\nexport interface BinaryExtended {\n  $binary: {\n    subType: string;\n    base64: string;\n  };\n}\n\n/**\n * A class representation of the BSON Binary type.\n * @public\n * @category BSONType\n */\nexport class Binary {\n  _bsontype!: 'Binary';\n\n  /**\n   * Binary default subtype\n   * @internal\n   */\n  private static readonly BSON_BINARY_SUBTYPE_DEFAULT = 0;\n\n  /** Initial buffer default size */\n  static readonly BUFFER_SIZE = 256;\n  /** Default BSON type */\n  static readonly SUBTYPE_DEFAULT = 0;\n  /** Function BSON type */\n  static readonly SUBTYPE_FUNCTION = 1;\n  /** Byte Array BSON type */\n  static readonly SUBTYPE_BYTE_ARRAY = 2;\n  /** Deprecated UUID BSON type @deprecated Please use SUBTYPE_UUID */\n  static readonly SUBTYPE_UUID_OLD = 3;\n  /** UUID BSON type */\n  static readonly SUBTYPE_UUID = 4;\n  /** MD5 BSON type */\n  static readonly SUBTYPE_MD5 = 5;\n  /** Encrypted BSON type */\n  static readonly SUBTYPE_ENCRYPTED = 6;\n  /** Column BSON type */\n  static readonly SUBTYPE_COLUMN = 7;\n  /** User BSON type */\n  static readonly SUBTYPE_USER_DEFINED = 128;\n\n  buffer!: Buffer;\n  sub_type!: number;\n  position!: number;\n\n  /**\n   * Create a new Binary instance.\n   *\n   * This constructor can accept a string as its first argument. In this case,\n   * this string will be encoded using ISO-8859-1, **not** using UTF-8.\n   * This is almost certainly not what you want. Use `new Binary(Buffer.from(string))`\n   * instead to convert the string to a Buffer using UTF-8 first.\n   *\n   * @param buffer - a buffer object containing the binary data.\n   * @param subType - the option binary type.\n   */\n  constructor(buffer?: string | BinarySequence, subType?: number) {\n    if (!(this instanceof Binary)) return new Binary(buffer, subType);\n\n    if (\n      !(buffer == null) &&\n      !(typeof buffer === 'string') &&\n      !ArrayBuffer.isView(buffer) &&\n      !(buffer instanceof ArrayBuffer) &&\n      !Array.isArray(buffer)\n    ) {\n      throw new BSONTypeError(\n        'Binary can only be constructed from string, Buffer, TypedArray, or Array<number>'\n      );\n    }\n\n    this.sub_type = subType ?? Binary.BSON_BINARY_SUBTYPE_DEFAULT;\n\n    if (buffer == null) {\n      // create an empty binary buffer\n      this.buffer = Buffer.alloc(Binary.BUFFER_SIZE);\n      this.position = 0;\n    } else {\n      if (typeof buffer === 'string') {\n        // string\n        this.buffer = Buffer.from(buffer, 'binary');\n      } else if (Array.isArray(buffer)) {\n        // number[]\n        this.buffer = Buffer.from(buffer);\n      } else {\n        // Buffer | TypedArray | ArrayBuffer\n        this.buffer = ensureBuffer(buffer);\n      }\n\n      this.position = this.buffer.byteLength;\n    }\n  }\n\n  /**\n   * Updates this binary with byte_value.\n   *\n   * @param byteValue - a single byte we wish to write.\n   */\n  put(byteValue: string | number | Uint8Array | Buffer | number[]): void {\n    // If it's a string and a has more than one character throw an error\n    if (typeof byteValue === 'string' && byteValue.length !== 1) {\n      throw new BSONTypeError('only accepts single character String');\n    } else if (typeof byteValue !== 'number' && byteValue.length !== 1)\n      throw new BSONTypeError('only accepts single character Uint8Array or Array');\n\n    // Decode the byte value once\n    let decodedByte: number;\n    if (typeof byteValue === 'string') {\n      decodedByte = byteValue.charCodeAt(0);\n    } else if (typeof byteValue === 'number') {\n      decodedByte = byteValue;\n    } else {\n      decodedByte = byteValue[0];\n    }\n\n    if (decodedByte < 0 || decodedByte > 255) {\n      throw new BSONTypeError('only accepts number in a valid unsigned byte range 0-255');\n    }\n\n    if (this.buffer.length > this.position) {\n      this.buffer[this.position++] = decodedByte;\n    } else {\n      const buffer = Buffer.alloc(Binary.BUFFER_SIZE + this.buffer.length);\n      // Combine the two buffers together\n      this.buffer.copy(buffer, 0, 0, this.buffer.length);\n      this.buffer = buffer;\n      this.buffer[this.position++] = decodedByte;\n    }\n  }\n\n  /**\n   * Writes a buffer or string to the binary.\n   *\n   * @param sequence - a string or buffer to be written to the Binary BSON object.\n   * @param offset - specify the binary of where to write the content.\n   */\n  write(sequence: string | BinarySequence, offset: number): void {\n    offset = typeof offset === 'number' ? offset : this.position;\n\n    // If the buffer is to small let's extend the buffer\n    if (this.buffer.length < offset + sequence.length) {\n      const buffer = Buffer.alloc(this.buffer.length + sequence.length);\n      this.buffer.copy(buffer, 0, 0, this.buffer.length);\n\n      // Assign the new buffer\n      this.buffer = buffer;\n    }\n\n    if (ArrayBuffer.isView(sequence)) {\n      this.buffer.set(ensureBuffer(sequence), offset);\n      this.position =\n        offset + sequence.byteLength > this.position ? offset + sequence.length : this.position;\n    } else if (typeof sequence === 'string') {\n      this.buffer.write(sequence, offset, sequence.length, 'binary');\n      this.position =\n        offset + sequence.length > this.position ? offset + sequence.length : this.position;\n    }\n  }\n\n  /**\n   * Reads **length** bytes starting at **position**.\n   *\n   * @param position - read from the given position in the Binary.\n   * @param length - the number of bytes to read.\n   */\n  read(position: number, length: number): BinarySequence {\n    length = length && length > 0 ? length : this.position;\n\n    // Let's return the data based on the type we have\n    return this.buffer.slice(position, position + length);\n  }\n\n  /**\n   * Returns the value of this binary as a string.\n   * @param asRaw - Will skip converting to a string\n   * @remarks\n   * This is handy when calling this function conditionally for some key value pairs and not others\n   */\n  value(asRaw?: boolean): string | BinarySequence {\n    asRaw = !!asRaw;\n\n    // Optimize to serialize for the situation where the data == size of buffer\n    if (asRaw && this.buffer.length === this.position) {\n      return this.buffer;\n    }\n\n    // If it's a node.js buffer object\n    if (asRaw) {\n      return this.buffer.slice(0, this.position);\n    }\n    return this.buffer.toString('binary', 0, this.position);\n  }\n\n  /** the length of the binary sequence */\n  length(): number {\n    return this.position;\n  }\n\n  toJSON(): string {\n    return this.buffer.toString('base64');\n  }\n\n  toString(format?: string): string {\n    return this.buffer.toString(format);\n  }\n\n  /** @internal */\n  toExtendedJSON(options?: EJSONOptions): BinaryExtendedLegacy | BinaryExtended {\n    options = options || {};\n    const base64String = this.buffer.toString('base64');\n\n    const subType = Number(this.sub_type).toString(16);\n    if (options.legacy) {\n      return {\n        $binary: base64String,\n        $type: subType.length === 1 ? '0' + subType : subType\n      };\n    }\n    return {\n      $binary: {\n        base64: base64String,\n        subType: subType.length === 1 ? '0' + subType : subType\n      }\n    };\n  }\n\n  toUUID(): UUID {\n    if (this.sub_type === Binary.SUBTYPE_UUID) {\n      return new UUID(this.buffer.slice(0, this.position));\n    }\n\n    throw new BSONError(\n      `Binary sub_type \"${this.sub_type}\" is not supported for converting to UUID. Only \"${Binary.SUBTYPE_UUID}\" is currently supported.`\n    );\n  }\n\n  /** @internal */\n  static fromExtendedJSON(\n    doc: BinaryExtendedLegacy | BinaryExtended | UUIDExtended,\n    options?: EJSONOptions\n  ): Binary {\n    options = options || {};\n    let data: Buffer | undefined;\n    let type;\n    if ('$binary' in doc) {\n      if (options.legacy && typeof doc.$binary === 'string' && '$type' in doc) {\n        type = doc.$type ? parseInt(doc.$type, 16) : 0;\n        data = Buffer.from(doc.$binary, 'base64');\n      } else {\n        if (typeof doc.$binary !== 'string') {\n          type = doc.$binary.subType ? parseInt(doc.$binary.subType, 16) : 0;\n          data = Buffer.from(doc.$binary.base64, 'base64');\n        }\n      }\n    } else if ('$uuid' in doc) {\n      type = 4;\n      data = uuidHexStringToBuffer(doc.$uuid);\n    }\n    if (!data) {\n      throw new BSONTypeError(`Unexpected Binary Extended JSON format ${JSON.stringify(doc)}`);\n    }\n    return type === BSON_BINARY_SUBTYPE_UUID_NEW ? new UUID(data) : new Binary(data, type);\n  }\n\n  /** @internal */\n  [Symbol.for('nodejs.util.inspect.custom')](): string {\n    return this.inspect();\n  }\n\n  inspect(): string {\n    const asBuffer = this.value(true);\n    return `new Binary(Buffer.from(\"${asBuffer.toString('hex')}\", \"hex\"), ${this.sub_type})`;\n  }\n}\n\nObject.defineProperty(Binary.prototype, '_bsontype', { value: 'Binary' });\n\n/** @public */\nexport type UUIDExtended = {\n  $uuid: string;\n};\nconst UUID_BYTE_LENGTH = 16;\n\n/**\n * A class representation of the BSON UUID type.\n * @public\n */\nexport class UUID extends Binary {\n  static cacheHexString: boolean;\n\n  /** UUID hexString cache @internal */\n  private __id?: string;\n\n  /**\n   * Create an UUID type\n   *\n   * @param input - Can be a 32 or 36 character hex string (dashes excluded/included) or a 16 byte binary Buffer.\n   */\n  constructor(input?: string | Buffer | UUID) {\n    let bytes;\n    let hexStr;\n    if (input == null) {\n      bytes = UUID.generate();\n    } else if (input instanceof UUID) {\n      bytes = Buffer.from(input.buffer);\n      hexStr = input.__id;\n    } else if (ArrayBuffer.isView(input) && input.byteLength === UUID_BYTE_LENGTH) {\n      bytes = ensureBuffer(input);\n    } else if (typeof input === 'string') {\n      bytes = uuidHexStringToBuffer(input);\n    } else {\n      throw new BSONTypeError(\n        'Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).'\n      );\n    }\n    super(bytes, BSON_BINARY_SUBTYPE_UUID_NEW);\n    this.__id = hexStr;\n  }\n\n  /**\n   * The UUID bytes\n   * @readonly\n   */\n  get id(): Buffer {\n    return this.buffer;\n  }\n\n  set id(value: Buffer) {\n    this.buffer = value;\n\n    if (UUID.cacheHexString) {\n      this.__id = bufferToUuidHexString(value);\n    }\n  }\n\n  /**\n   * Returns the UUID id as a 32 or 36 character hex string representation, excluding/including dashes (defaults to 36 character dash separated)\n   * @param includeDashes - should the string exclude dash-separators.\n   * */\n  toHexString(includeDashes = true): string {\n    if (UUID.cacheHexString && this.__id) {\n      return this.__id;\n    }\n\n    const uuidHexString = bufferToUuidHexString(this.id, includeDashes);\n\n    if (UUID.cacheHexString) {\n      this.__id = uuidHexString;\n    }\n\n    return uuidHexString;\n  }\n\n  /**\n   * Converts the id into a 36 character (dashes included) hex string, unless a encoding is specified.\n   */\n  toString(encoding?: string): string {\n    return encoding ? this.id.toString(encoding) : this.toHexString();\n  }\n\n  /**\n   * Converts the id into its JSON string representation.\n   * A 36 character (dashes included) hex string in the format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n   */\n  toJSON(): string {\n    return this.toHexString();\n  }\n\n  /**\n   * Compares the equality of this UUID with `otherID`.\n   *\n   * @param otherId - UUID instance to compare against.\n   */\n  equals(otherId: string | Buffer | UUID): boolean {\n    if (!otherId) {\n      return false;\n    }\n\n    if (otherId instanceof UUID) {\n      return otherId.id.equals(this.id);\n    }\n\n    try {\n      return new UUID(otherId).id.equals(this.id);\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Creates a Binary instance from the current UUID.\n   */\n  toBinary(): Binary {\n    return new Binary(this.id, Binary.SUBTYPE_UUID);\n  }\n\n  /**\n   * Generates a populated buffer containing a v4 uuid\n   */\n  static generate(): Buffer {\n    const bytes = randomBytes(UUID_BYTE_LENGTH);\n\n    // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n    // Kindly borrowed from https://github.com/uuidjs/uuid/blob/master/src/v4.js\n    bytes[6] = (bytes[6] & 0x0f) | 0x40;\n    bytes[8] = (bytes[8] & 0x3f) | 0x80;\n\n    return Buffer.from(bytes);\n  }\n\n  /**\n   * Checks if a value is a valid bson UUID\n   * @param input - UUID, string or Buffer to validate.\n   */\n  static isValid(input: string | Buffer | UUID): boolean {\n    if (!input) {\n      return false;\n    }\n\n    if (input instanceof UUID) {\n      return true;\n    }\n\n    if (typeof input === 'string') {\n      return uuidValidateString(input);\n    }\n\n    if (isUint8Array(input)) {\n      // check for length & uuid version (https://tools.ietf.org/html/rfc4122#section-4.1.3)\n      if (input.length !== UUID_BYTE_LENGTH) {\n        return false;\n      }\n\n      return (input[6] & 0xf0) === 0x40 && (input[8] & 0x80) === 0x80;\n    }\n\n    return false;\n  }\n\n  /**\n   * Creates an UUID from a hex string representation of an UUID.\n   * @param hexString - 32 or 36 character hex string (dashes excluded/included).\n   */\n  static createFromHexString(hexString: string): UUID {\n    const buffer = uuidHexStringToBuffer(hexString);\n    return new UUID(buffer);\n  }\n\n  /**\n   * Converts to a string representation of this Id.\n   *\n   * @returns return the 36 character hex string representation.\n   * @internal\n   */\n  [Symbol.for('nodejs.util.inspect.custom')](): string {\n    return this.inspect();\n  }\n\n  inspect(): string {\n    return `new UUID(\"${this.toHexString()}\")`;\n  }\n}\n", "import type { Document } from './bson';\n\n/** @public */\nexport interface CodeExtended {\n  $code: string | Function;\n  $scope?: Document;\n}\n\n/**\n * A class representation of the BSON Code type.\n * @public\n * @category BSONType\n */\nexport class Code {\n  _bsontype!: 'Code';\n\n  code!: string | Function;\n  scope?: Document;\n  /**\n   * @param code - a string or function.\n   * @param scope - an optional scope for the function.\n   */\n  constructor(code: string | Function, scope?: Document) {\n    if (!(this instanceof Code)) return new Code(code, scope);\n\n    this.code = code;\n    this.scope = scope;\n  }\n\n  toJSON(): { code: string | Function; scope?: Document } {\n    return { code: this.code, scope: this.scope };\n  }\n\n  /** @internal */\n  toExtendedJSON(): CodeExtended {\n    if (this.scope) {\n      return { $code: this.code, $scope: this.scope };\n    }\n\n    return { $code: this.code };\n  }\n\n  /** @internal */\n  static fromExtendedJSON(doc: CodeExtended): Code {\n    return new Code(doc.$code, doc.$scope);\n  }\n\n  /** @internal */\n  [Symbol.for('nodejs.util.inspect.custom')](): string {\n    return this.inspect();\n  }\n\n  inspect(): string {\n    const codeJson = this.toJSON();\n    return `new Code(\"${String(codeJson.code)}\"${\n      codeJson.scope ? `, ${JSON.stringify(codeJson.scope)}` : ''\n    })`;\n  }\n}\n\nObject.defineProperty(Code.prototype, '_bsontype', { value: 'Code' });\n", "import type { Document } from './bson';\nimport type { EJSONOptions } from './extended_json';\nimport type { ObjectId } from './objectid';\nimport { isObjectLike } from './parser/utils';\n\n/** @public */\nexport interface DBRefLike {\n  $ref: string;\n  $id: ObjectId;\n  $db?: string;\n}\n\n/** @internal */\nexport function isDBRefLike(value: unknown): value is DBRefLike {\n  return (\n    isObjectLike(value) &&\n    value.$id != null &&\n    typeof value.$ref === 'string' &&\n    (value.$db == null || typeof value.$db === 'string')\n  );\n}\n\n/**\n * A class representation of the BSON DBRef type.\n * @public\n * @category BSONType\n */\nexport class DBRef {\n  _bsontype!: 'DBRef';\n\n  collection!: string;\n  oid!: ObjectId;\n  db?: string;\n  fields!: Document;\n\n  /**\n   * @param collection - the collection name.\n   * @param oid - the reference ObjectId.\n   * @param db - optional db name, if omitted the reference is local to the current db.\n   */\n  constructor(collection: string, oid: ObjectId, db?: string, fields?: Document) {\n    if (!(this instanceof DBRef)) return new DBRef(collection, oid, db, fields);\n\n    // check if namespace has been provided\n    const parts = collection.split('.');\n    if (parts.length === 2) {\n      db = parts.shift();\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      collection = parts.shift()!;\n    }\n\n    this.collection = collection;\n    this.oid = oid;\n    this.db = db;\n    this.fields = fields || {};\n  }\n\n  // Property provided for compatibility with the 1.x parser\n  // the 1.x parser used a \"namespace\" property, while 4.x uses \"collection\"\n\n  /** @internal */\n  get namespace(): string {\n    return this.collection;\n  }\n\n  set namespace(value: string) {\n    this.collection = value;\n  }\n\n  toJSON(): DBRefLike & Document {\n    const o = Object.assign(\n      {\n        $ref: this.collection,\n        $id: this.oid\n      },\n      this.fields\n    );\n\n    if (this.db != null) o.$db = this.db;\n    return o;\n  }\n\n  /** @internal */\n  toExtendedJSON(options?: EJSONOptions): DBRefLike {\n    options = options || {};\n    let o: DBRefLike = {\n      $ref: this.collection,\n      $id: this.oid\n    };\n\n    if (options.legacy) {\n      return o;\n    }\n\n    if (this.db) o.$db = this.db;\n    o = Object.assign(o, this.fields);\n    return o;\n  }\n\n  /** @internal */\n  static fromExtendedJSON(doc: DBRefLike): DBRef {\n    const copy = Object.assign({}, doc) as Partial<DBRefLike>;\n    delete copy.$ref;\n    delete copy.$id;\n    delete copy.$db;\n    return new DBRef(doc.$ref, doc.$id, doc.$db, copy);\n  }\n\n  /** @internal */\n  [Symbol.for('nodejs.util.inspect.custom')](): string {\n    return this.inspect();\n  }\n\n  inspect(): string {\n    // NOTE: if OID is an ObjectId class it will just print the oid string.\n    const oid =\n      this.oid === undefined || this.oid.toString === undefined ? this.oid : this.oid.toString();\n    return `new DBRef(\"${this.namespace}\", new ObjectId(\"${String(oid)}\")${\n      this.db ? `, \"${this.db}\"` : ''\n    })`;\n  }\n}\n\nObject.defineProperty(DBRef.prototype, '_bsontype', { value: 'DBRef' });\n", "import type { EJSONOptions } from './extended_json';\nimport { isObjectLike } from './parser/utils';\nimport type { Timestamp } from './timestamp';\n\ninterface LongWASMHelpers {\n  /** Gets the high bits of the last operation performed */\n  get_high(this: void): number;\n  div_u(\n    this: void,\n    lowBits: number,\n    highBits: number,\n    lowBitsDivisor: number,\n    highBitsDivisor: number\n  ): number;\n  div_s(\n    this: void,\n    lowBits: number,\n    highBits: number,\n    lowBitsDivisor: number,\n    highBitsDivisor: number\n  ): number;\n  rem_u(\n    this: void,\n    lowBits: number,\n    highBits: number,\n    lowBitsDivisor: number,\n    highBitsDivisor: number\n  ): number;\n  rem_s(\n    this: void,\n    lowBits: number,\n    highBits: number,\n    lowBitsDivisor: number,\n    highBitsDivisor: number\n  ): number;\n  mul(\n    this: void,\n    lowBits: number,\n    highBits: number,\n    lowBitsMultiplier: number,\n    highBitsMultiplier: number\n  ): number;\n}\n\n/**\n * wasm optimizations, to do native i64 multiplication and divide\n */\nlet wasm: LongWASMHelpers | undefined = undefined;\n\n/* We do not want to have to include DOM types just for this check */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ndeclare const WebAssembly: any;\n\ntry {\n  wasm = new WebAssembly.Instance(\n    new WebAssembly.Module(\n      // prettier-ignore\n      new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0, 1, 13, 2, 96, 0, 1, 127, 96, 4, 127, 127, 127, 127, 1, 127, 3, 7, 6, 0, 1, 1, 1, 1, 1, 6, 6, 1, 127, 1, 65, 0, 11, 7, 50, 6, 3, 109, 117, 108, 0, 1, 5, 100, 105, 118, 95, 115, 0, 2, 5, 100, 105, 118, 95, 117, 0, 3, 5, 114, 101, 109, 95, 115, 0, 4, 5, 114, 101, 109, 95, 117, 0, 5, 8, 103, 101, 116, 95, 104, 105, 103, 104, 0, 0, 10, 191, 1, 6, 4, 0, 35, 0, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 126, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 127, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 128, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 129, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 130, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11])\n    ),\n    {}\n  ).exports as unknown as LongWASMHelpers;\n} catch {\n  // no wasm support\n}\n\nconst TWO_PWR_16_DBL = 1 << 16;\nconst TWO_PWR_24_DBL = 1 << 24;\nconst TWO_PWR_32_DBL = TWO_PWR_16_DBL * TWO_PWR_16_DBL;\nconst TWO_PWR_64_DBL = TWO_PWR_32_DBL * TWO_PWR_32_DBL;\nconst TWO_PWR_63_DBL = TWO_PWR_64_DBL / 2;\n\n/** A cache of the Long representations of small integer values. */\nconst INT_CACHE: { [key: number]: Long } = {};\n\n/** A cache of the Long representations of small unsigned integer values. */\nconst UINT_CACHE: { [key: number]: Long } = {};\n\n/** @public */\nexport interface LongExtended {\n  $numberLong: string;\n}\n\n/**\n * A class representing a 64-bit integer\n * @public\n * @category BSONType\n * @remarks\n * The internal representation of a long is the two given signed, 32-bit values.\n * We use 32-bit pieces because these are the size of integers on which\n * Javascript performs bit-operations.  For operations like addition and\n * multiplication, we split each number into 16 bit pieces, which can easily be\n * multiplied within Javascript's floating-point representation without overflow\n * or change in sign.\n * In the algorithms below, we frequently reduce the negative case to the\n * positive case by negating the input(s) and then post-processing the result.\n * Note that we must ALWAYS check specially whether those values are MIN_VALUE\n * (-2^63) because -MIN_VALUE == MIN_VALUE (since 2^63 cannot be represented as\n * a positive number, it overflows back into a negative).  Not handling this\n * case would often result in infinite recursion.\n * Common constant values ZERO, ONE, NEG_ONE, etc. are found as static properties on this class.\n */\nexport class Long {\n  _bsontype!: 'Long';\n\n  /** An indicator used to reliably determine if an object is a Long or not. */\n  __isLong__!: true;\n\n  /**\n   * The high 32 bits as a signed value.\n   */\n  high!: number;\n\n  /**\n   * The low 32 bits as a signed value.\n   */\n  low!: number;\n\n  /**\n   * Whether unsigned or not.\n   */\n  unsigned!: boolean;\n\n  /**\n   * Constructs a 64 bit two's-complement integer, given its low and high 32 bit values as *signed* integers.\n   *  See the from* functions below for more convenient ways of constructing Longs.\n   *\n   * Acceptable signatures are:\n   * - Long(low, high, unsigned?)\n   * - Long(bigint, unsigned?)\n   * - Long(string, unsigned?)\n   *\n   * @param low - The low (signed) 32 bits of the long\n   * @param high - The high (signed) 32 bits of the long\n   * @param unsigned - Whether unsigned or not, defaults to signed\n   */\n  constructor(low: number | bigint | string = 0, high?: number | boolean, unsigned?: boolean) {\n    if (!(this instanceof Long)) return new Long(low, high, unsigned);\n\n    if (typeof low === 'bigint') {\n      Object.assign(this, Long.fromBigInt(low, !!high));\n    } else if (typeof low === 'string') {\n      Object.assign(this, Long.fromString(low, !!high));\n    } else {\n      this.low = low | 0;\n      this.high = (high as number) | 0;\n      this.unsigned = !!unsigned;\n    }\n\n    Object.defineProperty(this, '__isLong__', {\n      value: true,\n      configurable: false,\n      writable: false,\n      enumerable: false\n    });\n  }\n\n  static TWO_PWR_24 = Long.fromInt(TWO_PWR_24_DBL);\n\n  /** Maximum unsigned value. */\n  static MAX_UNSIGNED_VALUE = Long.fromBits(0xffffffff | 0, 0xffffffff | 0, true);\n  /** Signed zero */\n  static ZERO = Long.fromInt(0);\n  /** Unsigned zero. */\n  static UZERO = Long.fromInt(0, true);\n  /** Signed one. */\n  static ONE = Long.fromInt(1);\n  /** Unsigned one. */\n  static UONE = Long.fromInt(1, true);\n  /** Signed negative one. */\n  static NEG_ONE = Long.fromInt(-1);\n  /** Maximum signed value. */\n  static MAX_VALUE = Long.fromBits(0xffffffff | 0, 0x7fffffff | 0, false);\n  /** Minimum signed value. */\n  static MIN_VALUE = Long.fromBits(0, 0x80000000 | 0, false);\n\n  /**\n   * Returns a Long representing the 64 bit integer that comes by concatenating the given low and high bits.\n   * Each is assumed to use 32 bits.\n   * @param lowBits - The low 32 bits\n   * @param highBits - The high 32 bits\n   * @param unsigned - Whether unsigned or not, defaults to signed\n   * @returns The corresponding Long value\n   */\n  static fromBits(lowBits: number, highBits: number, unsigned?: boolean): Long {\n    return new Long(lowBits, highBits, unsigned);\n  }\n\n  /**\n   * Returns a Long representing the given 32 bit integer value.\n   * @param value - The 32 bit integer in question\n   * @param unsigned - Whether unsigned or not, defaults to signed\n   * @returns The corresponding Long value\n   */\n  static fromInt(value: number, unsigned?: boolean): Long {\n    let obj, cachedObj, cache;\n    if (unsigned) {\n      value >>>= 0;\n      if ((cache = 0 <= value && value < 256)) {\n        cachedObj = UINT_CACHE[value];\n        if (cachedObj) return cachedObj;\n      }\n      obj = Long.fromBits(value, (value | 0) < 0 ? -1 : 0, true);\n      if (cache) UINT_CACHE[value] = obj;\n      return obj;\n    } else {\n      value |= 0;\n      if ((cache = -128 <= value && value < 128)) {\n        cachedObj = INT_CACHE[value];\n        if (cachedObj) return cachedObj;\n      }\n      obj = Long.fromBits(value, value < 0 ? -1 : 0, false);\n      if (cache) INT_CACHE[value] = obj;\n      return obj;\n    }\n  }\n\n  /**\n   * Returns a Long representing the given value, provided that it is a finite number. Otherwise, zero is returned.\n   * @param value - The number in question\n   * @param unsigned - Whether unsigned or not, defaults to signed\n   * @returns The corresponding Long value\n   */\n  static fromNumber(value: number, unsigned?: boolean): Long {\n    if (isNaN(value)) return unsigned ? Long.UZERO : Long.ZERO;\n    if (unsigned) {\n      if (value < 0) return Long.UZERO;\n      if (value >= TWO_PWR_64_DBL) return Long.MAX_UNSIGNED_VALUE;\n    } else {\n      if (value <= -TWO_PWR_63_DBL) return Long.MIN_VALUE;\n      if (value + 1 >= TWO_PWR_63_DBL) return Long.MAX_VALUE;\n    }\n    if (value < 0) return Long.fromNumber(-value, unsigned).neg();\n    return Long.fromBits(value % TWO_PWR_32_DBL | 0, (value / TWO_PWR_32_DBL) | 0, unsigned);\n  }\n\n  /**\n   * Returns a Long representing the given value, provided that it is a finite number. Otherwise, zero is returned.\n   * @param value - The number in question\n   * @param unsigned - Whether unsigned or not, defaults to signed\n   * @returns The corresponding Long value\n   */\n  static fromBigInt(value: bigint, unsigned?: boolean): Long {\n    return Long.fromString(value.toString(), unsigned);\n  }\n\n  /**\n   * Returns a Long representation of the given string, written using the specified radix.\n   * @param str - The textual representation of the Long\n   * @param unsigned - Whether unsigned or not, defaults to signed\n   * @param radix - The radix in which the text is written (2-36), defaults to 10\n   * @returns The corresponding Long value\n   */\n  static fromString(str: string, unsigned?: boolean, radix?: number): Long {\n    if (str.length === 0) throw Error('empty string');\n    if (str === 'NaN' || str === 'Infinity' || str === '+Infinity' || str === '-Infinity')\n      return Long.ZERO;\n    if (typeof unsigned === 'number') {\n      // For goog.math.long compatibility\n      (radix = unsigned), (unsigned = false);\n    } else {\n      unsigned = !!unsigned;\n    }\n    radix = radix || 10;\n    if (radix < 2 || 36 < radix) throw RangeError('radix');\n\n    let p;\n    if ((p = str.indexOf('-')) > 0) throw Error('interior hyphen');\n    else if (p === 0) {\n      return Long.fromString(str.substring(1), unsigned, radix).neg();\n    }\n\n    // Do several (8) digits each time through the loop, so as to\n    // minimize the calls to the very expensive emulated div.\n    const radixToPower = Long.fromNumber(Math.pow(radix, 8));\n\n    let result = Long.ZERO;\n    for (let i = 0; i < str.length; i += 8) {\n      const size = Math.min(8, str.length - i),\n        value = parseInt(str.substring(i, i + size), radix);\n      if (size < 8) {\n        const power = Long.fromNumber(Math.pow(radix, size));\n        result = result.mul(power).add(Long.fromNumber(value));\n      } else {\n        result = result.mul(radixToPower);\n        result = result.add(Long.fromNumber(value));\n      }\n    }\n    result.unsigned = unsigned;\n    return result;\n  }\n\n  /**\n   * Creates a Long from its byte representation.\n   * @param bytes - Byte representation\n   * @param unsigned - Whether unsigned or not, defaults to signed\n   * @param le - Whether little or big endian, defaults to big endian\n   * @returns The corresponding Long value\n   */\n  static fromBytes(bytes: number[], unsigned?: boolean, le?: boolean): Long {\n    return le ? Long.fromBytesLE(bytes, unsigned) : Long.fromBytesBE(bytes, unsigned);\n  }\n\n  /**\n   * Creates a Long from its little endian byte representation.\n   * @param bytes - Little endian byte representation\n   * @param unsigned - Whether unsigned or not, defaults to signed\n   * @returns The corresponding Long value\n   */\n  static fromBytesLE(bytes: number[], unsigned?: boolean): Long {\n    return new Long(\n      bytes[0] | (bytes[1] << 8) | (bytes[2] << 16) | (bytes[3] << 24),\n      bytes[4] | (bytes[5] << 8) | (bytes[6] << 16) | (bytes[7] << 24),\n      unsigned\n    );\n  }\n\n  /**\n   * Creates a Long from its big endian byte representation.\n   * @param bytes - Big endian byte representation\n   * @param unsigned - Whether unsigned or not, defaults to signed\n   * @returns The corresponding Long value\n   */\n  static fromBytesBE(bytes: number[], unsigned?: boolean): Long {\n    return new Long(\n      (bytes[4] << 24) | (bytes[5] << 16) | (bytes[6] << 8) | bytes[7],\n      (bytes[0] << 24) | (bytes[1] << 16) | (bytes[2] << 8) | bytes[3],\n      unsigned\n    );\n  }\n\n  /**\n   * Tests if the specified object is a Long.\n   */\n  static isLong(value: unknown): value is Long {\n    return isObjectLike(value) && value['__isLong__'] === true;\n  }\n\n  /**\n   * Converts the specified value to a Long.\n   * @param unsigned - Whether unsigned or not, defaults to signed\n   */\n  static fromValue(\n    val: number | string | { low: number; high: number; unsigned?: boolean },\n    unsigned?: boolean\n  ): Long {\n    if (typeof val === 'number') return Long.fromNumber(val, unsigned);\n    if (typeof val === 'string') return Long.fromString(val, unsigned);\n    // Throws for non-objects, converts non-instanceof Long:\n    return Long.fromBits(\n      val.low,\n      val.high,\n      typeof unsigned === 'boolean' ? unsigned : val.unsigned\n    );\n  }\n\n  /** Returns the sum of this and the specified Long. */\n  add(addend: string | number | Long | Timestamp): Long {\n    if (!Long.isLong(addend)) addend = Long.fromValue(addend);\n\n    // Divide each number into 4 chunks of 16 bits, and then sum the chunks.\n\n    const a48 = this.high >>> 16;\n    const a32 = this.high & 0xffff;\n    const a16 = this.low >>> 16;\n    const a00 = this.low & 0xffff;\n\n    const b48 = addend.high >>> 16;\n    const b32 = addend.high & 0xffff;\n    const b16 = addend.low >>> 16;\n    const b00 = addend.low & 0xffff;\n\n    let c48 = 0,\n      c32 = 0,\n      c16 = 0,\n      c00 = 0;\n    c00 += a00 + b00;\n    c16 += c00 >>> 16;\n    c00 &= 0xffff;\n    c16 += a16 + b16;\n    c32 += c16 >>> 16;\n    c16 &= 0xffff;\n    c32 += a32 + b32;\n    c48 += c32 >>> 16;\n    c32 &= 0xffff;\n    c48 += a48 + b48;\n    c48 &= 0xffff;\n    return Long.fromBits((c16 << 16) | c00, (c48 << 16) | c32, this.unsigned);\n  }\n\n  /**\n   * Returns the sum of this and the specified Long.\n   * @returns Sum\n   */\n  and(other: string | number | Long | Timestamp): Long {\n    if (!Long.isLong(other)) other = Long.fromValue(other);\n    return Long.fromBits(this.low & other.low, this.high & other.high, this.unsigned);\n  }\n\n  /**\n   * Compares this Long's value with the specified's.\n   * @returns 0 if they are the same, 1 if the this is greater and -1 if the given one is greater\n   */\n  compare(other: string | number | Long | Timestamp): 0 | 1 | -1 {\n    if (!Long.isLong(other)) other = Long.fromValue(other);\n    if (this.eq(other)) return 0;\n    const thisNeg = this.isNegative(),\n      otherNeg = other.isNegative();\n    if (thisNeg && !otherNeg) return -1;\n    if (!thisNeg && otherNeg) return 1;\n    // At this point the sign bits are the same\n    if (!this.unsigned) return this.sub(other).isNegative() ? -1 : 1;\n    // Both are positive if at least one is unsigned\n    return other.high >>> 0 > this.high >>> 0 ||\n      (other.high === this.high && other.low >>> 0 > this.low >>> 0)\n      ? -1\n      : 1;\n  }\n\n  /** This is an alias of {@link Long.compare} */\n  comp(other: string | number | Long | Timestamp): 0 | 1 | -1 {\n    return this.compare(other);\n  }\n\n  /**\n   * Returns this Long divided by the specified. The result is signed if this Long is signed or unsigned if this Long is unsigned.\n   * @returns Quotient\n   */\n  divide(divisor: string | number | Long | Timestamp): Long {\n    if (!Long.isLong(divisor)) divisor = Long.fromValue(divisor);\n    if (divisor.isZero()) throw Error('division by zero');\n\n    // use wasm support if present\n    if (wasm) {\n      // guard against signed division overflow: the largest\n      // negative number / -1 would be 1 larger than the largest\n      // positive number, due to two's complement.\n      if (\n        !this.unsigned &&\n        this.high === -0x80000000 &&\n        divisor.low === -1 &&\n        divisor.high === -1\n      ) {\n        // be consistent with non-wasm code path\n        return this;\n      }\n      const low = (this.unsigned ? wasm.div_u : wasm.div_s)(\n        this.low,\n        this.high,\n        divisor.low,\n        divisor.high\n      );\n      return Long.fromBits(low, wasm.get_high(), this.unsigned);\n    }\n\n    if (this.isZero()) return this.unsigned ? Long.UZERO : Long.ZERO;\n    let approx, rem, res;\n    if (!this.unsigned) {\n      // This section is only relevant for signed longs and is derived from the\n      // closure library as a whole.\n      if (this.eq(Long.MIN_VALUE)) {\n        if (divisor.eq(Long.ONE) || divisor.eq(Long.NEG_ONE)) return Long.MIN_VALUE;\n        // recall that -MIN_VALUE == MIN_VALUE\n        else if (divisor.eq(Long.MIN_VALUE)) return Long.ONE;\n        else {\n          // At this point, we have |other| >= 2, so |this/other| < |MIN_VALUE|.\n          const halfThis = this.shr(1);\n          approx = halfThis.div(divisor).shl(1);\n          if (approx.eq(Long.ZERO)) {\n            return divisor.isNegative() ? Long.ONE : Long.NEG_ONE;\n          } else {\n            rem = this.sub(divisor.mul(approx));\n            res = approx.add(rem.div(divisor));\n            return res;\n          }\n        }\n      } else if (divisor.eq(Long.MIN_VALUE)) return this.unsigned ? Long.UZERO : Long.ZERO;\n      if (this.isNegative()) {\n        if (divisor.isNegative()) return this.neg().div(divisor.neg());\n        return this.neg().div(divisor).neg();\n      } else if (divisor.isNegative()) return this.div(divisor.neg()).neg();\n      res = Long.ZERO;\n    } else {\n      // The algorithm below has not been made for unsigned longs. It's therefore\n      // required to take special care of the MSB prior to running it.\n      if (!divisor.unsigned) divisor = divisor.toUnsigned();\n      if (divisor.gt(this)) return Long.UZERO;\n      if (divisor.gt(this.shru(1)))\n        // 15 >>> 1 = 7 ; with divisor = 8 ; true\n        return Long.UONE;\n      res = Long.UZERO;\n    }\n\n    // Repeat the following until the remainder is less than other:  find a\n    // floating-point that approximates remainder / other *from below*, add this\n    // into the result, and subtract it from the remainder.  It is critical that\n    // the approximate value is less than or equal to the real value so that the\n    // remainder never becomes negative.\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    rem = this;\n    while (rem.gte(divisor)) {\n      // Approximate the result of division. This may be a little greater or\n      // smaller than the actual value.\n      approx = Math.max(1, Math.floor(rem.toNumber() / divisor.toNumber()));\n\n      // We will tweak the approximate result by changing it in the 48-th digit or\n      // the smallest non-fractional digit, whichever is larger.\n      const log2 = Math.ceil(Math.log(approx) / Math.LN2);\n      const delta = log2 <= 48 ? 1 : Math.pow(2, log2 - 48);\n      // Decrease the approximation until it is smaller than the remainder.  Note\n      // that if it is too large, the product overflows and is negative.\n      let approxRes = Long.fromNumber(approx);\n      let approxRem = approxRes.mul(divisor);\n      while (approxRem.isNegative() || approxRem.gt(rem)) {\n        approx -= delta;\n        approxRes = Long.fromNumber(approx, this.unsigned);\n        approxRem = approxRes.mul(divisor);\n      }\n\n      // We know the answer can't be zero... and actually, zero would cause\n      // infinite recursion since we would make no progress.\n      if (approxRes.isZero()) approxRes = Long.ONE;\n\n      res = res.add(approxRes);\n      rem = rem.sub(approxRem);\n    }\n    return res;\n  }\n\n  /**This is an alias of {@link Long.divide} */\n  div(divisor: string | number | Long | Timestamp): Long {\n    return this.divide(divisor);\n  }\n\n  /**\n   * Tests if this Long's value equals the specified's.\n   * @param other - Other value\n   */\n  equals(other: string | number | Long | Timestamp): boolean {\n    if (!Long.isLong(other)) other = Long.fromValue(other);\n    if (this.unsigned !== other.unsigned && this.high >>> 31 === 1 && other.high >>> 31 === 1)\n      return false;\n    return this.high === other.high && this.low === other.low;\n  }\n\n  /** This is an alias of {@link Long.equals} */\n  eq(other: string | number | Long | Timestamp): boolean {\n    return this.equals(other);\n  }\n\n  /** Gets the high 32 bits as a signed integer. */\n  getHighBits(): number {\n    return this.high;\n  }\n\n  /** Gets the high 32 bits as an unsigned integer. */\n  getHighBitsUnsigned(): number {\n    return this.high >>> 0;\n  }\n\n  /** Gets the low 32 bits as a signed integer. */\n  getLowBits(): number {\n    return this.low;\n  }\n\n  /** Gets the low 32 bits as an unsigned integer. */\n  getLowBitsUnsigned(): number {\n    return this.low >>> 0;\n  }\n\n  /** Gets the number of bits needed to represent the absolute value of this Long. */\n  getNumBitsAbs(): number {\n    if (this.isNegative()) {\n      // Unsigned Longs are never negative\n      return this.eq(Long.MIN_VALUE) ? 64 : this.neg().getNumBitsAbs();\n    }\n    const val = this.high !== 0 ? this.high : this.low;\n    let bit: number;\n    for (bit = 31; bit > 0; bit--) if ((val & (1 << bit)) !== 0) break;\n    return this.high !== 0 ? bit + 33 : bit + 1;\n  }\n\n  /** Tests if this Long's value is greater than the specified's. */\n  greaterThan(other: string | number | Long | Timestamp): boolean {\n    return this.comp(other) > 0;\n  }\n\n  /** This is an alias of {@link Long.greaterThan} */\n  gt(other: string | number | Long | Timestamp): boolean {\n    return this.greaterThan(other);\n  }\n\n  /** Tests if this Long's value is greater than or equal the specified's. */\n  greaterThanOrEqual(other: string | number | Long | Timestamp): boolean {\n    return this.comp(other) >= 0;\n  }\n\n  /** This is an alias of {@link Long.greaterThanOrEqual} */\n  gte(other: string | number | Long | Timestamp): boolean {\n    return this.greaterThanOrEqual(other);\n  }\n  /** This is an alias of {@link Long.greaterThanOrEqual} */\n  ge(other: string | number | Long | Timestamp): boolean {\n    return this.greaterThanOrEqual(other);\n  }\n\n  /** Tests if this Long's value is even. */\n  isEven(): boolean {\n    return (this.low & 1) === 0;\n  }\n\n  /** Tests if this Long's value is negative. */\n  isNegative(): boolean {\n    return !this.unsigned && this.high < 0;\n  }\n\n  /** Tests if this Long's value is odd. */\n  isOdd(): boolean {\n    return (this.low & 1) === 1;\n  }\n\n  /** Tests if this Long's value is positive. */\n  isPositive(): boolean {\n    return this.unsigned || this.high >= 0;\n  }\n\n  /** Tests if this Long's value equals zero. */\n  isZero(): boolean {\n    return this.high === 0 && this.low === 0;\n  }\n\n  /** Tests if this Long's value is less than the specified's. */\n  lessThan(other: string | number | Long | Timestamp): boolean {\n    return this.comp(other) < 0;\n  }\n\n  /** This is an alias of {@link Long#lessThan}. */\n  lt(other: string | number | Long | Timestamp): boolean {\n    return this.lessThan(other);\n  }\n\n  /** Tests if this Long's value is less than or equal the specified's. */\n  lessThanOrEqual(other: string | number | Long | Timestamp): boolean {\n    return this.comp(other) <= 0;\n  }\n\n  /** This is an alias of {@link Long.lessThanOrEqual} */\n  lte(other: string | number | Long | Timestamp): boolean {\n    return this.lessThanOrEqual(other);\n  }\n\n  /** Returns this Long modulo the specified. */\n  modulo(divisor: string | number | Long | Timestamp): Long {\n    if (!Long.isLong(divisor)) divisor = Long.fromValue(divisor);\n\n    // use wasm support if present\n    if (wasm) {\n      const low = (this.unsigned ? wasm.rem_u : wasm.rem_s)(\n        this.low,\n        this.high,\n        divisor.low,\n        divisor.high\n      );\n      return Long.fromBits(low, wasm.get_high(), this.unsigned);\n    }\n\n    return this.sub(this.div(divisor).mul(divisor));\n  }\n\n  /** This is an alias of {@link Long.modulo} */\n  mod(divisor: string | number | Long | Timestamp): Long {\n    return this.modulo(divisor);\n  }\n  /** This is an alias of {@link Long.modulo} */\n  rem(divisor: string | number | Long | Timestamp): Long {\n    return this.modulo(divisor);\n  }\n\n  /**\n   * Returns the product of this and the specified Long.\n   * @param multiplier - Multiplier\n   * @returns Product\n   */\n  multiply(multiplier: string | number | Long | Timestamp): Long {\n    if (this.isZero()) return Long.ZERO;\n    if (!Long.isLong(multiplier)) multiplier = Long.fromValue(multiplier);\n\n    // use wasm support if present\n    if (wasm) {\n      const low = wasm.mul(this.low, this.high, multiplier.low, multiplier.high);\n      return Long.fromBits(low, wasm.get_high(), this.unsigned);\n    }\n\n    if (multiplier.isZero()) return Long.ZERO;\n    if (this.eq(Long.MIN_VALUE)) return multiplier.isOdd() ? Long.MIN_VALUE : Long.ZERO;\n    if (multiplier.eq(Long.MIN_VALUE)) return this.isOdd() ? Long.MIN_VALUE : Long.ZERO;\n\n    if (this.isNegative()) {\n      if (multiplier.isNegative()) return this.neg().mul(multiplier.neg());\n      else return this.neg().mul(multiplier).neg();\n    } else if (multiplier.isNegative()) return this.mul(multiplier.neg()).neg();\n\n    // If both longs are small, use float multiplication\n    if (this.lt(Long.TWO_PWR_24) && multiplier.lt(Long.TWO_PWR_24))\n      return Long.fromNumber(this.toNumber() * multiplier.toNumber(), this.unsigned);\n\n    // Divide each long into 4 chunks of 16 bits, and then add up 4x4 products.\n    // We can skip products that would overflow.\n\n    const a48 = this.high >>> 16;\n    const a32 = this.high & 0xffff;\n    const a16 = this.low >>> 16;\n    const a00 = this.low & 0xffff;\n\n    const b48 = multiplier.high >>> 16;\n    const b32 = multiplier.high & 0xffff;\n    const b16 = multiplier.low >>> 16;\n    const b00 = multiplier.low & 0xffff;\n\n    let c48 = 0,\n      c32 = 0,\n      c16 = 0,\n      c00 = 0;\n    c00 += a00 * b00;\n    c16 += c00 >>> 16;\n    c00 &= 0xffff;\n    c16 += a16 * b00;\n    c32 += c16 >>> 16;\n    c16 &= 0xffff;\n    c16 += a00 * b16;\n    c32 += c16 >>> 16;\n    c16 &= 0xffff;\n    c32 += a32 * b00;\n    c48 += c32 >>> 16;\n    c32 &= 0xffff;\n    c32 += a16 * b16;\n    c48 += c32 >>> 16;\n    c32 &= 0xffff;\n    c32 += a00 * b32;\n    c48 += c32 >>> 16;\n    c32 &= 0xffff;\n    c48 += a48 * b00 + a32 * b16 + a16 * b32 + a00 * b48;\n    c48 &= 0xffff;\n    return Long.fromBits((c16 << 16) | c00, (c48 << 16) | c32, this.unsigned);\n  }\n\n  /** This is an alias of {@link Long.multiply} */\n  mul(multiplier: string | number | Long | Timestamp): Long {\n    return this.multiply(multiplier);\n  }\n\n  /** Returns the Negation of this Long's value. */\n  negate(): Long {\n    if (!this.unsigned && this.eq(Long.MIN_VALUE)) return Long.MIN_VALUE;\n    return this.not().add(Long.ONE);\n  }\n\n  /** This is an alias of {@link Long.negate} */\n  neg(): Long {\n    return this.negate();\n  }\n\n  /** Returns the bitwise NOT of this Long. */\n  not(): Long {\n    return Long.fromBits(~this.low, ~this.high, this.unsigned);\n  }\n\n  /** Tests if this Long's value differs from the specified's. */\n  notEquals(other: string | number | Long | Timestamp): boolean {\n    return !this.equals(other);\n  }\n\n  /** This is an alias of {@link Long.notEquals} */\n  neq(other: string | number | Long | Timestamp): boolean {\n    return this.notEquals(other);\n  }\n  /** This is an alias of {@link Long.notEquals} */\n  ne(other: string | number | Long | Timestamp): boolean {\n    return this.notEquals(other);\n  }\n\n  /**\n   * Returns the bitwise OR of this Long and the specified.\n   */\n  or(other: number | string | Long): Long {\n    if (!Long.isLong(other)) other = Long.fromValue(other);\n    return Long.fromBits(this.low | other.low, this.high | other.high, this.unsigned);\n  }\n\n  /**\n   * Returns this Long with bits shifted to the left by the given amount.\n   * @param numBits - Number of bits\n   * @returns Shifted Long\n   */\n  shiftLeft(numBits: number | Long): Long {\n    if (Long.isLong(numBits)) numBits = numBits.toInt();\n    if ((numBits &= 63) === 0) return this;\n    else if (numBits < 32)\n      return Long.fromBits(\n        this.low << numBits,\n        (this.high << numBits) | (this.low >>> (32 - numBits)),\n        this.unsigned\n      );\n    else return Long.fromBits(0, this.low << (numBits - 32), this.unsigned);\n  }\n\n  /** This is an alias of {@link Long.shiftLeft} */\n  shl(numBits: number | Long): Long {\n    return this.shiftLeft(numBits);\n  }\n\n  /**\n   * Returns this Long with bits arithmetically shifted to the right by the given amount.\n   * @param numBits - Number of bits\n   * @returns Shifted Long\n   */\n  shiftRight(numBits: number | Long): Long {\n    if (Long.isLong(numBits)) numBits = numBits.toInt();\n    if ((numBits &= 63) === 0) return this;\n    else if (numBits < 32)\n      return Long.fromBits(\n        (this.low >>> numBits) | (this.high << (32 - numBits)),\n        this.high >> numBits,\n        this.unsigned\n      );\n    else return Long.fromBits(this.high >> (numBits - 32), this.high >= 0 ? 0 : -1, this.unsigned);\n  }\n\n  /** This is an alias of {@link Long.shiftRight} */\n  shr(numBits: number | Long): Long {\n    return this.shiftRight(numBits);\n  }\n\n  /**\n   * Returns this Long with bits logically shifted to the right by the given amount.\n   * @param numBits - Number of bits\n   * @returns Shifted Long\n   */\n  shiftRightUnsigned(numBits: Long | number): Long {\n    if (Long.isLong(numBits)) numBits = numBits.toInt();\n    numBits &= 63;\n    if (numBits === 0) return this;\n    else {\n      const high = this.high;\n      if (numBits < 32) {\n        const low = this.low;\n        return Long.fromBits(\n          (low >>> numBits) | (high << (32 - numBits)),\n          high >>> numBits,\n          this.unsigned\n        );\n      } else if (numBits === 32) return Long.fromBits(high, 0, this.unsigned);\n      else return Long.fromBits(high >>> (numBits - 32), 0, this.unsigned);\n    }\n  }\n\n  /** This is an alias of {@link Long.shiftRightUnsigned} */\n  shr_u(numBits: number | Long): Long {\n    return this.shiftRightUnsigned(numBits);\n  }\n  /** This is an alias of {@link Long.shiftRightUnsigned} */\n  shru(numBits: number | Long): Long {\n    return this.shiftRightUnsigned(numBits);\n  }\n\n  /**\n   * Returns the difference of this and the specified Long.\n   * @param subtrahend - Subtrahend\n   * @returns Difference\n   */\n  subtract(subtrahend: string | number | Long | Timestamp): Long {\n    if (!Long.isLong(subtrahend)) subtrahend = Long.fromValue(subtrahend);\n    return this.add(subtrahend.neg());\n  }\n\n  /** This is an alias of {@link Long.subtract} */\n  sub(subtrahend: string | number | Long | Timestamp): Long {\n    return this.subtract(subtrahend);\n  }\n\n  /** Converts the Long to a 32 bit integer, assuming it is a 32 bit integer. */\n  toInt(): number {\n    return this.unsigned ? this.low >>> 0 : this.low;\n  }\n\n  /** Converts the Long to a the nearest floating-point representation of this value (double, 53 bit mantissa). */\n  toNumber(): number {\n    if (this.unsigned) return (this.high >>> 0) * TWO_PWR_32_DBL + (this.low >>> 0);\n    return this.high * TWO_PWR_32_DBL + (this.low >>> 0);\n  }\n\n  /** Converts the Long to a BigInt (arbitrary precision). */\n  toBigInt(): bigint {\n    return BigInt(this.toString());\n  }\n\n  /**\n   * Converts this Long to its byte representation.\n   * @param le - Whether little or big endian, defaults to big endian\n   * @returns Byte representation\n   */\n  toBytes(le?: boolean): number[] {\n    return le ? this.toBytesLE() : this.toBytesBE();\n  }\n\n  /**\n   * Converts this Long to its little endian byte representation.\n   * @returns Little endian byte representation\n   */\n  toBytesLE(): number[] {\n    const hi = this.high,\n      lo = this.low;\n    return [\n      lo & 0xff,\n      (lo >>> 8) & 0xff,\n      (lo >>> 16) & 0xff,\n      lo >>> 24,\n      hi & 0xff,\n      (hi >>> 8) & 0xff,\n      (hi >>> 16) & 0xff,\n      hi >>> 24\n    ];\n  }\n\n  /**\n   * Converts this Long to its big endian byte representation.\n   * @returns Big endian byte representation\n   */\n  toBytesBE(): number[] {\n    const hi = this.high,\n      lo = this.low;\n    return [\n      hi >>> 24,\n      (hi >>> 16) & 0xff,\n      (hi >>> 8) & 0xff,\n      hi & 0xff,\n      lo >>> 24,\n      (lo >>> 16) & 0xff,\n      (lo >>> 8) & 0xff,\n      lo & 0xff\n    ];\n  }\n\n  /**\n   * Converts this Long to signed.\n   */\n  toSigned(): Long {\n    if (!this.unsigned) return this;\n    return Long.fromBits(this.low, this.high, false);\n  }\n\n  /**\n   * Converts the Long to a string written in the specified radix.\n   * @param radix - Radix (2-36), defaults to 10\n   * @throws RangeError If `radix` is out of range\n   */\n  toString(radix?: number): string {\n    radix = radix || 10;\n    if (radix < 2 || 36 < radix) throw RangeError('radix');\n    if (this.isZero()) return '0';\n    if (this.isNegative()) {\n      // Unsigned Longs are never negative\n      if (this.eq(Long.MIN_VALUE)) {\n        // We need to change the Long value before it can be negated, so we remove\n        // the bottom-most digit in this base and then recurse to do the rest.\n        const radixLong = Long.fromNumber(radix),\n          div = this.div(radixLong),\n          rem1 = div.mul(radixLong).sub(this);\n        return div.toString(radix) + rem1.toInt().toString(radix);\n      } else return '-' + this.neg().toString(radix);\n    }\n\n    // Do several (6) digits each time through the loop, so as to\n    // minimize the calls to the very expensive emulated div.\n    const radixToPower = Long.fromNumber(Math.pow(radix, 6), this.unsigned);\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    let rem: Long = this;\n    let result = '';\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n      const remDiv = rem.div(radixToPower);\n      const intval = rem.sub(remDiv.mul(radixToPower)).toInt() >>> 0;\n      let digits = intval.toString(radix);\n      rem = remDiv;\n      if (rem.isZero()) {\n        return digits + result;\n      } else {\n        while (digits.length < 6) digits = '0' + digits;\n        result = '' + digits + result;\n      }\n    }\n  }\n\n  /** Converts this Long to unsigned. */\n  toUnsigned(): Long {\n    if (this.unsigned) return this;\n    return Long.fromBits(this.low, this.high, true);\n  }\n\n  /** Returns the bitwise XOR of this Long and the given one. */\n  xor(other: Long | number | string): Long {\n    if (!Long.isLong(other)) other = Long.fromValue(other);\n    return Long.fromBits(this.low ^ other.low, this.high ^ other.high, this.unsigned);\n  }\n\n  /** This is an alias of {@link Long.isZero} */\n  eqz(): boolean {\n    return this.isZero();\n  }\n\n  /** This is an alias of {@link Long.lessThanOrEqual} */\n  le(other: string | number | Long | Timestamp): boolean {\n    return this.lessThanOrEqual(other);\n  }\n\n  /*\n   ****************************************************************\n   *                  BSON SPECIFIC ADDITIONS                     *\n   ****************************************************************\n   */\n  toExtendedJSON(options?: EJSONOptions): number | LongExtended {\n    if (options && options.relaxed) return this.toNumber();\n    return { $numberLong: this.toString() };\n  }\n  static fromExtendedJSON(doc: { $numberLong: string }, options?: EJSONOptions): number | Long {\n    const result = Long.fromString(doc.$numberLong);\n    return options && options.relaxed ? result.toNumber() : result;\n  }\n\n  /** @internal */\n  [Symbol.for('nodejs.util.inspect.custom')](): string {\n    return this.inspect();\n  }\n\n  inspect(): string {\n    return `new Long(\"${this.toString()}\"${this.unsigned ? ', true' : ''})`;\n  }\n}\n\nObject.defineProperty(Long.prototype, '__isLong__', { value: true });\nObject.defineProperty(Long.prototype, '_bsontype', { value: 'Long' });\n", "import { Buffer } from 'buffer';\nimport { BSONTypeError } from './error';\nimport { Long } from './long';\nimport { isUint8Array } from './parser/utils';\n\nconst PARSE_STRING_REGEXP = /^(\\+|-)?(\\d+|(\\d*\\.\\d*))?(E|e)?([-+])?(\\d+)?$/;\nconst PARSE_INF_REGEXP = /^(\\+|-)?(Infinity|inf)$/i;\nconst PARSE_NAN_REGEXP = /^(\\+|-)?NaN$/i;\n\nconst EXPONENT_MAX = 6111;\nconst EXPONENT_MIN = -6176;\nconst EXPONENT_BIAS = 6176;\nconst MAX_DIGITS = 34;\n\n// Nan value bits as 32 bit values (due to lack of longs)\nconst NAN_BUFFER = [\n  0x7c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00\n].reverse();\n// Infinity value bits 32 bit values (due to lack of longs)\nconst INF_NEGATIVE_BUFFER = [\n  0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00\n].reverse();\nconst INF_POSITIVE_BUFFER = [\n  0x78, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00\n].reverse();\n\nconst EXPONENT_REGEX = /^([-+])?(\\d+)?$/;\n\n// Extract least significant 5 bits\nconst COMBINATION_MASK = 0x1f;\n// Extract least significant 14 bits\nconst EXPONENT_MASK = 0x3fff;\n// Value of combination field for Inf\nconst COMBINATION_INFINITY = 30;\n// Value of combination field for NaN\nconst COMBINATION_NAN = 31;\n\n// Detect if the value is a digit\nfunction isDigit(value: string): boolean {\n  return !isNaN(parseInt(value, 10));\n}\n\n// Divide two uint128 values\nfunction divideu128(value: { parts: [number, number, number, number] }) {\n  const DIVISOR = Long.fromNumber(1000 * 1000 * 1000);\n  let _rem = Long.fromNumber(0);\n\n  if (!value.parts[0] && !value.parts[1] && !value.parts[2] && !value.parts[3]) {\n    return { quotient: value, rem: _rem };\n  }\n\n  for (let i = 0; i <= 3; i++) {\n    // Adjust remainder to match value of next dividend\n    _rem = _rem.shiftLeft(32);\n    // Add the divided to _rem\n    _rem = _rem.add(new Long(value.parts[i], 0));\n    value.parts[i] = _rem.div(DIVISOR).low;\n    _rem = _rem.modulo(DIVISOR);\n  }\n\n  return { quotient: value, rem: _rem };\n}\n\n// Multiply two Long values and return the 128 bit value\nfunction multiply64x2(left: Long, right: Long): { high: Long; low: Long } {\n  if (!left && !right) {\n    return { high: Long.fromNumber(0), low: Long.fromNumber(0) };\n  }\n\n  const leftHigh = left.shiftRightUnsigned(32);\n  const leftLow = new Long(left.getLowBits(), 0);\n  const rightHigh = right.shiftRightUnsigned(32);\n  const rightLow = new Long(right.getLowBits(), 0);\n\n  let productHigh = leftHigh.multiply(rightHigh);\n  let productMid = leftHigh.multiply(rightLow);\n  const productMid2 = leftLow.multiply(rightHigh);\n  let productLow = leftLow.multiply(rightLow);\n\n  productHigh = productHigh.add(productMid.shiftRightUnsigned(32));\n  productMid = new Long(productMid.getLowBits(), 0)\n    .add(productMid2)\n    .add(productLow.shiftRightUnsigned(32));\n\n  productHigh = productHigh.add(productMid.shiftRightUnsigned(32));\n  productLow = productMid.shiftLeft(32).add(new Long(productLow.getLowBits(), 0));\n\n  // Return the 128 bit result\n  return { high: productHigh, low: productLow };\n}\n\nfunction lessThan(left: Long, right: Long): boolean {\n  // Make values unsigned\n  const uhleft = left.high >>> 0;\n  const uhright = right.high >>> 0;\n\n  // Compare high bits first\n  if (uhleft < uhright) {\n    return true;\n  } else if (uhleft === uhright) {\n    const ulleft = left.low >>> 0;\n    const ulright = right.low >>> 0;\n    if (ulleft < ulright) return true;\n  }\n\n  return false;\n}\n\nfunction invalidErr(string: string, message: string) {\n  throw new BSONTypeError(`\"${string}\" is not a valid Decimal128 string - ${message}`);\n}\n\n/** @public */\nexport interface Decimal128Extended {\n  $numberDecimal: string;\n}\n\n/**\n * A class representation of the BSON Decimal128 type.\n * @public\n * @category BSONType\n */\nexport class Decimal128 {\n  _bsontype!: 'Decimal128';\n\n  readonly bytes!: Buffer;\n\n  /**\n   * @param bytes - a buffer containing the raw Decimal128 bytes in little endian order,\n   *                or a string representation as returned by .toString()\n   */\n  constructor(bytes: Buffer | string) {\n    if (!(this instanceof Decimal128)) return new Decimal128(bytes);\n\n    if (typeof bytes === 'string') {\n      this.bytes = Decimal128.fromString(bytes).bytes;\n    } else if (isUint8Array(bytes)) {\n      if (bytes.byteLength !== 16) {\n        throw new BSONTypeError('Decimal128 must take a Buffer of 16 bytes');\n      }\n      this.bytes = bytes;\n    } else {\n      throw new BSONTypeError('Decimal128 must take a Buffer or string');\n    }\n  }\n\n  /**\n   * Create a Decimal128 instance from a string representation\n   *\n   * @param representation - a numeric string representation.\n   */\n  static fromString(representation: string): Decimal128 {\n    // Parse state tracking\n    let isNegative = false;\n    let sawRadix = false;\n    let foundNonZero = false;\n\n    // Total number of significant digits (no leading or trailing zero)\n    let significantDigits = 0;\n    // Total number of significand digits read\n    let nDigitsRead = 0;\n    // Total number of digits (no leading zeros)\n    let nDigits = 0;\n    // The number of the digits after radix\n    let radixPosition = 0;\n    // The index of the first non-zero in *str*\n    let firstNonZero = 0;\n\n    // Digits Array\n    const digits = [0];\n    // The number of digits in digits\n    let nDigitsStored = 0;\n    // Insertion pointer for digits\n    let digitsInsert = 0;\n    // The index of the first non-zero digit\n    let firstDigit = 0;\n    // The index of the last digit\n    let lastDigit = 0;\n\n    // Exponent\n    let exponent = 0;\n    // loop index over array\n    let i = 0;\n    // The high 17 digits of the significand\n    let significandHigh = new Long(0, 0);\n    // The low 17 digits of the significand\n    let significandLow = new Long(0, 0);\n    // The biased exponent\n    let biasedExponent = 0;\n\n    // Read index\n    let index = 0;\n\n    // Naively prevent against REDOS attacks.\n    // TODO: implementing a custom parsing for this, or refactoring the regex would yield\n    //       further gains.\n    if (representation.length >= 7000) {\n      throw new BSONTypeError('' + representation + ' not a valid Decimal128 string');\n    }\n\n    // Results\n    const stringMatch = representation.match(PARSE_STRING_REGEXP);\n    const infMatch = representation.match(PARSE_INF_REGEXP);\n    const nanMatch = representation.match(PARSE_NAN_REGEXP);\n\n    // Validate the string\n    if ((!stringMatch && !infMatch && !nanMatch) || representation.length === 0) {\n      throw new BSONTypeError('' + representation + ' not a valid Decimal128 string');\n    }\n\n    if (stringMatch) {\n      // full_match = stringMatch[0]\n      // sign = stringMatch[1]\n\n      const unsignedNumber = stringMatch[2];\n      // stringMatch[3] is undefined if a whole number (ex \"1\", 12\")\n      // but defined if a number w/ decimal in it (ex \"1.0, 12.2\")\n\n      const e = stringMatch[4];\n      const expSign = stringMatch[5];\n      const expNumber = stringMatch[6];\n\n      // they provided e, but didn't give an exponent number. for ex \"1e\"\n      if (e && expNumber === undefined) invalidErr(representation, 'missing exponent power');\n\n      // they provided e, but didn't give a number before it. for ex \"e1\"\n      if (e && unsignedNumber === undefined) invalidErr(representation, 'missing exponent base');\n\n      if (e === undefined && (expSign || expNumber)) {\n        invalidErr(representation, 'missing e before exponent');\n      }\n    }\n\n    // Get the negative or positive sign\n    if (representation[index] === '+' || representation[index] === '-') {\n      isNegative = representation[index++] === '-';\n    }\n\n    // Check if user passed Infinity or NaN\n    if (!isDigit(representation[index]) && representation[index] !== '.') {\n      if (representation[index] === 'i' || representation[index] === 'I') {\n        return new Decimal128(Buffer.from(isNegative ? INF_NEGATIVE_BUFFER : INF_POSITIVE_BUFFER));\n      } else if (representation[index] === 'N') {\n        return new Decimal128(Buffer.from(NAN_BUFFER));\n      }\n    }\n\n    // Read all the digits\n    while (isDigit(representation[index]) || representation[index] === '.') {\n      if (representation[index] === '.') {\n        if (sawRadix) invalidErr(representation, 'contains multiple periods');\n\n        sawRadix = true;\n        index = index + 1;\n        continue;\n      }\n\n      if (nDigitsStored < 34) {\n        if (representation[index] !== '0' || foundNonZero) {\n          if (!foundNonZero) {\n            firstNonZero = nDigitsRead;\n          }\n\n          foundNonZero = true;\n\n          // Only store 34 digits\n          digits[digitsInsert++] = parseInt(representation[index], 10);\n          nDigitsStored = nDigitsStored + 1;\n        }\n      }\n\n      if (foundNonZero) nDigits = nDigits + 1;\n      if (sawRadix) radixPosition = radixPosition + 1;\n\n      nDigitsRead = nDigitsRead + 1;\n      index = index + 1;\n    }\n\n    if (sawRadix && !nDigitsRead)\n      throw new BSONTypeError('' + representation + ' not a valid Decimal128 string');\n\n    // Read exponent if exists\n    if (representation[index] === 'e' || representation[index] === 'E') {\n      // Read exponent digits\n      const match = representation.substr(++index).match(EXPONENT_REGEX);\n\n      // No digits read\n      if (!match || !match[2]) return new Decimal128(Buffer.from(NAN_BUFFER));\n\n      // Get exponent\n      exponent = parseInt(match[0], 10);\n\n      // Adjust the index\n      index = index + match[0].length;\n    }\n\n    // Return not a number\n    if (representation[index]) return new Decimal128(Buffer.from(NAN_BUFFER));\n\n    // Done reading input\n    // Find first non-zero digit in digits\n    firstDigit = 0;\n\n    if (!nDigitsStored) {\n      firstDigit = 0;\n      lastDigit = 0;\n      digits[0] = 0;\n      nDigits = 1;\n      nDigitsStored = 1;\n      significantDigits = 0;\n    } else {\n      lastDigit = nDigitsStored - 1;\n      significantDigits = nDigits;\n      if (significantDigits !== 1) {\n        while (digits[firstNonZero + significantDigits - 1] === 0) {\n          significantDigits = significantDigits - 1;\n        }\n      }\n    }\n\n    // Normalization of exponent\n    // Correct exponent based on radix position, and shift significand as needed\n    // to represent user input\n\n    // Overflow prevention\n    if (exponent <= radixPosition && radixPosition - exponent > 1 << 14) {\n      exponent = EXPONENT_MIN;\n    } else {\n      exponent = exponent - radixPosition;\n    }\n\n    // Attempt to normalize the exponent\n    while (exponent > EXPONENT_MAX) {\n      // Shift exponent to significand and decrease\n      lastDigit = lastDigit + 1;\n\n      if (lastDigit - firstDigit > MAX_DIGITS) {\n        // Check if we have a zero then just hard clamp, otherwise fail\n        const digitsString = digits.join('');\n        if (digitsString.match(/^0+$/)) {\n          exponent = EXPONENT_MAX;\n          break;\n        }\n\n        invalidErr(representation, 'overflow');\n      }\n      exponent = exponent - 1;\n    }\n\n    while (exponent < EXPONENT_MIN || nDigitsStored < nDigits) {\n      // Shift last digit. can only do this if < significant digits than # stored.\n      if (lastDigit === 0 && significantDigits < nDigitsStored) {\n        exponent = EXPONENT_MIN;\n        significantDigits = 0;\n        break;\n      }\n\n      if (nDigitsStored < nDigits) {\n        // adjust to match digits not stored\n        nDigits = nDigits - 1;\n      } else {\n        // adjust to round\n        lastDigit = lastDigit - 1;\n      }\n\n      if (exponent < EXPONENT_MAX) {\n        exponent = exponent + 1;\n      } else {\n        // Check if we have a zero then just hard clamp, otherwise fail\n        const digitsString = digits.join('');\n        if (digitsString.match(/^0+$/)) {\n          exponent = EXPONENT_MAX;\n          break;\n        }\n        invalidErr(representation, 'overflow');\n      }\n    }\n\n    // Round\n    // We've normalized the exponent, but might still need to round.\n    if (lastDigit - firstDigit + 1 < significantDigits) {\n      let endOfString = nDigitsRead;\n\n      // If we have seen a radix point, 'string' is 1 longer than we have\n      // documented with ndigits_read, so inc the position of the first nonzero\n      // digit and the position that digits are read to.\n      if (sawRadix) {\n        firstNonZero = firstNonZero + 1;\n        endOfString = endOfString + 1;\n      }\n      // if negative, we need to increment again to account for - sign at start.\n      if (isNegative) {\n        firstNonZero = firstNonZero + 1;\n        endOfString = endOfString + 1;\n      }\n\n      const roundDigit = parseInt(representation[firstNonZero + lastDigit + 1], 10);\n      let roundBit = 0;\n\n      if (roundDigit >= 5) {\n        roundBit = 1;\n        if (roundDigit === 5) {\n          roundBit = digits[lastDigit] % 2 === 1 ? 1 : 0;\n          for (i = firstNonZero + lastDigit + 2; i < endOfString; i++) {\n            if (parseInt(representation[i], 10)) {\n              roundBit = 1;\n              break;\n            }\n          }\n        }\n      }\n\n      if (roundBit) {\n        let dIdx = lastDigit;\n\n        for (; dIdx >= 0; dIdx--) {\n          if (++digits[dIdx] > 9) {\n            digits[dIdx] = 0;\n\n            // overflowed most significant digit\n            if (dIdx === 0) {\n              if (exponent < EXPONENT_MAX) {\n                exponent = exponent + 1;\n                digits[dIdx] = 1;\n              } else {\n                return new Decimal128(\n                  Buffer.from(isNegative ? INF_NEGATIVE_BUFFER : INF_POSITIVE_BUFFER)\n                );\n              }\n            }\n          }\n        }\n      }\n    }\n\n    // Encode significand\n    // The high 17 digits of the significand\n    significandHigh = Long.fromNumber(0);\n    // The low 17 digits of the significand\n    significandLow = Long.fromNumber(0);\n\n    // read a zero\n    if (significantDigits === 0) {\n      significandHigh = Long.fromNumber(0);\n      significandLow = Long.fromNumber(0);\n    } else if (lastDigit - firstDigit < 17) {\n      let dIdx = firstDigit;\n      significandLow = Long.fromNumber(digits[dIdx++]);\n      significandHigh = new Long(0, 0);\n\n      for (; dIdx <= lastDigit; dIdx++) {\n        significandLow = significandLow.multiply(Long.fromNumber(10));\n        significandLow = significandLow.add(Long.fromNumber(digits[dIdx]));\n      }\n    } else {\n      let dIdx = firstDigit;\n      significandHigh = Long.fromNumber(digits[dIdx++]);\n\n      for (; dIdx <= lastDigit - 17; dIdx++) {\n        significandHigh = significandHigh.multiply(Long.fromNumber(10));\n        significandHigh = significandHigh.add(Long.fromNumber(digits[dIdx]));\n      }\n\n      significandLow = Long.fromNumber(digits[dIdx++]);\n\n      for (; dIdx <= lastDigit; dIdx++) {\n        significandLow = significandLow.multiply(Long.fromNumber(10));\n        significandLow = significandLow.add(Long.fromNumber(digits[dIdx]));\n      }\n    }\n\n    const significand = multiply64x2(significandHigh, Long.fromString('100000000000000000'));\n    significand.low = significand.low.add(significandLow);\n\n    if (lessThan(significand.low, significandLow)) {\n      significand.high = significand.high.add(Long.fromNumber(1));\n    }\n\n    // Biased exponent\n    biasedExponent = exponent + EXPONENT_BIAS;\n    const dec = { low: Long.fromNumber(0), high: Long.fromNumber(0) };\n\n    // Encode combination, exponent, and significand.\n    if (\n      significand.high.shiftRightUnsigned(49).and(Long.fromNumber(1)).equals(Long.fromNumber(1))\n    ) {\n      // Encode '11' into bits 1 to 3\n      dec.high = dec.high.or(Long.fromNumber(0x3).shiftLeft(61));\n      dec.high = dec.high.or(\n        Long.fromNumber(biasedExponent).and(Long.fromNumber(0x3fff).shiftLeft(47))\n      );\n      dec.high = dec.high.or(significand.high.and(Long.fromNumber(0x7fffffffffff)));\n    } else {\n      dec.high = dec.high.or(Long.fromNumber(biasedExponent & 0x3fff).shiftLeft(49));\n      dec.high = dec.high.or(significand.high.and(Long.fromNumber(0x1ffffffffffff)));\n    }\n\n    dec.low = significand.low;\n\n    // Encode sign\n    if (isNegative) {\n      dec.high = dec.high.or(Long.fromString('9223372036854775808'));\n    }\n\n    // Encode into a buffer\n    const buffer = Buffer.alloc(16);\n    index = 0;\n\n    // Encode the low 64 bits of the decimal\n    // Encode low bits\n    buffer[index++] = dec.low.low & 0xff;\n    buffer[index++] = (dec.low.low >> 8) & 0xff;\n    buffer[index++] = (dec.low.low >> 16) & 0xff;\n    buffer[index++] = (dec.low.low >> 24) & 0xff;\n    // Encode high bits\n    buffer[index++] = dec.low.high & 0xff;\n    buffer[index++] = (dec.low.high >> 8) & 0xff;\n    buffer[index++] = (dec.low.high >> 16) & 0xff;\n    buffer[index++] = (dec.low.high >> 24) & 0xff;\n\n    // Encode the high 64 bits of the decimal\n    // Encode low bits\n    buffer[index++] = dec.high.low & 0xff;\n    buffer[index++] = (dec.high.low >> 8) & 0xff;\n    buffer[index++] = (dec.high.low >> 16) & 0xff;\n    buffer[index++] = (dec.high.low >> 24) & 0xff;\n    // Encode high bits\n    buffer[index++] = dec.high.high & 0xff;\n    buffer[index++] = (dec.high.high >> 8) & 0xff;\n    buffer[index++] = (dec.high.high >> 16) & 0xff;\n    buffer[index++] = (dec.high.high >> 24) & 0xff;\n\n    // Return the new Decimal128\n    return new Decimal128(buffer);\n  }\n\n  /** Create a string representation of the raw Decimal128 value */\n  toString(): string {\n    // Note: bits in this routine are referred to starting at 0,\n    // from the sign bit, towards the coefficient.\n\n    // decoded biased exponent (14 bits)\n    let biased_exponent;\n    // the number of significand digits\n    let significand_digits = 0;\n    // the base-10 digits in the significand\n    const significand = new Array<number>(36);\n    for (let i = 0; i < significand.length; i++) significand[i] = 0;\n    // read pointer into significand\n    let index = 0;\n\n    // true if the number is zero\n    let is_zero = false;\n\n    // the most significant significand bits (50-46)\n    let significand_msb;\n    // temporary storage for significand decoding\n    let significand128: { parts: [number, number, number, number] } = { parts: [0, 0, 0, 0] };\n    // indexing variables\n    let j, k;\n\n    // Output string\n    const string: string[] = [];\n\n    // Unpack index\n    index = 0;\n\n    // Buffer reference\n    const buffer = this.bytes;\n\n    // Unpack the low 64bits into a long\n    // bits 96 - 127\n    const low =\n      buffer[index++] | (buffer[index++] << 8) | (buffer[index++] << 16) | (buffer[index++] << 24);\n    // bits 64 - 95\n    const midl =\n      buffer[index++] | (buffer[index++] << 8) | (buffer[index++] << 16) | (buffer[index++] << 24);\n\n    // Unpack the high 64bits into a long\n    // bits 32 - 63\n    const midh =\n      buffer[index++] | (buffer[index++] << 8) | (buffer[index++] << 16) | (buffer[index++] << 24);\n    // bits 0 - 31\n    const high =\n      buffer[index++] | (buffer[index++] << 8) | (buffer[index++] << 16) | (buffer[index++] << 24);\n\n    // Unpack index\n    index = 0;\n\n    // Create the state of the decimal\n    const dec = {\n      low: new Long(low, midl),\n      high: new Long(midh, high)\n    };\n\n    if (dec.high.lessThan(Long.ZERO)) {\n      string.push('-');\n    }\n\n    // Decode combination field and exponent\n    // bits 1 - 5\n    const combination = (high >> 26) & COMBINATION_MASK;\n\n    if (combination >> 3 === 3) {\n      // Check for 'special' values\n      if (combination === COMBINATION_INFINITY) {\n        return string.join('') + 'Infinity';\n      } else if (combination === COMBINATION_NAN) {\n        return 'NaN';\n      } else {\n        biased_exponent = (high >> 15) & EXPONENT_MASK;\n        significand_msb = 0x08 + ((high >> 14) & 0x01);\n      }\n    } else {\n      significand_msb = (high >> 14) & 0x07;\n      biased_exponent = (high >> 17) & EXPONENT_MASK;\n    }\n\n    // unbiased exponent\n    const exponent = biased_exponent - EXPONENT_BIAS;\n\n    // Create string of significand digits\n\n    // Convert the 114-bit binary number represented by\n    // (significand_high, significand_low) to at most 34 decimal\n    // digits through modulo and division.\n    significand128.parts[0] = (high & 0x3fff) + ((significand_msb & 0xf) << 14);\n    significand128.parts[1] = midh;\n    significand128.parts[2] = midl;\n    significand128.parts[3] = low;\n\n    if (\n      significand128.parts[0] === 0 &&\n      significand128.parts[1] === 0 &&\n      significand128.parts[2] === 0 &&\n      significand128.parts[3] === 0\n    ) {\n      is_zero = true;\n    } else {\n      for (k = 3; k >= 0; k--) {\n        let least_digits = 0;\n        // Perform the divide\n        const result = divideu128(significand128);\n        significand128 = result.quotient;\n        least_digits = result.rem.low;\n\n        // We now have the 9 least significant digits (in base 2).\n        // Convert and output to string.\n        if (!least_digits) continue;\n\n        for (j = 8; j >= 0; j--) {\n          // significand[k * 9 + j] = Math.round(least_digits % 10);\n          significand[k * 9 + j] = least_digits % 10;\n          // least_digits = Math.round(least_digits / 10);\n          least_digits = Math.floor(least_digits / 10);\n        }\n      }\n    }\n\n    // Output format options:\n    // Scientific - [-]d.dddE(+/-)dd or [-]dE(+/-)dd\n    // Regular    - ddd.ddd\n\n    if (is_zero) {\n      significand_digits = 1;\n      significand[index] = 0;\n    } else {\n      significand_digits = 36;\n      while (!significand[index]) {\n        significand_digits = significand_digits - 1;\n        index = index + 1;\n      }\n    }\n\n    // the exponent if scientific notation is used\n    const scientific_exponent = significand_digits - 1 + exponent;\n\n    // The scientific exponent checks are dictated by the string conversion\n    // specification and are somewhat arbitrary cutoffs.\n    //\n    // We must check exponent > 0, because if this is the case, the number\n    // has trailing zeros.  However, we *cannot* output these trailing zeros,\n    // because doing so would change the precision of the value, and would\n    // change stored data if the string converted number is round tripped.\n    if (scientific_exponent >= 34 || scientific_exponent <= -7 || exponent > 0) {\n      // Scientific format\n\n      // if there are too many significant digits, we should just be treating numbers\n      // as + or - 0 and using the non-scientific exponent (this is for the \"invalid\n      // representation should be treated as 0/-0\" spec cases in decimal128-1.json)\n      if (significand_digits > 34) {\n        string.push(`${0}`);\n        if (exponent > 0) string.push(`E+${exponent}`);\n        else if (exponent < 0) string.push(`E${exponent}`);\n        return string.join('');\n      }\n\n      string.push(`${significand[index++]}`);\n      significand_digits = significand_digits - 1;\n\n      if (significand_digits) {\n        string.push('.');\n      }\n\n      for (let i = 0; i < significand_digits; i++) {\n        string.push(`${significand[index++]}`);\n      }\n\n      // Exponent\n      string.push('E');\n      if (scientific_exponent > 0) {\n        string.push(`+${scientific_exponent}`);\n      } else {\n        string.push(`${scientific_exponent}`);\n      }\n    } else {\n      // Regular format with no decimal place\n      if (exponent >= 0) {\n        for (let i = 0; i < significand_digits; i++) {\n          string.push(`${significand[index++]}`);\n        }\n      } else {\n        let radix_position = significand_digits + exponent;\n\n        // non-zero digits before radix\n        if (radix_position > 0) {\n          for (let i = 0; i < radix_position; i++) {\n            string.push(`${significand[index++]}`);\n          }\n        } else {\n          string.push('0');\n        }\n\n        string.push('.');\n        // add leading zeros after radix\n        while (radix_position++ < 0) {\n          string.push('0');\n        }\n\n        for (let i = 0; i < significand_digits - Math.max(radix_position - 1, 0); i++) {\n          string.push(`${significand[index++]}`);\n        }\n      }\n    }\n\n    return string.join('');\n  }\n\n  toJSON(): Decimal128Extended {\n    return { $numberDecimal: this.toString() };\n  }\n\n  /** @internal */\n  toExtendedJSON(): Decimal128Extended {\n    return { $numberDecimal: this.toString() };\n  }\n\n  /** @internal */\n  static fromExtendedJSON(doc: Decimal128Extended): Decimal128 {\n    return Decimal128.fromString(doc.$numberDecimal);\n  }\n\n  /** @internal */\n  [Symbol.for('nodejs.util.inspect.custom')](): string {\n    return this.inspect();\n  }\n\n  inspect(): string {\n    return `new Decimal128(\"${this.toString()}\")`;\n  }\n}\n\nObject.defineProperty(Decimal128.prototype, '_bsontype', { value: 'Decimal128' });\n", "import type { EJSONOptions } from './extended_json';\n\n/** @public */\nexport interface DoubleExtended {\n  $numberDouble: string;\n}\n\n/**\n * A class representation of the BSON Double type.\n * @public\n * @category BSONType\n */\nexport class Double {\n  _bsontype!: 'Double';\n\n  value!: number;\n  /**\n   * Create a Double type\n   *\n   * @param value - the number we want to represent as a double.\n   */\n  constructor(value: number) {\n    if (!(this instanceof Double)) return new Double(value);\n\n    if ((value as unknown) instanceof Number) {\n      value = value.valueOf();\n    }\n\n    this.value = +value;\n  }\n\n  /**\n   * Access the number value.\n   *\n   * @returns returns the wrapped double number.\n   */\n  valueOf(): number {\n    return this.value;\n  }\n\n  toJSON(): number {\n    return this.value;\n  }\n\n  toString(radix?: number): string {\n    return this.value.toString(radix);\n  }\n\n  /** @internal */\n  toExtendedJSON(options?: EJSONOptions): number | DoubleExtended {\n    if (options && (options.legacy || (options.relaxed && isFinite(this.value)))) {\n      return this.value;\n    }\n\n    if (Object.is(Math.sign(this.value), -0)) {\n      // NOTE: JavaScript has +0 and -0, apparently to model limit calculations. If a user\n      // explicitly provided `-0` then we need to ensure the sign makes it into the output\n      return { $numberDouble: `-${this.value.toFixed(1)}` };\n    }\n\n    return {\n      $numberDouble: Number.isInteger(this.value) ? this.value.toFixed(1) : this.value.toString()\n    };\n  }\n\n  /** @internal */\n  static fromExtendedJSON(doc: DoubleExtended, options?: EJSONOptions): number | Double {\n    const doubleValue = parseFloat(doc.$numberDouble);\n    return options && options.relaxed ? doubleValue : new Double(doubleValue);\n  }\n\n  /** @internal */\n  [Symbol.for('nodejs.util.inspect.custom')](): string {\n    return this.inspect();\n  }\n\n  inspect(): string {\n    const eJSON = this.toExtendedJSON() as DoubleExtended;\n    return `new Double(${eJSON.$numberDouble})`;\n  }\n}\n\nObject.defineProperty(Double.prototype, '_bsontype', { value: 'Double' });\n", "import type { EJSONOptions } from './extended_json';\n\n/** @public */\nexport interface Int32Extended {\n  $numberInt: string;\n}\n\n/**\n * A class representation of a BSON Int32 type.\n * @public\n * @category BSONType\n */\nexport class Int32 {\n  _bsontype!: 'Int32';\n\n  value!: number;\n  /**\n   * Create an Int32 type\n   *\n   * @param value - the number we want to represent as an int32.\n   */\n  constructor(value: number | string) {\n    if (!(this instanceof Int32)) return new Int32(value);\n\n    if ((value as unknown) instanceof Number) {\n      value = value.valueOf();\n    }\n\n    this.value = +value | 0;\n  }\n\n  /**\n   * Access the number value.\n   *\n   * @returns returns the wrapped int32 number.\n   */\n  valueOf(): number {\n    return this.value;\n  }\n\n  toString(radix?: number): string {\n    return this.value.toString(radix);\n  }\n\n  toJSON(): number {\n    return this.value;\n  }\n\n  /** @internal */\n  toExtendedJSON(options?: EJSONOptions): number | Int32Extended {\n    if (options && (options.relaxed || options.legacy)) return this.value;\n    return { $numberInt: this.value.toString() };\n  }\n\n  /** @internal */\n  static fromExtendedJSON(doc: Int32Extended, options?: EJSONOptions): number | Int32 {\n    return options && options.relaxed ? parseInt(doc.$numberInt, 10) : new Int32(doc.$numberInt);\n  }\n\n  /** @internal */\n  [Symbol.for('nodejs.util.inspect.custom')](): string {\n    return this.inspect();\n  }\n\n  inspect(): string {\n    return `new Int32(${this.valueOf()})`;\n  }\n}\n\nObject.defineProperty(Int32.prototype, '_bsontype', { value: 'Int32' });\n", "/** @public */\nexport interface MaxKeyExtended {\n  $maxKey: 1;\n}\n\n/**\n * A class representation of the BSON MaxKey type.\n * @public\n * @category BSONType\n */\nexport class MaxKey {\n  _bsontype!: 'MaxKey';\n\n  constructor() {\n    if (!(this instanceof MaxKey)) return new MaxKey();\n  }\n\n  /** @internal */\n  toExtendedJSON(): MaxKeyExtended {\n    return { $maxKey: 1 };\n  }\n\n  /** @internal */\n  static fromExtendedJSON(): MaxKey {\n    return new MaxKey();\n  }\n\n  /** @internal */\n  [Symbol.for('nodejs.util.inspect.custom')](): string {\n    return this.inspect();\n  }\n\n  inspect(): string {\n    return 'new MaxKey()';\n  }\n}\n\nObject.defineProperty(MaxKey.prototype, '_bsontype', { value: 'MaxKey' });\n", "/** @public */\nexport interface MinKeyExtended {\n  $minKey: 1;\n}\n\n/**\n * A class representation of the BSON MinKey type.\n * @public\n * @category BSONType\n */\nexport class MinKey {\n  _bsontype!: 'MinKey';\n\n  constructor() {\n    if (!(this instanceof MinKey)) return new MinKey();\n  }\n\n  /** @internal */\n  toExtendedJSON(): MinKeyExtended {\n    return { $minKey: 1 };\n  }\n\n  /** @internal */\n  static fromExtendedJSON(): MinKey {\n    return new MinKey();\n  }\n\n  /** @internal */\n  [Symbol.for('nodejs.util.inspect.custom')](): string {\n    return this.inspect();\n  }\n\n  inspect(): string {\n    return 'new MinKey()';\n  }\n}\n\nObject.defineProperty(MinKey.prototype, '_bsontype', { value: 'MinKey' });\n", "import { Buffer } from 'buffer';\nimport { ensureBuffer } from './ensure_buffer';\nimport { BSONTypeError } from './error';\nimport { deprecate, isUint8Array, randomBytes } from './parser/utils';\n\n// Regular expression that checks for hex value\nconst checkForHexRegExp = new RegExp('^[0-9a-fA-F]{24}$');\n\n// Unique sequence for the current process (initialized on first use)\nlet PROCESS_UNIQUE: Uint8Array | null = null;\n\n/** @public */\nexport interface ObjectIdLike {\n  id: string | Buffer;\n  __id?: string;\n  toHexString(): string;\n}\n\n/** @public */\nexport interface ObjectIdExtended {\n  $oid: string;\n}\n\nconst kId = Symbol('id');\n\n/**\n * A class representation of the BSON ObjectId type.\n * @public\n * @category BSONType\n */\nexport class ObjectId {\n  _bsontype!: 'ObjectID';\n\n  /** @internal */\n  static index = Math.floor(Math.random() * 0xffffff);\n\n  static cacheHexString: boolean;\n\n  /** ObjectId Bytes @internal */\n  private [kId]!: Buffer;\n  /** ObjectId hexString cache @internal */\n  private __id?: string;\n\n  /**\n   * Create an ObjectId type\n   *\n   * @param inputId - Can be a 24 character hex string, 12 byte binary Buffer, or a number.\n   */\n  constructor(inputId?: string | number | ObjectId | ObjectIdLike | Buffer | Uint8Array) {\n    if (!(this instanceof ObjectId)) return new ObjectId(inputId);\n\n    // workingId is set based on type of input and whether valid id exists for the input\n    let workingId;\n    if (typeof inputId === 'object' && inputId && 'id' in inputId) {\n      if (typeof inputId.id !== 'string' && !ArrayBuffer.isView(inputId.id)) {\n        throw new BSONTypeError(\n          'Argument passed in must have an id that is of type string or Buffer'\n        );\n      }\n      if ('toHexString' in inputId && typeof inputId.toHexString === 'function') {\n        workingId = Buffer.from(inputId.toHexString(), 'hex');\n      } else {\n        workingId = inputId.id;\n      }\n    } else {\n      workingId = inputId;\n    }\n\n    // the following cases use workingId to construct an ObjectId\n    if (workingId == null || typeof workingId === 'number') {\n      // The most common use case (blank id, new objectId instance)\n      // Generate a new id\n      this[kId] = ObjectId.generate(typeof workingId === 'number' ? workingId : undefined);\n    } else if (ArrayBuffer.isView(workingId) && workingId.byteLength === 12) {\n      // If intstanceof matches we can escape calling ensure buffer in Node.js environments\n      this[kId] = workingId instanceof Buffer ? workingId : ensureBuffer(workingId);\n    } else if (typeof workingId === 'string') {\n      if (workingId.length === 12) {\n        const bytes = Buffer.from(workingId);\n        if (bytes.byteLength === 12) {\n          this[kId] = bytes;\n        } else {\n          throw new BSONTypeError('Argument passed in must be a string of 12 bytes');\n        }\n      } else if (workingId.length === 24 && checkForHexRegExp.test(workingId)) {\n        this[kId] = Buffer.from(workingId, 'hex');\n      } else {\n        throw new BSONTypeError(\n          'Argument passed in must be a string of 12 bytes or a string of 24 hex characters or an integer'\n        );\n      }\n    } else {\n      throw new BSONTypeError('Argument passed in does not match the accepted types');\n    }\n    // If we are caching the hex string\n    if (ObjectId.cacheHexString) {\n      this.__id = this.id.toString('hex');\n    }\n  }\n\n  /**\n   * The ObjectId bytes\n   * @readonly\n   */\n  get id(): Buffer {\n    return this[kId];\n  }\n\n  set id(value: Buffer) {\n    this[kId] = value;\n    if (ObjectId.cacheHexString) {\n      this.__id = value.toString('hex');\n    }\n  }\n\n  /**\n   * The generation time of this ObjectId instance\n   * @deprecated Please use getTimestamp / createFromTime which returns an int32 epoch\n   */\n  get generationTime(): number {\n    return this.id.readInt32BE(0);\n  }\n\n  set generationTime(value: number) {\n    // Encode time into first 4 bytes\n    this.id.writeUInt32BE(value, 0);\n  }\n\n  /** Returns the ObjectId id as a 24 character hex string representation */\n  toHexString(): string {\n    if (ObjectId.cacheHexString && this.__id) {\n      return this.__id;\n    }\n\n    const hexString = this.id.toString('hex');\n\n    if (ObjectId.cacheHexString && !this.__id) {\n      this.__id = hexString;\n    }\n\n    return hexString;\n  }\n\n  /**\n   * Update the ObjectId index\n   * @privateRemarks\n   * Used in generating new ObjectId's on the driver\n   * @internal\n   */\n  static getInc(): number {\n    return (ObjectId.index = (ObjectId.index + 1) % 0xffffff);\n  }\n\n  /**\n   * Generate a 12 byte id buffer used in ObjectId's\n   *\n   * @param time - pass in a second based timestamp.\n   */\n  static generate(time?: number): Buffer {\n    if ('number' !== typeof time) {\n      time = Math.floor(Date.now() / 1000);\n    }\n\n    const inc = ObjectId.getInc();\n    const buffer = Buffer.alloc(12);\n\n    // 4-byte timestamp\n    buffer.writeUInt32BE(time, 0);\n\n    // set PROCESS_UNIQUE if yet not initialized\n    if (PROCESS_UNIQUE === null) {\n      PROCESS_UNIQUE = randomBytes(5);\n    }\n\n    // 5-byte process unique\n    buffer[4] = PROCESS_UNIQUE[0];\n    buffer[5] = PROCESS_UNIQUE[1];\n    buffer[6] = PROCESS_UNIQUE[2];\n    buffer[7] = PROCESS_UNIQUE[3];\n    buffer[8] = PROCESS_UNIQUE[4];\n\n    // 3-byte counter\n    buffer[11] = inc & 0xff;\n    buffer[10] = (inc >> 8) & 0xff;\n    buffer[9] = (inc >> 16) & 0xff;\n\n    return buffer;\n  }\n\n  /**\n   * Converts the id into a 24 character hex string for printing\n   *\n   * @param format - The Buffer toString format parameter.\n   */\n  toString(format?: string): string {\n    // Is the id a buffer then use the buffer toString method to return the format\n    if (format) return this.id.toString(format);\n    return this.toHexString();\n  }\n\n  /** Converts to its JSON the 24 character hex string representation. */\n  toJSON(): string {\n    return this.toHexString();\n  }\n\n  /**\n   * Compares the equality of this ObjectId with `otherID`.\n   *\n   * @param otherId - ObjectId instance to compare against.\n   */\n  equals(otherId: string | ObjectId | ObjectIdLike): boolean {\n    if (otherId === undefined || otherId === null) {\n      return false;\n    }\n\n    if (otherId instanceof ObjectId) {\n      return this[kId][11] === otherId[kId][11] && this[kId].equals(otherId[kId]);\n    }\n\n    if (\n      typeof otherId === 'string' &&\n      ObjectId.isValid(otherId) &&\n      otherId.length === 12 &&\n      isUint8Array(this.id)\n    ) {\n      return otherId === Buffer.prototype.toString.call(this.id, 'latin1');\n    }\n\n    if (typeof otherId === 'string' && ObjectId.isValid(otherId) && otherId.length === 24) {\n      return otherId.toLowerCase() === this.toHexString();\n    }\n\n    if (typeof otherId === 'string' && ObjectId.isValid(otherId) && otherId.length === 12) {\n      return Buffer.from(otherId).equals(this.id);\n    }\n\n    if (\n      typeof otherId === 'object' &&\n      'toHexString' in otherId &&\n      typeof otherId.toHexString === 'function'\n    ) {\n      const otherIdString = otherId.toHexString();\n      const thisIdString = this.toHexString().toLowerCase();\n      return typeof otherIdString === 'string' && otherIdString.toLowerCase() === thisIdString;\n    }\n\n    return false;\n  }\n\n  /** Returns the generation date (accurate up to the second) that this ID was generated. */\n  getTimestamp(): Date {\n    const timestamp = new Date();\n    const time = this.id.readUInt32BE(0);\n    timestamp.setTime(Math.floor(time) * 1000);\n    return timestamp;\n  }\n\n  /** @internal */\n  static createPk(): ObjectId {\n    return new ObjectId();\n  }\n\n  /**\n   * Creates an ObjectId from a second based number, with the rest of the ObjectId zeroed out. Used for comparisons or sorting the ObjectId.\n   *\n   * @param time - an integer number representing a number of seconds.\n   */\n  static createFromTime(time: number): ObjectId {\n    const buffer = Buffer.from([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\n    // Encode time into first 4 bytes\n    buffer.writeUInt32BE(time, 0);\n    // Return the new objectId\n    return new ObjectId(buffer);\n  }\n\n  /**\n   * Creates an ObjectId from a hex string representation of an ObjectId.\n   *\n   * @param hexString - create a ObjectId from a passed in 24 character hexstring.\n   */\n  static createFromHexString(hexString: string): ObjectId {\n    // Throw an error if it's not a valid setup\n    if (typeof hexString === 'undefined' || (hexString != null && hexString.length !== 24)) {\n      throw new BSONTypeError(\n        'Argument passed in must be a single String of 12 bytes or a string of 24 hex characters'\n      );\n    }\n\n    return new ObjectId(Buffer.from(hexString, 'hex'));\n  }\n\n  /**\n   * Checks if a value is a valid bson ObjectId\n   *\n   * @param id - ObjectId instance to validate.\n   */\n  static isValid(id: string | number | ObjectId | ObjectIdLike | Buffer | Uint8Array): boolean {\n    if (id == null) return false;\n\n    try {\n      new ObjectId(id);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n\n  /** @internal */\n  toExtendedJSON(): ObjectIdExtended {\n    if (this.toHexString) return { $oid: this.toHexString() };\n    return { $oid: this.toString('hex') };\n  }\n\n  /** @internal */\n  static fromExtendedJSON(doc: ObjectIdExtended): ObjectId {\n    return new ObjectId(doc.$oid);\n  }\n\n  /**\n   * Converts to a string representation of this Id.\n   *\n   * @returns return the 24 character hex string representation.\n   * @internal\n   */\n  [Symbol.for('nodejs.util.inspect.custom')](): string {\n    return this.inspect();\n  }\n\n  inspect(): string {\n    return `new ObjectId(\"${this.toHexString()}\")`;\n  }\n}\n\n// Deprecated methods\nObject.defineProperty(ObjectId.prototype, 'generate', {\n  value: deprecate(\n    (time: number) => ObjectId.generate(time),\n    'Please use the static `ObjectId.generate(time)` instead'\n  )\n});\n\nObject.defineProperty(ObjectId.prototype, 'getInc', {\n  value: deprecate(() => ObjectId.getInc(), 'Please use the static `ObjectId.getInc()` instead')\n});\n\nObject.defineProperty(ObjectId.prototype, 'get_inc', {\n  value: deprecate(() => ObjectId.getInc(), 'Please use the static `ObjectId.getInc()` instead')\n});\n\nObject.defineProperty(ObjectId, 'get_inc', {\n  value: deprecate(() => ObjectId.getInc(), 'Please use the static `ObjectId.getInc()` instead')\n});\n\nObject.defineProperty(ObjectId.prototype, '_bsontype', { value: 'ObjectID' });\n", "import { BSONError, BSONTypeError } from './error';\nimport type { EJSONOptions } from './extended_json';\n\nfunction alphabetize(str: string): string {\n  return str.split('').sort().join('');\n}\n\n/** @public */\nexport interface BSONRegExpExtendedLegacy {\n  $regex: string | BSONRegExp;\n  $options: string;\n}\n\n/** @public */\nexport interface BSONRegExpExtended {\n  $regularExpression: {\n    pattern: string;\n    options: string;\n  };\n}\n\n/**\n * A class representation of the BSON RegExp type.\n * @public\n * @category BSONType\n */\nexport class BSONRegExp {\n  _bsontype!: 'BSONRegExp';\n\n  pattern!: string;\n  options!: string;\n  /**\n   * @param pattern - The regular expression pattern to match\n   * @param options - The regular expression options\n   */\n  constructor(pattern: string, options?: string) {\n    if (!(this instanceof BSONRegExp)) return new BSONRegExp(pattern, options);\n\n    this.pattern = pattern;\n    this.options = alphabetize(options ?? '');\n\n    if (this.pattern.indexOf('\\x00') !== -1) {\n      throw new BSONError(\n        `BSON Regex patterns cannot contain null bytes, found: ${JSON.stringify(this.pattern)}`\n      );\n    }\n    if (this.options.indexOf('\\x00') !== -1) {\n      throw new BSONError(\n        `BSON Regex options cannot contain null bytes, found: ${JSON.stringify(this.options)}`\n      );\n    }\n\n    // Validate options\n    for (let i = 0; i < this.options.length; i++) {\n      if (\n        !(\n          this.options[i] === 'i' ||\n          this.options[i] === 'm' ||\n          this.options[i] === 'x' ||\n          this.options[i] === 'l' ||\n          this.options[i] === 's' ||\n          this.options[i] === 'u'\n        )\n      ) {\n        throw new BSONError(`The regular expression option [${this.options[i]}] is not supported`);\n      }\n    }\n  }\n\n  static parseOptions(options?: string): string {\n    return options ? options.split('').sort().join('') : '';\n  }\n\n  /** @internal */\n  toExtendedJSON(options?: EJSONOptions): BSONRegExpExtendedLegacy | BSONRegExpExtended {\n    options = options || {};\n    if (options.legacy) {\n      return { $regex: this.pattern, $options: this.options };\n    }\n    return { $regularExpression: { pattern: this.pattern, options: this.options } };\n  }\n\n  /** @internal */\n  static fromExtendedJSON(doc: BSONRegExpExtendedLegacy | BSONRegExpExtended): BSONRegExp {\n    if ('$regex' in doc) {\n      if (typeof doc.$regex !== 'string') {\n        // This is for $regex query operators that have extended json values.\n        if (doc.$regex._bsontype === 'BSONRegExp') {\n          return doc as unknown as BSONRegExp;\n        }\n      } else {\n        return new BSONRegExp(doc.$regex, BSONRegExp.parseOptions(doc.$options));\n      }\n    }\n    if ('$regularExpression' in doc) {\n      return new BSONRegExp(\n        doc.$regularExpression.pattern,\n        BSONRegExp.parseOptions(doc.$regularExpression.options)\n      );\n    }\n    throw new BSONTypeError(`Unexpected BSONRegExp EJSON object form: ${JSON.stringify(doc)}`);\n  }\n}\n\nObject.defineProperty(BSONRegExp.prototype, '_bsontype', { value: 'BSONRegExp' });\n", "/** @public */\nexport interface BSONSymbolExtended {\n  $symbol: string;\n}\n\n/**\n * A class representation of the BSON Symbol type.\n * @public\n * @category BSONType\n */\nexport class BSONSymbol {\n  _bsontype!: 'Symbol';\n\n  value!: string;\n  /**\n   * @param value - the string representing the symbol.\n   */\n  constructor(value: string) {\n    if (!(this instanceof BSONSymbol)) return new BSONSymbol(value);\n\n    this.value = value;\n  }\n\n  /** Access the wrapped string value. */\n  valueOf(): string {\n    return this.value;\n  }\n\n  toString(): string {\n    return this.value;\n  }\n\n  /** @internal */\n  inspect(): string {\n    return `new BSONSymbol(\"${this.value}\")`;\n  }\n\n  toJSON(): string {\n    return this.value;\n  }\n\n  /** @internal */\n  toExtendedJSON(): BSONSymbolExtended {\n    return { $symbol: this.value };\n  }\n\n  /** @internal */\n  static fromExtendedJSON(doc: BSONSymbolExtended): BSONSymbol {\n    return new BSONSymbol(doc.$symbol);\n  }\n\n  /** @internal */\n  [Symbol.for('nodejs.util.inspect.custom')](): string {\n    return this.inspect();\n  }\n}\n\nObject.defineProperty(BSONSymbol.prototype, '_bsontype', { value: 'Symbol' });\n", "import { Long } from './long';\nimport { isObjectLike } from './parser/utils';\n\n/** @public */\nexport type TimestampOverrides = '_bsontype' | 'toExtendedJSON' | 'fromExtendedJSON' | 'inspect';\n/** @public */\nexport type LongWithoutOverrides = new (low: unknown, high?: number, unsigned?: boolean) => {\n  [P in Exclude<keyof Long, TimestampOverrides>]: Long[P];\n};\n/** @public */\nexport const LongWithoutOverridesClass: LongWithoutOverrides =\n  Long as unknown as LongWithoutOverrides;\n\n/** @public */\nexport interface TimestampExtended {\n  $timestamp: {\n    t: number;\n    i: number;\n  };\n}\n\n/**\n * @public\n * @category BSONType\n * */\nexport class Timestamp extends LongWithoutOverridesClass {\n  _bsontype!: 'Timestamp';\n\n  static readonly MAX_VALUE = Long.MAX_UNSIGNED_VALUE;\n\n  /**\n   * @param low - A 64-bit Long representing the Timestamp.\n   */\n  constructor(long: Long);\n  /**\n   * @param value - A pair of two values indicating timestamp and increment.\n   */\n  constructor(value: { t: number; i: number });\n  /**\n   * @param low - the low (signed) 32 bits of the Timestamp.\n   * @param high - the high (signed) 32 bits of the Timestamp.\n   * @deprecated Please use `Timestamp({ t: high, i: low })` or `Timestamp(Long(low, high))` instead.\n   */\n  constructor(low: number, high: number);\n  constructor(low: number | Long | { t: number; i: number }, high?: number) {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-expect-error\n    if (!(this instanceof Timestamp)) return new Timestamp(low, high);\n\n    if (Long.isLong(low)) {\n      super(low.low, low.high, true);\n    } else if (isObjectLike(low) && typeof low.t !== 'undefined' && typeof low.i !== 'undefined') {\n      super(low.i, low.t, true);\n    } else {\n      super(low, high, true);\n    }\n    Object.defineProperty(this, '_bsontype', {\n      value: 'Timestamp',\n      writable: false,\n      configurable: false,\n      enumerable: false\n    });\n  }\n\n  toJSON(): { $timestamp: string } {\n    return {\n      $timestamp: this.toString()\n    };\n  }\n\n  /** Returns a Timestamp represented by the given (32-bit) integer value. */\n  static fromInt(value: number): Timestamp {\n    return new Timestamp(Long.fromInt(value, true));\n  }\n\n  /** Returns a Timestamp representing the given number value, provided that it is a finite number. Otherwise, zero is returned. */\n  static fromNumber(value: number): Timestamp {\n    return new Timestamp(Long.fromNumber(value, true));\n  }\n\n  /**\n   * Returns a Timestamp for the given high and low bits. Each is assumed to use 32 bits.\n   *\n   * @param lowBits - the low 32-bits.\n   * @param highBits - the high 32-bits.\n   */\n  static fromBits(lowBits: number, highBits: number): Timestamp {\n    return new Timestamp(lowBits, highBits);\n  }\n\n  /**\n   * Returns a Timestamp from the given string, optionally using the given radix.\n   *\n   * @param str - the textual representation of the Timestamp.\n   * @param optRadix - the radix in which the text is written.\n   */\n  static fromString(str: string, optRadix: number): Timestamp {\n    return new Timestamp(Long.fromString(str, true, optRadix));\n  }\n\n  /** @internal */\n  toExtendedJSON(): TimestampExtended {\n    return { $timestamp: { t: this.high >>> 0, i: this.low >>> 0 } };\n  }\n\n  /** @internal */\n  static fromExtendedJSON(doc: TimestampExtended): Timestamp {\n    return new Timestamp(doc.$timestamp);\n  }\n\n  /** @internal */\n  [Symbol.for('nodejs.util.inspect.custom')](): string {\n    return this.inspect();\n  }\n\n  inspect(): string {\n    return `new Timestamp({ t: ${this.getHighBits()}, i: ${this.getLowBits()} })`;\n  }\n}\n", "import { Binary } from './binary';\nimport type { Document } from './bson';\nimport { Code } from './code';\nimport { DBRef, isDBRefLike } from './db_ref';\nimport { Decimal128 } from './decimal128';\nimport { Double } from './double';\nimport { BSONError, BSONTypeError } from './error';\nimport { Int32 } from './int_32';\nimport { Long } from './long';\nimport { MaxKey } from './max_key';\nimport { MinKey } from './min_key';\nimport { ObjectId } from './objectid';\nimport { isDate, isObjectLike, isRegExp } from './parser/utils';\nimport { BSONRegExp } from './regexp';\nimport { BSONSymbol } from './symbol';\nimport { Timestamp } from './timestamp';\n\n/** @public */\nexport type EJSONOptions = EJSON.Options;\n\n/** @internal */\ntype BSONType =\n  | Binary\n  | Code\n  | DBRef\n  | Decimal128\n  | Double\n  | Int32\n  | Long\n  | MaxKey\n  | MinKey\n  | ObjectId\n  | BSONRegExp\n  | BSONSymbol\n  | Timestamp;\n\nexport function isBSONType(value: unknown): value is BSONType {\n  return (\n    isObjectLike(value) && Reflect.has(value, '_bsontype') && typeof value._bsontype === 'string'\n  );\n}\n\n// INT32 boundaries\nconst BSON_INT32_MAX = 0x7fffffff;\nconst BSON_INT32_MIN = -0x80000000;\n// INT64 boundaries\n// const BSON_INT64_MAX = 0x7fffffffffffffff; // TODO(NODE-4377): This number cannot be precisely represented in JS\nconst BSON_INT64_MAX = 0x8000000000000000;\nconst BSON_INT64_MIN = -0x8000000000000000;\n\n// all the types where we don't need to do any special processing and can just pass the EJSON\n//straight to type.fromExtendedJSON\nconst keysToCodecs = {\n  $oid: ObjectId,\n  $binary: Binary,\n  $uuid: Binary,\n  $symbol: BSONSymbol,\n  $numberInt: Int32,\n  $numberDecimal: Decimal128,\n  $numberDouble: Double,\n  $numberLong: Long,\n  $minKey: MinKey,\n  $maxKey: MaxKey,\n  $regex: BSONRegExp,\n  $regularExpression: BSONRegExp,\n  $timestamp: Timestamp\n} as const;\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction deserializeValue(value: any, options: EJSON.Options = {}) {\n  if (typeof value === 'number') {\n    if (options.relaxed || options.legacy) {\n      return value;\n    }\n\n    // if it's an integer, should interpret as smallest BSON integer\n    // that can represent it exactly. (if out of range, interpret as double.)\n    if (Math.floor(value) === value) {\n      if (value >= BSON_INT32_MIN && value <= BSON_INT32_MAX) return new Int32(value);\n      if (value >= BSON_INT64_MIN && value <= BSON_INT64_MAX) return Long.fromNumber(value);\n    }\n\n    // If the number is a non-integer or out of integer range, should interpret as BSON Double.\n    return new Double(value);\n  }\n\n  // from here on out we're looking for bson types, so bail if its not an object\n  if (value == null || typeof value !== 'object') return value;\n\n  // upgrade deprecated undefined to null\n  if (value.$undefined) return null;\n\n  const keys = Object.keys(value).filter(\n    k => k.startsWith('$') && value[k] != null\n  ) as (keyof typeof keysToCodecs)[];\n  for (let i = 0; i < keys.length; i++) {\n    const c = keysToCodecs[keys[i]];\n    if (c) return c.fromExtendedJSON(value, options);\n  }\n\n  if (value.$date != null) {\n    const d = value.$date;\n    const date = new Date();\n\n    if (options.legacy) {\n      if (typeof d === 'number') date.setTime(d);\n      else if (typeof d === 'string') date.setTime(Date.parse(d));\n    } else {\n      if (typeof d === 'string') date.setTime(Date.parse(d));\n      else if (Long.isLong(d)) date.setTime(d.toNumber());\n      else if (typeof d === 'number' && options.relaxed) date.setTime(d);\n    }\n    return date;\n  }\n\n  if (value.$code != null) {\n    const copy = Object.assign({}, value);\n    if (value.$scope) {\n      copy.$scope = deserializeValue(value.$scope);\n    }\n\n    return Code.fromExtendedJSON(value);\n  }\n\n  if (isDBRefLike(value) || value.$dbPointer) {\n    const v = value.$ref ? value : value.$dbPointer;\n\n    // we run into this in a \"degenerate EJSON\" case (with $id and $ref order flipped)\n    // because of the order JSON.parse goes through the document\n    if (v instanceof DBRef) return v;\n\n    const dollarKeys = Object.keys(v).filter(k => k.startsWith('$'));\n    let valid = true;\n    dollarKeys.forEach(k => {\n      if (['$ref', '$id', '$db'].indexOf(k) === -1) valid = false;\n    });\n\n    // only make DBRef if $ keys are all valid\n    if (valid) return DBRef.fromExtendedJSON(v);\n  }\n\n  return value;\n}\n\ntype EJSONSerializeOptions = EJSON.Options & {\n  seenObjects: { obj: unknown; propertyName: string }[];\n};\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction serializeArray(array: any[], options: EJSONSerializeOptions): any[] {\n  return array.map((v: unknown, index: number) => {\n    options.seenObjects.push({ propertyName: `index ${index}`, obj: null });\n    try {\n      return serializeValue(v, options);\n    } finally {\n      options.seenObjects.pop();\n    }\n  });\n}\n\nfunction getISOString(date: Date) {\n  const isoStr = date.toISOString();\n  // we should only show milliseconds in timestamp if they're non-zero\n  return date.getUTCMilliseconds() !== 0 ? isoStr : isoStr.slice(0, -5) + 'Z';\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction serializeValue(value: any, options: EJSONSerializeOptions): any {\n  if ((typeof value === 'object' || typeof value === 'function') && value !== null) {\n    const index = options.seenObjects.findIndex(entry => entry.obj === value);\n    if (index !== -1) {\n      const props = options.seenObjects.map(entry => entry.propertyName);\n      const leadingPart = props\n        .slice(0, index)\n        .map(prop => `${prop} -> `)\n        .join('');\n      const alreadySeen = props[index];\n      const circularPart =\n        ' -> ' +\n        props\n          .slice(index + 1, props.length - 1)\n          .map(prop => `${prop} -> `)\n          .join('');\n      const current = props[props.length - 1];\n      const leadingSpace = ' '.repeat(leadingPart.length + alreadySeen.length / 2);\n      const dashes = '-'.repeat(\n        circularPart.length + (alreadySeen.length + current.length) / 2 - 1\n      );\n\n      throw new BSONTypeError(\n        'Converting circular structure to EJSON:\\n' +\n          `    ${leadingPart}${alreadySeen}${circularPart}${current}\\n` +\n          `    ${leadingSpace}\\\\${dashes}/`\n      );\n    }\n    options.seenObjects[options.seenObjects.length - 1].obj = value;\n  }\n\n  if (Array.isArray(value)) return serializeArray(value, options);\n\n  if (value === undefined) return null;\n\n  if (value instanceof Date || isDate(value)) {\n    const dateNum = value.getTime(),\n      // is it in year range 1970-9999?\n      inRange = dateNum > -1 && dateNum < 253402318800000;\n\n    if (options.legacy) {\n      return options.relaxed && inRange\n        ? { $date: value.getTime() }\n        : { $date: getISOString(value) };\n    }\n    return options.relaxed && inRange\n      ? { $date: getISOString(value) }\n      : { $date: { $numberLong: value.getTime().toString() } };\n  }\n\n  if (typeof value === 'number' && (!options.relaxed || !isFinite(value))) {\n    // it's an integer\n    if (Math.floor(value) === value) {\n      const int32Range = value >= BSON_INT32_MIN && value <= BSON_INT32_MAX,\n        int64Range = value >= BSON_INT64_MIN && value <= BSON_INT64_MAX;\n\n      // interpret as being of the smallest BSON integer type that can represent the number exactly\n      if (int32Range) return { $numberInt: value.toString() };\n      if (int64Range) return { $numberLong: value.toString() };\n    }\n    return { $numberDouble: value.toString() };\n  }\n\n  if (value instanceof RegExp || isRegExp(value)) {\n    let flags = value.flags;\n    if (flags === undefined) {\n      const match = value.toString().match(/[gimuy]*$/);\n      if (match) {\n        flags = match[0];\n      }\n    }\n\n    const rx = new BSONRegExp(value.source, flags);\n    return rx.toExtendedJSON(options);\n  }\n\n  if (value != null && typeof value === 'object') return serializeDocument(value, options);\n  return value;\n}\n\nconst BSON_TYPE_MAPPINGS = {\n  Binary: (o: Binary) => new Binary(o.value(), o.sub_type),\n  Code: (o: Code) => new Code(o.code, o.scope),\n  DBRef: (o: DBRef) => new DBRef(o.collection || o.namespace, o.oid, o.db, o.fields), // \"namespace\" for 1.x library backwards compat\n  Decimal128: (o: Decimal128) => new Decimal128(o.bytes),\n  Double: (o: Double) => new Double(o.value),\n  Int32: (o: Int32) => new Int32(o.value),\n  Long: (\n    o: Long & {\n      low_: number;\n      high_: number;\n      unsigned_: boolean | undefined;\n    }\n  ) =>\n    Long.fromBits(\n      // underscore variants for 1.x backwards compatibility\n      o.low != null ? o.low : o.low_,\n      o.low != null ? o.high : o.high_,\n      o.low != null ? o.unsigned : o.unsigned_\n    ),\n  MaxKey: () => new MaxKey(),\n  MinKey: () => new MinKey(),\n  ObjectID: (o: ObjectId) => new ObjectId(o),\n  ObjectId: (o: ObjectId) => new ObjectId(o), // support 4.0.0/4.0.1 before _bsontype was reverted back to ObjectID\n  BSONRegExp: (o: BSONRegExp) => new BSONRegExp(o.pattern, o.options),\n  Symbol: (o: BSONSymbol) => new BSONSymbol(o.value),\n  Timestamp: (o: Timestamp) => Timestamp.fromBits(o.low, o.high)\n} as const;\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction serializeDocument(doc: any, options: EJSONSerializeOptions) {\n  if (doc == null || typeof doc !== 'object') throw new BSONError('not an object instance');\n\n  const bsontype: BSONType['_bsontype'] = doc._bsontype;\n  if (typeof bsontype === 'undefined') {\n    // It's a regular object. Recursively serialize its property values.\n    const _doc: Document = {};\n    for (const name in doc) {\n      options.seenObjects.push({ propertyName: name, obj: null });\n      try {\n        const value = serializeValue(doc[name], options);\n        if (name === '__proto__') {\n          Object.defineProperty(_doc, name, {\n            value,\n            writable: true,\n            enumerable: true,\n            configurable: true\n          });\n        } else {\n          _doc[name] = value;\n        }\n      } finally {\n        options.seenObjects.pop();\n      }\n    }\n    return _doc;\n  } else if (isBSONType(doc)) {\n    // the \"document\" is really just a BSON type object\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    let outDoc: any = doc;\n    if (typeof outDoc.toExtendedJSON !== 'function') {\n      // There's no EJSON serialization function on the object. It's probably an\n      // object created by a previous version of this library (or another library)\n      // that's duck-typing objects to look like they were generated by this library).\n      // Copy the object into this library's version of that type.\n      const mapper = BSON_TYPE_MAPPINGS[doc._bsontype];\n      if (!mapper) {\n        throw new BSONTypeError('Unrecognized or invalid _bsontype: ' + doc._bsontype);\n      }\n      outDoc = mapper(outDoc);\n    }\n\n    // Two BSON types may have nested objects that may need to be serialized too\n    if (bsontype === 'Code' && outDoc.scope) {\n      outDoc = new Code(outDoc.code, serializeValue(outDoc.scope, options));\n    } else if (bsontype === 'DBRef' && outDoc.oid) {\n      outDoc = new DBRef(\n        serializeValue(outDoc.collection, options),\n        serializeValue(outDoc.oid, options),\n        serializeValue(outDoc.db, options),\n        serializeValue(outDoc.fields, options)\n      );\n    }\n\n    return outDoc.toExtendedJSON(options);\n  } else {\n    throw new BSONError('_bsontype must be a string, but was: ' + typeof bsontype);\n  }\n}\n\n/**\n * EJSON parse / stringify API\n * @public\n */\n// the namespace here is used to emulate `export * as EJSON from '...'`\n// which as of now (sept 2020) api-extractor does not support\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace EJSON {\n  export interface Options {\n    /** Output using the Extended JSON v1 spec */\n    legacy?: boolean;\n    /** Enable Extended JSON's `relaxed` mode, which attempts to return native JS types where possible, rather than BSON types */\n    relaxed?: boolean;\n    /**\n     * Disable Extended JSON's `relaxed` mode, which attempts to return BSON types where possible, rather than native JS types\n     * @deprecated Please use the relaxed property instead\n     */\n    strict?: boolean;\n  }\n\n  /**\n   * Parse an Extended JSON string, constructing the JavaScript value or object described by that\n   * string.\n   *\n   * @example\n   * ```js\n   * const { EJSON } = require('bson');\n   * const text = '{ \"int32\": { \"$numberInt\": \"10\" } }';\n   *\n   * // prints { int32: { [String: '10'] _bsontype: 'Int32', value: '10' } }\n   * console.log(EJSON.parse(text, { relaxed: false }));\n   *\n   * // prints { int32: 10 }\n   * console.log(EJSON.parse(text));\n   * ```\n   */\n  export function parse(text: string, options?: EJSON.Options): SerializableTypes {\n    const finalOptions = Object.assign({}, { relaxed: true, legacy: false }, options);\n\n    // relaxed implies not strict\n    if (typeof finalOptions.relaxed === 'boolean') finalOptions.strict = !finalOptions.relaxed;\n    if (typeof finalOptions.strict === 'boolean') finalOptions.relaxed = !finalOptions.strict;\n\n    return JSON.parse(text, (key, value) => {\n      if (key.indexOf('\\x00') !== -1) {\n        throw new BSONError(\n          `BSON Document field names cannot contain null bytes, found: ${JSON.stringify(key)}`\n        );\n      }\n      return deserializeValue(value, finalOptions);\n    });\n  }\n\n  export type JSONPrimitive = string | number | boolean | null;\n  export type SerializableTypes = Document | Array<JSONPrimitive | Document> | JSONPrimitive;\n\n  /**\n   * Converts a BSON document to an Extended JSON string, optionally replacing values if a replacer\n   * function is specified or optionally including only the specified properties if a replacer array\n   * is specified.\n   *\n   * @param value - The value to convert to extended JSON\n   * @param replacer - A function that alters the behavior of the stringification process, or an array of String and Number objects that serve as a whitelist for selecting/filtering the properties of the value object to be included in the JSON string. If this value is null or not provided, all properties of the object are included in the resulting JSON string\n   * @param space - A String or Number object that's used to insert white space into the output JSON string for readability purposes.\n   * @param options - Optional settings\n   *\n   * @example\n   * ```js\n   * const { EJSON } = require('bson');\n   * const Int32 = require('mongodb').Int32;\n   * const doc = { int32: new Int32(10) };\n   *\n   * // prints '{\"int32\":{\"$numberInt\":\"10\"}}'\n   * console.log(EJSON.stringify(doc, { relaxed: false }));\n   *\n   * // prints '{\"int32\":10}'\n   * console.log(EJSON.stringify(doc));\n   * ```\n   */\n  export function stringify(\n    value: SerializableTypes,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    replacer?: (number | string)[] | ((this: any, key: string, value: any) => any) | EJSON.Options,\n    space?: string | number,\n    options?: EJSON.Options\n  ): string {\n    if (space != null && typeof space === 'object') {\n      options = space;\n      space = 0;\n    }\n    if (replacer != null && typeof replacer === 'object' && !Array.isArray(replacer)) {\n      options = replacer;\n      replacer = undefined;\n      space = 0;\n    }\n    const serializeOptions = Object.assign({ relaxed: true, legacy: false }, options, {\n      seenObjects: [{ propertyName: '(root)', obj: null }]\n    });\n\n    const doc = serializeValue(value, serializeOptions);\n    return JSON.stringify(doc, replacer as Parameters<JSON['stringify']>[1], space);\n  }\n\n  /**\n   * Serializes an object to an Extended JSON string, and reparse it as a JavaScript object.\n   *\n   * @param value - The object to serialize\n   * @param options - Optional settings passed to the `stringify` function\n   */\n  export function serialize(value: SerializableTypes, options?: EJSON.Options): Document {\n    options = options || {};\n    return JSON.parse(stringify(value, options));\n  }\n\n  /**\n   * Deserializes an Extended JSON object into a plain JavaScript object with native/BSON types\n   *\n   * @param ejson - The Extended JSON object to deserialize\n   * @param options - Optional settings passed to the parse method\n   */\n  export function deserialize(ejson: Document, options?: EJSON.Options): SerializableTypes {\n    options = options || {};\n    return parse(JSON.stringify(ejson), options);\n  }\n}\n", "/* eslint-disable @typescript-eslint/no-explicit-any */\n// We have an ES6 Map available, return the native instance\n\nimport { getGlobal } from './utils/global';\n\n/** @public */\nlet bsonMap: MapConstructor;\n\nconst bsonGlobal = getGlobal<{ Map?: MapConstructor }>();\nif (bsonGlobal.Map) {\n  bsonMap = bsonGlobal.Map;\n} else {\n  // We will return a polyfill\n  bsonMap = class Map {\n    private _keys: string[];\n    private _values: Record<string, any>;\n    constructor(array: [string, any][] = []) {\n      this._keys = [];\n      this._values = {};\n\n      for (let i = 0; i < array.length; i++) {\n        if (array[i] == null) continue; // skip null and undefined\n        const entry = array[i];\n        const key = entry[0];\n        const value = entry[1];\n        // Add the key to the list of keys in order\n        this._keys.push(key);\n        // Add the key and value to the values dictionary with a point\n        // to the location in the ordered keys list\n        this._values[key] = { v: value, i: this._keys.length - 1 };\n      }\n    }\n    clear() {\n      this._keys = [];\n      this._values = {};\n    }\n    delete(key: string) {\n      const value = this._values[key];\n      if (value == null) return false;\n      // Delete entry\n      delete this._values[key];\n      // Remove the key from the ordered keys list\n      this._keys.splice(value.i, 1);\n      return true;\n    }\n    entries() {\n      let index = 0;\n\n      return {\n        next: () => {\n          const key = this._keys[index++];\n          return {\n            value: key !== undefined ? [key, this._values[key].v] : undefined,\n            done: key !== undefined ? false : true\n          };\n        }\n      };\n    }\n    forEach(callback: (this: this, value: any, key: string, self: this) => void, self?: this) {\n      self = self || this;\n\n      for (let i = 0; i < this._keys.length; i++) {\n        const key = this._keys[i];\n        // Call the forEach callback\n        callback.call(self, this._values[key].v, key, self);\n      }\n    }\n    get(key: string) {\n      return this._values[key] ? this._values[key].v : undefined;\n    }\n    has(key: string) {\n      return this._values[key] != null;\n    }\n    keys() {\n      let index = 0;\n\n      return {\n        next: () => {\n          const key = this._keys[index++];\n          return {\n            value: key !== undefined ? key : undefined,\n            done: key !== undefined ? false : true\n          };\n        }\n      };\n    }\n    set(key: string, value: any) {\n      if (this._values[key]) {\n        this._values[key].v = value;\n        return this;\n      }\n\n      // Add the key to the list of keys in order\n      this._keys.push(key);\n      // Add the key and value to the values dictionary with a point\n      // to the location in the ordered keys list\n      this._values[key] = { v: value, i: this._keys.length - 1 };\n      return this;\n    }\n    values() {\n      let index = 0;\n\n      return {\n        next: () => {\n          const key = this._keys[index++];\n          return {\n            value: key !== undefined ? this._values[key].v : undefined,\n            done: key !== undefined ? false : true\n          };\n        }\n      };\n    }\n    get size() {\n      return this._keys.length;\n    }\n  } as unknown as MapConstructor;\n}\n\nexport { bsonMap as Map };\n", "import { Buffer } from 'buffer';\nimport { Binary } from '../binary';\nimport type { Document } from '../bson';\nimport * as constants from '../constants';\nimport { isAnyArrayBuffer, isDate, isRegExp, normalizedFunctionString } from './utils';\n\nexport function calculateObjectSize(\n  object: Document,\n  serializeFunctions?: boolean,\n  ignoreUndefined?: boolean\n): number {\n  let totalLength = 4 + 1;\n\n  if (Array.isArray(object)) {\n    for (let i = 0; i < object.length; i++) {\n      totalLength += calculateElement(\n        i.toString(),\n        object[i],\n        serializeFunctions,\n        true,\n        ignoreUndefined\n      );\n    }\n  } else {\n    // If we have toBSON defined, override the current object\n\n    if (typeof object?.toBSON === 'function') {\n      object = object.toBSON();\n    }\n\n    // Calculate size\n    for (const key in object) {\n      totalLength += calculateElement(key, object[key], serializeFunctions, false, ignoreUndefined);\n    }\n  }\n\n  return totalLength;\n}\n\n/** @internal */\nfunction calculateElement(\n  name: string,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  value: any,\n  serializeFunctions = false,\n  isArray = false,\n  ignoreUndefined = false\n) {\n  // If we have toBSON defined, override the current object\n  if (typeof value?.toBSON === 'function') {\n    value = value.toBSON();\n  }\n\n  switch (typeof value) {\n    case 'string':\n      return 1 + Buffer.byteLength(name, 'utf8') + 1 + 4 + Buffer.byteLength(value, 'utf8') + 1;\n    case 'number':\n      if (\n        Math.floor(value) === value &&\n        value >= constants.JS_INT_MIN &&\n        value <= constants.JS_INT_MAX\n      ) {\n        if (value >= constants.BSON_INT32_MIN && value <= constants.BSON_INT32_MAX) {\n          // 32 bit\n          return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (4 + 1);\n        } else {\n          return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (8 + 1);\n        }\n      } else {\n        // 64 bit\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (8 + 1);\n      }\n    case 'undefined':\n      if (isArray || !ignoreUndefined)\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + 1;\n      return 0;\n    case 'boolean':\n      return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (1 + 1);\n    case 'object':\n      if (value == null || value['_bsontype'] === 'MinKey' || value['_bsontype'] === 'MaxKey') {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + 1;\n      } else if (value['_bsontype'] === 'ObjectId' || value['_bsontype'] === 'ObjectID') {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (12 + 1);\n      } else if (value instanceof Date || isDate(value)) {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (8 + 1);\n      } else if (\n        ArrayBuffer.isView(value) ||\n        value instanceof ArrayBuffer ||\n        isAnyArrayBuffer(value)\n      ) {\n        return (\n          (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (1 + 4 + 1) + value.byteLength\n        );\n      } else if (\n        value['_bsontype'] === 'Long' ||\n        value['_bsontype'] === 'Double' ||\n        value['_bsontype'] === 'Timestamp'\n      ) {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (8 + 1);\n      } else if (value['_bsontype'] === 'Decimal128') {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (16 + 1);\n      } else if (value['_bsontype'] === 'Code') {\n        // Calculate size depending on the availability of a scope\n        if (value.scope != null && Object.keys(value.scope).length > 0) {\n          return (\n            (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) +\n            1 +\n            4 +\n            4 +\n            Buffer.byteLength(value.code.toString(), 'utf8') +\n            1 +\n            calculateObjectSize(value.scope, serializeFunctions, ignoreUndefined)\n          );\n        } else {\n          return (\n            (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) +\n            1 +\n            4 +\n            Buffer.byteLength(value.code.toString(), 'utf8') +\n            1\n          );\n        }\n      } else if (value['_bsontype'] === 'Binary') {\n        const binary: Binary = value;\n        // Check what kind of subtype we have\n        if (binary.sub_type === Binary.SUBTYPE_BYTE_ARRAY) {\n          return (\n            (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) +\n            (binary.position + 1 + 4 + 1 + 4)\n          );\n        } else {\n          return (\n            (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (binary.position + 1 + 4 + 1)\n          );\n        }\n      } else if (value['_bsontype'] === 'Symbol') {\n        return (\n          (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) +\n          Buffer.byteLength(value.value, 'utf8') +\n          4 +\n          1 +\n          1\n        );\n      } else if (value['_bsontype'] === 'DBRef') {\n        // Set up correct object for serialization\n        const ordered_values = Object.assign(\n          {\n            $ref: value.collection,\n            $id: value.oid\n          },\n          value.fields\n        );\n\n        // Add db reference if it exists\n        if (value.db != null) {\n          ordered_values['$db'] = value.db;\n        }\n\n        return (\n          (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) +\n          1 +\n          calculateObjectSize(ordered_values, serializeFunctions, ignoreUndefined)\n        );\n      } else if (value instanceof RegExp || isRegExp(value)) {\n        return (\n          (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) +\n          1 +\n          Buffer.byteLength(value.source, 'utf8') +\n          1 +\n          (value.global ? 1 : 0) +\n          (value.ignoreCase ? 1 : 0) +\n          (value.multiline ? 1 : 0) +\n          1\n        );\n      } else if (value['_bsontype'] === 'BSONRegExp') {\n        return (\n          (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) +\n          1 +\n          Buffer.byteLength(value.pattern, 'utf8') +\n          1 +\n          Buffer.byteLength(value.options, 'utf8') +\n          1\n        );\n      } else {\n        return (\n          (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) +\n          calculateObjectSize(value, serializeFunctions, ignoreUndefined) +\n          1\n        );\n      }\n    case 'function':\n      // WTF for 0.4.X where typeof /someregexp/ === 'function'\n      if (value instanceof RegExp || isRegExp(value) || String.call(value) === '[object RegExp]') {\n        return (\n          (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) +\n          1 +\n          Buffer.byteLength(value.source, 'utf8') +\n          1 +\n          (value.global ? 1 : 0) +\n          (value.ignoreCase ? 1 : 0) +\n          (value.multiline ? 1 : 0) +\n          1\n        );\n      } else {\n        if (serializeFunctions && value.scope != null && Object.keys(value.scope).length > 0) {\n          return (\n            (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) +\n            1 +\n            4 +\n            4 +\n            Buffer.byteLength(normalizedFunctionString(value), 'utf8') +\n            1 +\n            calculateObjectSize(value.scope, serializeFunctions, ignoreUndefined)\n          );\n        } else if (serializeFunctions) {\n          return (\n            (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) +\n            1 +\n            4 +\n            Buffer.byteLength(normalizedFunctionString(value), 'utf8') +\n            1\n          );\n        }\n      }\n  }\n\n  return 0;\n}\n", "const FIRST_BIT = 0x80;\nconst FIRST_TWO_BITS = 0xc0;\nconst FIRST_THREE_BITS = 0xe0;\nconst FIRST_FOUR_BITS = 0xf0;\nconst FIRST_FIVE_BITS = 0xf8;\n\nconst TWO_BIT_CHAR = 0xc0;\nconst THREE_BIT_CHAR = 0xe0;\nconst FOUR_BIT_CHAR = 0xf0;\nconst CONTINUING_CHAR = 0x80;\n\n/**\n * Determines if the passed in bytes are valid utf8\n * @param bytes - An array of 8-bit bytes. Must be indexable and have length property\n * @param start - The index to start validating\n * @param end - The index to end validating\n */\nexport function validateUtf8(\n  bytes: { [index: number]: number },\n  start: number,\n  end: number\n): boolean {\n  let continuation = 0;\n\n  for (let i = start; i < end; i += 1) {\n    const byte = bytes[i];\n\n    if (continuation) {\n      if ((byte & FIRST_TWO_BITS) !== CONTINUING_CHAR) {\n        return false;\n      }\n      continuation -= 1;\n    } else if (byte & FIRST_BIT) {\n      if ((byte & FIRST_THREE_BITS) === TWO_BIT_CHAR) {\n        continuation = 1;\n      } else if ((byte & FIRST_FOUR_BITS) === THREE_BIT_CHAR) {\n        continuation = 2;\n      } else if ((byte & FIRST_FIVE_BITS) === FOUR_BIT_CHAR) {\n        continuation = 3;\n      } else {\n        return false;\n      }\n    }\n  }\n\n  return !continuation;\n}\n", "import { Buffer } from 'buffer';\nimport { Binary } from '../binary';\nimport type { Document } from '../bson';\nimport { Code } from '../code';\nimport * as constants from '../constants';\nimport { DBRef, DBRefLike, isDBRefLike } from '../db_ref';\nimport { Decimal128 } from '../decimal128';\nimport { Double } from '../double';\nimport { BSONError } from '../error';\nimport { Int32 } from '../int_32';\nimport { Long } from '../long';\nimport { MaxKey } from '../max_key';\nimport { MinKey } from '../min_key';\nimport { ObjectId } from '../objectid';\nimport { BSONRegExp } from '../regexp';\nimport { BSONSymbol } from '../symbol';\nimport { Timestamp } from '../timestamp';\nimport { validateUtf8 } from '../validate_utf8';\n\n/** @public */\nexport interface DeserializeOptions {\n  /** evaluate functions in the BSON document scoped to the object deserialized. */\n  evalFunctions?: boolean;\n  /** cache evaluated functions for reuse. */\n  cacheFunctions?: boolean;\n  /**\n   * use a crc32 code for caching, otherwise use the string of the function.\n   * @deprecated this option to use the crc32 function never worked as intended\n   * due to the fact that the crc32 function itself was never implemented.\n   * */\n  cacheFunctionsCrc32?: boolean;\n  /** when deserializing a Long will fit it into a Number if it's smaller than 53 bits */\n  promoteLongs?: boolean;\n  /** when deserializing a Binary will return it as a node.js Buffer instance. */\n  promoteBuffers?: boolean;\n  /** when deserializing will promote BSON values to their Node.js closest equivalent types. */\n  promoteValues?: boolean;\n  /** allow to specify if there what fields we wish to return as unserialized raw buffer. */\n  fieldsAsRaw?: Document;\n  /** return BSON regular expressions as BSONRegExp instances. */\n  bsonRegExp?: boolean;\n  /** allows the buffer to be larger than the parsed BSON object */\n  allowObjectSmallerThanBufferSize?: boolean;\n  /** Offset into buffer to begin reading document from */\n  index?: number;\n\n  raw?: boolean;\n  /** Allows for opt-out utf-8 validation for all keys or\n   * specified keys. Must be all true or all false.\n   *\n   * @example\n   * ```js\n   * // disables validation on all keys\n   *  validation: { utf8: false }\n   *\n   * // enables validation only on specified keys a, b, and c\n   *  validation: { utf8: { a: true, b: true, c: true } }\n   *\n   *  // disables validation only on specified keys a, b\n   *  validation: { utf8: { a: false, b: false } }\n   * ```\n   */\n  validation?: { utf8: boolean | Record<string, true> | Record<string, false> };\n}\n\n// Internal long versions\nconst JS_INT_MAX_LONG = Long.fromNumber(constants.JS_INT_MAX);\nconst JS_INT_MIN_LONG = Long.fromNumber(constants.JS_INT_MIN);\n\nconst functionCache: { [hash: string]: Function } = {};\n\nexport function deserialize(\n  buffer: Buffer,\n  options: DeserializeOptions,\n  isArray?: boolean\n): Document {\n  options = options == null ? {} : options;\n  const index = options && options.index ? options.index : 0;\n  // Read the document size\n  const size =\n    buffer[index] |\n    (buffer[index + 1] << 8) |\n    (buffer[index + 2] << 16) |\n    (buffer[index + 3] << 24);\n\n  if (size < 5) {\n    throw new BSONError(`bson size must be >= 5, is ${size}`);\n  }\n\n  if (options.allowObjectSmallerThanBufferSize && buffer.length < size) {\n    throw new BSONError(`buffer length ${buffer.length} must be >= bson size ${size}`);\n  }\n\n  if (!options.allowObjectSmallerThanBufferSize && buffer.length !== size) {\n    throw new BSONError(`buffer length ${buffer.length} must === bson size ${size}`);\n  }\n\n  if (size + index > buffer.byteLength) {\n    throw new BSONError(\n      `(bson size ${size} + options.index ${index} must be <= buffer length ${buffer.byteLength})`\n    );\n  }\n\n  // Illegal end value\n  if (buffer[index + size - 1] !== 0) {\n    throw new BSONError(\n      \"One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00\"\n    );\n  }\n\n  // Start deserializtion\n  return deserializeObject(buffer, index, options, isArray);\n}\n\nconst allowedDBRefKeys = /^\\$ref$|^\\$id$|^\\$db$/;\n\nfunction deserializeObject(\n  buffer: Buffer,\n  index: number,\n  options: DeserializeOptions,\n  isArray = false\n) {\n  const evalFunctions = options['evalFunctions'] == null ? false : options['evalFunctions'];\n  const cacheFunctions = options['cacheFunctions'] == null ? false : options['cacheFunctions'];\n\n  const fieldsAsRaw = options['fieldsAsRaw'] == null ? null : options['fieldsAsRaw'];\n\n  // Return raw bson buffer instead of parsing it\n  const raw = options['raw'] == null ? false : options['raw'];\n\n  // Return BSONRegExp objects instead of native regular expressions\n  const bsonRegExp = typeof options['bsonRegExp'] === 'boolean' ? options['bsonRegExp'] : false;\n\n  // Controls the promotion of values vs wrapper classes\n  const promoteBuffers = options['promoteBuffers'] == null ? false : options['promoteBuffers'];\n  const promoteLongs = options['promoteLongs'] == null ? true : options['promoteLongs'];\n  const promoteValues = options['promoteValues'] == null ? true : options['promoteValues'];\n\n  // Ensures default validation option if none given\n  const validation = options.validation == null ? { utf8: true } : options.validation;\n\n  // Shows if global utf-8 validation is enabled or disabled\n  let globalUTFValidation = true;\n  // Reflects utf-8 validation setting regardless of global or specific key validation\n  let validationSetting: boolean;\n  // Set of keys either to enable or disable validation on\n  const utf8KeysSet = new Set();\n\n  // Check for boolean uniformity and empty validation option\n  const utf8ValidatedKeys = validation.utf8;\n  if (typeof utf8ValidatedKeys === 'boolean') {\n    validationSetting = utf8ValidatedKeys;\n  } else {\n    globalUTFValidation = false;\n    const utf8ValidationValues = Object.keys(utf8ValidatedKeys).map(function (key) {\n      return utf8ValidatedKeys[key];\n    });\n    if (utf8ValidationValues.length === 0) {\n      throw new BSONError('UTF-8 validation setting cannot be empty');\n    }\n    if (typeof utf8ValidationValues[0] !== 'boolean') {\n      throw new BSONError('Invalid UTF-8 validation option, must specify boolean values');\n    }\n    validationSetting = utf8ValidationValues[0];\n    // Ensures boolean uniformity in utf-8 validation (all true or all false)\n    if (!utf8ValidationValues.every(item => item === validationSetting)) {\n      throw new BSONError('Invalid UTF-8 validation option - keys must be all true or all false');\n    }\n  }\n\n  // Add keys to set that will either be validated or not based on validationSetting\n  if (!globalUTFValidation) {\n    for (const key of Object.keys(utf8ValidatedKeys)) {\n      utf8KeysSet.add(key);\n    }\n  }\n\n  // Set the start index\n  const startIndex = index;\n\n  // Validate that we have at least 4 bytes of buffer\n  if (buffer.length < 5) throw new BSONError('corrupt bson message < 5 bytes long');\n\n  // Read the document size\n  const size =\n    buffer[index++] | (buffer[index++] << 8) | (buffer[index++] << 16) | (buffer[index++] << 24);\n\n  // Ensure buffer is valid size\n  if (size < 5 || size > buffer.length) throw new BSONError('corrupt bson message');\n\n  // Create holding object\n  const object: Document = isArray ? [] : {};\n  // Used for arrays to skip having to perform utf8 decoding\n  let arrayIndex = 0;\n  const done = false;\n\n  let isPossibleDBRef = isArray ? false : null;\n\n  // While we have more left data left keep parsing\n  const dataview = new DataView(buffer.buffer, buffer.byteOffset, buffer.byteLength);\n  while (!done) {\n    // Read the type\n    const elementType = buffer[index++];\n\n    // If we get a zero it's the last byte, exit\n    if (elementType === 0) break;\n\n    // Get the start search index\n    let i = index;\n    // Locate the end of the c string\n    while (buffer[i] !== 0x00 && i < buffer.length) {\n      i++;\n    }\n\n    // If are at the end of the buffer there is a problem with the document\n    if (i >= buffer.byteLength) throw new BSONError('Bad BSON Document: illegal CString');\n\n    // Represents the key\n    const name = isArray ? arrayIndex++ : buffer.toString('utf8', index, i);\n\n    // shouldValidateKey is true if the key should be validated, false otherwise\n    let shouldValidateKey = true;\n    if (globalUTFValidation || utf8KeysSet.has(name)) {\n      shouldValidateKey = validationSetting;\n    } else {\n      shouldValidateKey = !validationSetting;\n    }\n\n    if (isPossibleDBRef !== false && (name as string)[0] === '$') {\n      isPossibleDBRef = allowedDBRefKeys.test(name as string);\n    }\n    let value;\n\n    index = i + 1;\n\n    if (elementType === constants.BSON_DATA_STRING) {\n      const stringSize =\n        buffer[index++] |\n        (buffer[index++] << 8) |\n        (buffer[index++] << 16) |\n        (buffer[index++] << 24);\n      if (\n        stringSize <= 0 ||\n        stringSize > buffer.length - index ||\n        buffer[index + stringSize - 1] !== 0\n      ) {\n        throw new BSONError('bad string length in bson');\n      }\n      value = getValidatedString(buffer, index, index + stringSize - 1, shouldValidateKey);\n      index = index + stringSize;\n    } else if (elementType === constants.BSON_DATA_OID) {\n      const oid = Buffer.alloc(12);\n      buffer.copy(oid, 0, index, index + 12);\n      value = new ObjectId(oid);\n      index = index + 12;\n    } else if (elementType === constants.BSON_DATA_INT && promoteValues === false) {\n      value = new Int32(\n        buffer[index++] | (buffer[index++] << 8) | (buffer[index++] << 16) | (buffer[index++] << 24)\n      );\n    } else if (elementType === constants.BSON_DATA_INT) {\n      value =\n        buffer[index++] |\n        (buffer[index++] << 8) |\n        (buffer[index++] << 16) |\n        (buffer[index++] << 24);\n    } else if (elementType === constants.BSON_DATA_NUMBER && promoteValues === false) {\n      value = new Double(dataview.getFloat64(index, true));\n      index = index + 8;\n    } else if (elementType === constants.BSON_DATA_NUMBER) {\n      value = dataview.getFloat64(index, true);\n      index = index + 8;\n    } else if (elementType === constants.BSON_DATA_DATE) {\n      const lowBits =\n        buffer[index++] |\n        (buffer[index++] << 8) |\n        (buffer[index++] << 16) |\n        (buffer[index++] << 24);\n      const highBits =\n        buffer[index++] |\n        (buffer[index++] << 8) |\n        (buffer[index++] << 16) |\n        (buffer[index++] << 24);\n      value = new Date(new Long(lowBits, highBits).toNumber());\n    } else if (elementType === constants.BSON_DATA_BOOLEAN) {\n      if (buffer[index] !== 0 && buffer[index] !== 1)\n        throw new BSONError('illegal boolean type value');\n      value = buffer[index++] === 1;\n    } else if (elementType === constants.BSON_DATA_OBJECT) {\n      const _index = index;\n      const objectSize =\n        buffer[index] |\n        (buffer[index + 1] << 8) |\n        (buffer[index + 2] << 16) |\n        (buffer[index + 3] << 24);\n      if (objectSize <= 0 || objectSize > buffer.length - index)\n        throw new BSONError('bad embedded document length in bson');\n\n      // We have a raw value\n      if (raw) {\n        value = buffer.slice(index, index + objectSize);\n      } else {\n        let objectOptions = options;\n        if (!globalUTFValidation) {\n          objectOptions = { ...options, validation: { utf8: shouldValidateKey } };\n        }\n        value = deserializeObject(buffer, _index, objectOptions, false);\n      }\n\n      index = index + objectSize;\n    } else if (elementType === constants.BSON_DATA_ARRAY) {\n      const _index = index;\n      const objectSize =\n        buffer[index] |\n        (buffer[index + 1] << 8) |\n        (buffer[index + 2] << 16) |\n        (buffer[index + 3] << 24);\n      let arrayOptions = options;\n\n      // Stop index\n      const stopIndex = index + objectSize;\n\n      // All elements of array to be returned as raw bson\n      if (fieldsAsRaw && fieldsAsRaw[name]) {\n        arrayOptions = {};\n        for (const n in options) {\n          (\n            arrayOptions as {\n              [key: string]: DeserializeOptions[keyof DeserializeOptions];\n            }\n          )[n] = options[n as keyof DeserializeOptions];\n        }\n        arrayOptions['raw'] = true;\n      }\n      if (!globalUTFValidation) {\n        arrayOptions = { ...arrayOptions, validation: { utf8: shouldValidateKey } };\n      }\n      value = deserializeObject(buffer, _index, arrayOptions, true);\n      index = index + objectSize;\n\n      if (buffer[index - 1] !== 0) throw new BSONError('invalid array terminator byte');\n      if (index !== stopIndex) throw new BSONError('corrupted array bson');\n    } else if (elementType === constants.BSON_DATA_UNDEFINED) {\n      value = undefined;\n    } else if (elementType === constants.BSON_DATA_NULL) {\n      value = null;\n    } else if (elementType === constants.BSON_DATA_LONG) {\n      // Unpack the low and high bits\n      const lowBits =\n        buffer[index++] |\n        (buffer[index++] << 8) |\n        (buffer[index++] << 16) |\n        (buffer[index++] << 24);\n      const highBits =\n        buffer[index++] |\n        (buffer[index++] << 8) |\n        (buffer[index++] << 16) |\n        (buffer[index++] << 24);\n      const long = new Long(lowBits, highBits);\n      // Promote the long if possible\n      if (promoteLongs && promoteValues === true) {\n        value =\n          long.lessThanOrEqual(JS_INT_MAX_LONG) && long.greaterThanOrEqual(JS_INT_MIN_LONG)\n            ? long.toNumber()\n            : long;\n      } else {\n        value = long;\n      }\n    } else if (elementType === constants.BSON_DATA_DECIMAL128) {\n      // Buffer to contain the decimal bytes\n      const bytes = Buffer.alloc(16);\n      // Copy the next 16 bytes into the bytes buffer\n      buffer.copy(bytes, 0, index, index + 16);\n      // Update index\n      index = index + 16;\n      // Assign the new Decimal128 value\n      const decimal128 = new Decimal128(bytes) as Decimal128 | { toObject(): unknown };\n      // If we have an alternative mapper use that\n      if ('toObject' in decimal128 && typeof decimal128.toObject === 'function') {\n        value = decimal128.toObject();\n      } else {\n        value = decimal128;\n      }\n    } else if (elementType === constants.BSON_DATA_BINARY) {\n      let binarySize =\n        buffer[index++] |\n        (buffer[index++] << 8) |\n        (buffer[index++] << 16) |\n        (buffer[index++] << 24);\n      const totalBinarySize = binarySize;\n      const subType = buffer[index++];\n\n      // Did we have a negative binary size, throw\n      if (binarySize < 0) throw new BSONError('Negative binary type element size found');\n\n      // Is the length longer than the document\n      if (binarySize > buffer.byteLength)\n        throw new BSONError('Binary type size larger than document size');\n\n      // Decode as raw Buffer object if options specifies it\n      if (buffer['slice'] != null) {\n        // If we have subtype 2 skip the 4 bytes for the size\n        if (subType === Binary.SUBTYPE_BYTE_ARRAY) {\n          binarySize =\n            buffer[index++] |\n            (buffer[index++] << 8) |\n            (buffer[index++] << 16) |\n            (buffer[index++] << 24);\n          if (binarySize < 0)\n            throw new BSONError('Negative binary type element size found for subtype 0x02');\n          if (binarySize > totalBinarySize - 4)\n            throw new BSONError('Binary type with subtype 0x02 contains too long binary size');\n          if (binarySize < totalBinarySize - 4)\n            throw new BSONError('Binary type with subtype 0x02 contains too short binary size');\n        }\n\n        if (promoteBuffers && promoteValues) {\n          value = buffer.slice(index, index + binarySize);\n        } else {\n          value = new Binary(buffer.slice(index, index + binarySize), subType);\n          if (subType === constants.BSON_BINARY_SUBTYPE_UUID_NEW) {\n            value = value.toUUID();\n          }\n        }\n      } else {\n        const _buffer = Buffer.alloc(binarySize);\n        // If we have subtype 2 skip the 4 bytes for the size\n        if (subType === Binary.SUBTYPE_BYTE_ARRAY) {\n          binarySize =\n            buffer[index++] |\n            (buffer[index++] << 8) |\n            (buffer[index++] << 16) |\n            (buffer[index++] << 24);\n          if (binarySize < 0)\n            throw new BSONError('Negative binary type element size found for subtype 0x02');\n          if (binarySize > totalBinarySize - 4)\n            throw new BSONError('Binary type with subtype 0x02 contains too long binary size');\n          if (binarySize < totalBinarySize - 4)\n            throw new BSONError('Binary type with subtype 0x02 contains too short binary size');\n        }\n\n        // Copy the data\n        for (i = 0; i < binarySize; i++) {\n          _buffer[i] = buffer[index + i];\n        }\n\n        if (promoteBuffers && promoteValues) {\n          value = _buffer;\n        } else if (subType === constants.BSON_BINARY_SUBTYPE_UUID_NEW) {\n          value = new Binary(buffer.slice(index, index + binarySize), subType).toUUID();\n        } else {\n          value = new Binary(buffer.slice(index, index + binarySize), subType);\n        }\n      }\n\n      // Update the index\n      index = index + binarySize;\n    } else if (elementType === constants.BSON_DATA_REGEXP && bsonRegExp === false) {\n      // Get the start search index\n      i = index;\n      // Locate the end of the c string\n      while (buffer[i] !== 0x00 && i < buffer.length) {\n        i++;\n      }\n      // If are at the end of the buffer there is a problem with the document\n      if (i >= buffer.length) throw new BSONError('Bad BSON Document: illegal CString');\n      // Return the C string\n      const source = buffer.toString('utf8', index, i);\n      // Create the regexp\n      index = i + 1;\n\n      // Get the start search index\n      i = index;\n      // Locate the end of the c string\n      while (buffer[i] !== 0x00 && i < buffer.length) {\n        i++;\n      }\n      // If are at the end of the buffer there is a problem with the document\n      if (i >= buffer.length) throw new BSONError('Bad BSON Document: illegal CString');\n      // Return the C string\n      const regExpOptions = buffer.toString('utf8', index, i);\n      index = i + 1;\n\n      // For each option add the corresponding one for javascript\n      const optionsArray = new Array(regExpOptions.length);\n\n      // Parse options\n      for (i = 0; i < regExpOptions.length; i++) {\n        switch (regExpOptions[i]) {\n          case 'm':\n            optionsArray[i] = 'm';\n            break;\n          case 's':\n            optionsArray[i] = 'g';\n            break;\n          case 'i':\n            optionsArray[i] = 'i';\n            break;\n        }\n      }\n\n      value = new RegExp(source, optionsArray.join(''));\n    } else if (elementType === constants.BSON_DATA_REGEXP && bsonRegExp === true) {\n      // Get the start search index\n      i = index;\n      // Locate the end of the c string\n      while (buffer[i] !== 0x00 && i < buffer.length) {\n        i++;\n      }\n      // If are at the end of the buffer there is a problem with the document\n      if (i >= buffer.length) throw new BSONError('Bad BSON Document: illegal CString');\n      // Return the C string\n      const source = buffer.toString('utf8', index, i);\n      index = i + 1;\n\n      // Get the start search index\n      i = index;\n      // Locate the end of the c string\n      while (buffer[i] !== 0x00 && i < buffer.length) {\n        i++;\n      }\n      // If are at the end of the buffer there is a problem with the document\n      if (i >= buffer.length) throw new BSONError('Bad BSON Document: illegal CString');\n      // Return the C string\n      const regExpOptions = buffer.toString('utf8', index, i);\n      index = i + 1;\n\n      // Set the object\n      value = new BSONRegExp(source, regExpOptions);\n    } else if (elementType === constants.BSON_DATA_SYMBOL) {\n      const stringSize =\n        buffer[index++] |\n        (buffer[index++] << 8) |\n        (buffer[index++] << 16) |\n        (buffer[index++] << 24);\n      if (\n        stringSize <= 0 ||\n        stringSize > buffer.length - index ||\n        buffer[index + stringSize - 1] !== 0\n      ) {\n        throw new BSONError('bad string length in bson');\n      }\n      const symbol = getValidatedString(buffer, index, index + stringSize - 1, shouldValidateKey);\n      value = promoteValues ? symbol : new BSONSymbol(symbol);\n      index = index + stringSize;\n    } else if (elementType === constants.BSON_DATA_TIMESTAMP) {\n      const lowBits =\n        buffer[index++] |\n        (buffer[index++] << 8) |\n        (buffer[index++] << 16) |\n        (buffer[index++] << 24);\n      const highBits =\n        buffer[index++] |\n        (buffer[index++] << 8) |\n        (buffer[index++] << 16) |\n        (buffer[index++] << 24);\n\n      value = new Timestamp(lowBits, highBits);\n    } else if (elementType === constants.BSON_DATA_MIN_KEY) {\n      value = new MinKey();\n    } else if (elementType === constants.BSON_DATA_MAX_KEY) {\n      value = new MaxKey();\n    } else if (elementType === constants.BSON_DATA_CODE) {\n      const stringSize =\n        buffer[index++] |\n        (buffer[index++] << 8) |\n        (buffer[index++] << 16) |\n        (buffer[index++] << 24);\n      if (\n        stringSize <= 0 ||\n        stringSize > buffer.length - index ||\n        buffer[index + stringSize - 1] !== 0\n      ) {\n        throw new BSONError('bad string length in bson');\n      }\n      const functionString = getValidatedString(\n        buffer,\n        index,\n        index + stringSize - 1,\n        shouldValidateKey\n      );\n\n      // If we are evaluating the functions\n      if (evalFunctions) {\n        // If we have cache enabled let's look for the md5 of the function in the cache\n        if (cacheFunctions) {\n          // Got to do this to avoid V8 deoptimizing the call due to finding eval\n          value = isolateEval(functionString, functionCache, object);\n        } else {\n          value = isolateEval(functionString);\n        }\n      } else {\n        value = new Code(functionString);\n      }\n\n      // Update parse index position\n      index = index + stringSize;\n    } else if (elementType === constants.BSON_DATA_CODE_W_SCOPE) {\n      const totalSize =\n        buffer[index++] |\n        (buffer[index++] << 8) |\n        (buffer[index++] << 16) |\n        (buffer[index++] << 24);\n\n      // Element cannot be shorter than totalSize + stringSize + documentSize + terminator\n      if (totalSize < 4 + 4 + 4 + 1) {\n        throw new BSONError('code_w_scope total size shorter minimum expected length');\n      }\n\n      // Get the code string size\n      const stringSize =\n        buffer[index++] |\n        (buffer[index++] << 8) |\n        (buffer[index++] << 16) |\n        (buffer[index++] << 24);\n      // Check if we have a valid string\n      if (\n        stringSize <= 0 ||\n        stringSize > buffer.length - index ||\n        buffer[index + stringSize - 1] !== 0\n      ) {\n        throw new BSONError('bad string length in bson');\n      }\n\n      // Javascript function\n      const functionString = getValidatedString(\n        buffer,\n        index,\n        index + stringSize - 1,\n        shouldValidateKey\n      );\n      // Update parse index position\n      index = index + stringSize;\n      // Parse the element\n      const _index = index;\n      // Decode the size of the object document\n      const objectSize =\n        buffer[index] |\n        (buffer[index + 1] << 8) |\n        (buffer[index + 2] << 16) |\n        (buffer[index + 3] << 24);\n      // Decode the scope object\n      const scopeObject = deserializeObject(buffer, _index, options, false);\n      // Adjust the index\n      index = index + objectSize;\n\n      // Check if field length is too short\n      if (totalSize < 4 + 4 + objectSize + stringSize) {\n        throw new BSONError('code_w_scope total size is too short, truncating scope');\n      }\n\n      // Check if totalSize field is too long\n      if (totalSize > 4 + 4 + objectSize + stringSize) {\n        throw new BSONError('code_w_scope total size is too long, clips outer document');\n      }\n\n      // If we are evaluating the functions\n      if (evalFunctions) {\n        // If we have cache enabled let's look for the md5 of the function in the cache\n        if (cacheFunctions) {\n          // Got to do this to avoid V8 deoptimizing the call due to finding eval\n          value = isolateEval(functionString, functionCache, object);\n        } else {\n          value = isolateEval(functionString);\n        }\n\n        value.scope = scopeObject;\n      } else {\n        value = new Code(functionString, scopeObject);\n      }\n    } else if (elementType === constants.BSON_DATA_DBPOINTER) {\n      // Get the code string size\n      const stringSize =\n        buffer[index++] |\n        (buffer[index++] << 8) |\n        (buffer[index++] << 16) |\n        (buffer[index++] << 24);\n      // Check if we have a valid string\n      if (\n        stringSize <= 0 ||\n        stringSize > buffer.length - index ||\n        buffer[index + stringSize - 1] !== 0\n      )\n        throw new BSONError('bad string length in bson');\n      // Namespace\n      if (validation != null && validation.utf8) {\n        if (!validateUtf8(buffer, index, index + stringSize - 1)) {\n          throw new BSONError('Invalid UTF-8 string in BSON document');\n        }\n      }\n      const namespace = buffer.toString('utf8', index, index + stringSize - 1);\n      // Update parse index position\n      index = index + stringSize;\n\n      // Read the oid\n      const oidBuffer = Buffer.alloc(12);\n      buffer.copy(oidBuffer, 0, index, index + 12);\n      const oid = new ObjectId(oidBuffer);\n\n      // Update the index\n      index = index + 12;\n\n      // Upgrade to DBRef type\n      value = new DBRef(namespace, oid);\n    } else {\n      throw new BSONError(\n        `Detected unknown BSON type ${elementType.toString(16)} for fieldname \"${name}\"`\n      );\n    }\n    if (name === '__proto__') {\n      Object.defineProperty(object, name, {\n        value,\n        writable: true,\n        enumerable: true,\n        configurable: true\n      });\n    } else {\n      object[name] = value;\n    }\n  }\n\n  // Check if the deserialization was against a valid array/object\n  if (size !== index - startIndex) {\n    if (isArray) throw new BSONError('corrupt array bson');\n    throw new BSONError('corrupt object bson');\n  }\n\n  // if we did not find \"$ref\", \"$id\", \"$db\", or found an extraneous $key, don't make a DBRef\n  if (!isPossibleDBRef) return object;\n\n  if (isDBRefLike(object)) {\n    const copy = Object.assign({}, object) as Partial<DBRefLike>;\n    delete copy.$ref;\n    delete copy.$id;\n    delete copy.$db;\n    return new DBRef(object.$ref, object.$id, object.$db, copy);\n  }\n\n  return object;\n}\n\n/**\n * Ensure eval is isolated, store the result in functionCache.\n *\n * @internal\n */\nfunction isolateEval(\n  functionString: string,\n  functionCache?: { [hash: string]: Function },\n  object?: Document\n) {\n  // eslint-disable-next-line @typescript-eslint/no-implied-eval\n  if (!functionCache) return new Function(functionString);\n  // Check for cache hit, eval if missing and return cached function\n  if (functionCache[functionString] == null) {\n    // eslint-disable-next-line @typescript-eslint/no-implied-eval\n    functionCache[functionString] = new Function(functionString);\n  }\n\n  // Set the object\n  return functionCache[functionString].bind(object);\n}\n\nfunction getValidatedString(\n  buffer: Buffer,\n  start: number,\n  end: number,\n  shouldValidateUtf8: boolean\n) {\n  const value = buffer.toString('utf8', start, end);\n  // if utf8 validation is on, do the check\n  if (shouldValidateUtf8) {\n    for (let i = 0; i < value.length; i++) {\n      if (value.charCodeAt(i) === 0xfffd) {\n        if (!validateUtf8(buffer, start, end)) {\n          throw new BSONError('Invalid UTF-8 string in BSON document');\n        }\n        break;\n      }\n    }\n  }\n  return value;\n}\n", "import type { Buffer } from 'buffer';\nimport { Binary } from '../binary';\nimport type { BSONSymbol, DBRef, Document, MaxKey } from '../bson';\nimport type { Code } from '../code';\nimport * as constants from '../constants';\nimport type { DBRefLike } from '../db_ref';\nimport type { Decimal128 } from '../decimal128';\nimport type { Double } from '../double';\nimport { ensureBuffer } from '../ensure_buffer';\nimport { BSONError, BSONTypeError } from '../error';\nimport { isBSONType } from '../extended_json';\nimport type { Int32 } from '../int_32';\nimport { Long } from '../long';\nimport { Map } from '../map';\nimport type { MinKey } from '../min_key';\nimport type { ObjectId } from '../objectid';\nimport type { BSONRegExp } from '../regexp';\nimport {\n  isBigInt64Array,\n  isBigUInt64Array,\n  isDate,\n  isMap,\n  isRegExp,\n  isUint8Array,\n  normalizedFunctionString\n} from './utils';\n\n/** @public */\nexport interface SerializeOptions {\n  /** the serializer will check if keys are valid. */\n  checkKeys?: boolean;\n  /** serialize the javascript functions **(default:false)**. */\n  serializeFunctions?: boolean;\n  /** serialize will not emit undefined fields **(default:true)** */\n  ignoreUndefined?: boolean;\n  /** @internal Resize internal buffer */\n  minInternalBufferSize?: number;\n  /** the index in the buffer where we wish to start serializing into */\n  index?: number;\n}\n\nconst regexp = /\\x00/; // eslint-disable-line no-control-regex\nconst ignoreKeys = new Set(['$db', '$ref', '$id', '$clusterTime']);\n\n/*\n * isArray indicates if we are writing to a BSON array (type 0x04)\n * which forces the \"key\" which really an array index as a string to be written as ascii\n * This will catch any errors in index as a string generation\n */\n\nfunction serializeString(\n  buffer: Buffer,\n  key: string,\n  value: string,\n  index: number,\n  isArray?: boolean\n) {\n  // Encode String type\n  buffer[index++] = constants.BSON_DATA_STRING;\n  // Number of written bytes\n  const numberOfWrittenBytes = !isArray\n    ? buffer.write(key, index, undefined, 'utf8')\n    : buffer.write(key, index, undefined, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes + 1;\n  buffer[index - 1] = 0;\n  // Write the string\n  const size = buffer.write(value, index + 4, undefined, 'utf8');\n  // Write the size of the string to buffer\n  buffer[index + 3] = ((size + 1) >> 24) & 0xff;\n  buffer[index + 2] = ((size + 1) >> 16) & 0xff;\n  buffer[index + 1] = ((size + 1) >> 8) & 0xff;\n  buffer[index] = (size + 1) & 0xff;\n  // Update index\n  index = index + 4 + size;\n  // Write zero\n  buffer[index++] = 0;\n  return index;\n}\n\nconst SPACE_FOR_FLOAT64 = new Uint8Array(8);\nconst DV_FOR_FLOAT64 = new DataView(\n  SPACE_FOR_FLOAT64.buffer,\n  SPACE_FOR_FLOAT64.byteOffset,\n  SPACE_FOR_FLOAT64.byteLength\n);\nfunction serializeNumber(\n  buffer: Buffer,\n  key: string,\n  value: number,\n  index: number,\n  isArray?: boolean\n) {\n  // We have an integer value\n  // TODO(NODE-2529): Add support for big int\n  if (\n    Number.isInteger(value) &&\n    value >= constants.BSON_INT32_MIN &&\n    value <= constants.BSON_INT32_MAX\n  ) {\n    // If the value fits in 32 bits encode as int32\n    // Set int type 32 bits or less\n    buffer[index++] = constants.BSON_DATA_INT;\n    // Number of written bytes\n    const numberOfWrittenBytes = !isArray\n      ? buffer.write(key, index, undefined, 'utf8')\n      : buffer.write(key, index, undefined, 'ascii');\n    // Encode the name\n    index = index + numberOfWrittenBytes;\n    buffer[index++] = 0;\n    // Write the int value\n    buffer[index++] = value & 0xff;\n    buffer[index++] = (value >> 8) & 0xff;\n    buffer[index++] = (value >> 16) & 0xff;\n    buffer[index++] = (value >> 24) & 0xff;\n  } else {\n    // Encode as double\n    buffer[index++] = constants.BSON_DATA_NUMBER;\n    // Number of written bytes\n    const numberOfWrittenBytes = !isArray\n      ? buffer.write(key, index, undefined, 'utf8')\n      : buffer.write(key, index, undefined, 'ascii');\n    // Encode the name\n    index = index + numberOfWrittenBytes;\n    buffer[index++] = 0;\n    // Write float\n    DV_FOR_FLOAT64.setFloat64(0, value, true);\n    buffer.set(SPACE_FOR_FLOAT64, index);\n    // Adjust index\n    index = index + 8;\n  }\n\n  return index;\n}\n\nfunction serializeNull(buffer: Buffer, key: string, _: unknown, index: number, isArray?: boolean) {\n  // Set long type\n  buffer[index++] = constants.BSON_DATA_NULL;\n\n  // Number of written bytes\n  const numberOfWrittenBytes = !isArray\n    ? buffer.write(key, index, undefined, 'utf8')\n    : buffer.write(key, index, undefined, 'ascii');\n\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n  return index;\n}\n\nfunction serializeBoolean(\n  buffer: Buffer,\n  key: string,\n  value: boolean,\n  index: number,\n  isArray?: boolean\n) {\n  // Write the type\n  buffer[index++] = constants.BSON_DATA_BOOLEAN;\n  // Number of written bytes\n  const numberOfWrittenBytes = !isArray\n    ? buffer.write(key, index, undefined, 'utf8')\n    : buffer.write(key, index, undefined, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n  // Encode the boolean value\n  buffer[index++] = value ? 1 : 0;\n  return index;\n}\n\nfunction serializeDate(buffer: Buffer, key: string, value: Date, index: number, isArray?: boolean) {\n  // Write the type\n  buffer[index++] = constants.BSON_DATA_DATE;\n  // Number of written bytes\n  const numberOfWrittenBytes = !isArray\n    ? buffer.write(key, index, undefined, 'utf8')\n    : buffer.write(key, index, undefined, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n\n  // Write the date\n  const dateInMilis = Long.fromNumber(value.getTime());\n  const lowBits = dateInMilis.getLowBits();\n  const highBits = dateInMilis.getHighBits();\n  // Encode low bits\n  buffer[index++] = lowBits & 0xff;\n  buffer[index++] = (lowBits >> 8) & 0xff;\n  buffer[index++] = (lowBits >> 16) & 0xff;\n  buffer[index++] = (lowBits >> 24) & 0xff;\n  // Encode high bits\n  buffer[index++] = highBits & 0xff;\n  buffer[index++] = (highBits >> 8) & 0xff;\n  buffer[index++] = (highBits >> 16) & 0xff;\n  buffer[index++] = (highBits >> 24) & 0xff;\n  return index;\n}\n\nfunction serializeRegExp(\n  buffer: Buffer,\n  key: string,\n  value: RegExp,\n  index: number,\n  isArray?: boolean\n) {\n  // Write the type\n  buffer[index++] = constants.BSON_DATA_REGEXP;\n  // Number of written bytes\n  const numberOfWrittenBytes = !isArray\n    ? buffer.write(key, index, undefined, 'utf8')\n    : buffer.write(key, index, undefined, 'ascii');\n\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n  if (value.source && value.source.match(regexp) != null) {\n    throw Error('value ' + value.source + ' must not contain null bytes');\n  }\n  // Adjust the index\n  index = index + buffer.write(value.source, index, undefined, 'utf8');\n  // Write zero\n  buffer[index++] = 0x00;\n  // Write the parameters\n  if (value.ignoreCase) buffer[index++] = 0x69; // i\n  if (value.global) buffer[index++] = 0x73; // s\n  if (value.multiline) buffer[index++] = 0x6d; // m\n\n  // Add ending zero\n  buffer[index++] = 0x00;\n  return index;\n}\n\nfunction serializeBSONRegExp(\n  buffer: Buffer,\n  key: string,\n  value: BSONRegExp,\n  index: number,\n  isArray?: boolean\n) {\n  // Write the type\n  buffer[index++] = constants.BSON_DATA_REGEXP;\n  // Number of written bytes\n  const numberOfWrittenBytes = !isArray\n    ? buffer.write(key, index, undefined, 'utf8')\n    : buffer.write(key, index, undefined, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n\n  // Check the pattern for 0 bytes\n  if (value.pattern.match(regexp) != null) {\n    // The BSON spec doesn't allow keys with null bytes because keys are\n    // null-terminated.\n    throw Error('pattern ' + value.pattern + ' must not contain null bytes');\n  }\n\n  // Adjust the index\n  index = index + buffer.write(value.pattern, index, undefined, 'utf8');\n  // Write zero\n  buffer[index++] = 0x00;\n  // Write the options\n  index = index + buffer.write(value.options.split('').sort().join(''), index, undefined, 'utf8');\n  // Add ending zero\n  buffer[index++] = 0x00;\n  return index;\n}\n\nfunction serializeMinMax(\n  buffer: Buffer,\n  key: string,\n  value: MinKey | MaxKey,\n  index: number,\n  isArray?: boolean\n) {\n  // Write the type of either min or max key\n  if (value === null) {\n    buffer[index++] = constants.BSON_DATA_NULL;\n  } else if (value._bsontype === 'MinKey') {\n    buffer[index++] = constants.BSON_DATA_MIN_KEY;\n  } else {\n    buffer[index++] = constants.BSON_DATA_MAX_KEY;\n  }\n\n  // Number of written bytes\n  const numberOfWrittenBytes = !isArray\n    ? buffer.write(key, index, undefined, 'utf8')\n    : buffer.write(key, index, undefined, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n  return index;\n}\n\nfunction serializeObjectId(\n  buffer: Buffer,\n  key: string,\n  value: ObjectId,\n  index: number,\n  isArray?: boolean\n) {\n  // Write the type\n  buffer[index++] = constants.BSON_DATA_OID;\n  // Number of written bytes\n  const numberOfWrittenBytes = !isArray\n    ? buffer.write(key, index, undefined, 'utf8')\n    : buffer.write(key, index, undefined, 'ascii');\n\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n\n  // Write the objectId into the shared buffer\n  if (typeof value.id === 'string') {\n    buffer.write(value.id, index, undefined, 'binary');\n  } else if (isUint8Array(value.id)) {\n    // Use the standard JS methods here because buffer.copy() is buggy with the\n    // browser polyfill\n    buffer.set(value.id.subarray(0, 12), index);\n  } else {\n    throw new BSONTypeError('object [' + JSON.stringify(value) + '] is not a valid ObjectId');\n  }\n\n  // Adjust index\n  return index + 12;\n}\n\nfunction serializeBuffer(\n  buffer: Buffer,\n  key: string,\n  value: Buffer | Uint8Array,\n  index: number,\n  isArray?: boolean\n) {\n  // Write the type\n  buffer[index++] = constants.BSON_DATA_BINARY;\n  // Number of written bytes\n  const numberOfWrittenBytes = !isArray\n    ? buffer.write(key, index, undefined, 'utf8')\n    : buffer.write(key, index, undefined, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n  // Get size of the buffer (current write point)\n  const size = value.length;\n  // Write the size of the string to buffer\n  buffer[index++] = size & 0xff;\n  buffer[index++] = (size >> 8) & 0xff;\n  buffer[index++] = (size >> 16) & 0xff;\n  buffer[index++] = (size >> 24) & 0xff;\n  // Write the default subtype\n  buffer[index++] = constants.BSON_BINARY_SUBTYPE_DEFAULT;\n  // Copy the content form the binary field to the buffer\n  buffer.set(ensureBuffer(value), index);\n  // Adjust the index\n  index = index + size;\n  return index;\n}\n\nfunction serializeObject(\n  buffer: Buffer,\n  key: string,\n  value: Document,\n  index: number,\n  checkKeys = false,\n  depth = 0,\n  serializeFunctions = false,\n  ignoreUndefined = true,\n  isArray = false,\n  path: Document[] = []\n) {\n  for (let i = 0; i < path.length; i++) {\n    if (path[i] === value) throw new BSONError('cyclic dependency detected');\n  }\n\n  // Push value to stack\n  path.push(value);\n  // Write the type\n  buffer[index++] = Array.isArray(value) ? constants.BSON_DATA_ARRAY : constants.BSON_DATA_OBJECT;\n  // Number of written bytes\n  const numberOfWrittenBytes = !isArray\n    ? buffer.write(key, index, undefined, 'utf8')\n    : buffer.write(key, index, undefined, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n  const endIndex = serializeInto(\n    buffer,\n    value,\n    checkKeys,\n    index,\n    depth + 1,\n    serializeFunctions,\n    ignoreUndefined,\n    path\n  );\n  // Pop stack\n  path.pop();\n  return endIndex;\n}\n\nfunction serializeDecimal128(\n  buffer: Buffer,\n  key: string,\n  value: Decimal128,\n  index: number,\n  isArray?: boolean\n) {\n  buffer[index++] = constants.BSON_DATA_DECIMAL128;\n  // Number of written bytes\n  const numberOfWrittenBytes = !isArray\n    ? buffer.write(key, index, undefined, 'utf8')\n    : buffer.write(key, index, undefined, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n  // Write the data from the value\n  // Prefer the standard JS methods because their typechecking is not buggy,\n  // unlike the `buffer` polyfill's.\n  buffer.set(value.bytes.subarray(0, 16), index);\n  return index + 16;\n}\n\nfunction serializeLong(buffer: Buffer, key: string, value: Long, index: number, isArray?: boolean) {\n  // Write the type\n  buffer[index++] =\n    value._bsontype === 'Long' ? constants.BSON_DATA_LONG : constants.BSON_DATA_TIMESTAMP;\n  // Number of written bytes\n  const numberOfWrittenBytes = !isArray\n    ? buffer.write(key, index, undefined, 'utf8')\n    : buffer.write(key, index, undefined, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n  // Write the date\n  const lowBits = value.getLowBits();\n  const highBits = value.getHighBits();\n  // Encode low bits\n  buffer[index++] = lowBits & 0xff;\n  buffer[index++] = (lowBits >> 8) & 0xff;\n  buffer[index++] = (lowBits >> 16) & 0xff;\n  buffer[index++] = (lowBits >> 24) & 0xff;\n  // Encode high bits\n  buffer[index++] = highBits & 0xff;\n  buffer[index++] = (highBits >> 8) & 0xff;\n  buffer[index++] = (highBits >> 16) & 0xff;\n  buffer[index++] = (highBits >> 24) & 0xff;\n  return index;\n}\n\nfunction serializeInt32(\n  buffer: Buffer,\n  key: string,\n  value: Int32 | number,\n  index: number,\n  isArray?: boolean\n) {\n  value = value.valueOf();\n  // Set int type 32 bits or less\n  buffer[index++] = constants.BSON_DATA_INT;\n  // Number of written bytes\n  const numberOfWrittenBytes = !isArray\n    ? buffer.write(key, index, undefined, 'utf8')\n    : buffer.write(key, index, undefined, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n  // Write the int value\n  buffer[index++] = value & 0xff;\n  buffer[index++] = (value >> 8) & 0xff;\n  buffer[index++] = (value >> 16) & 0xff;\n  buffer[index++] = (value >> 24) & 0xff;\n  return index;\n}\n\nfunction serializeDouble(\n  buffer: Buffer,\n  key: string,\n  value: Double,\n  index: number,\n  isArray?: boolean\n) {\n  // Encode as double\n  buffer[index++] = constants.BSON_DATA_NUMBER;\n\n  // Number of written bytes\n  const numberOfWrittenBytes = !isArray\n    ? buffer.write(key, index, undefined, 'utf8')\n    : buffer.write(key, index, undefined, 'ascii');\n\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n\n  // Write float\n  DV_FOR_FLOAT64.setFloat64(0, value.value, true);\n  buffer.set(SPACE_FOR_FLOAT64, index);\n\n  // Adjust index\n  index = index + 8;\n  return index;\n}\n\nfunction serializeFunction(\n  buffer: Buffer,\n  key: string,\n  value: Function,\n  index: number,\n  _checkKeys = false,\n  _depth = 0,\n  isArray?: boolean\n) {\n  buffer[index++] = constants.BSON_DATA_CODE;\n  // Number of written bytes\n  const numberOfWrittenBytes = !isArray\n    ? buffer.write(key, index, undefined, 'utf8')\n    : buffer.write(key, index, undefined, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n  // Function string\n  const functionString = normalizedFunctionString(value);\n\n  // Write the string\n  const size = buffer.write(functionString, index + 4, undefined, 'utf8') + 1;\n  // Write the size of the string to buffer\n  buffer[index] = size & 0xff;\n  buffer[index + 1] = (size >> 8) & 0xff;\n  buffer[index + 2] = (size >> 16) & 0xff;\n  buffer[index + 3] = (size >> 24) & 0xff;\n  // Update index\n  index = index + 4 + size - 1;\n  // Write zero\n  buffer[index++] = 0;\n  return index;\n}\n\nfunction serializeCode(\n  buffer: Buffer,\n  key: string,\n  value: Code,\n  index: number,\n  checkKeys = false,\n  depth = 0,\n  serializeFunctions = false,\n  ignoreUndefined = true,\n  isArray = false\n) {\n  if (value.scope && typeof value.scope === 'object') {\n    // Write the type\n    buffer[index++] = constants.BSON_DATA_CODE_W_SCOPE;\n    // Number of written bytes\n    const numberOfWrittenBytes = !isArray\n      ? buffer.write(key, index, undefined, 'utf8')\n      : buffer.write(key, index, undefined, 'ascii');\n    // Encode the name\n    index = index + numberOfWrittenBytes;\n    buffer[index++] = 0;\n\n    // Starting index\n    let startIndex = index;\n\n    // Serialize the function\n    // Get the function string\n    const functionString = typeof value.code === 'string' ? value.code : value.code.toString();\n    // Index adjustment\n    index = index + 4;\n    // Write string into buffer\n    const codeSize = buffer.write(functionString, index + 4, undefined, 'utf8') + 1;\n    // Write the size of the string to buffer\n    buffer[index] = codeSize & 0xff;\n    buffer[index + 1] = (codeSize >> 8) & 0xff;\n    buffer[index + 2] = (codeSize >> 16) & 0xff;\n    buffer[index + 3] = (codeSize >> 24) & 0xff;\n    // Write end 0\n    buffer[index + 4 + codeSize - 1] = 0;\n    // Write the\n    index = index + codeSize + 4;\n\n    //\n    // Serialize the scope value\n    const endIndex = serializeInto(\n      buffer,\n      value.scope,\n      checkKeys,\n      index,\n      depth + 1,\n      serializeFunctions,\n      ignoreUndefined\n    );\n    index = endIndex - 1;\n\n    // Writ the total\n    const totalSize = endIndex - startIndex;\n\n    // Write the total size of the object\n    buffer[startIndex++] = totalSize & 0xff;\n    buffer[startIndex++] = (totalSize >> 8) & 0xff;\n    buffer[startIndex++] = (totalSize >> 16) & 0xff;\n    buffer[startIndex++] = (totalSize >> 24) & 0xff;\n    // Write trailing zero\n    buffer[index++] = 0;\n  } else {\n    buffer[index++] = constants.BSON_DATA_CODE;\n    // Number of written bytes\n    const numberOfWrittenBytes = !isArray\n      ? buffer.write(key, index, undefined, 'utf8')\n      : buffer.write(key, index, undefined, 'ascii');\n    // Encode the name\n    index = index + numberOfWrittenBytes;\n    buffer[index++] = 0;\n    // Function string\n    const functionString = value.code.toString();\n    // Write the string\n    const size = buffer.write(functionString, index + 4, undefined, 'utf8') + 1;\n    // Write the size of the string to buffer\n    buffer[index] = size & 0xff;\n    buffer[index + 1] = (size >> 8) & 0xff;\n    buffer[index + 2] = (size >> 16) & 0xff;\n    buffer[index + 3] = (size >> 24) & 0xff;\n    // Update index\n    index = index + 4 + size - 1;\n    // Write zero\n    buffer[index++] = 0;\n  }\n\n  return index;\n}\n\nfunction serializeBinary(\n  buffer: Buffer,\n  key: string,\n  value: Binary,\n  index: number,\n  isArray?: boolean\n) {\n  // Write the type\n  buffer[index++] = constants.BSON_DATA_BINARY;\n  // Number of written bytes\n  const numberOfWrittenBytes = !isArray\n    ? buffer.write(key, index, undefined, 'utf8')\n    : buffer.write(key, index, undefined, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n  // Extract the buffer\n  const data = value.value(true) as Buffer | Uint8Array;\n  // Calculate size\n  let size = value.position;\n  // Add the deprecated 02 type 4 bytes of size to total\n  if (value.sub_type === Binary.SUBTYPE_BYTE_ARRAY) size = size + 4;\n  // Write the size of the string to buffer\n  buffer[index++] = size & 0xff;\n  buffer[index++] = (size >> 8) & 0xff;\n  buffer[index++] = (size >> 16) & 0xff;\n  buffer[index++] = (size >> 24) & 0xff;\n  // Write the subtype to the buffer\n  buffer[index++] = value.sub_type;\n\n  // If we have binary type 2 the 4 first bytes are the size\n  if (value.sub_type === Binary.SUBTYPE_BYTE_ARRAY) {\n    size = size - 4;\n    buffer[index++] = size & 0xff;\n    buffer[index++] = (size >> 8) & 0xff;\n    buffer[index++] = (size >> 16) & 0xff;\n    buffer[index++] = (size >> 24) & 0xff;\n  }\n\n  // Write the data to the object\n  buffer.set(data, index);\n  // Adjust the index\n  index = index + value.position;\n  return index;\n}\n\nfunction serializeSymbol(\n  buffer: Buffer,\n  key: string,\n  value: BSONSymbol,\n  index: number,\n  isArray?: boolean\n) {\n  // Write the type\n  buffer[index++] = constants.BSON_DATA_SYMBOL;\n  // Number of written bytes\n  const numberOfWrittenBytes = !isArray\n    ? buffer.write(key, index, undefined, 'utf8')\n    : buffer.write(key, index, undefined, 'ascii');\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n  // Write the string\n  const size = buffer.write(value.value, index + 4, undefined, 'utf8') + 1;\n  // Write the size of the string to buffer\n  buffer[index] = size & 0xff;\n  buffer[index + 1] = (size >> 8) & 0xff;\n  buffer[index + 2] = (size >> 16) & 0xff;\n  buffer[index + 3] = (size >> 24) & 0xff;\n  // Update index\n  index = index + 4 + size - 1;\n  // Write zero\n  buffer[index++] = 0x00;\n  return index;\n}\n\nfunction serializeDBRef(\n  buffer: Buffer,\n  key: string,\n  value: DBRef,\n  index: number,\n  depth: number,\n  serializeFunctions: boolean,\n  isArray?: boolean\n) {\n  // Write the type\n  buffer[index++] = constants.BSON_DATA_OBJECT;\n  // Number of written bytes\n  const numberOfWrittenBytes = !isArray\n    ? buffer.write(key, index, undefined, 'utf8')\n    : buffer.write(key, index, undefined, 'ascii');\n\n  // Encode the name\n  index = index + numberOfWrittenBytes;\n  buffer[index++] = 0;\n\n  let startIndex = index;\n  let output: DBRefLike = {\n    $ref: value.collection || value.namespace, // \"namespace\" was what library 1.x called \"collection\"\n    $id: value.oid\n  };\n\n  if (value.db != null) {\n    output.$db = value.db;\n  }\n\n  output = Object.assign(output, value.fields);\n  const endIndex = serializeInto(buffer, output, false, index, depth + 1, serializeFunctions);\n\n  // Calculate object size\n  const size = endIndex - startIndex;\n  // Write the size\n  buffer[startIndex++] = size & 0xff;\n  buffer[startIndex++] = (size >> 8) & 0xff;\n  buffer[startIndex++] = (size >> 16) & 0xff;\n  buffer[startIndex++] = (size >> 24) & 0xff;\n  // Set index\n  return endIndex;\n}\n\nexport function serializeInto(\n  buffer: Buffer,\n  object: Document,\n  checkKeys = false,\n  startingIndex = 0,\n  depth = 0,\n  serializeFunctions = false,\n  ignoreUndefined = true,\n  path: Document[] = []\n): number {\n  startingIndex = startingIndex || 0;\n  path = path || [];\n\n  // Push the object to the path\n  path.push(object);\n\n  // Start place to serialize into\n  let index = startingIndex + 4;\n\n  // Special case isArray\n  if (Array.isArray(object)) {\n    // Get object keys\n    for (let i = 0; i < object.length; i++) {\n      const key = `${i}`;\n      let value = object[i];\n\n      // Is there an override value\n      if (typeof value?.toBSON === 'function') {\n        value = value.toBSON();\n      }\n\n      if (typeof value === 'string') {\n        index = serializeString(buffer, key, value, index, true);\n      } else if (typeof value === 'number') {\n        index = serializeNumber(buffer, key, value, index, true);\n      } else if (typeof value === 'bigint') {\n        throw new BSONTypeError('Unsupported type BigInt, please use Decimal128');\n      } else if (typeof value === 'boolean') {\n        index = serializeBoolean(buffer, key, value, index, true);\n      } else if (value instanceof Date || isDate(value)) {\n        index = serializeDate(buffer, key, value, index, true);\n      } else if (value === undefined) {\n        index = serializeNull(buffer, key, value, index, true);\n      } else if (value === null) {\n        index = serializeNull(buffer, key, value, index, true);\n      } else if (value['_bsontype'] === 'ObjectId' || value['_bsontype'] === 'ObjectID') {\n        index = serializeObjectId(buffer, key, value, index, true);\n      } else if (isUint8Array(value)) {\n        index = serializeBuffer(buffer, key, value, index, true);\n      } else if (value instanceof RegExp || isRegExp(value)) {\n        index = serializeRegExp(buffer, key, value, index, true);\n      } else if (typeof value === 'object' && value['_bsontype'] == null) {\n        index = serializeObject(\n          buffer,\n          key,\n          value,\n          index,\n          checkKeys,\n          depth,\n          serializeFunctions,\n          ignoreUndefined,\n          true,\n          path\n        );\n      } else if (\n        typeof value === 'object' &&\n        isBSONType(value) &&\n        value._bsontype === 'Decimal128'\n      ) {\n        index = serializeDecimal128(buffer, key, value, index, true);\n      } else if (value['_bsontype'] === 'Long' || value['_bsontype'] === 'Timestamp') {\n        index = serializeLong(buffer, key, value, index, true);\n      } else if (value['_bsontype'] === 'Double') {\n        index = serializeDouble(buffer, key, value, index, true);\n      } else if (typeof value === 'function' && serializeFunctions) {\n        index = serializeFunction(buffer, key, value, index, checkKeys, depth, true);\n      } else if (value['_bsontype'] === 'Code') {\n        index = serializeCode(\n          buffer,\n          key,\n          value,\n          index,\n          checkKeys,\n          depth,\n          serializeFunctions,\n          ignoreUndefined,\n          true\n        );\n      } else if (value['_bsontype'] === 'Binary') {\n        index = serializeBinary(buffer, key, value, index, true);\n      } else if (value['_bsontype'] === 'Symbol') {\n        index = serializeSymbol(buffer, key, value, index, true);\n      } else if (value['_bsontype'] === 'DBRef') {\n        index = serializeDBRef(buffer, key, value, index, depth, serializeFunctions, true);\n      } else if (value['_bsontype'] === 'BSONRegExp') {\n        index = serializeBSONRegExp(buffer, key, value, index, true);\n      } else if (value['_bsontype'] === 'Int32') {\n        index = serializeInt32(buffer, key, value, index, true);\n      } else if (value['_bsontype'] === 'MinKey' || value['_bsontype'] === 'MaxKey') {\n        index = serializeMinMax(buffer, key, value, index, true);\n      } else if (typeof value['_bsontype'] !== 'undefined') {\n        throw new BSONTypeError(`Unrecognized or invalid _bsontype: ${String(value['_bsontype'])}`);\n      }\n    }\n  } else if (object instanceof Map || isMap(object)) {\n    const iterator = object.entries();\n    let done = false;\n\n    while (!done) {\n      // Unpack the next entry\n      const entry = iterator.next();\n      done = !!entry.done;\n      // Are we done, then skip and terminate\n      if (done) continue;\n\n      // Get the entry values\n      const key = entry.value[0];\n      const value = entry.value[1];\n\n      // Check the type of the value\n      const type = typeof value;\n\n      // Check the key and throw error if it's illegal\n      if (typeof key === 'string' && !ignoreKeys.has(key)) {\n        if (key.match(regexp) != null) {\n          // The BSON spec doesn't allow keys with null bytes because keys are\n          // null-terminated.\n          throw Error('key ' + key + ' must not contain null bytes');\n        }\n\n        if (checkKeys) {\n          if ('$' === key[0]) {\n            throw Error('key ' + key + \" must not start with '$'\");\n          } else if (~key.indexOf('.')) {\n            throw Error('key ' + key + \" must not contain '.'\");\n          }\n        }\n      }\n\n      if (type === 'string') {\n        index = serializeString(buffer, key, value, index);\n      } else if (type === 'number') {\n        index = serializeNumber(buffer, key, value, index);\n      } else if (type === 'bigint' || isBigInt64Array(value) || isBigUInt64Array(value)) {\n        throw new BSONTypeError('Unsupported type BigInt, please use Decimal128');\n      } else if (type === 'boolean') {\n        index = serializeBoolean(buffer, key, value, index);\n      } else if (value instanceof Date || isDate(value)) {\n        index = serializeDate(buffer, key, value, index);\n      } else if (value === null || (value === undefined && ignoreUndefined === false)) {\n        index = serializeNull(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'ObjectId' || value['_bsontype'] === 'ObjectID') {\n        index = serializeObjectId(buffer, key, value, index);\n      } else if (isUint8Array(value)) {\n        index = serializeBuffer(buffer, key, value, index);\n      } else if (value instanceof RegExp || isRegExp(value)) {\n        index = serializeRegExp(buffer, key, value, index);\n      } else if (type === 'object' && value['_bsontype'] == null) {\n        index = serializeObject(\n          buffer,\n          key,\n          value,\n          index,\n          checkKeys,\n          depth,\n          serializeFunctions,\n          ignoreUndefined,\n          false,\n          path\n        );\n      } else if (type === 'object' && value['_bsontype'] === 'Decimal128') {\n        index = serializeDecimal128(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'Long' || value['_bsontype'] === 'Timestamp') {\n        index = serializeLong(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'Double') {\n        index = serializeDouble(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'Code') {\n        index = serializeCode(\n          buffer,\n          key,\n          value,\n          index,\n          checkKeys,\n          depth,\n          serializeFunctions,\n          ignoreUndefined\n        );\n      } else if (typeof value === 'function' && serializeFunctions) {\n        index = serializeFunction(buffer, key, value, index, checkKeys, depth, serializeFunctions);\n      } else if (value['_bsontype'] === 'Binary') {\n        index = serializeBinary(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'Symbol') {\n        index = serializeSymbol(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'DBRef') {\n        index = serializeDBRef(buffer, key, value, index, depth, serializeFunctions);\n      } else if (value['_bsontype'] === 'BSONRegExp') {\n        index = serializeBSONRegExp(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'Int32') {\n        index = serializeInt32(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'MinKey' || value['_bsontype'] === 'MaxKey') {\n        index = serializeMinMax(buffer, key, value, index);\n      } else if (typeof value['_bsontype'] !== 'undefined') {\n        throw new BSONTypeError(`Unrecognized or invalid _bsontype: ${String(value['_bsontype'])}`);\n      }\n    }\n  } else {\n    if (typeof object?.toBSON === 'function') {\n      // Provided a custom serialization method\n      object = object.toBSON();\n      if (object != null && typeof object !== 'object') {\n        throw new BSONTypeError('toBSON function did not return an object');\n      }\n    }\n\n    // Iterate over all the keys\n    for (const key in object) {\n      let value = object[key];\n      // Is there an override value\n      if (typeof value?.toBSON === 'function') {\n        value = value.toBSON();\n      }\n\n      // Check the type of the value\n      const type = typeof value;\n\n      // Check the key and throw error if it's illegal\n      if (typeof key === 'string' && !ignoreKeys.has(key)) {\n        if (key.match(regexp) != null) {\n          // The BSON spec doesn't allow keys with null bytes because keys are\n          // null-terminated.\n          throw Error('key ' + key + ' must not contain null bytes');\n        }\n\n        if (checkKeys) {\n          if ('$' === key[0]) {\n            throw Error('key ' + key + \" must not start with '$'\");\n          } else if (~key.indexOf('.')) {\n            throw Error('key ' + key + \" must not contain '.'\");\n          }\n        }\n      }\n\n      if (type === 'string') {\n        index = serializeString(buffer, key, value, index);\n      } else if (type === 'number') {\n        index = serializeNumber(buffer, key, value, index);\n      } else if (type === 'bigint') {\n        throw new BSONTypeError('Unsupported type BigInt, please use Decimal128');\n      } else if (type === 'boolean') {\n        index = serializeBoolean(buffer, key, value, index);\n      } else if (value instanceof Date || isDate(value)) {\n        index = serializeDate(buffer, key, value, index);\n      } else if (value === undefined) {\n        if (ignoreUndefined === false) index = serializeNull(buffer, key, value, index);\n      } else if (value === null) {\n        index = serializeNull(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'ObjectId' || value['_bsontype'] === 'ObjectID') {\n        index = serializeObjectId(buffer, key, value, index);\n      } else if (isUint8Array(value)) {\n        index = serializeBuffer(buffer, key, value, index);\n      } else if (value instanceof RegExp || isRegExp(value)) {\n        index = serializeRegExp(buffer, key, value, index);\n      } else if (type === 'object' && value['_bsontype'] == null) {\n        index = serializeObject(\n          buffer,\n          key,\n          value,\n          index,\n          checkKeys,\n          depth,\n          serializeFunctions,\n          ignoreUndefined,\n          false,\n          path\n        );\n      } else if (type === 'object' && value['_bsontype'] === 'Decimal128') {\n        index = serializeDecimal128(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'Long' || value['_bsontype'] === 'Timestamp') {\n        index = serializeLong(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'Double') {\n        index = serializeDouble(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'Code') {\n        index = serializeCode(\n          buffer,\n          key,\n          value,\n          index,\n          checkKeys,\n          depth,\n          serializeFunctions,\n          ignoreUndefined\n        );\n      } else if (typeof value === 'function' && serializeFunctions) {\n        index = serializeFunction(buffer, key, value, index, checkKeys, depth, serializeFunctions);\n      } else if (value['_bsontype'] === 'Binary') {\n        index = serializeBinary(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'Symbol') {\n        index = serializeSymbol(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'DBRef') {\n        index = serializeDBRef(buffer, key, value, index, depth, serializeFunctions);\n      } else if (value['_bsontype'] === 'BSONRegExp') {\n        index = serializeBSONRegExp(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'Int32') {\n        index = serializeInt32(buffer, key, value, index);\n      } else if (value['_bsontype'] === 'MinKey' || value['_bsontype'] === 'MaxKey') {\n        index = serializeMinMax(buffer, key, value, index);\n      } else if (typeof value['_bsontype'] !== 'undefined') {\n        throw new BSONTypeError(`Unrecognized or invalid _bsontype: ${String(value['_bsontype'])}`);\n      }\n    }\n  }\n\n  // Remove the path\n  path.pop();\n\n  // Final padding byte for object\n  buffer[index++] = 0x00;\n\n  // Final size\n  const size = index - startingIndex;\n  // Write the size of the object\n  buffer[startingIndex++] = size & 0xff;\n  buffer[startingIndex++] = (size >> 8) & 0xff;\n  buffer[startingIndex++] = (size >> 16) & 0xff;\n  buffer[startingIndex++] = (size >> 24) & 0xff;\n  return index;\n}\n", "import { Buffer } from 'buffer';\nimport { Binary, UUID } from './binary';\nimport { Code } from './code';\nimport { DBRef } from './db_ref';\nimport { Decimal128 } from './decimal128';\nimport { Double } from './double';\nimport { ensureBuffer } from './ensure_buffer';\nimport { EJSON } from './extended_json';\nimport { Int32 } from './int_32';\nimport { Long } from './long';\nimport { Map } from './map';\nimport { MaxKey } from './max_key';\nimport { MinKey } from './min_key';\nimport { ObjectId } from './objectid';\nimport { BSONError, BSONTypeError } from './error';\nimport { calculateObjectSize as internalCalculateObjectSize } from './parser/calculate_size';\n// Parts of the parser\nimport { deserialize as internalDeserialize, DeserializeOptions } from './parser/deserializer';\nimport { serializeInto as internalSerialize, SerializeOptions } from './parser/serializer';\nimport { BSONRegExp } from './regexp';\nimport { BSONSymbol } from './symbol';\nimport { Timestamp } from './timestamp';\nexport type { UUIDExtended, BinaryExtended, BinaryExtendedLegacy, BinarySequence } from './binary';\nexport type { CodeExtended } from './code';\nexport {\n  BSON_BINARY_SUBTYPE_BYTE_ARRAY,\n  BSON_BINARY_SUBTYPE_DEFAULT,\n  BSON_BINARY_SUBTYPE_FUNCTION,\n  BSON_BINARY_SUBTYPE_MD5,\n  BSON_BINARY_SUBTYPE_USER_DEFINED,\n  BSON_BINARY_SUBTYPE_UUID,\n  BSON_BINARY_SUBTYPE_UUID_NEW,\n  BSON_BINARY_SUBTYPE_ENCRYPTED,\n  BSON_BINARY_SUBTYPE_COLUMN,\n  BSON_DATA_ARRAY,\n  BSON_DATA_BINARY,\n  BSON_DATA_BOOLEAN,\n  BSON_DATA_CODE,\n  BSON_DATA_CODE_W_SCOPE,\n  BSON_DATA_DATE,\n  BSON_DATA_DBPOINTER,\n  BSON_DATA_DECIMAL128,\n  BSON_DATA_INT,\n  BSON_DATA_LONG,\n  BSON_DATA_MAX_KEY,\n  BSON_DATA_MIN_KEY,\n  BSON_DATA_NULL,\n  BSON_DATA_NUMBER,\n  BSON_DATA_OBJECT,\n  BSON_DATA_OID,\n  BSON_DATA_REGEXP,\n  BSON_DATA_STRING,\n  BSON_DATA_SYMBOL,\n  BSON_DATA_TIMESTAMP,\n  BSON_DATA_UNDEFINED,\n  BSON_INT32_MAX,\n  BSON_INT32_MIN,\n  BSON_INT64_MAX,\n  BSON_INT64_MIN\n} from './constants';\nexport type { DBRefLike } from './db_ref';\nexport type { Decimal128Extended } from './decimal128';\nexport type { DoubleExtended } from './double';\nexport type { EJSONOptions } from './extended_json';\nexport { EJSON } from './extended_json';\nexport type { Int32Extended } from './int_32';\nexport type { LongExtended } from './long';\nexport type { MaxKeyExtended } from './max_key';\nexport type { MinKeyExtended } from './min_key';\nexport type { ObjectIdExtended, ObjectIdLike } from './objectid';\nexport type { BSONRegExpExtended, BSONRegExpExtendedLegacy } from './regexp';\nexport type { BSONSymbolExtended } from './symbol';\nexport type { LongWithoutOverrides, TimestampExtended, TimestampOverrides } from './timestamp';\nexport { LongWithoutOverridesClass } from './timestamp';\nexport type { SerializeOptions, DeserializeOptions };\nexport {\n  Code,\n  Map,\n  BSONSymbol,\n  DBRef,\n  Binary,\n  ObjectId,\n  UUID,\n  Long,\n  Timestamp,\n  Double,\n  Int32,\n  MinKey,\n  MaxKey,\n  BSONRegExp,\n  Decimal128,\n  // In 4.0.0 and 4.0.1, this property name was changed to ObjectId to match the class name.\n  // This caused interoperability problems with previous versions of the library, so in\n  // later builds we changed it back to ObjectID (capital D) to match legacy implementations.\n  ObjectId as ObjectID\n};\nexport { BSONError, BSONTypeError } from './error';\n\n/** @public */\nexport interface Document {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  [key: string]: any;\n}\n\n/** @internal */\n// Default Max Size\nconst MAXSIZE = 1024 * 1024 * 17;\n\n// Current Internal Temporary Serialization Buffer\nlet buffer = Buffer.alloc(MAXSIZE);\n\n/**\n * Sets the size of the internal serialization buffer.\n *\n * @param size - The desired size for the internal serialization buffer\n * @public\n */\nexport function setInternalBufferSize(size: number): void {\n  // Resize the internal serialization buffer if needed\n  if (buffer.length < size) {\n    buffer = Buffer.alloc(size);\n  }\n}\n\n/**\n * Serialize a Javascript object.\n *\n * @param object - the Javascript object to serialize.\n * @returns Buffer object containing the serialized object.\n * @public\n */\nexport function serialize(object: Document, options: SerializeOptions = {}): Buffer {\n  // Unpack the options\n  const checkKeys = typeof options.checkKeys === 'boolean' ? options.checkKeys : false;\n  const serializeFunctions =\n    typeof options.serializeFunctions === 'boolean' ? options.serializeFunctions : false;\n  const ignoreUndefined =\n    typeof options.ignoreUndefined === 'boolean' ? options.ignoreUndefined : true;\n  const minInternalBufferSize =\n    typeof options.minInternalBufferSize === 'number' ? options.minInternalBufferSize : MAXSIZE;\n\n  // Resize the internal serialization buffer if needed\n  if (buffer.length < minInternalBufferSize) {\n    buffer = Buffer.alloc(minInternalBufferSize);\n  }\n\n  // Attempt to serialize\n  const serializationIndex = internalSerialize(\n    buffer,\n    object,\n    checkKeys,\n    0,\n    0,\n    serializeFunctions,\n    ignoreUndefined,\n    []\n  );\n\n  // Create the final buffer\n  const finishedBuffer = Buffer.alloc(serializationIndex);\n\n  // Copy into the finished buffer\n  buffer.copy(finishedBuffer, 0, 0, finishedBuffer.length);\n\n  // Return the buffer\n  return finishedBuffer;\n}\n\n/**\n * Serialize a Javascript object using a predefined Buffer and index into the buffer,\n * useful when pre-allocating the space for serialization.\n *\n * @param object - the Javascript object to serialize.\n * @param finalBuffer - the Buffer you pre-allocated to store the serialized BSON object.\n * @returns the index pointing to the last written byte in the buffer.\n * @public\n */\nexport function serializeWithBufferAndIndex(\n  object: Document,\n  finalBuffer: Buffer,\n  options: SerializeOptions = {}\n): number {\n  // Unpack the options\n  const checkKeys = typeof options.checkKeys === 'boolean' ? options.checkKeys : false;\n  const serializeFunctions =\n    typeof options.serializeFunctions === 'boolean' ? options.serializeFunctions : false;\n  const ignoreUndefined =\n    typeof options.ignoreUndefined === 'boolean' ? options.ignoreUndefined : true;\n  const startIndex = typeof options.index === 'number' ? options.index : 0;\n\n  // Attempt to serialize\n  const serializationIndex = internalSerialize(\n    buffer,\n    object,\n    checkKeys,\n    0,\n    0,\n    serializeFunctions,\n    ignoreUndefined\n  );\n  buffer.copy(finalBuffer, startIndex, 0, serializationIndex);\n\n  // Return the index\n  return startIndex + serializationIndex - 1;\n}\n\n/**\n * Deserialize data as BSON.\n *\n * @param buffer - the buffer containing the serialized set of BSON documents.\n * @returns returns the deserialized Javascript Object.\n * @public\n */\nexport function deserialize(\n  buffer: Buffer | ArrayBufferView | ArrayBuffer,\n  options: DeserializeOptions = {}\n): Document {\n  return internalDeserialize(buffer instanceof Buffer ? buffer : ensureBuffer(buffer), options);\n}\n\n/** @public */\nexport type CalculateObjectSizeOptions = Pick<\n  SerializeOptions,\n  'serializeFunctions' | 'ignoreUndefined'\n>;\n\n/**\n * Calculate the bson size for a passed in Javascript object.\n *\n * @param object - the Javascript object to calculate the BSON byte size for\n * @returns size of BSON object in bytes\n * @public\n */\nexport function calculateObjectSize(\n  object: Document,\n  options: CalculateObjectSizeOptions = {}\n): number {\n  options = options || {};\n\n  const serializeFunctions =\n    typeof options.serializeFunctions === 'boolean' ? options.serializeFunctions : false;\n  const ignoreUndefined =\n    typeof options.ignoreUndefined === 'boolean' ? options.ignoreUndefined : true;\n\n  return internalCalculateObjectSize(object, serializeFunctions, ignoreUndefined);\n}\n\n/**\n * Deserialize stream data as BSON documents.\n *\n * @param data - the buffer containing the serialized set of BSON documents.\n * @param startIndex - the start index in the data Buffer where the deserialization is to start.\n * @param numberOfDocuments - number of documents to deserialize.\n * @param documents - an array where to store the deserialized documents.\n * @param docStartIndex - the index in the documents array from where to start inserting documents.\n * @param options - additional options used for the deserialization.\n * @returns next index in the buffer after deserialization **x** numbers of documents.\n * @public\n */\nexport function deserializeStream(\n  data: Buffer | ArrayBufferView | ArrayBuffer,\n  startIndex: number,\n  numberOfDocuments: number,\n  documents: Document[],\n  docStartIndex: number,\n  options: DeserializeOptions\n): number {\n  const internalOptions = Object.assign(\n    { allowObjectSmallerThanBufferSize: true, index: 0 },\n    options\n  );\n  const bufferData = ensureBuffer(data);\n\n  let index = startIndex;\n  // Loop over all documents\n  for (let i = 0; i < numberOfDocuments; i++) {\n    // Find size of the document\n    const size =\n      bufferData[index] |\n      (bufferData[index + 1] << 8) |\n      (bufferData[index + 2] << 16) |\n      (bufferData[index + 3] << 24);\n    // Update options with index\n    internalOptions.index = index;\n    // Parse the document at this point\n    documents[docStartIndex + i] = internalDeserialize(bufferData, internalOptions);\n    // Adjust index by the document size\n    index = index + size;\n  }\n\n  // Return object containing end index of parsing and list of documents\n  return index;\n}\n\n/**\n * BSON default export\n * @deprecated Please use named exports\n * @privateRemarks\n * We want to someday deprecate the default export,\n * so none of the new TS types are being exported on the default\n * @public\n */\nconst BSON = {\n  Binary,\n  Code,\n  DBRef,\n  Decimal128,\n  Double,\n  Int32,\n  Long,\n  UUID,\n  Map,\n  MaxKey,\n  MinKey,\n  ObjectId,\n  ObjectID: ObjectId,\n  BSONRegExp,\n  BSONSymbol,\n  Timestamp,\n  EJSON,\n  setInternalBufferSize,\n  serialize,\n  serializeWithBufferAndIndex,\n  deserialize,\n  calculateObjectSize,\n  deserializeStream,\n  BSONError,\n  BSONTypeError\n};\nexport default BSON;\n", "var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { Db } from './index';\nimport { EJSON } from 'bson';\nimport { QuerySerializer } from './serializer/query';\nimport { Point } from './geo';\nvar Aggregation = (function () {\n    function Aggregation(db, collectionName) {\n        this._stages = [];\n        if (db && collectionName) {\n            this._db = db;\n            this._request = Db.createRequest(this._db.config);\n            this._collectionName = collectionName;\n        }\n    }\n    Aggregation.prototype.end = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var result;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this._collectionName || !this._db) {\n                            throw new Error('Aggregation pipeline cannot send request');\n                        }\n                        return [4, this._request.send('database.aggregate', {\n                                collectionName: this._collectionName,\n                                stages: this._stages\n                            })];\n                    case 1:\n                        result = _a.sent();\n                        if (result && result.data && result.data.list) {\n                            return [2, {\n                                    requestId: result.requestId,\n                                    data: JSON.parse(result.data.list).map(EJSON.parse)\n                                }];\n                        }\n                        return [2, result];\n                }\n            });\n        });\n    };\n    Aggregation.prototype.unwrap = function () {\n        return this._stages;\n    };\n    Aggregation.prototype.done = function () {\n        return this._stages.map(function (_a) {\n            var _b;\n            var stageKey = _a.stageKey, stageValue = _a.stageValue;\n            return _b = {},\n                _b[stageKey] = JSON.parse(stageValue),\n                _b;\n        });\n    };\n    Aggregation.prototype._pipe = function (stage, param) {\n        this._stages.push({\n            stageKey: \"$\".concat(stage),\n            stageValue: JSON.stringify(param)\n        });\n        return this;\n    };\n    Aggregation.prototype.addFields = function (param) {\n        return this._pipe('addFields', param);\n    };\n    Aggregation.prototype.bucket = function (param) {\n        return this._pipe('bucket', param);\n    };\n    Aggregation.prototype.bucketAuto = function (param) {\n        return this._pipe('bucketAuto', param);\n    };\n    Aggregation.prototype.count = function (param) {\n        return this._pipe('count', param);\n    };\n    Aggregation.prototype.geoNear = function (param) {\n        if (param.query) {\n            param.query = QuerySerializer.encode(param.query);\n        }\n        if (param.distanceMultiplier && typeof (param.distanceMultiplier) === 'number') {\n            param.distanceMultiplier = param.distanceMultiplier;\n        }\n        if (param.near) {\n            param.near = new Point(param.near.longitude, param.near.latitude).toJSON();\n        }\n        return this._pipe('geoNear', param);\n    };\n    Aggregation.prototype.group = function (param) {\n        return this._pipe('group', param);\n    };\n    Aggregation.prototype.limit = function (param) {\n        return this._pipe('limit', param);\n    };\n    Aggregation.prototype.match = function (param) {\n        return this._pipe('match', QuerySerializer.encode(param));\n    };\n    Aggregation.prototype.project = function (param) {\n        return this._pipe('project', param);\n    };\n    Aggregation.prototype.lookup = function (param) {\n        return this._pipe('lookup', param);\n    };\n    Aggregation.prototype.replaceRoot = function (param) {\n        return this._pipe('replaceRoot', param);\n    };\n    Aggregation.prototype.sample = function (param) {\n        return this._pipe('sample', param);\n    };\n    Aggregation.prototype.skip = function (param) {\n        return this._pipe('skip', param);\n    };\n    Aggregation.prototype.sort = function (param) {\n        return this._pipe('sort', param);\n    };\n    Aggregation.prototype.sortByCount = function (param) {\n        return this._pipe('sortByCount', param);\n    };\n    Aggregation.prototype.unwind = function (param) {\n        return this._pipe('unwind', param);\n    };\n    return Aggregation;\n}());\nexport default Aggregation;\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { DocumentReference } from './document';\nimport { Query } from './query';\nimport Aggregation from './aggregate';\nvar CollectionReference = (function (_super) {\n    __extends(CollectionReference, _super);\n    function CollectionReference(db, coll) {\n        return _super.call(this, db, coll) || this;\n    }\n    Object.defineProperty(CollectionReference.prototype, \"name\", {\n        get: function () {\n            return this._coll;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CollectionReference.prototype.doc = function (docID) {\n        if (typeof docID !== 'string' && typeof docID !== 'number') {\n            throw new Error('docId必须为字符串或数字');\n        }\n        return new DocumentReference(this._db, this._coll, docID);\n    };\n    CollectionReference.prototype.add = function (data, callback) {\n        var docRef = new DocumentReference(this._db, this._coll, undefined);\n        return docRef.create(data, callback);\n    };\n    CollectionReference.prototype.aggregate = function () {\n        return new Aggregation(this._db, this._coll);\n    };\n    return CollectionReference;\n}(Query));\nexport { CollectionReference };\n", "import { QueryCommand, QUERY_COMMANDS_LITERAL } from './commands/query';\nimport { LogicCommand, LOGIC_COMMANDS_LITERAL } from './commands/logic';\nimport { UpdateCommand, UPDATE_COMMANDS_LITERAL } from './commands/update';\nimport { isArray, isObject, isString } from './utils/type';\nimport Aggregation from './aggregate';\nexport var Command = {\n    eq: function (val) {\n        return new QueryCommand(QUERY_COMMANDS_LITERAL.EQ, [val]);\n    },\n    neq: function (val) {\n        return new QueryCommand(QUERY_COMMANDS_LITERAL.NEQ, [val]);\n    },\n    lt: function (val) {\n        return new QueryCommand(QUERY_COMMANDS_LITERAL.LT, [val]);\n    },\n    lte: function (val) {\n        return new QueryCommand(QUERY_COMMANDS_LITERAL.LTE, [val]);\n    },\n    gt: function (val) {\n        return new QueryCommand(QUERY_COMMANDS_LITERAL.GT, [val]);\n    },\n    gte: function (val) {\n        return new QueryCommand(QUERY_COMMANDS_LITERAL.GTE, [val]);\n    },\n    in: function (val) {\n        return new QueryCommand(QUERY_COMMANDS_LITERAL.IN, val);\n    },\n    nin: function (val) {\n        return new QueryCommand(QUERY_COMMANDS_LITERAL.NIN, val);\n    },\n    all: function (val) {\n        return new QueryCommand(QUERY_COMMANDS_LITERAL.ALL, val);\n    },\n    elemMatch: function (val) {\n        return new QueryCommand(QUERY_COMMANDS_LITERAL.ELEM_MATCH, [val]);\n    },\n    exists: function (val) {\n        return new QueryCommand(QUERY_COMMANDS_LITERAL.EXISTS, [val]);\n    },\n    size: function (val) {\n        return new QueryCommand(QUERY_COMMANDS_LITERAL.SIZE, [val]);\n    },\n    mod: function (val) {\n        return new QueryCommand(QUERY_COMMANDS_LITERAL.MOD, [val]);\n    },\n    geoNear: function (val) {\n        return new QueryCommand(QUERY_COMMANDS_LITERAL.GEO_NEAR, [val]);\n    },\n    geoWithin: function (val) {\n        return new QueryCommand(QUERY_COMMANDS_LITERAL.GEO_WITHIN, [val]);\n    },\n    geoIntersects: function (val) {\n        return new QueryCommand(QUERY_COMMANDS_LITERAL.GEO_INTERSECTS, [val]);\n    },\n    and: function () {\n        var __expressions__ = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            __expressions__[_i] = arguments[_i];\n        }\n        var expressions = isArray(arguments[0]) ? arguments[0] : Array.from(arguments);\n        return new LogicCommand(LOGIC_COMMANDS_LITERAL.AND, expressions);\n    },\n    nor: function () {\n        var __expressions__ = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            __expressions__[_i] = arguments[_i];\n        }\n        var expressions = isArray(arguments[0]) ? arguments[0] : Array.from(arguments);\n        return new LogicCommand(LOGIC_COMMANDS_LITERAL.NOR, expressions);\n    },\n    or: function () {\n        var __expressions__ = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            __expressions__[_i] = arguments[_i];\n        }\n        var expressions = isArray(arguments[0]) ? arguments[0] : Array.from(arguments);\n        return new LogicCommand(LOGIC_COMMANDS_LITERAL.OR, expressions);\n    },\n    not: function () {\n        var __expressions__ = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            __expressions__[_i] = arguments[_i];\n        }\n        var expressions = isArray(arguments[0]) ? arguments[0] : Array.from(arguments);\n        return new LogicCommand(LOGIC_COMMANDS_LITERAL.NOT, expressions);\n    },\n    set: function (val) {\n        return new UpdateCommand(UPDATE_COMMANDS_LITERAL.SET, [val]);\n    },\n    remove: function () {\n        return new UpdateCommand(UPDATE_COMMANDS_LITERAL.REMOVE, []);\n    },\n    inc: function (val) {\n        return new UpdateCommand(UPDATE_COMMANDS_LITERAL.INC, [val]);\n    },\n    mul: function (val) {\n        return new UpdateCommand(UPDATE_COMMANDS_LITERAL.MUL, [val]);\n    },\n    push: function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var values;\n        if (isObject(args[0]) && args[0].hasOwnProperty('each')) {\n            var options = args[0];\n            values = {\n                $each: options.each,\n                $position: options.position,\n                $sort: options.sort,\n                $slice: options.slice\n            };\n        }\n        else if (isArray(args[0])) {\n            values = args[0];\n        }\n        else {\n            values = Array.from(args);\n        }\n        return new UpdateCommand(UPDATE_COMMANDS_LITERAL.PUSH, values);\n    },\n    pull: function (values) {\n        return new UpdateCommand(UPDATE_COMMANDS_LITERAL.PULL, values);\n    },\n    pullAll: function (values) {\n        return new UpdateCommand(UPDATE_COMMANDS_LITERAL.PULL_ALL, values);\n    },\n    pop: function () {\n        return new UpdateCommand(UPDATE_COMMANDS_LITERAL.POP, []);\n    },\n    shift: function () {\n        return new UpdateCommand(UPDATE_COMMANDS_LITERAL.SHIFT, []);\n    },\n    unshift: function () {\n        var __values__ = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            __values__[_i] = arguments[_i];\n        }\n        var values = isArray(arguments[0]) ? arguments[0] : Array.from(arguments);\n        return new UpdateCommand(UPDATE_COMMANDS_LITERAL.UNSHIFT, values);\n    },\n    addToSet: function (values) {\n        return new UpdateCommand(UPDATE_COMMANDS_LITERAL.ADD_TO_SET, values);\n    },\n    rename: function (values) {\n        return new UpdateCommand(UPDATE_COMMANDS_LITERAL.RENAME, [values]);\n    },\n    bit: function (values) {\n        return new UpdateCommand(UPDATE_COMMANDS_LITERAL.BIT, [values]);\n    },\n    max: function (values) {\n        return new UpdateCommand(UPDATE_COMMANDS_LITERAL.MAX, [values]);\n    },\n    min: function (values) {\n        return new UpdateCommand(UPDATE_COMMANDS_LITERAL.MIN, [values]);\n    },\n    expr: function (values) {\n        return {\n            $expr: values\n        };\n    },\n    jsonSchema: function (schema) {\n        return {\n            $jsonSchema: schema\n        };\n    },\n    text: function (values) {\n        if (isString(values)) {\n            return {\n                $search: values.search\n            };\n        }\n        else {\n            return {\n                $search: values.search,\n                $language: values.language,\n                $caseSensitive: values.caseSensitive,\n                $diacriticSensitive: values.diacriticSensitive\n            };\n        }\n    },\n    aggregate: {\n        pipeline: function () {\n            return new Aggregation();\n        },\n        abs: function (param) { return new AggregationOperator('abs', param); },\n        add: function (param) { return new AggregationOperator('add', param); },\n        ceil: function (param) { return new AggregationOperator('ceil', param); },\n        divide: function (param) { return new AggregationOperator('divide', param); },\n        exp: function (param) { return new AggregationOperator('exp', param); },\n        floor: function (param) { return new AggregationOperator('floor', param); },\n        ln: function (param) { return new AggregationOperator('ln', param); },\n        log: function (param) { return new AggregationOperator('log', param); },\n        log10: function (param) { return new AggregationOperator('log10', param); },\n        mod: function (param) { return new AggregationOperator('mod', param); },\n        multiply: function (param) { return new AggregationOperator('multiply', param); },\n        pow: function (param) { return new AggregationOperator('pow', param); },\n        sqrt: function (param) { return new AggregationOperator('sqrt', param); },\n        subtract: function (param) { return new AggregationOperator('subtract', param); },\n        trunc: function (param) { return new AggregationOperator('trunc', param); },\n        arrayElemAt: function (param) { return new AggregationOperator('arrayElemAt', param); },\n        arrayToObject: function (param) { return new AggregationOperator('arrayToObject', param); },\n        concatArrays: function (param) { return new AggregationOperator('concatArrays', param); },\n        filter: function (param) { return new AggregationOperator('filter', param); },\n        in: function (param) { return new AggregationOperator('in', param); },\n        indexOfArray: function (param) { return new AggregationOperator('indexOfArray', param); },\n        isArray: function (param) { return new AggregationOperator('isArray', param); },\n        map: function (param) { return new AggregationOperator('map', param); },\n        range: function (param) { return new AggregationOperator('range', param); },\n        reduce: function (param) { return new AggregationOperator('reduce', param); },\n        reverseArray: function (param) { return new AggregationOperator('reverseArray', param); },\n        size: function (param) { return new AggregationOperator('size', param); },\n        slice: function (param) { return new AggregationOperator('slice', param); },\n        zip: function (param) { return new AggregationOperator('zip', param); },\n        and: function (param) { return new AggregationOperator('and', param); },\n        not: function (param) { return new AggregationOperator('not', param); },\n        or: function (param) { return new AggregationOperator('or', param); },\n        cmp: function (param) { return new AggregationOperator('cmp', param); },\n        eq: function (param) { return new AggregationOperator('eq', param); },\n        gt: function (param) { return new AggregationOperator('gt', param); },\n        gte: function (param) { return new AggregationOperator('gte', param); },\n        lt: function (param) { return new AggregationOperator('lt', param); },\n        lte: function (param) { return new AggregationOperator('lte', param); },\n        neq: function (param) { return new AggregationOperator('ne', param); },\n        cond: function (param) { return new AggregationOperator('cond', param); },\n        ifNull: function (param) { return new AggregationOperator('ifNull', param); },\n        switch: function (param) { return new AggregationOperator('switch', param); },\n        dateFromParts: function (param) { return new AggregationOperator('dateFromParts', param); },\n        dateFromString: function (param) { return new AggregationOperator('dateFromString', param); },\n        dayOfMonth: function (param) { return new AggregationOperator('dayOfMonth', param); },\n        dayOfWeek: function (param) { return new AggregationOperator('dayOfWeek', param); },\n        dayOfYear: function (param) { return new AggregationOperator('dayOfYear', param); },\n        isoDayOfWeek: function (param) { return new AggregationOperator('isoDayOfWeek', param); },\n        isoWeek: function (param) { return new AggregationOperator('isoWeek', param); },\n        isoWeekYear: function (param) { return new AggregationOperator('isoWeekYear', param); },\n        millisecond: function (param) { return new AggregationOperator('millisecond', param); },\n        minute: function (param) { return new AggregationOperator('minute', param); },\n        month: function (param) { return new AggregationOperator('month', param); },\n        second: function (param) { return new AggregationOperator('second', param); },\n        hour: function (param) { return new AggregationOperator('hour', param); },\n        week: function (param) { return new AggregationOperator('week', param); },\n        year: function (param) { return new AggregationOperator('year', param); },\n        literal: function (param) { return new AggregationOperator('literal', param); },\n        mergeObjects: function (param) { return new AggregationOperator('mergeObjects', param); },\n        objectToArray: function (param) { return new AggregationOperator('objectToArray', param); },\n        allElementsTrue: function (param) { return new AggregationOperator('allElementsTrue', param); },\n        anyElementTrue: function (param) { return new AggregationOperator('anyElementTrue', param); },\n        setDifference: function (param) { return new AggregationOperator('setDifference', param); },\n        setEquals: function (param) { return new AggregationOperator('setEquals', param); },\n        setIntersection: function (param) { return new AggregationOperator('setIntersection', param); },\n        setIsSubset: function (param) { return new AggregationOperator('setIsSubset', param); },\n        setUnion: function (param) { return new AggregationOperator('setUnion', param); },\n        concat: function (param) { return new AggregationOperator('concat', param); },\n        dateToString: function (param) { return new AggregationOperator('dateToString', param); },\n        indexOfBytes: function (param) { return new AggregationOperator('indexOfBytes', param); },\n        indexOfCP: function (param) { return new AggregationOperator('indexOfCP', param); },\n        split: function (param) { return new AggregationOperator('split', param); },\n        strLenBytes: function (param) { return new AggregationOperator('strLenBytes', param); },\n        strLenCP: function (param) { return new AggregationOperator('strLenCP', param); },\n        strcasecmp: function (param) { return new AggregationOperator('strcasecmp', param); },\n        substr: function (param) { return new AggregationOperator('substr', param); },\n        substrBytes: function (param) { return new AggregationOperator('substrBytes', param); },\n        substrCP: function (param) { return new AggregationOperator('substrCP', param); },\n        toLower: function (param) { return new AggregationOperator('toLower', param); },\n        toUpper: function (param) { return new AggregationOperator('toUpper', param); },\n        meta: function (param) { return new AggregationOperator('meta', param); },\n        addToSet: function (param) { return new AggregationOperator('addToSet', param); },\n        avg: function (param) { return new AggregationOperator('avg', param); },\n        first: function (param) { return new AggregationOperator('first', param); },\n        last: function (param) { return new AggregationOperator('last', param); },\n        max: function (param) { return new AggregationOperator('max', param); },\n        min: function (param) { return new AggregationOperator('min', param); },\n        push: function (param) { return new AggregationOperator('push', param); },\n        stdDevPop: function (param) { return new AggregationOperator('stdDevPop', param); },\n        stdDevSamp: function (param) { return new AggregationOperator('stdDevSamp', param); },\n        sum: function (param) { return new AggregationOperator('sum', param); },\n        let: function (param) { return new AggregationOperator('let', param); }\n    },\n    project: {\n        slice: function (param) { return new ProjectionOperator('slice', param); },\n        elemMatch: function (param) { return new ProjectionOperator('elemMatch', param); }\n    }\n};\nvar AggregationOperator = (function () {\n    function AggregationOperator(name, param) {\n        this['$' + name] = param;\n    }\n    return AggregationOperator;\n}());\nvar ProjectionOperator = (function () {\n    function ProjectionOperator(name, param) {\n        this['$' + name] = param;\n    }\n    return ProjectionOperator;\n}());\nexport default Command;\n", "import { SYMBOL_REGEXP } from '../helper/symbol';\nvar RegExp = (function () {\n    function RegExp(_a) {\n        var regexp = _a.regexp, options = _a.options;\n        if (!regexp) {\n            throw new TypeError('regexp must be a string');\n        }\n        this.$regex = regexp;\n        this.$options = options;\n    }\n    RegExp.prototype.parse = function () {\n        return {\n            $regex: this.$regex,\n            $options: this.$options\n        };\n    };\n    Object.defineProperty(RegExp.prototype, \"_internalType\", {\n        get: function () {\n            return SYMBOL_REGEXP;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return RegExp;\n}());\nexport { RegExp };\nexport function RegExpConstructor(param) {\n    return new RegExp(param);\n}\n", "export var ERRORS = {\n    CREATE_WATCH_NET_ERROR: {\n        code: 'CREATE_WATCH_NET_ERROR',\n        message: 'create watch network error'\n    },\n    CREATE_WACTH_EXCEED_ERROR: {\n        code: 'CREATE_WACTH_EXCEED_ERROR',\n        message: 'maximum connections exceed'\n    },\n    CREATE_WATCH_SERVER_ERROR: {\n        code: 'CREATE_WATCH_SERVER_ERROR',\n        message: 'create watch server error'\n    },\n    CONN_ERROR: {\n        code: 'CONN_ERROR',\n        message: 'connection error'\n    },\n    INVALID_PARAM: {\n        code: 'INVALID_PARAM',\n        message: 'Invalid request param'\n    },\n    INSERT_DOC_FAIL: {\n        code: 'INSERT_DOC_FAIL',\n        message: 'insert document failed'\n    },\n    DATABASE_TRANSACTION_CONFLICT: {\n        code: 'DATABASE_TRANSACTION_CONFLICT',\n        message: 'database transaction conflict'\n    }\n};\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { EJSON } from 'bson';\nimport { ERRORS } from '../const/code';\nimport { UpdateSerializer } from '../serializer/update';\nimport { serialize } from '../serializer/datatype';\nimport { Util } from '../util';\nvar GET_DOC = 'database.getInTransaction';\nvar UPDATE_DOC = 'database.updateDocInTransaction';\nvar DELETE_DOC = 'database.deleteDocInTransaction';\nvar INSERT_DOC = 'database.insertDocInTransaction';\nvar DocumentReference = (function () {\n    function DocumentReference(transaction, coll, docID) {\n        this._coll = coll;\n        this.id = docID;\n        this._transaction = transaction;\n        this._request = this._transaction.getRequestMethod();\n        this._transactionId = this._transaction.getTransactionId();\n    }\n    DocumentReference.prototype.create = function (data) {\n        return __awaiter(this, void 0, void 0, function () {\n            var params, res, inserted, ok;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        params = {\n                            collectionName: this._coll,\n                            transactionId: this._transactionId,\n                            data: EJSON.stringify(serialize(data), { relaxed: false })\n                        };\n                        if (this.id) {\n                            params['_id'] = this.id;\n                        }\n                        return [4, this._request.send(INSERT_DOC, params)];\n                    case 1:\n                        res = _a.sent();\n                        if (res.code) {\n                            throw res;\n                        }\n                        inserted = EJSON.parse(res.inserted);\n                        ok = EJSON.parse(res.ok);\n                        if (ok == 1 && inserted == 1) {\n                            return [2, __assign(__assign({}, res), { ok: ok, inserted: inserted })];\n                        }\n                        else {\n                            throw new Error(ERRORS.INSERT_DOC_FAIL.message);\n                        }\n                        return [2];\n                }\n            });\n        });\n    };\n    DocumentReference.prototype.get = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var param, res;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        param = {\n                            collectionName: this._coll,\n                            transactionId: this._transactionId,\n                            query: {\n                                _id: { $eq: this.id }\n                            }\n                        };\n                        return [4, this._request.send(GET_DOC, param)];\n                    case 1:\n                        res = _a.sent();\n                        if (res.code)\n                            throw res;\n                        return [2, {\n                                data: res.data !== 'null' ? Util.formatField(EJSON.parse(res.data)) : EJSON.parse(res.data),\n                                requestId: res.requestId\n                            }];\n                }\n            });\n        });\n    };\n    DocumentReference.prototype.set = function (data) {\n        return __awaiter(this, void 0, void 0, function () {\n            var param, res;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        param = {\n                            collectionName: this._coll,\n                            transactionId: this._transactionId,\n                            query: {\n                                _id: { $eq: this.id }\n                            },\n                            data: EJSON.stringify(serialize(data), { relaxed: false }),\n                            upsert: true\n                        };\n                        return [4, this._request.send(UPDATE_DOC, param)];\n                    case 1:\n                        res = _a.sent();\n                        if (res.code)\n                            throw res;\n                        return [2, __assign(__assign({}, res), { updated: EJSON.parse(res.updated), upserted: res.upserted\n                                    ? JSON.parse(res.upserted)\n                                    : null })];\n                }\n            });\n        });\n    };\n    DocumentReference.prototype.update = function (data) {\n        return __awaiter(this, void 0, void 0, function () {\n            var param, res;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        param = {\n                            collectionName: this._coll,\n                            transactionId: this._transactionId,\n                            query: {\n                                _id: { $eq: this.id }\n                            },\n                            data: EJSON.stringify(UpdateSerializer.encode(data), {\n                                relaxed: false\n                            })\n                        };\n                        return [4, this._request.send(UPDATE_DOC, param)];\n                    case 1:\n                        res = _a.sent();\n                        if (res.code)\n                            throw res;\n                        return [2, __assign(__assign({}, res), { updated: EJSON.parse(res.updated) })];\n                }\n            });\n        });\n    };\n    DocumentReference.prototype.delete = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var param, res;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        param = {\n                            collectionName: this._coll,\n                            transactionId: this._transactionId,\n                            query: {\n                                _id: { $eq: this.id }\n                            }\n                        };\n                        return [4, this._request.send(DELETE_DOC, param)];\n                    case 1:\n                        res = _a.sent();\n                        if (res.code)\n                            throw res;\n                        return [2, __assign(__assign({}, res), { deleted: EJSON.parse(res.deleted) })];\n                }\n            });\n        });\n    };\n    return DocumentReference;\n}());\nexport { DocumentReference };\n", "var Query = (function () {\n    function Query(transaction, coll) {\n        this._coll = coll;\n        this._transaction = transaction;\n    }\n    return Query;\n}());\nexport { Query };\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { DocumentReference } from './document';\nimport { Query } from './query';\nvar CollectionReference = (function (_super) {\n    __extends(CollectionReference, _super);\n    function CollectionReference(transaction, coll) {\n        return _super.call(this, transaction, coll) || this;\n    }\n    Object.defineProperty(CollectionReference.prototype, \"name\", {\n        get: function () {\n            return this._coll;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CollectionReference.prototype.doc = function (docID) {\n        if (typeof docID !== 'string' && typeof docID !== 'number') {\n            throw new Error('docId必须为字符串或数字');\n        }\n        return new DocumentReference(this._transaction, this._coll, docID);\n    };\n    CollectionReference.prototype.add = function (data) {\n        var docID;\n        if (data._id !== undefined) {\n            docID = data._id;\n        }\n        var docRef = new DocumentReference(this._transaction, this._coll, docID);\n        return docRef.create(data);\n    };\n    return CollectionReference;\n}(Query));\nexport { CollectionReference };\n", "var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { Db } from '../index';\nimport { CollectionReference } from './collection';\nimport { ERRORS } from '../const/code';\nvar START = 'database.startTransaction';\nvar COMMIT = 'database.commitTransaction';\nvar ABORT = 'database.abortTransaction';\nvar Transaction = (function () {\n    function Transaction(db) {\n        this._db = db;\n        this._request = Db.createRequest(this._db.config);\n        this.aborted = false;\n        this.commited = false;\n        this.inited = false;\n    }\n    Transaction.prototype.init = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var res;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4, this._request.send(START)];\n                    case 1:\n                        res = _a.sent();\n                        if (res.code) {\n                            throw res;\n                        }\n                        this.inited = true;\n                        this._id = res.transactionId;\n                        return [2];\n                }\n            });\n        });\n    };\n    Transaction.prototype.collection = function (collName) {\n        if (!collName) {\n            throw new Error('Collection name is required');\n        }\n        return new CollectionReference(this, collName);\n    };\n    Transaction.prototype.getTransactionId = function () {\n        return this._id;\n    };\n    Transaction.prototype.getRequestMethod = function () {\n        return this._request;\n    };\n    Transaction.prototype.commit = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var param, res;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        param = {\n                            transactionId: this._id\n                        };\n                        return [4, this._request.send(COMMIT, param)];\n                    case 1:\n                        res = _a.sent();\n                        if (res.code)\n                            throw res;\n                        this.commited = true;\n                        return [2, res];\n                }\n            });\n        });\n    };\n    Transaction.prototype.rollback = function (customRollbackRes) {\n        return __awaiter(this, void 0, void 0, function () {\n            var param, res;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        param = {\n                            transactionId: this._id\n                        };\n                        return [4, this._request.send(ABORT, param)];\n                    case 1:\n                        res = _a.sent();\n                        if (res.code)\n                            throw res;\n                        this.aborted = true;\n                        this.abortReason = customRollbackRes;\n                        return [2, res];\n                }\n            });\n        });\n    };\n    return Transaction;\n}());\nexport { Transaction };\nexport function startTransaction() {\n    return __awaiter(this, void 0, void 0, function () {\n        var transaction;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    transaction = new Transaction(this);\n                    return [4, transaction.init()];\n                case 1:\n                    _a.sent();\n                    return [2, transaction];\n            }\n        });\n    });\n}\nexport function runTransaction(callback, times) {\n    if (times === void 0) { times = 3; }\n    return __awaiter(this, void 0, void 0, function () {\n        var transaction, callbackRes, error_1, throwWithRollback;\n        var _this = this;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 4, , 10]);\n                    transaction = new Transaction(this);\n                    return [4, transaction.init()];\n                case 1:\n                    _a.sent();\n                    return [4, callback(transaction)];\n                case 2:\n                    callbackRes = _a.sent();\n                    if (transaction.aborted === true) {\n                        throw transaction.abortReason;\n                    }\n                    return [4, transaction.commit()];\n                case 3:\n                    _a.sent();\n                    return [2, callbackRes];\n                case 4:\n                    error_1 = _a.sent();\n                    if (transaction.inited === false) {\n                        throw error_1;\n                    }\n                    throwWithRollback = function (error) { return __awaiter(_this, void 0, void 0, function () {\n                        var err_1;\n                        return __generator(this, function (_a) {\n                            switch (_a.label) {\n                                case 0:\n                                    if (!(!transaction.aborted && !transaction.commited)) return [3, 5];\n                                    _a.label = 1;\n                                case 1:\n                                    _a.trys.push([1, 3, , 4]);\n                                    return [4, transaction.rollback()];\n                                case 2:\n                                    _a.sent();\n                                    return [3, 4];\n                                case 3:\n                                    err_1 = _a.sent();\n                                    return [3, 4];\n                                case 4: throw error;\n                                case 5:\n                                    if (transaction.aborted === true) {\n                                        throw transaction.abortReason;\n                                    }\n                                    throw error;\n                            }\n                        });\n                    }); };\n                    if (!(times <= 0)) return [3, 6];\n                    return [4, throwWithRollback(error_1)];\n                case 5:\n                    _a.sent();\n                    _a.label = 6;\n                case 6:\n                    if (!(error_1 && error_1.code === ERRORS.DATABASE_TRANSACTION_CONFLICT.code)) return [3, 8];\n                    return [4, runTransaction.bind(this)(callback, --times)];\n                case 7: return [2, _a.sent()];\n                case 8: return [4, throwWithRollback(error_1)];\n                case 9:\n                    _a.sent();\n                    return [3, 10];\n                case 10: return [2];\n            }\n        });\n    });\n}\n", "import * as Geo from './geo/index';\nimport { CollectionReference } from './collection';\nimport { Command } from './command';\nimport { ServerDateConstructor } from './serverDate/index';\nimport { RegExpConstructor } from './regexp/index';\nimport { startTransaction, runTransaction } from './transaction/index';\nimport { LogicCommand } from './commands/logic';\nimport { QueryCommand } from './commands/query';\nimport { UpdateCommand } from './commands/update';\nexport { Query } from './query';\nexport { CollectionReference } from './collection';\nexport { DocumentReference } from './document';\nvar Db = (function () {\n    function Db(config) {\n        this.config = config;\n        this.Geo = Geo;\n        this.serverDate = ServerDateConstructor;\n        this.command = Command;\n        this.RegExp = RegExpConstructor;\n        this.startTransaction = startTransaction;\n        this.runTransaction = runTransaction;\n        this.logicCommand = LogicCommand;\n        this.updateCommand = UpdateCommand;\n        this.queryCommand = QueryCommand;\n    }\n    Db.createRequest = function (config) {\n        var request = new Db.reqClass(config);\n        var originalSend = request.send;\n        request.send = function (action, data) {\n            if (config.instance) {\n                data.instance = config.instance;\n            }\n            if (config.database) {\n                data.database = config.database;\n            }\n            return originalSend.call(this, action, data);\n        };\n        return request;\n    };\n    Db.prototype.collection = function (collName) {\n        if (!collName) {\n            throw new Error('Collection name is required');\n        }\n        return new CollectionReference(this, collName);\n    };\n    Db.prototype.createCollection = function (collName) {\n        var request = Db.createRequest(this.config);\n        var params = {\n            collectionName: collName\n        };\n        return request.send('database.addCollection', params);\n    };\n    return Db;\n}());\nexport { Db };\n", "import { Db } from '@cloudbase/database'\nimport { ICloudbase } from '@cloudbase/types'\nimport { ICloudbaseComponent } from '@cloudbase/types/component'\nimport cloudbaseNS from '../../index'\n\ndeclare const cloudbase: ICloudbase\n\nconst COMPONENT_NAME = 'database'\n\nfunction database(dbConfig?: object) {\n  const { adapter, runtime } = this.platform\n\n  Db.reqClass = this.request.constructor\n  // 未登录情况下传入空函数\n  Db.getAccessToken = this.authInstance ? this.authInstance.getAccessToken.bind(this.authInstance) : () => ''\n  Db.runtime = runtime\n  if (this.wsClientClass) {\n    Db.wsClass = adapter.wsClass\n    Db.wsClientClass = this.wsClientClass\n  }\n\n  if (!Db.ws) {\n    Db.ws = null\n  }\n\n  return new Db({ ...this.config, _fromApp: this, ...dbConfig })\n}\n\nconst component: ICloudbaseComponent = {\n  name: COMPONENT_NAME,\n  entity: {\n    database,\n  },\n}\ntry {\n  cloudbase.registerComponent(component)\n} catch (e) { }\n\nexport function registerDatabase(app: ICloudbase | typeof cloudbaseNS) {\n  try {\n    app.registerComponent(component)\n  } catch (e) {\n    console.warn(e)\n  }\n}\n\ntry {\n  (window as any).registerDatabase = registerDatabase\n} catch (e) {}", "{\n  \"name\": \"@cloudbase/js-sdk\",\n  \"version\": \"2.24.10\",\n  \"description\": \"cloudbase javascript sdk\",\n  \"main\": \"dist/index.cjs.js\",\n  \"module\": \"dist/index.esm.js\",\n  \"miniprogram\": \"miniprogram_dist\",\n  \"typings\": \"./index.d.ts\",\n  \"scripts\": {\n    \"lint\": \"eslint --fix \\\"./src/**/*.ts\\\"\",\n    \"build\": \"rm -rf dist/ && gulp build\",\n    \"build:cdn\": \"gulp cdn\",\n    \"build:e2e\": \"rm -rf dist/ && NODE_ENV=e2e gulp e2e\",\n    \"precommit\": \"npm run lint\"\n  },\n  \"publishConfig\": {\n    \"access\": \"public\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/TencentCloudBase/cloudbase-js-sdk\"\n  },\n  \"keywords\": [\n    \"tcb\",\n    \"cloudbase\",\n    \"Cloudbase\",\n    \"serverless\",\n    \"Serverless\",\n    \"javascript\",\n    \"JavaScript\"\n  ],\n  \"files\": [\n    \"miniprogram_dist\",\n    \"**/dist/\",\n    \"/index.d.ts\",\n    \"**/package.json\"\n  ],\n  \"components\": [\n    \"app\",\n    \"auth\",\n    \"database\",\n    \"functions\",\n    \"storage\"\n  ],\n  \"author\": \"\",\n  \"license\": \"Apache-2.0\",\n  \"dependencies\": {\n    \"@cloudbase/adapter-interface\": \"^0.7.1\",\n    \"@cloudbase/ai\": \"2.24.10\",\n    \"@cloudbase/analytics\": \"2.24.10\",\n    \"@cloudbase/apis\": \"2.24.10\",\n    \"@cloudbase/app\": \"2.24.10\",\n    \"@cloudbase/auth\": \"2.24.10\",\n    \"@cloudbase/cloudrun\": \"2.24.10\",\n    \"@cloudbase/database\": \"0.10.0\",\n    \"@cloudbase/functions\": \"2.24.10\",\n    \"@cloudbase/model\": \"2.24.10\",\n    \"@cloudbase/mysql\": \"2.24.10\",\n    \"@cloudbase/realtime\": \"2.24.10\",\n    \"@cloudbase/storage\": \"2.24.10\",\n    \"@cloudbase/types\": \"2.24.10\",\n    \"@cloudbase/utilities\": \"2.24.10\"\n  },\n  \"browserslist\": [\n    \"last 2 version\",\n    \"> 1%\",\n    \"chrome 53\"\n  ],\n  \"gitHead\": \"1295166f18177e01052fb4c058483a8cd0f2f969\"\n}\n", "import cloudbase from '@cloudbase/app'\nimport { registerAuth } from '@cloudbase/auth'\nimport { registerFunctions } from '@cloudbase/functions'\nimport { registerStorage } from '@cloudbase/storage'\nimport { registerRealtime } from '@cloudbase/realtime'\nimport { registerAnalytics } from '@cloudbase/analytics'\nimport { registerModel } from '@cloudbase/model'\nimport { registerAi } from '@cloudbase/ai'\nimport { registerCloudrun } from '@cloudbase/cloudrun'\nimport { registerMySQL } from '@cloudbase/mysql'\nimport { registerApis } from '@cloudbase/apis'\n// @ts-ignore\nimport { registerDatabase } from './../database'\nimport pkg from '../package.json'\nimport { ICloudbase } from '@cloudbase/types'\n\nconst { version } = pkg\ncloudbase.registerVersion(version)\n\ntry {\n  registerAuth(cloudbase)\n  registerFunctions(cloudbase)\n  registerStorage(cloudbase)\n  registerDatabase(cloudbase)\n  registerRealtime(cloudbase)\n  registerAnalytics(cloudbase)\n  registerModel(cloudbase)\n  registerAi(cloudbase)\n  registerCloudrun(cloudbase)\n  registerMySQL(cloudbase)\n  registerApis(cloudbase)\n} catch (e) {}\n\ndeclare global {\n  interface Window {\n    cloudbase: ICloudbase\n  }\n}\ntry {\n  (window as Window).cloudbase = cloudbase\n} catch (e) {}\n// @ts-ignore\nexport = cloudbase\nexport default cloudbase\n"],
  "mappings": "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",
  "names": ["StorageType", "AbstractSDKRequest", "AbstractStorage", "url", "init_utils", "init_utils", "sdkName", "setSdkName", "getSdkName", "PROTOCOL", "setProtocol", "getProtocol", "isArray", "isString", "isUndefined", "isPalinObject", "isNull", "isInstanceOf", "construct", "isFormData", "genSeqId", "generateRequestId", "d", "d2", "c", "r", "formatUrl", "PROTOCOL", "url", "toQueryString", "getQuery", "u", "getHash", "removeParam", "i", "createPromiseCallback", "data", "execCallback", "printWarn", "printError", "printInfo", "throwError", "printGroupLog", "_e", "_a", "sleep", "transformPhone", "parseQueryString", "parseCaptcha", "__rest", "customeAddEventListener", "customRemoveEventListener", "CloudbaseEvent", "data", "IErrorEvent", "__extends", "CloudbaseEventEmitter", "__spreadArray", "eventEmitter", "addEventListener", "activateEvent", "removeEventListener", "isFirefox", "REG_STACK_DECORATE", "REG_STACK_LINK", "catchErrorsDecorator", "_a", "getSourceLink", "getRewritedError", "msg", "match", "v", "i", "TcbCacheObject", "__extends", "createStorage", "adapter", "CloudbaseCache", "_a", "keys", "version", "e", "d", "WebRequest", "__extends", "__assign", "data", "_a", "url", "__awaiter", "_c", "_b", "_d", "x", "_e", "e", "genAdapter", "adapter", "RUNTIME", "useAdapters", "adapter", "isMatch", "genAdapter", "runtime", "__assign", "useDefaultAdapter", "Symbol", "Symbol", "hasOwnProperty", "e", "objectToString", "Symbol", "objectToString", "isObject", "isObject", "uid", "e", "isObject", "hasOwnProperty", "defineProperty", "e", "defineProperty", "hasOwnProperty", "isArray", "isObjectLike", "isObjectLike", "isSymbol", "isArray", "isSymbol", "hasOwnProperty", "data", "hasOwnProperty", "data", "data", "entries", "splice", "data", "data", "data", "entries", "Map", "Map", "data", "data", "size", "entries", "match", "Symbol", "isArray", "isSymbol", "toString", "isArray", "toString", "isSymbol", "isObject", "path", "set", "path", "path", "parent", "path", "parent", "path", "unset", "path", "data", "Map", "data", "entries", "data", "n", "isObjectLike", "isObjectLike", "hasOwnProperty", "propertyIsEnumerable", "Buffer", "isObjectLike", "e", "isArray", "hasOwnProperty", "hasOwnProperty", "keys", "keys", "isObject", "hasOwnProperty", "Buffer", "buffer", "propertyIsEnumerable", "values", "isArray", "keys", "DataView", "Promise", "Set", "WeakMap", "DataView", "Map", "Promise", "Set", "WeakMap", "hasOwnProperty", "Uint8Array", "Uint8Array", "buffer", "Symbol", "buffer", "isObject", "objectCreate", "isObjectLike", "isObjectLike", "isArray", "isObject", "keys", "key", "cloneDeep", "g", "i", "TextDecoder", "options", "construct", "d", "d2", "c", "r", "formatUrl", "PROTOCOL", "url", "u", "i", "data", "_e", "_a", "WebRequest", "data", "_a", "url", "_c", "_b", "_d", "x", "_e", "formatUrl", "e", "adapter", "RUNTIME", "adapter", "isMatch", "genAdapter", "runtime", "__assign", "__extends", "TcbCacheObject", "adapter", "CloudbaseCache", "_a", "keys", "version", "e", "d", "CloudbaseEvent", "data", "__extends", "IErrorEvent", "data", "CloudbaseEventEmitter", "data", "data", "_a", "msg", "match", "v", "i", "AbortController", "e", "f", "InvalidCharacterError", "message", "this", "prototype", "Error", "name", "window", "atob", "bind", "input", "str", "String", "replace", "length", "bs", "buffer", "bc", "idx", "output", "charAt", "fromCharCode", "indexOf", "InvalidTokenError", "message", "this", "InvalidTokenError", "prototype", "Error", "name", "ERRORS", "component", "_a", "bus", "__spreadArray", "data", "hook", "e", "r", "t", "n", "o", "a", "i", "l", "s", "u", "c", "d", "_", "y", "S", "g", "v", "q", "w", "R", "T", "P", "E", "C", "O", "f", "b", "h", "p", "__extends", "extendStatics", "d", "b", "p", "__assign", "t", "s", "i", "n", "__awaiter", "P", "e", "__generator", "_", "f", "y", "g", "v", "__rest", "WxRequest", "self", "url", "data", "_a", "c", "buffer", "WxMpWebSocket", "url", "__assign", "data", "code", "parseQueryString", "_a", "genAdapter", "adapter", "url", "__rest", "__assign", "self", "url", "data", "__assign", "e", "isPlugin", "genAdapter", "adapter", "parseQueryString", "__rest", "CloudbaseCache", "keys", "__assign", "sdkName", "version", "setSdkName", "getSdkName", "__assign", "_a", "PROTOCOL", "LOGINTYPE", "ERRORS", "genSeqId", "isFormData", "formatUrl", "data", "hook", "_a", "__assign", "CloudbaseRequest", "parse", "url", "PROTOCOL", "__rest", "__awaiter", "_b", "_d", "_e", "_c", "_f", "path", "e", "__assign", "LANGS", "t", "_a", "localStorage", "useAdapters", "useDefaultAdapter", "ERRORS", "COMMUNITY_SITE_URL", "printWarn", "catchErrorsDecorator", "Cloudbase", "getSdkName", "__assign", "_a", "adapter", "runtime", "hook", "component", "version", "setSdkName", "url", "cloudbase", "esm_default", "ApiUrls", "ApiUrlsV2", "VerificationUsages", "ErrorType", "Syntax", "c", "r", "v", "a", "b", "c", "i", "r2", "p", "code", "i", "e", "wx", "e", "url", "generateRequestId", "_a", "url", "userAgent", "c", "data", "_e", "import_events", "import_util", "createElement", "url", "_a", "url", "captchaToken", "adapter", "_a", "error", "url", "version", "data", "code", "e", "storage", "adapter", "onCredentialsError", "eventBus", "import_util", "import_constants", "import_events", "import_cache", "OauthClientStorageBase", "_a", "url", "__assign", "e", "adapter", "data", "_e", "data", "url", "SbaseApi", "_a", "__assign", "_e", "data", "id", "code", "__awaiter", "__rest", "_b", "v", "p", "eventBus", "__assign", "User", "_a", "_e", "__decorate", "LoginState", "Auth", "__extends", "_a", "__assign", "code", "__awaiter", "_e", "_b", "loginState", "__decorate", "runtime", "adapter", "cloudbase", "data", "config", "e", "e", "ERRORS", "COMPONENT_NAME", "CloudbaseRun", "data", "e", "__assign", "_a", "path", "PROTOCOL", "component", "getSdkName", "ERRORS", "COMMUNITY_SITE_URL", "execCallback", "catchErrorsDecorator", "COMPONENT_NAME", "CloudbaseFunctions", "data", "parse", "path", "_e", "e", "__assign", "_a", "__decorate", "component", "EUploadMethod", "getSdkName", "ERRORS", "COMMUNITY_SITE_URL", "isArray", "isString", "isPalinObject", "execCallback", "catchErrorsDecorator", "COMPONENT_NAME", "__awaiter", "data", "_a", "__assign", "v", "CloudbaseStorage", "url", "code", "__decorate", "__extends", "StorageError", "__extends", "StorageApiError", "__extends", "StorageUnknownError", "ERRORS", "__extends", "SupabaseFileAPILikeStorage", "_a", "path", "__assign", "COMPONENT_NAME", "p", "__awaiter", "_b", "data", "i", "result", "component", "COMPONENT_NAME", "storage", "e", "RealtimeListener", "Snapshot", "id", "__extends", "RealtimeErrorMessageError", "e", "__extends", "TimeoutError", "e", "__extends", "CancelledError", "e", "__extends", "CloudSDKError", "sleep", "r", "WatchStatus", "VirtualWebSocketClient", "__awaiter", "_a", "_this", "e", "options", "sleep", "__spreadArray", "i", "len", "doc", "cloneDeep", "fieldPath", "set", "unset", "c", "e", "CloseEventCode", "code", "RealtimeWebSocketClient", "__awaiter", "_this", "sleep", "_a", "url", "wsClass", "e", "code", "__assign", "_a", "adapter", "runtime", "component", "e", "ERRORS", "COMMUNITY_SITE_URL", "catchErrorsDecorator", "COMPONENT_NAME", "data", "CloudbaseAnalytics", "__decorate", "component", "e", "d", "b", "p", "__extends", "__assign", "t", "s", "i", "n", "__awaiter", "P", "e", "__generator", "_", "f", "y", "g", "v", "WxCloudSDKError", "_a", "k", "_e", "fetch", "code", "url", "_Headers", "_a", "values", "x", "exec", "test", "it", "navigator", "process", "V", "P", "O", "defineProperty", "WeakMap", "set", "a", "b", "c", "n", "trunc", "i", "keys", "activeXDocument", "F", "next", "TO_STRING_TAG", "entries", "code", "getOwnPropertyDescriptor", "url", "j", "create", "fromCodePoint", "match", "URLSearchParams", "get", "has", "sort", "toString", "fetch", "S", "size", "A", "B", "T", "propertyIsEnumerable", "ENTRIES", "isConstructor", "k", "m", "q", "t", "hasOwn", "assign", "base", "buffer", "path", "URL", "$", "__extends", "PostgrestError", "PostgrestBuilder", "res", "__awaiter", "data", "__generator", "_e", "PostgrestTransformBuilder", "from", "to", "PostgrestFilterBuilder", "s", "PostgrestQueryBuilder", "MySqlQueryBuilder", "MySqlClient", "options", "__awaiter", "database", "__generator", "_a", "__assign", "CloudbaseEventEmitter", "COMPONENT_NAME", "cloudbase", "fetch", "__awaiter", "__assign", "_a", "PROTOCOL", "_", "bus", "component", "e", "extendStatics", "d", "b", "p", "__extends", "test", "noop", "x", "e", "_a", "AbstractWrappingReadableStreamSource", "noop", "read", "__extends", "WrappingReadableStreamDefaultSource", "from", "to", "WrappingReadableByteStreamSource", "buffer", "WrappingWritableStreamSink", "noop", "write", "WrappingTransformStreamTransformer", "noop", "buffer", "data", "ReadableStream", "TransformStream", "TextDecoderStream", "_a", "TransformStream", "data", "e", "s", "Bot", "_a", "__rest", "__assign", "url", "StreamResult", "_a", "TransformStream", "data", "e", "models_exports", "__assign", "ZhiPuSimpleModel", "data", "_a", "TransformStream", "processInput", "__assign", "_a", "s", "match", "HunYuanBetaSimpleModel", "data", "__assign", "processInput", "_a", "TransformStream", "HunYuanSimpleModel", "data", "__assign", "processInput", "_a", "TransformStream", "processInput", "__assign", "ArkSimpleModel", "data", "_a", "TransformStream", "processInput", "__assign", "DSSimpleModel", "data", "_a", "TransformStream", "processInput", "__assign", "YiSimpleModel", "data", "_a", "TransformStream", "_e", "processInput", "__assign", "MoonshotSimpleModel", "data", "_a", "TransformStream", "HunYuanExpSimpleModel", "data", "__assign", "processInput", "_a", "TransformStream", "HunYuanOpenSimpleModel", "data", "__assign", "processInput", "_a", "TransformStream", "DeepSeekSimpleModel", "data", "__assign", "_a", "TransformStream", "DefaultSimpleModel", "data", "__assign", "_a", "TransformStream", "DefaultImageModel", "_a", "processInput", "b", "__rest", "_a", "ReactModel", "_e", "__spreadArray", "TransformStream", "_c", "_b", "_d", "_f", "_g", "_h", "_a", "__asyncValues", "_e", "MODELS", "AI", "_a", "url", "data", "__assign", "_e", "COMPONENT_NAME", "__rest", "models_exports", "_a", "fetch", "__awaiter", "__assign", "_a", "PROTOCOL", "req", "component", "COMPONENT_NAME", "e", "e", "getEntity", "cloudbase", "_a", "database", "fetch", "url", "options", "__awaiter", "__assign", "data", "PROTOCOL", "component", "e", "import_constants", "_e", "path", "url", "PROTOCOL", "__assign", "_a", "_", "__awaiter", "COMPONENT_NAME", "component", "e", "e", "_a", "ErrorCode", "Opeartor", "QueryType", "__extends", "extendStatics", "d", "b", "p", "HiddenSymbol", "InternalSymbol", "i", "ServerDate", "_a", "o", "n", "m", "i", "r", "ar", "e", "Util", "document", "keys", "_a", "Validate", "path", "x", "isObject", "isString", "isArray", "x", "Point", "_a", "isArray", "__values", "o", "s", "m", "i", "LineString", "isArray", "_a", "__values", "o", "s", "m", "i", "Polygon", "isArray", "p", "_a", "__values", "o", "s", "m", "i", "MultiPoint", "isArray", "_a", "__values", "o", "s", "m", "i", "MultiLineString", "isArray", "_a", "__values", "o", "s", "m", "i", "MultiPolygon", "_a", "isArray", "_e", "createPromiseCallback", "data", "UPDATE_COMMANDS_LITERAL", "UpdateCommand", "LOGIC_COMMANDS_LITERAL", "LogicCommand", "i", "__extends", "extendStatics", "d", "b", "p", "QUERY_COMMANDS_LITERAL", "__extends", "QueryCommand", "_a", "OperatorMap", "__assign", "t", "s", "i", "n", "p", "__read", "o", "m", "r", "ar", "e", "__spreadArray", "to", "from", "l", "serialize", "isArray", "isObject", "__assign", "t", "s", "i", "n", "p", "__read", "o", "m", "r", "ar", "e", "__spreadArray", "to", "from", "l", "isObject", "isArray", "isObject", "serialize", "UpdateSerializer", "_a", "_e", "isArray", "__assign", "t", "s", "i", "n", "p", "DocumentReference", "data", "createPromiseCallback", "serialize", "k", "QuerySerializer", "QueryEncoder", "_a", "isObject", "_e", "isArray", "__assign", "t", "s", "i", "n", "p", "Query", "createPromiseCallback", "e", "keys", "data", "k", "byteLength", "toByteArray", "fromByteArray", "lookup", "revLookup", "Arr", "Uint8Array", "Array", "code", "i", "len", "length", "charCodeAt", "getLens", "b64", "Error", "validLen", "indexOf", "placeHoldersLen", "lens", "_byteLength", "tmp", "arr", "curByte", "tripletToBase64", "num", "encodeChunk", "uint8", "start", "end", "output", "push", "join", "extraBytes", "parts", "maxChunkLength", "len2", "read", "buffer", "offset", "isLE", "mLen", "nBytes", "e", "m", "eLen", "eMax", "eBias", "nBits", "d", "s", "NaN", "Infinity", "Math", "pow", "write", "value", "c", "rt", "abs", "isNaN", "floor", "log", "LN2", "customInspectSymbol", "Symbol", "exports", "Buffer", "SlowBuffer", "K_MAX_LENGTH", "TYPED_ARRAY_SUPPORT", "typedArraySupport", "console", "error", "proto", "foo", "Object", "setPrototypeOf", "prototype", "defineProperty", "enumerable", "get", "isBuffer", "undefined", "byteOffset", "createBuffer", "RangeError", "buf", "arg", "encodingOrOffset", "TypeError", "allocUnsafe", "from", "poolSize", "fromString", "ArrayBuffer", "isView", "fromArrayView", "isInstance", "fromArrayBuffer", "SharedArrayBuffer", "valueOf", "b", "fromObject", "toPrimitive", "assertSize", "size", "alloc", "fill", "encoding", "checked", "allocUnsafeSlow", "string", "isEncoding", "actual", "slice", "fromArrayLike", "array", "arrayView", "copy", "obj", "numberIsNaN", "type", "isArray", "data", "toString", "_isBuffer", "compare", "a", "x", "y", "min", "String", "toLowerCase", "concat", "list", "pos", "set", "call", "mustMatch", "arguments", "loweredCase", "utf8ToBytes", "base64ToBytes", "slowToString", "hexSlice", "utf8Slice", "asciiSlice", "latin1Slice", "base64Slice", "utf16leSlice", "swap", "n", "swap16", "swap32", "swap64", "apply", "toLocaleString", "equals", "inspect", "str", "max", "INSPECT_MAX_BYTES", "replace", "trim", "target", "thisStart", "thisEnd", "thisCopy", "targetCopy", "bidirectionalIndexOf", "val", "dir", "arrayIndexOf", "lastIndexOf", "indexSize", "arrLength", "valLength", "readUInt16BE", "foundIndex", "found", "j", "includes", "hexWrite", "Number", "remaining", "strLen", "parsed", "parseInt", "substr", "utf8Write", "blitBuffer", "asciiWrite", "asciiToBytes", "base64Write", "ucs2Write", "utf16leToBytes", "isFinite", "toJSON", "_arr", "base64", "res", "firstByte", "codePoint", "bytesPerSequence", "secondByte", "thirdByte", "fourthByte", "tempCodePoint", "decodeCodePointsArray", "MAX_ARGUMENTS_LENGTH", "codePoints", "fromCharCode", "ret", "out", "hexSliceLookupTable", "bytes", "newBuf", "subarray", "checkOffset", "ext", "readUintLE", "readUIntLE", "noAssert", "mul", "readUintBE", "readUIntBE", "readUint8", "readUInt8", "readUint16LE", "readUInt16LE", "readUint16BE", "readUint32LE", "readUInt32LE", "readUint32BE", "readUInt32BE", "readIntLE", "readIntBE", "readInt8", "readInt16LE", "readInt16BE", "readInt32LE", "readInt32BE", "readFloatLE", "ieee754", "readFloatBE", "readDoubleLE", "readDoubleBE", "checkInt", "writeUintLE", "writeUIntLE", "maxBytes", "writeUintBE", "writeUIntBE", "writeUint8", "writeUInt8", "writeUint16LE", "writeUInt16LE", "writeUint16BE", "writeUInt16BE", "writeUint32LE", "writeUInt32LE", "writeUint32BE", "writeUInt32BE", "writeIntLE", "limit", "sub", "writeIntBE", "writeInt8", "writeInt16LE", "writeInt16BE", "writeInt32LE", "writeInt32BE", "checkIEEE754", "writeFloat", "littleEndian", "writeFloatLE", "writeFloatBE", "writeDouble", "writeDoubleLE", "writeDoubleBE", "targetStart", "copyWithin", "INVALID_BASE64_RE", "base64clean", "split", "units", "leadSurrogate", "byteArray", "hi", "lo", "src", "dst", "constructor", "name", "alphabet", "table", "i16", "extendStatics", "__proto__", "p", "hasOwnProperty", "__extends", "__", "create", "__extends", "BSONError", "BSONTypeError", "g", "insecureRandomBytes", "size", "Buffer", "i", "isRegExp", "d", "isDate", "d", "Buffer", "buffer", "BSON_INT64_MAX", "BSON_INT64_MIN", "Binary", "buffer", "Buffer", "data", "__extends", "UUID", "_a", "Code", "code", "DBRef", "o", "Long", "p", "i", "size", "le", "Decimal128", "e", "match", "j", "k", "Double", "Int32", "MaxKey", "MinKey", "ObjectId", "id", "BSONRegExp", "BSONSymbol", "Timestamp", "keys", "c", "d", "v", "isDate", "isRegExp", "EJSON", "parse", "replacer", "serialize", "deserialize", "Map", "self", "constants.JS_INT_MAX", "constants.JS_INT_MIN", "Buffer", "__awaiter", "P", "e", "__generator", "_", "t", "f", "y", "g", "n", "v", "Aggregation", "_a", "__extends", "extendStatics", "d", "b", "p", "CollectionReference", "data", "isArray", "values", "isObject", "isString", "AggregationOperator", "ProjectionOperator", "RegExp", "_a", "RegExp", "ERRORS", "__assign", "t", "s", "i", "n", "p", "__awaiter", "P", "e", "__generator", "_", "f", "y", "g", "v", "DocumentReference", "data", "_a", "serialize", "ERRORS", "Query", "__extends", "extendStatics", "d", "b", "p", "CollectionReference", "DocumentReference", "data", "Query", "__awaiter", "P", "e", "__generator", "_", "t", "f", "y", "g", "n", "v", "Transaction", "_a", "CollectionReference", "__awaiter", "__generator", "_a", "ERRORS", "Db", "data", "COMPONENT_NAME", "_a", "adapter", "runtime", "__assign", "component", "e", "version", "esm_default", "e"]
}
